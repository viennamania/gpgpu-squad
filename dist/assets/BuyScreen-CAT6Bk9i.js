const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-DillEupA.js","assets/index-DUMAu9QS.css","assets/web-connector-vjFyGHN6.js","assets/client-scoped-storage-ChRDBjxy.js","assets/sign-login-payload-BS5pcbMU.js","assets/oauth-zvjgX-c5.js","assets/types-CKeVp00v.js","assets/types-YMLL-Nyu.js","assets/InAppWalletConnectUI-DZdYxCbv.js","assets/SocialLogin-DwC_4iGI.js","assets/InputSelectionUI-D5yAzt1Q.js","assets/formElements-D8X8dk3w.js","assets/index-C5TfYiZ5.js","assets/passkeys-B4oNeLJB.js","assets/useInAppWalletLocale-CX9ZgvzM.js","assets/AllWalletsUI-Dtap2fD7.js","assets/useShowMore-EXbiKoIL.js","assets/decimals-3CvhMhix.js","assets/decimals-BMFRIXpg.js","assets/getBalance-JN6XpBG8.js","assets/getCurrencyMetadata-A66ufPbR.js","assets/symbol-Dt5V4orv.js","assets/ModelViewer-C-9G3B-d.js","assets/lit-element-KhTZQWWL.js","assets/session-proposal-B49Fv-4f.js","assets/approve-WRg-TvlM.js","assets/index-DbFviogd.js","assets/getNFT-DSpJhR8N.js","assets/arweave-CAGvOb64.js","assets/___vite-browser-external_commonjs-proxy-CQ4WIAjb.js","assets/index-b5uzGJBT.js","assets/inherits_browser-BlmhoU4v.js","assets/constants-wPy4vL4v.js","assets/session-request-DY9yTQvL.js"])))=>i.map(i=>d[i]);
import{aD as Uc,at as L,bR as Wc,bS as Fl,aZ as fc,a0 as Kt,bT as C1,aq as o,av as _,ax as ns,aV as Sr,bU as Hh,bV as E1,bW as Hs,bX as gc,bY as Yh,bZ as Zo,b_ as N1,b$ as kr,c0 as Qh,c1 as _1,c2 as k1,c3 as D1,c4 as L1,c5 as P1,aX as $c,aP as Ti,aR as gt,aU as pt,aK as ie,aY as je,c6 as z1,c7 as Ys,c8 as R1,b0 as Jo,c9 as O1,ca as B1,aw as Oe,az as q1,aA as q,ay as U,aL as Mt,a$ as qe,a_ as Ie,aN as Nn,aO as F,cb as Vh,cc as si,cd as Qs,aT as lt,ce as F1,cf as U1,cg as W1,aQ as $1,ch as At,ci as H1,am as Kh,b3 as Ct,K as Qn,aH as Hc,bK as Gh,$ as Qr,a3 as wt,cj as Y1,ck as br,cl as qr,cm as Fr,cn as Zh,co as Q1,cp as V1,X as Wi,cq as K1,cr as Yc,cs as vr,ct as Vr,cu as Co,cv as Xo,cw as Jh,cx as ea,b2 as Eo,cy as ti,bG as Ul,cz as G1,cA as Wl,cB as $t,as as Fn,aF as Xh,cC as eu,cD as Z1,cE as J1,cF as Qc,cG as tu,cH as Vs,cI as X1,aG as rs,bF as No,cJ as eg,ba as tg,a7 as ig,cK as ng,cL as rg,cM as sg,cN as iu,cO as og,cP as ag,C as cg,cQ as lg,bA as dg,cR as hg,R as ug,bw as fg,bs as gg,cS as nu,cT as ru,cU as su,x as mg,cV as pg,cW as yg,cX as bg,cY as vg,bQ as Ps,cZ as Ks,r as ta,c_ as ss,c$ as xg,ag as wg,ac as Mg,d0 as ou,d1 as au,d2 as Ag,d3 as cu,aW as Vc,d4 as Sg,d5 as jg,d6 as Ig,d7 as Tg,d8 as Cg,d9 as Eg,da as Ng,db as _g,dc as lu,dd as kg,de as du,df as Dg,aS as Lg,dg as hu,dh as Pg,T as zg,di as Rg,dj as Og,dk as Bg,dl as qg,dm as Fg,dn as Ug,dp as Wg,dq as $g,dr as Hg,ds as Yg,dt as Qg,du as uu,dv as Vg,w as ws,q as Kg,dw as $l,a5 as Gg,dx as Zg,dy as Jg,dz as Xg,dA as em,dB as tm,dC as im}from"./index-DillEupA.js";import{a as fu}from"./approve-WRg-TvlM.js";import{a as gu,F as nm,u as rm}from"./useShowMore-EXbiKoIL.js";import{I as Bs,L as Ca}from"./formElements-D8X8dk3w.js";import{g as sm,I as om}from"./InputSelectionUI-D5yAzt1Q.js";import{isInAppWallet as am}from"./index-DbFviogd.js";import{getNFT as cm}from"./getNFT-DSpJhR8N.js";import{resolveArweaveScheme as lm}from"./arweave-CAGvOb64.js";import{e as _n,r as mu,W as pu}from"./___vite-browser-external_commonjs-proxy-CQ4WIAjb.js";import{c as se,I as jr,b as Hl,g as dm,s as ia,a as yu,d as bu,x as vu,r as xu,H as hm,e as wu,f as mc,q as _o,C as um,h as fm,i as gm,j as mm,k as Ur,l as fr,m as Pi,n as na,Y as pm,E as Ht,y as li,o as Kc,A as ym,p as bm,t as Yl,u as vm,v as xm,w as wm,z as Mm,B as Mu,D as Am,F as Gc,G as Zc,J as Au,K as bn,L as Dr}from"./index-b5uzGJBT.js";import{i as ra}from"./inherits_browser-BlmhoU4v.js";import{D as Sm}from"./constants-wPy4vL4v.js";import{C as jm}from"./client-scoped-storage-ChRDBjxy.js";import{decimals as Im}from"./decimals-3CvhMhix.js";import{getCurrencyMetadata as Tm}from"./getCurrencyMetadata-A66ufPbR.js";function Cm(){const t=Uc("useActiveWalletConnectionStatus").activeWalletConnectionStatusStore;return L.useSyncExternalStore(t.subscribe,t.getValue,t.getValue)}const pn="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAwIiBoZWlnaHQ9IjI1MDAiIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48Y2lyY2xlIGN4PSIxNiIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzYyN0VFQSIvPjxnIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyI+PHBhdGggZmlsbC1vcGFjaXR5PSIuNjAyIiBkPSJNMTYuNDk4IDR2OC44N2w3LjQ5NyAzLjM1eiIvPjxwYXRoIGQ9Ik0xNi40OTggNEw5IDE2LjIybDcuNDk4LTMuMzV6Ii8+PHBhdGggZmlsbC1vcGFjaXR5PSIuNjAyIiBkPSJNMTYuNDk4IDIxLjk2OHY2LjAyN0wyNCAxNy42MTZ6Ii8+PHBhdGggZD0iTTE2LjQ5OCAyNy45OTV2LTYuMDI4TDkgMTcuNjE2eiIvPjxwYXRoIGZpbGwtb3BhY2l0eT0iLjIiIGQ9Ik0xNi40OTggMjAuNTczbDcuNDk3LTQuMzUzLTcuNDk3LTMuMzQ4eiIvPjxwYXRoIGZpbGwtb3BhY2l0eT0iLjYwMiIgZD0iTTkgMTYuMjJsNy40OTggNC4zNTN2LTcuNzAxeiIvPjwvZz48L2c+PC9zdmc+",co="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMzkuNDMgMjk1LjI3Ij48dGl0bGU+dGV0aGVyLXVzZHQtbG9nbzwvdGl0bGU+PHBhdGggZD0iTTYyLjE1LDEuNDVsLTYxLjg5LDEzMGEyLjUyLDIuNTIsMCwwLDAsLjU0LDIuOTRMMTY3Ljk1LDI5NC41NmEyLjU1LDIuNTUsMCwwLDAsMy41MywwTDMzOC42MywxMzQuNGEyLjUyLDIuNTIsMCwwLDAsLjU0LTIuOTRsLTYxLjg5LTEzMEEyLjUsMi41LDAsMCwwLDI3NSwwSDY0LjQ1YTIuNSwyLjUsMCwwLDAtMi4zLDEuNDVoMFoiIHN0eWxlPSJmaWxsOiM1MGFmOTU7ZmlsbC1ydWxlOmV2ZW5vZGQiLz48cGF0aCBkPSJNMTkxLjE5LDE0NC44djBjLTEuMi4wOS03LjQsMC40Ni0yMS4yMywwLjQ2LTExLDAtMTguODEtLjMzLTIxLjU1LTAuNDZ2MGMtNDIuNTEtMS44Ny03NC4yNC05LjI3LTc0LjI0LTE4LjEzczMxLjczLTE2LjI1LDc0LjI0LTE4LjE1djI4LjkxYzIuNzgsMC4yLDEwLjc0LjY3LDIxLjc0LDAuNjcsMTMuMiwwLDE5LjgxLS41NSwyMS0wLjY2di0yOC45YzQyLjQyLDEuODksNzQuMDgsOS4yOSw3NC4wOCwxOC4xM3MtMzEuNjUsMTYuMjQtNzQuMDgsMTguMTJoMFptMC0zOS4yNVY3OS42OGg1OS4yVjQwLjIzSDg5LjIxVjc5LjY4SDE0OC40djI1Ljg2Yy00OC4xMSwyLjIxLTg0LjI5LDExLjc0LTg0LjI5LDIzLjE2czM2LjE4LDIwLjk0LDg0LjI5LDIzLjE2djgyLjloNDIuNzhWMTUxLjgzYzQ4LTIuMjEsODQuMTItMTEuNzMsODQuMTItMjMuMTRzLTM2LjA5LTIwLjkzLTg0LjEyLTIzLjE1aDBabTAsMGgwWiIgc3R5bGU9ImZpbGw6I2ZmZjtmaWxsLXJ1bGU6ZXZlbm9kZCIvPjwvc3ZnPg==",yi="data:image/svg+xml;base64,PHN2ZyBkYXRhLW5hbWU9Ijg2OTc3Njg0LTEyZGItNDg1MC04ZjMwLTIzM2E3YzI2N2QxMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjAwMCAyMDAwIj4KICA8cGF0aCBkPSJNMTAwMCAyMDAwYzU1NC4xNyAwIDEwMDAtNDQ1LjgzIDEwMDAtMTAwMFMxNTU0LjE3IDAgMTAwMCAwIDAgNDQ1LjgzIDAgMTAwMHM0NDUuODMgMTAwMCAxMDAwIDEwMDB6IiBmaWxsPSIjMjc3NWNhIi8+CiAgPHBhdGggZD0iTTEyNzUgMTE1OC4zM2MwLTE0NS44My04Ny41LTE5NS44My0yNjIuNS0yMTYuNjYtMTI1LTE2LjY3LTE1MC01MC0xNTAtMTA4LjM0czQxLjY3LTk1LjgzIDEyNS05NS44M2M3NSAwIDExNi42NyAyNSAxMzcuNSA4Ny41IDQuMTcgMTIuNSAxNi42NyAyMC44MyAyOS4xNyAyMC44M2g2Ni42NmMxNi42NyAwIDI5LjE3LTEyLjUgMjkuMTctMjkuMTZ2LTQuMTdjLTE2LjY3LTkxLjY3LTkxLjY3LTE2Mi41LTE4Ny41LTE3MC44M3YtMTAwYzAtMTYuNjctMTIuNS0yOS4xNy0zMy4zMy0zMy4zNGgtNjIuNWMtMTYuNjcgMC0yOS4xNyAxMi41LTMzLjM0IDMzLjM0djk1LjgzYy0xMjUgMTYuNjctMjA0LjE2IDEwMC0yMDQuMTYgMjA0LjE3IDAgMTM3LjUgODMuMzMgMTkxLjY2IDI1OC4zMyAyMTIuNSAxMTYuNjcgMjAuODMgMTU0LjE3IDQ1LjgzIDE1NC4xNyAxMTIuNXMtNTguMzQgMTEyLjUtMTM3LjUgMTEyLjVjLTEwOC4zNCAwLTE0NS44NC00NS44NC0xNTguMzQtMTA4LjM0LTQuMTYtMTYuNjYtMTYuNjYtMjUtMjkuMTYtMjVoLTcwLjg0Yy0xNi42NiAwLTI5LjE2IDEyLjUtMjkuMTYgMjkuMTd2NC4xN2MxNi42NiAxMDQuMTYgODMuMzMgMTc5LjE2IDIyMC44MyAyMDB2MTAwYzAgMTYuNjYgMTIuNSAyOS4xNiAzMy4zMyAzMy4zM2g2Mi41YzE2LjY3IDAgMjkuMTctMTIuNSAzMy4zNC0zMy4zM3YtMTAwYzEyNS0yMC44NCAyMDguMzMtMTA4LjM0IDIwOC4zMy0yMjAuODR6IiBmaWxsPSIjZmZmIi8+CiAgPHBhdGggZD0iTTc4Ny41IDE1OTUuODNjLTMyNS0xMTYuNjYtNDkxLjY3LTQ3OS4xNi0zNzAuODMtODAwIDYyLjUtMTc1IDIwMC0zMDguMzMgMzcwLjgzLTM3MC44MyAxNi42Ny04LjMzIDI1LTIwLjgzIDI1LTQxLjY3VjMyNWMwLTE2LjY3LTguMzMtMjkuMTctMjUtMzMuMzMtNC4xNyAwLTEyLjUgMC0xNi42NyA0LjE2LTM5NS44MyAxMjUtNjEyLjUgNTQ1Ljg0LTQ4Ny41IDk0MS42NyA3NSAyMzMuMzMgMjU0LjE3IDQxMi41IDQ4Ny41IDQ4Ny41IDE2LjY3IDguMzMgMzMuMzQgMCAzNy41LTE2LjY3IDQuMTctNC4xNiA0LjE3LTguMzMgNC4xNy0xNi42NnYtNTguMzRjMC0xMi41LTEyLjUtMjkuMTYtMjUtMzcuNXpNMTIyOS4xNyAyOTUuODNjLTE2LjY3LTguMzMtMzMuMzQgMC0zNy41IDE2LjY3LTQuMTcgNC4xNy00LjE3IDguMzMtNC4xNyAxNi42N3Y1OC4zM2MwIDE2LjY3IDEyLjUgMzMuMzMgMjUgNDEuNjcgMzI1IDExNi42NiA0OTEuNjcgNDc5LjE2IDM3MC44MyA4MDAtNjIuNSAxNzUtMjAwIDMwOC4zMy0zNzAuODMgMzcwLjgzLTE2LjY3IDguMzMtMjUgMjAuODMtMjUgNDEuNjdWMTcwMGMwIDE2LjY3IDguMzMgMjkuMTcgMjUgMzMuMzMgNC4xNyAwIDEyLjUgMCAxNi42Ny00LjE2IDM5NS44My0xMjUgNjEyLjUtNTQ1Ljg0IDQ4Ny41LTk0MS42Ny03NS0yMzcuNS0yNTguMzQtNDE2LjY3LTQ4Ny41LTQ5MS42N3oiIGZpbGw9IiNmZmYiLz4KPC9zdmc+Cg==",lo="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDkuMjYgMTA5LjI2Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzVhNTU2NDt9LmNscy0ye2ZpbGw6I2YwOTI0Mjt9LmNscy0ze2ZpbGw6IzI4MjEzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPndyYXBwZWQtYml0Y29pbi13YnRjPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iTGF5ZXJfMS0yIiBkYXRhLW5hbWU9IkxheWVyIDEiPjxnIGlkPSJQYWdlLTEiPjxnIGlkPSJ3YnRjX2NvbG91ciIgZGF0YS1uYW1lPSJ3YnRjIGNvbG91ciI+PHBhdGggaWQ9IlNoYXBlIiBjbGFzcz0iY2xzLTEiIGQ9Ik04OS4wOSwyMi45M2wtMywzYTQyLjQ3LDQyLjQ3LDAsMCwxLDAsNTcuMzJsMywzYTQ2Ljc2LDQ2Ljc2LDAsMCwwLDAtNjMuMzlaIi8+PHBhdGggaWQ9IlNoYXBlLTIiIGRhdGEtbmFtZT0iU2hhcGUiIGNsYXNzPSJjbHMtMSIgZD0iTTI2LDIzLjE5YTQyLjQ3LDQyLjQ3LDAsMCwxLDU3LjMyLDBsMy0zYTQ2Ljc2LDQ2Ljc2LDAsMCwwLTYzLjM5LDBaIi8+PHBhdGggaWQ9IlNoYXBlLTMiIGRhdGEtbmFtZT0iU2hhcGUiIGNsYXNzPSJjbHMtMSIgZD0iTTIzLjE5LDgzLjI4YTQyLjQ3LDQyLjQ3LDAsMCwxLDAtNTcuMjlsLTMtM2E0Ni43Niw0Ni43NiwwLDAsMCwwLDYzLjM5WiIvPjxwYXRoIGlkPSJTaGFwZS00IiBkYXRhLW5hbWU9IlNoYXBlIiBjbGFzcz0iY2xzLTEiIGQ9Ik04My4yOCw4Ni4wNWE0Mi40Nyw0Mi40NywwLDAsMS01Ny4zMiwwbC0zLDNhNDYuNzYsNDYuNzYsMCwwLDAsNjMuMzksMFoiLz48cGF0aCBpZD0iU2hhcGUtNSIgZGF0YS1uYW1lPSJTaGFwZSIgY2xhc3M9ImNscy0yIiBkPSJNNzMuNTcsNDQuNjJjLS42LTYuMjYtNi04LjM2LTEyLjgzLTlWMjdINTUuNDZ2OC40NmMtMS4zOSwwLTIuODEsMC00LjIyLDBWMjdINDZ2OC42OEgzNS4yOXY1LjY1czMuOS0uMDcsMy44NCwwYTIuNzMsMi43MywwLDAsMSwzLDIuMzJWNjcuNDFhMS44NSwxLjg1LDAsMCwxLS42NCwxLjI5LDEuODMsMS44MywwLDAsMS0xLjM2LjQ2Yy4wNy4wNi0zLjg0LDAtMy44NCwwbC0xLDYuMzFINDUuOXY4LjgyaDUuMjhWNzUuNkg1NS40djguNjVoNS4yOVY3NS41M2M4LjkyLS41NCwxNS4xNC0yLjc0LDE1LjkyLTExLjA5LjYzLTYuNzItMi41My05LjcyLTcuNTgtMTAuOTNDNzIuMSw1Miw3NCw0OS4yLDczLjU3LDQ0LjYyWk02Ni4xNyw2My40YzAsNi41Ni0xMS4yNCw1LjgxLTE0LjgyLDUuODFWNTcuNTdDNTQuOTMsNTcuNTgsNjYuMTcsNTYuNTUsNjYuMTcsNjMuNFpNNjMuNzIsNDdjMCw2LTkuMzgsNS4yNy0xMi4zNiw1LjI3VjQxLjY5QzU0LjM0LDQxLjY5LDYzLjcyLDQwLjc1LDYzLjcyLDQ3WiIvPjxwYXRoIGlkPSJTaGFwZS02IiBkYXRhLW5hbWU9IlNoYXBlIiBjbGFzcz0iY2xzLTMiIGQ9Ik01NC42MiwxMDkuMjZhNTQuNjMsNTQuNjMsMCwxLDEsNTQuNjQtNTQuNjRBNTQuNjMsNTQuNjMsMCwwLDEsNTQuNjIsMTA5LjI2Wm0wLTEwNUE1MC4zNCw1MC4zNCwwLDEsMCwxMDUsNTQuNjIsNTAuMzQsNTAuMzQsMCwwLDAsNTQuNjIsNC4yNloiLz48L2c+PC9nPjwvZz48L2c+PC9zdmc+",Ea="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyNCIgaGVpZ2h0PSIxMDI0IiB2aWV3Qm94PSIwIDAgMTAyNCAxMDI0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8Y2lyY2xlIGN4PSI1MTIiIGN5PSI1MTIiIHI9IjUxMiIgZmlsbD0iIzgyNDdFNSIvPgo8cGF0aCBkPSJNNjgxLjQ2OSA0MDIuNDU2QzY2OS4xODkgMzk1LjMxMiA2NTMuMjI0IDM5NS4zMTIgNjM5LjcxNiA0MDIuNDU2TDU0My45MjggNDU3LjIyOEw0NzguODQyIDQ5Mi45NDlMMzgzLjA1NSA1NDcuNzIxQzM3MC43NzQgNTU0Ljg2NSAzNTQuODEgNTU0Ljg2NSAzNDEuMzAxIDU0Ny43MjFMMjY1LjE2MiA1MDQuODU2QzI1Mi44ODIgNDk3LjcxMiAyNDQuMjg2IDQ4NC42MTQgMjQ0LjI4NiA0NzAuMzI1VjM4NS43ODZDMjQ0LjI4NiAzNzEuNDk4IDI1MS42NTQgMzU4LjQgMjY1LjE2MiAzNTEuMjU2TDM0MC4wNzMgMzA5LjU4MUMzNTIuMzUzIDMwMi40MzcgMzY4LjMxOCAzMDIuNDM3IDM4MS44MjcgMzA5LjU4MUw0NTYuNzM3IDM1MS4yNTZDNDY5LjAxOCAzNTguNCA0NzcuNjE0IDM3MS40OTggNDc3LjYxNCAzODUuNzg2VjQ0MC41NThMNTQyLjcgNDAzLjY0NlYzNDguODc0QzU0Mi43IDMzNC41ODYgNTM1LjMzMiAzMjEuNDg4IDUyMS44MjQgMzE0LjM0NEwzODMuMDU1IDIzNS43NThDMzcwLjc3NCAyMjguNjE0IDM1NC44MSAyMjguNjE0IDM0MS4zMDEgMjM1Ljc1OEwyMDAuMDc2IDMxNC4zNDRDMTg2LjU2NyAzMjEuNDg4IDE3OS4xOTkgMzM0LjU4NiAxNzkuMTk5IDM0OC44NzRWNTA3LjIzN0MxNzkuMTk5IDUyMS41MjUgMTg2LjU2NyA1MzQuNjIzIDIwMC4wNzYgNTQxLjc2N0wzNDEuMzAxIDYyMC4zNTNDMzUzLjU4MiA2MjcuNDk4IDM2OS41NDYgNjI3LjQ5OCAzODMuMDU1IDYyMC4zNTNMNDc4Ljg0MiA1NjYuNzcyTDU0My45MjggNTI5Ljg2TDYzOS43MTYgNDc2LjI3OUM2NTEuOTk2IDQ2OS4xMzUgNjY3Ljk2MSA0NjkuMTM1IDY4MS40NjkgNDc2LjI3OUw3NTYuMzggNTE3Ljk1M0M3NjguNjYgNTI1LjA5OCA3NzcuMjU3IDUzOC4xOTUgNzc3LjI1NyA1NTIuNDg0VjYzNy4wMjNDNzc3LjI1NyA2NTEuMzEyIDc2OS44ODggNjY0LjQwOSA3NTYuMzggNjcxLjU1M0w2ODEuNDY5IDcxNC40MTlDNjY5LjE4OSA3MjEuNTYzIDY1My4yMjQgNzIxLjU2MyA2MzkuNzE2IDcxNC40MTlMNTY0LjgwNSA2NzIuNzQ0QzU1Mi41MjUgNjY1LjYgNTQzLjkyOCA2NTIuNTAyIDU0My45MjggNjM4LjIxNFY1ODMuNDQyTDQ3OC44NDIgNjIwLjM1M1Y2NzUuMTI1QzQ3OC44NDIgNjg5LjQxNCA0ODYuMjEgNzAyLjUxMiA0OTkuNzE5IDcwOS42NTZMNjQwLjk0NCA3ODguMjQyQzY1My4yMjQgNzk1LjM4NiA2NjkuMTg5IDc5NS4zODYgNjgyLjY5NyA3ODguMjQyTDgyMy45MjIgNzA5LjY1NkM4MzYuMjAzIDcwMi41MTIgODQ0Ljc5OSA2ODkuNDE0IDg0NC43OTkgNjc1LjEyNVY1MTYuNzYzQzg0NC43OTkgNTAyLjQ3NCA4MzcuNDMxIDQ4OS4zNzcgODIzLjkyMiA0ODIuMjMyTDY4MS40NjkgNDAyLjQ1NloiIGZpbGw9IndoaXRlIi8+Cjwvc3ZnPgo=",Ql="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiI+PGcgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiIGZpbGw9IiNGM0JBMkYiLz48cGF0aCBmaWxsPSIjRkZGIiBkPSJNMTIuMTE2IDE0LjQwNEwxNiAxMC41MmwzLjg4NiAzLjg4NiAyLjI2LTIuMjZMMTYgNmwtNi4xNDQgNi4xNDQgMi4yNiAyLjI2ek02IDE2bDIuMjYtMi4yNkwxMC41MiAxNmwtMi4yNiAyLjI2TDYgMTZ6bTYuMTE2IDEuNTk2TDE2IDIxLjQ4bDMuODg2LTMuODg2IDIuMjYgMi4yNTlMMTYgMjZsLTYuMTQ0LTYuMTQ0LS4wMDMtLjAwMyAyLjI2My0yLjI1N3pNMjEuNDggMTZsMi4yNi0yLjI2TDI2IDE2bC0yLjI2IDIuMjZMMjEuNDggMTZ6bS0zLjE4OC0uMDAyaC4wMDJ2LjAwMkwxNiAxOC4yOTRsLTIuMjkxLTIuMjktLjAwNC0uMDA0LjAwNC0uMDAzLjQwMS0uNDAyLjE5NS0uMTk1TDE2IDEzLjcwNmwyLjI5MyAyLjI5M3oiLz48L2c+PC9zdmc+",Vl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMzYuNDEgMzM3LjQyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2YwYjkwYjtzdHJva2U6I2YwYjkwYjt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPkFzc2V0IDE8L3RpdGxlPjxnIGlkPSJMYXllcl8yIiBkYXRhLW5hbWU9IkxheWVyIDIiPjxnIGlkPSJMYXllcl8xLTIiIGRhdGEtbmFtZT0iTGF5ZXIgMSI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMTY4LjIuNzFsNDEuNSw0Mi41TDEwNS4yLDE0Ny43MWwtNDEuNS00MS41WiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTIzMS4yLDYzLjcxbDQxLjUsNDIuNUwxMDUuMiwyNzMuNzFsLTQxLjUtNDEuNVoiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik00Mi4yLDEyNi43MWw0MS41LDQyLjUtNDEuNSw0MS41TC43LDE2OS4yMVoiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0yOTQuMiwxMjYuNzFsNDEuNSw0Mi41TDE2OC4yLDMzNi43MWwtNDEuNS00MS41WiIvPjwvZz48L2c+PC9zdmc+",Kl="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMzIgMzIiPjxkZWZzPjxzdHlsZT4uY2xzLTF7ZmlsbDojZmZmO2ZpbGwtcnVsZTpldmVub2RkO30uY2xzLTJ7ZmlsbDojMTNiNWVjO30uY2xzLTN7bWFzazp1cmwoI21hc2spO308L3N0eWxlPjxtYXNrIGlkPSJtYXNrIiB4PSIxMCIgeT0iNiIgd2lkdGg9IjkzLjEiIGhlaWdodD0iMjAiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiPjxnIGlkPSJhIj48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0xMCw2aDkzLjFWMjZIMTBaIi8+PC9nPjwvbWFzaz48L2RlZnM+PHRpdGxlPmZhPC90aXRsZT48ZyBpZD0iTGF5ZXJfMiIgZGF0YS1uYW1lPSJMYXllciAyIj48ZyBpZD0iTGF5ZXJfMS0yIiBkYXRhLW5hbWU9IkxheWVyIDEiPjxjaXJjbGUgY2xhc3M9ImNscy0yIiBjeD0iMTYiIGN5PSIxNiIgcj0iMTYiLz48ZyBjbGFzcz0iY2xzLTMiPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTE3LjIsMTIuOWwzLjYtMi4xVjE1Wm0zLjYsOUwxNiwyNC43bC00LjgtMi44VjE3TDE2LDE5LjgsMjAuOCwxN1pNMTEuMiwxMC44bDMuNiwyLjFMMTEuMiwxNVptNS40LDMuMUwyMC4yLDE2bC0zLjYsMi4xWm0tMS4yLDQuMkwxMS44LDE2bDMuNi0yLjFabTQuOC04LjNMMTYsMTIuMiwxMS44LDkuOCwxNiw3LjNaTTEwLDkuNFYyMi41bDYsMy40LDYtMy40VjkuNEwxNiw2WiIvPjwvZz48L2c+PC9nPjwvc3ZnPg==",Em={1:[{address:"0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2",name:"Wrapped Ether",symbol:"WETH",icon:pn},{address:"0xdAC17F958D2ee523a2206206994597C13D831ec7",name:"Tether USD",symbol:"USDT",icon:co},{address:"0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48",name:"USD Coin",symbol:"USDC",icon:yi},{address:"0x2260FAC5E5542a773Aa44fBCfeDf7C193bc2C599",name:"Wrapped Bitcoin",symbol:"WBTC",icon:lo},{address:"0x7D1AfA7B718fb893dB30A3aBc0Cfc608AaCfeBB0",name:"Polygon",symbol:"WMATIC",icon:Ea}],11155111:[{address:"0x1c7D4B196Cb0C7B01d743Fbc6116a902379C7238",name:"USD Coin",symbol:"USDC",icon:yi}],10:[{address:"0x4200000000000000000000000000000000000006",name:"Wrapped Ether",symbol:"WETH",icon:pn},{address:"0x0b2c639c533813f4aa9d7837caf62653d097ff85",name:"USD Coin",symbol:"USDC",icon:yi}],56:[{address:"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c",name:"Wrapped Binance Chain Token",symbol:"WBNB",icon:Ql},{address:"0xe9e7CEA3DedcA5984780Bafc599bD69ADd087D56",name:"Binance USD",symbol:"BUSD",icon:Vl}],97:[{address:"0xae13d989daC2f0dEbFf460aC112a837C89BAa7cd",name:"Wrapped Binance Chain Testnet Token",symbol:"WBNB",icon:Ql},{address:"0xed24fc36d5ee211ea25a80239fb8c4cfd80f12ee",name:"Binance USD",symbol:"BUSD",icon:Vl}],137:[{address:"0x3c499c542cEF5E3811e1192ce70d8cC03d5c3359",name:"USD Coin",symbol:"USDC",icon:yi},{address:"0x0d500B1d8E8eF31E21C99d1Db9A6444d3ADf1270",name:"Wrapped Matic",symbol:"WMATIC",icon:Ea},{address:"0x7ceB23fD6bC0adD59E62ac25578270cFf1b9f619",name:"Wrapped Ether",symbol:"WETH",icon:pn},{address:"0xc2132D05D31c914a87C6611C10748AEb04B58e8F",name:"Tether USD",symbol:"USDT",icon:co},{address:"0x1BFD67037B42Cf73acF2047067bd4F2C47D9BfD6",name:"Wrapped BTC",symbol:"WBTC",icon:lo}],250:[{address:"0x21be370D5312f44cB42ce377BC9b8a0cEF1A4C83",name:"Wrapped Fantom",symbol:"WFTM",icon:Kl},{name:"Wrapped Ether",address:"0x74b23882a30290451A17c44f4F05243b6b58C76d",symbol:"WETH",icon:pn},{name:"USD Coin",address:"0x04068DA6C83AFCFA0e13ba15A6696662335D5B75",symbol:"USDC",icon:yi},{name:"Wrapped Bitcoin",address:"0x321162Cd933E2Be498Cd2267a90534A804051b11",symbol:"WBTC",icon:lo}],420:[{address:"0x4200000000000000000000000000000000000006",name:"Wrapped Ether",symbol:"WETH",icon:pn}],4002:[{address:"0xf1277d1Ed8AD466beddF92ef448A132661956621",name:"Wrapped Fantom",symbol:"WFTM",icon:Kl}],42161:[{address:"0x82af49447d8a07e3bd95bd0d56f35241523fbab1",name:"Wrapped Ether",symbol:"WETH",icon:pn},{address:"0xaf88d065e77c8cC2239327C5EDb3A432268e5831",name:"USD Coin",symbol:"USDC",icon:yi}],43113:[{address:"0xd00ae08403B9bbb9124bB305C09058E32C39A48c",name:"Wrapped AVAX",symbol:"WAVAX",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwMyIgaGVpZ2h0PSIxNTA0IiB2aWV3Qm94PSIwIDAgMTUwMyAxNTA0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB4PSIyODciIHk9IjI1OCIgd2lkdGg9IjkyOCIgaGVpZ2h0PSI4NDQiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUwMi41IDc1MkMxNTAyLjUgMTE2Ni43NyAxMTY2LjI3IDE1MDMgNzUxLjUgMTUwM0MzMzYuNzM0IDE1MDMgMC41IDExNjYuNzcgMC41IDc1MkMwLjUgMzM3LjIzNCAzMzYuNzM0IDEgNzUxLjUgMUMxMTY2LjI3IDEgMTUwMi41IDMzNy4yMzQgMTUwMi41IDc1MlpNNTM4LjY4OCAxMDUwLjg2SDM5Mi45NEMzNjIuMzE0IDEwNTAuODYgMzQ3LjE4NiAxMDUwLjg2IDMzNy45NjIgMTA0NC45NkMzMjcuOTk5IDEwMzguNSAzMjEuOTExIDEwMjcuOCAzMjEuMTczIDEwMTUuOTlDMzIwLjYxOSAxMDA1LjExIDMyOC4xODQgOTkxLjgyMiAzNDMuMzEyIDk2NS4yNTVMNzAzLjE4MiAzMzAuOTM1QzcxOC40OTUgMzAzLjk5OSA3MjYuMjQzIDI5MC41MzEgNzM2LjAyMSAyODUuNTVDNzQ2LjUzNyAyODAuMiA3NTkuMDgzIDI4MC4yIDc2OS41OTkgMjg1LjU1Qzc3OS4zNzcgMjkwLjUzMSA3ODcuMTI2IDMwMy45OTkgODAyLjQzOCAzMzAuOTM1TDg3Ni40MiA0NjAuMDc5TDg3Ni43OTcgNDYwLjczOEM4OTMuMzM2IDQ4OS42MzUgOTAxLjcyMyA1MDQuMjg5IDkwNS4zODUgNTE5LjY2OUM5MDkuNDQzIDUzNi40NTggOTA5LjQ0MyA1NTQuMTY5IDkwNS4zODUgNTcwLjk1OEM5MDEuNjk1IDU4Ni40NTUgODkzLjM5MyA2MDEuMjE1IDg3Ni42MDQgNjMwLjU0OUw2ODcuNTczIDk2NC43MDJMNjg3LjA4NCA5NjUuNTU4QzY3MC40MzYgOTk0LjY5MyA2NjEuOTk5IDEwMDkuNDYgNjUwLjMwNiAxMDIwLjZDNjM3LjU3NiAxMDMyLjc4IDYyMi4yNjMgMTA0MS42MyA2MDUuNDc0IDEwNDYuNjJDNTkwLjE2MSAxMDUwLjg2IDU3My4wMDQgMTA1MC44NiA1MzguNjg4IDEwNTAuODZaTTkwNi43NSAxMDUwLjg2SDExMTUuNTlDMTE0Ni40IDEwNTAuODYgMTE2MS45IDEwNTAuODYgMTE3MS4xMyAxMDQ0Ljc4QzExODEuMDkgMTAzOC4zMiAxMTg3LjM2IDEwMjcuNDMgMTE4Ny45MiAxMDE1LjYzQzExODguNDUgMTAwNS4xIDExODEuMDUgOTkyLjMzIDExNjYuNTUgOTY3LjMwN0MxMTY2LjA1IDk2Ni40NTUgMTE2NS41NSA5NjUuNTg4IDExNjUuMDQgOTY0LjcwNkwxMDYwLjQzIDc4NS43NUwxMDU5LjI0IDc4My43MzVDMTA0NC41NCA3NTguODc3IDEwMzcuMTIgNzQ2LjMyNCAxMDI3LjU5IDc0MS40NzJDMTAxNy4wOCA3MzYuMTIxIDEwMDQuNzEgNzM2LjEyMSA5OTQuMTk5IDc0MS40NzJDOTg0LjYwNSA3NDYuNDUzIDk3Ni44NTcgNzU5LjU1MiA5NjEuNTQ0IDc4NS45MzRMODU3LjMwNiA5NjQuODkxTDg1Ni45NDkgOTY1LjUwN0M4NDEuNjkgOTkxLjg0NyA4MzQuMDY0IDEwMDUuMDEgODM0LjYxNCAxMDE1LjgxQzgzNS4zNTIgMTAyNy42MiA4NDEuNDQgMTAzOC41IDg1MS40MDIgMTA0NC45NkM4NjAuNDQzIDEwNTAuODYgODc1Ljk0IDEwNTAuODYgOTA2Ljc1IDEwNTAuODZaIiBmaWxsPSIjRTg0MTQyIi8+Cjwvc3ZnPgo="},{address:"0x5425890298aed601595a70AB815c96711a31Bc65",name:"USD Coin",symbol:"USDC",icon:yi}],43114:[{address:"0xB31f66AA3C1e785363F0875A1B74E27b85FD66c7",name:"Wrapped AVAX",symbol:"WAVAX",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwMyIgaGVpZ2h0PSIxNTA0IiB2aWV3Qm94PSIwIDAgMTUwMyAxNTA0IiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cmVjdCB4PSIyODciIHk9IjI1OCIgd2lkdGg9IjkyOCIgaGVpZ2h0PSI4NDQiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMTUwMi41IDc1MkMxNTAyLjUgMTE2Ni43NyAxMTY2LjI3IDE1MDMgNzUxLjUgMTUwM0MzMzYuNzM0IDE1MDMgMC41IDExNjYuNzcgMC41IDc1MkMwLjUgMzM3LjIzNCAzMzYuNzM0IDEgNzUxLjUgMUMxMTY2LjI3IDEgMTUwMi41IDMzNy4yMzQgMTUwMi41IDc1MlpNNTM4LjY4OCAxMDUwLjg2SDM5Mi45NEMzNjIuMzE0IDEwNTAuODYgMzQ3LjE4NiAxMDUwLjg2IDMzNy45NjIgMTA0NC45NkMzMjcuOTk5IDEwMzguNSAzMjEuOTExIDEwMjcuOCAzMjEuMTczIDEwMTUuOTlDMzIwLjYxOSAxMDA1LjExIDMyOC4xODQgOTkxLjgyMiAzNDMuMzEyIDk2NS4yNTVMNzAzLjE4MiAzMzAuOTM1QzcxOC40OTUgMzAzLjk5OSA3MjYuMjQzIDI5MC41MzEgNzM2LjAyMSAyODUuNTVDNzQ2LjUzNyAyODAuMiA3NTkuMDgzIDI4MC4yIDc2OS41OTkgMjg1LjU1Qzc3OS4zNzcgMjkwLjUzMSA3ODcuMTI2IDMwMy45OTkgODAyLjQzOCAzMzAuOTM1TDg3Ni40MiA0NjAuMDc5TDg3Ni43OTcgNDYwLjczOEM4OTMuMzM2IDQ4OS42MzUgOTAxLjcyMyA1MDQuMjg5IDkwNS4zODUgNTE5LjY2OUM5MDkuNDQzIDUzNi40NTggOTA5LjQ0MyA1NTQuMTY5IDkwNS4zODUgNTcwLjk1OEM5MDEuNjk1IDU4Ni40NTUgODkzLjM5MyA2MDEuMjE1IDg3Ni42MDQgNjMwLjU0OUw2ODcuNTczIDk2NC43MDJMNjg3LjA4NCA5NjUuNTU4QzY3MC40MzYgOTk0LjY5MyA2NjEuOTk5IDEwMDkuNDYgNjUwLjMwNiAxMDIwLjZDNjM3LjU3NiAxMDMyLjc4IDYyMi4yNjMgMTA0MS42MyA2MDUuNDc0IDEwNDYuNjJDNTkwLjE2MSAxMDUwLjg2IDU3My4wMDQgMTA1MC44NiA1MzguNjg4IDEwNTAuODZaTTkwNi43NSAxMDUwLjg2SDExMTUuNTlDMTE0Ni40IDEwNTAuODYgMTE2MS45IDEwNTAuODYgMTE3MS4xMyAxMDQ0Ljc4QzExODEuMDkgMTAzOC4zMiAxMTg3LjM2IDEwMjcuNDMgMTE4Ny45MiAxMDE1LjYzQzExODguNDUgMTAwNS4xIDExODEuMDUgOTkyLjMzIDExNjYuNTUgOTY3LjMwN0MxMTY2LjA1IDk2Ni40NTUgMTE2NS41NSA5NjUuNTg4IDExNjUuMDQgOTY0LjcwNkwxMDYwLjQzIDc4NS43NUwxMDU5LjI0IDc4My43MzVDMTA0NC41NCA3NTguODc3IDEwMzcuMTIgNzQ2LjMyNCAxMDI3LjU5IDc0MS40NzJDMTAxNy4wOCA3MzYuMTIxIDEwMDQuNzEgNzM2LjEyMSA5OTQuMTk5IDc0MS40NzJDOTg0LjYwNSA3NDYuNDUzIDk3Ni44NTcgNzU5LjU1MiA5NjEuNTQ0IDc4NS45MzRMODU3LjMwNiA5NjQuODkxTDg1Ni45NDkgOTY1LjUwN0M4NDEuNjkgOTkxLjg0NyA4MzQuMDY0IDEwMDUuMDEgODM0LjYxNCAxMDE1LjgxQzgzNS4zNTIgMTAyNy42MiA4NDEuNDQgMTAzOC41IDg1MS40MDIgMTA0NC45NkM4NjAuNDQzIDEwNTAuODYgODc1Ljk0IDEwNTAuODYgOTA2Ljc1IDEwNTAuODZaIiBmaWxsPSIjRTg0MTQyIi8+Cjwvc3ZnPgo="},{address:"0x49D5c2BdFfac6CE2BFdB6640F4F80f226bc10bAB",name:"Wrapped Ether",symbol:"WETH",icon:pn},{address:"0x9702230a8ea53601f5cd2dc00fdbc13d4df4a8c7",name:"Tether USD",symbol:"USDT",icon:co},{address:"0xB97EF9Ef8734C71904D8002F8b6Bc66Dd9c48a6E",name:"USD Coin",symbol:"USDC",icon:yi},{address:"0x50b7545627a5162F82A992c33b87aDc75187B218",name:"Wrapped BTC",symbol:"WBTC",icon:lo}],80001:[{address:"0x9c3C9283D3e44854697Cd22D3Faa240Cfb032889",name:"Wrapped Matic",symbol:"WMATIC",icon:Ea},{name:"Wrapped Ether",address:"0xa6fa4fb5f76172d178d61b04b0ecd319c5d1c0aa",symbol:"WETH",icon:pn},{address:"0x0FA8781a83E46826621b3BC094Ea2A0212e71B23",name:"USD Coin",symbol:"USDC",icon:yi},{name:"Tether USD",address:"0x3813e82e6f7098b9583FC0F33a962D02018B6803",symbol:"USDT",icon:co}],421613:[{address:"0xe39Ab88f8A4777030A534146A9Ca3B52bd5D43A3",name:"Wrapped Ether",symbol:"WETH",icon:pn},{address:"0xfd064A18f3BF249cf1f87FC203E90D8f650f2d63",name:"USD Coin",symbol:"USDC",icon:yi}],8453:[{address:"0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913",name:"USD Coin",symbol:"USDC",icon:yi}],84532:[{address:"0x036CbD53842c5426634e7929541eC2318f3dCF7e",name:"USD Coin",symbol:"USDC",icon:yi}]},ko=Em;function Nm({client:e,wallets:t}){Wc({queries:t.filter(i=>i.id===Fl||i.id==="inApp"||fc(i.id)).map(i=>({queryKey:["preload-wallet",i.id],queryFn:async()=>{var n;switch(!0){case Fl===i.id:{const{getCoinbaseWebProvider:r}=await Kt(async()=>{const{getCoinbaseWebProvider:s}=await import("./index-DillEupA.js").then(a=>a.dK);return{getCoinbaseWebProvider:s}},__vite__mapDeps([0,1]));return await r(i.getConfig()),!0}case i.id==="inApp":{const[{InAppWebConnector:r},{getOrCreateInAppWalletConnector:s}]=await Promise.all([Kt(()=>import("./web-connector-vjFyGHN6.js"),__vite__mapDeps([2,0,1,3,4,5,6,7])),Kt(()=>import("./index-DillEupA.js").then(a=>a.dL),__vite__mapDeps([0,1]))]);return await s(e,async a=>new r({client:a})),!0}case fc(i.id):{const[{InAppWebConnector:r},{getOrCreateInAppWalletConnector:s}]=await Promise.all([Kt(()=>import("./web-connector-vjFyGHN6.js"),__vite__mapDeps([2,0,1,3,4,5,6,7])),Kt(()=>import("./index-DillEupA.js").then(l=>l.dL),__vite__mapDeps([0,1]))]),a=i;return await s(e,async l=>{var d;return new r({client:l,ecosystem:{id:a.id,partnerId:(d=a.getConfig())==null?void 0:d.partnerId}})},{id:a.id,partnerId:(n=a.getConfig())==null?void 0:n.partnerId}),!0}default:return!1}}}))})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */BigInt(0);BigInt(1);BigInt(2);function _m(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function km(e){return C1(e),o.jsx(o.Fragment,{})}function ft(e,t){if(e===0)return 0;const i=10**t,n=1/10**t,r=e<n?"ceil":"round";return Math[r]((e+Number.EPSILON)*i)/i}function Bt(){const t=Uc("useActiveWalletChain").activeWalletChainStore;return L.useSyncExternalStore(t.subscribe,t.getValue,t.getValue)}const Na="data:image/svg+xml;charset=UTF-8,%3csvg width='15' height='14' viewBox='0 0 15 14' fill='none' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M7 8.04238e-07C5.1435 8.04238e-07 3.36301 0.737501 2.05025 2.05025C0.7375 3.36301 0 5.1435 0 7C0 7.225 -1.52737e-07 7.445 0.0349998 7.665C0.16385 9.0151 0.68213 10.2988 1.52686 11.3598C2.37158 12.4209 3.50637 13.2137 4.79326 13.642C6.0801 14.0702 7.4637 14.1153 8.7758 13.7719C10.0879 13.4285 11.2719 12.7113 12.184 11.7075C13.0961 10.7038 13.6969 9.4567 13.9135 8.1178C14.1301 6.7789 13.9531 5.406 13.4039 4.16587C12.8548 2.92574 11.9573 1.87184 10.8204 1.13228C9.6835 0.392721 8.3563 -0.000649196 7 8.04238e-07ZM7 1C8.581 1.00137 10.0975 1.62668 11.22 2.74V3.24C9.2438 2.55991 7.0956 2.56872 5.125 3.265C4.96758 3.1116 4.76997 3.00586 4.555 2.96H4.43C4.37 2.75 4.315 2.54 4.27 2.325C4.225 2.11 4.2 1.92 4.175 1.715C5.043 1.24658 6.0137 1.00091 7 1ZM5.5 3.935C7.3158 3.32693 9.2838 3.34984 11.085 4C10.8414 5.2703 10.3094 6.4677 9.53 7.5C9.312 7.4077 9.0707 7.3855 8.8395 7.4366C8.6083 7.4877 8.3988 7.6094 8.24 7.785C8.065 7.685 7.89 7.585 7.74 7.47C6.7307 6.7966 5.8877 5.9023 5.275 4.855C5.374 4.73221 5.4461 4.58996 5.4866 4.43749C5.5271 4.28502 5.5351 4.12575 5.51 3.97L5.5 3.935ZM3.5 2.135C3.5 2.24 3.53 2.35 3.55 2.455C3.595 2.675 3.655 2.89 3.715 3.105C3.52353 3.21838 3.36943 3.38531 3.2717 3.58522C3.17397 3.78513 3.13688 4.00927 3.165 4.23C2.37575 4.7454 1.67078 5.3795 1.075 6.11C1.19455 5.3189 1.47112 4.55966 1.88843 3.87701C2.30575 3.19437 2.85539 2.60208 3.505 2.135H3.5ZM3.5 9.99C3.30481 10.0555 3.13037 10.1714 2.9943 10.3259C2.85822 10.4804 2.76533 10.6681 2.725 10.87H2.405C1.59754 9.9069 1.1146 8.7136 1.025 7.46L1.08 7.365C1.70611 6.3942 2.52463 5.562 3.485 4.92C3.62899 5.0704 3.81094 5.179 4.01162 5.2345C4.2123 5.2899 4.42423 5.2901 4.625 5.235C5.2938 6.3652 6.208 7.3306 7.3 8.06C7.505 8.195 7.715 8.32 7.925 8.44C7.9082 8.6312 7.9391 8.8237 8.015 9C7.1 9.7266 6.0445 10.256 4.915 10.555C4.78401 10.3103 4.57028 10.1201 4.31199 10.0184C4.05369 9.9167 3.76766 9.9102 3.505 10L3.5 9.99ZM7 12.99C5.9831 12.9903 4.98307 12.7304 4.095 12.235L4.235 12.205C4.43397 12.1397 4.61176 12.0222 4.74984 11.8648C4.88792 11.7074 4.98122 11.5158 5.02 11.31C6.2985 10.984 7.4921 10.3872 8.52 9.56C8.7642 9.7027 9.0525 9.75 9.3295 9.6927C9.6064 9.6355 9.8524 9.4778 10.02 9.25C10.7254 9.4334 11.4511 9.5275 12.18 9.53H12.445C11.9626 10.5673 11.1938 11.4451 10.2291 12.0599C9.2643 12.6747 8.144 13.0009 7 13V12.99ZM10.255 8.54C10.2545 8.3304 10.1975 8.1249 10.09 7.945C10.9221 6.8581 11.5012 5.5991 11.785 4.26C12.035 4.37667 12.2817 4.50667 12.525 4.65C13.0749 5.9495 13.1493 7.4012 12.735 8.75C11.9049 8.8142 11.0698 8.7484 10.26 8.555L10.255 8.54Z' fill='%23646D7A'/%3e%3c/svg%3e",Un=e=>{const t=()=>{const i=e.chainIconUrl;if(!i)return Na;try{return Hh({uri:i,client:e.client})}catch{return Na}};return o.jsxs(_,{style:{position:"relative",display:"flex",flexShrink:0,alignItems:"center"},children:[o.jsx(ns,{src:t(),width:e.size,height:e.size,fallbackImage:Na,client:e.client}),e.active&&o.jsx(Dm,{})]})},Dm=Sr({width:"28%",height:"28%",borderRadius:"50%",position:"absolute",bottom:0,right:0,backgroundColor:"#00d395",boxShadow:"0 0 0 2px var(--bg)"});function Su(e){const[t,i]=L.useState(!1),n=L.useCallback(async()=>{await navigator.clipboard.writeText(e),i(!0)},[e]);return L.useEffect(()=>{let r=null;return t&&(r=window.setTimeout(()=>{i(!1)},1500)),()=>{r&&window.clearTimeout(r)}},[t]),{onCopy:n,hasCopied:t}}const Lm=["top","right","bottom","left"],Zi=Math.min,ni=Math.max,Do=Math.round,ho=Math.floor,Wn=e=>({x:e,y:e}),Pm={left:"right",right:"left",bottom:"top",top:"bottom"},zm={start:"end",end:"start"};function pc(e,t,i){return ni(e,Zi(t,i))}function In(e,t){return typeof e=="function"?e(t):e}function Tn(e){return e.split("-")[0]}function os(e){return e.split("-")[1]}function Jc(e){return e==="x"?"y":"x"}function Xc(e){return e==="y"?"height":"width"}function $n(e){return["top","bottom"].includes(Tn(e))?"y":"x"}function el(e){return Jc($n(e))}function Rm(e,t,i){i===void 0&&(i=!1);const n=os(e),r=el(e),s=Xc(r);let a=r==="x"?n===(i?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=Lo(a)),[a,Lo(a)]}function Om(e){const t=Lo(e);return[yc(e),t,yc(t)]}function yc(e){return e.replace(/start|end/g,t=>zm[t])}function Bm(e,t,i){const n=["left","right"],r=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(e){case"top":case"bottom":return i?t?r:n:t?n:r;case"left":case"right":return t?s:a;default:return[]}}function qm(e,t,i,n){const r=os(e);let s=Bm(Tn(e),i==="start",n);return r&&(s=s.map(a=>a+"-"+r),t&&(s=s.concat(s.map(yc)))),s}function Lo(e){return e.replace(/left|right|bottom|top/g,t=>Pm[t])}function Fm(e){return{top:0,right:0,bottom:0,left:0,...e}}function ju(e){return typeof e!="number"?Fm(e):{top:e,right:e,bottom:e,left:e}}function Po(e){const{x:t,y:i,width:n,height:r}=e;return{width:n,height:r,top:i,left:t,right:t+n,bottom:i+r,x:t,y:i}}function Gl(e,t,i){let{reference:n,floating:r}=e;const s=$n(t),a=el(t),l=Xc(a),d=Tn(t),g=s==="y",y=n.x+n.width/2-r.width/2,b=n.y+n.height/2-r.height/2,M=n[l]/2-r[l]/2;let A;switch(d){case"top":A={x:y,y:n.y-r.height};break;case"bottom":A={x:y,y:n.y+n.height};break;case"right":A={x:n.x+n.width,y:b};break;case"left":A={x:n.x-r.width,y:b};break;default:A={x:n.x,y:n.y}}switch(os(t)){case"start":A[a]-=M*(i&&g?-1:1);break;case"end":A[a]+=M*(i&&g?-1:1);break}return A}const Um=async(e,t,i)=>{const{placement:n="bottom",strategy:r="absolute",middleware:s=[],platform:a}=i,l=s.filter(Boolean),d=await(a.isRTL==null?void 0:a.isRTL(t));let g=await a.getElementRects({reference:e,floating:t,strategy:r}),{x:y,y:b}=Gl(g,n,d),M=n,A={},S=0;for(let C=0;C<l.length;C++){const{name:k,fn:N}=l[C],{x:D,y:B,data:P,reset:z}=await N({x:y,y:b,initialPlacement:n,placement:M,strategy:r,middlewareData:A,rects:g,platform:a,elements:{reference:e,floating:t}});y=D??y,b=B??b,A={...A,[k]:{...A[k],...P}},z&&S<=50&&(S++,typeof z=="object"&&(z.placement&&(M=z.placement),z.rects&&(g=z.rects===!0?await a.getElementRects({reference:e,floating:t,strategy:r}):z.rects),{x:y,y:b}=Gl(g,M,d)),C=-1)}return{x:y,y:b,placement:M,strategy:r,middlewareData:A}};async function qs(e,t){var i;t===void 0&&(t={});const{x:n,y:r,platform:s,rects:a,elements:l,strategy:d}=e,{boundary:g="clippingAncestors",rootBoundary:y="viewport",elementContext:b="floating",altBoundary:M=!1,padding:A=0}=In(t,e),S=ju(A),k=l[M?b==="floating"?"reference":"floating":b],N=Po(await s.getClippingRect({element:(i=await(s.isElement==null?void 0:s.isElement(k)))==null||i?k:k.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:g,rootBoundary:y,strategy:d})),D=b==="floating"?{x:n,y:r,width:a.floating.width,height:a.floating.height}:a.reference,B=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),P=await(s.isElement==null?void 0:s.isElement(B))?await(s.getScale==null?void 0:s.getScale(B))||{x:1,y:1}:{x:1,y:1},z=Po(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:D,offsetParent:B,strategy:d}):D);return{top:(N.top-z.top+S.top)/P.y,bottom:(z.bottom-N.bottom+S.bottom)/P.y,left:(N.left-z.left+S.left)/P.x,right:(z.right-N.right+S.right)/P.x}}const Wm=e=>({name:"arrow",options:e,async fn(t){const{x:i,y:n,placement:r,rects:s,platform:a,elements:l,middlewareData:d}=t,{element:g,padding:y=0}=In(e,t)||{};if(g==null)return{};const b=ju(y),M={x:i,y:n},A=el(r),S=Xc(A),C=await a.getDimensions(g),k=A==="y",N=k?"top":"left",D=k?"bottom":"right",B=k?"clientHeight":"clientWidth",P=s.reference[S]+s.reference[A]-M[A]-s.floating[S],z=M[A]-s.reference[A],W=await(a.getOffsetParent==null?void 0:a.getOffsetParent(g));let Y=W?W[B]:0;(!Y||!await(a.isElement==null?void 0:a.isElement(W)))&&(Y=l.floating[B]||s.floating[S]);const Z=P/2-z/2,H=Y/2-C[S]/2-1,X=Zi(b[N],H),E=Zi(b[D],H),m=X,c=Y-C[S]-E,h=Y/2-C[S]/2+Z,p=pc(m,h,c),v=!d.arrow&&os(r)!=null&&h!==p&&s.reference[S]/2-(h<m?X:E)-C[S]/2<0,x=v?h<m?h-m:h-c:0;return{[A]:M[A]+x,data:{[A]:p,centerOffset:h-p-x,...v&&{alignmentOffset:x}},reset:v}}}),$m=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var i,n;const{placement:r,middlewareData:s,rects:a,initialPlacement:l,platform:d,elements:g}=t,{mainAxis:y=!0,crossAxis:b=!0,fallbackPlacements:M,fallbackStrategy:A="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:C=!0,...k}=In(e,t);if((i=s.arrow)!=null&&i.alignmentOffset)return{};const N=Tn(r),D=$n(l),B=Tn(l)===l,P=await(d.isRTL==null?void 0:d.isRTL(g.floating)),z=M||(B||!C?[Lo(l)]:Om(l)),W=S!=="none";!M&&W&&z.push(...qm(l,C,S,P));const Y=[l,...z],Z=await qs(t,k),H=[];let X=((n=s.flip)==null?void 0:n.overflows)||[];if(y&&H.push(Z[N]),b){const h=Rm(r,a,P);H.push(Z[h[0]],Z[h[1]])}if(X=[...X,{placement:r,overflows:H}],!H.every(h=>h<=0)){var E,m;const h=(((E=s.flip)==null?void 0:E.index)||0)+1,p=Y[h];if(p)return{data:{index:h,overflows:X},reset:{placement:p}};let v=(m=X.filter(x=>x.overflows[0]<=0).sort((x,I)=>x.overflows[1]-I.overflows[1])[0])==null?void 0:m.placement;if(!v)switch(A){case"bestFit":{var c;const x=(c=X.filter(I=>{if(W){const w=$n(I.placement);return w===D||w==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(w=>w>0).reduce((w,u)=>w+u,0)]).sort((I,w)=>I[1]-w[1])[0])==null?void 0:c[0];x&&(v=x);break}case"initialPlacement":v=l;break}if(r!==v)return{reset:{placement:v}}}return{}}}};function Zl(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Jl(e){return Lm.some(t=>e[t]>=0)}const Hm=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:i}=t,{strategy:n="referenceHidden",...r}=In(e,t);switch(n){case"referenceHidden":{const s=await qs(t,{...r,elementContext:"reference"}),a=Zl(s,i.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:Jl(a)}}}case"escaped":{const s=await qs(t,{...r,altBoundary:!0}),a=Zl(s,i.floating);return{data:{escapedOffsets:a,escaped:Jl(a)}}}default:return{}}}}};async function Ym(e,t){const{placement:i,platform:n,elements:r}=e,s=await(n.isRTL==null?void 0:n.isRTL(r.floating)),a=Tn(i),l=os(i),d=$n(i)==="y",g=["left","top"].includes(a)?-1:1,y=s&&d?-1:1,b=In(t,e);let{mainAxis:M,crossAxis:A,alignmentAxis:S}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return l&&typeof S=="number"&&(A=l==="end"?S*-1:S),d?{x:A*y,y:M*g}:{x:M*g,y:A*y}}const Qm=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var i,n;const{x:r,y:s,placement:a,middlewareData:l}=t,d=await Ym(t,e);return a===((i=l.offset)==null?void 0:i.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:r+d.x,y:s+d.y,data:{...d,placement:a}}}}},Vm=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:i,y:n,placement:r}=t,{mainAxis:s=!0,crossAxis:a=!1,limiter:l={fn:k=>{let{x:N,y:D}=k;return{x:N,y:D}}},...d}=In(e,t),g={x:i,y:n},y=await qs(t,d),b=$n(Tn(r)),M=Jc(b);let A=g[M],S=g[b];if(s){const k=M==="y"?"top":"left",N=M==="y"?"bottom":"right",D=A+y[k],B=A-y[N];A=pc(D,A,B)}if(a){const k=b==="y"?"top":"left",N=b==="y"?"bottom":"right",D=S+y[k],B=S-y[N];S=pc(D,S,B)}const C=l.fn({...t,[M]:A,[b]:S});return{...C,data:{x:C.x-i,y:C.y-n}}}}},Km=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:i,y:n,placement:r,rects:s,middlewareData:a}=t,{offset:l=0,mainAxis:d=!0,crossAxis:g=!0}=In(e,t),y={x:i,y:n},b=$n(r),M=Jc(b);let A=y[M],S=y[b];const C=In(l,t),k=typeof C=="number"?{mainAxis:C,crossAxis:0}:{mainAxis:0,crossAxis:0,...C};if(d){const B=M==="y"?"height":"width",P=s.reference[M]-s.floating[B]+k.mainAxis,z=s.reference[M]+s.reference[B]-k.mainAxis;A<P?A=P:A>z&&(A=z)}if(g){var N,D;const B=M==="y"?"width":"height",P=["top","left"].includes(Tn(r)),z=s.reference[b]-s.floating[B]+(P&&((N=a.offset)==null?void 0:N[b])||0)+(P?0:k.crossAxis),W=s.reference[b]+s.reference[B]+(P?0:((D=a.offset)==null?void 0:D[b])||0)-(P?k.crossAxis:0);S<z?S=z:S>W&&(S=W)}return{[M]:A,[b]:S}}}},Gm=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:i,rects:n,platform:r,elements:s}=t,{apply:a=()=>{},...l}=In(e,t),d=await qs(t,l),g=Tn(i),y=os(i),b=$n(i)==="y",{width:M,height:A}=n.floating;let S,C;g==="top"||g==="bottom"?(S=g,C=y===(await(r.isRTL==null?void 0:r.isRTL(s.floating))?"start":"end")?"left":"right"):(C=g,S=y==="end"?"top":"bottom");const k=A-d.top-d.bottom,N=M-d.left-d.right,D=Zi(A-d[S],k),B=Zi(M-d[C],N),P=!t.middlewareData.shift;let z=D,W=B;if(b?W=y||P?Zi(B,N):N:z=y||P?Zi(D,k):k,P&&!y){const Z=ni(d.left,0),H=ni(d.right,0),X=ni(d.top,0),E=ni(d.bottom,0);b?W=M-2*(Z!==0||H!==0?Z+H:ni(d.left,d.right)):z=A-2*(X!==0||E!==0?X+E:ni(d.top,d.bottom))}await a({...t,availableWidth:W,availableHeight:z});const Y=await r.getDimensions(s.floating);return M!==Y.width||A!==Y.height?{reset:{rects:!0}}:{}}}};function as(e){return Iu(e)?(e.nodeName||"").toLowerCase():"#document"}function oi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function kn(e){var t;return(t=(Iu(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Iu(e){return e instanceof Node||e instanceof oi(e).Node}function qi(e){return e instanceof Element||e instanceof oi(e).Element}function an(e){return e instanceof HTMLElement||e instanceof oi(e).HTMLElement}function Xl(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof oi(e).ShadowRoot}function Gs(e){const{overflow:t,overflowX:i,overflowY:n,display:r}=Fi(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+i)&&!["inline","contents"].includes(r)}function Zm(e){return["table","td","th"].includes(as(e))}function sa(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function tl(e){const t=il(),i=qi(e)?Fi(e):e;return i.transform!=="none"||i.perspective!=="none"||(i.containerType?i.containerType!=="normal":!1)||!t&&(i.backdropFilter?i.backdropFilter!=="none":!1)||!t&&(i.filter?i.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(i.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(i.contain||"").includes(n))}function Jm(e){let t=Hn(e);for(;an(t)&&!Kr(t);){if(tl(t))return t;if(sa(t))return null;t=Hn(t)}return null}function il(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Kr(e){return["html","body","#document"].includes(as(e))}function Fi(e){return oi(e).getComputedStyle(e)}function oa(e){return qi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Hn(e){if(as(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Xl(e)&&e.host||kn(e);return Xl(t)?t.host:t}function Tu(e){const t=Hn(e);return Kr(t)?e.ownerDocument?e.ownerDocument.body:e.body:an(t)&&Gs(t)?t:Tu(t)}function Fs(e,t,i){var n;t===void 0&&(t=[]),i===void 0&&(i=!0);const r=Tu(e),s=r===((n=e.ownerDocument)==null?void 0:n.body),a=oi(r);if(s){const l=bc(a);return t.concat(a,a.visualViewport||[],Gs(r)?r:[],l&&i?Fs(l):[])}return t.concat(r,Fs(r,[],i))}function bc(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Cu(e){const t=Fi(e);let i=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const r=an(e),s=r?e.offsetWidth:i,a=r?e.offsetHeight:n,l=Do(i)!==s||Do(n)!==a;return l&&(i=s,n=a),{width:i,height:n,$:l}}function nl(e){return qi(e)?e:e.contextElement}function Wr(e){const t=nl(e);if(!an(t))return Wn(1);const i=t.getBoundingClientRect(),{width:n,height:r,$:s}=Cu(t);let a=(s?Do(i.width):i.width)/n,l=(s?Do(i.height):i.height)/r;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const Xm=Wn(0);function Eu(e){const t=oi(e);return!il()||!t.visualViewport?Xm:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function ep(e,t,i){return t===void 0&&(t=!1),!i||t&&i!==oi(e)?!1:t}function xr(e,t,i,n){t===void 0&&(t=!1),i===void 0&&(i=!1);const r=e.getBoundingClientRect(),s=nl(e);let a=Wn(1);t&&(n?qi(n)&&(a=Wr(n)):a=Wr(e));const l=ep(s,i,n)?Eu(s):Wn(0);let d=(r.left+l.x)/a.x,g=(r.top+l.y)/a.y,y=r.width/a.x,b=r.height/a.y;if(s){const M=oi(s),A=n&&qi(n)?oi(n):n;let S=M,C=bc(S);for(;C&&n&&A!==S;){const k=Wr(C),N=C.getBoundingClientRect(),D=Fi(C),B=N.left+(C.clientLeft+parseFloat(D.paddingLeft))*k.x,P=N.top+(C.clientTop+parseFloat(D.paddingTop))*k.y;d*=k.x,g*=k.y,y*=k.x,b*=k.y,d+=B,g+=P,S=oi(C),C=bc(S)}}return Po({width:y,height:b,x:d,y:g})}function tp(e){let{elements:t,rect:i,offsetParent:n,strategy:r}=e;const s=r==="fixed",a=kn(n),l=t?sa(t.floating):!1;if(n===a||l&&s)return i;let d={scrollLeft:0,scrollTop:0},g=Wn(1);const y=Wn(0),b=an(n);if((b||!b&&!s)&&((as(n)!=="body"||Gs(a))&&(d=oa(n)),an(n))){const M=xr(n);g=Wr(n),y.x=M.x+n.clientLeft,y.y=M.y+n.clientTop}return{width:i.width*g.x,height:i.height*g.y,x:i.x*g.x-d.scrollLeft*g.x+y.x,y:i.y*g.y-d.scrollTop*g.y+y.y}}function ip(e){return Array.from(e.getClientRects())}function Nu(e){return xr(kn(e)).left+oa(e).scrollLeft}function np(e){const t=kn(e),i=oa(e),n=e.ownerDocument.body,r=ni(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=ni(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let a=-i.scrollLeft+Nu(e);const l=-i.scrollTop;return Fi(n).direction==="rtl"&&(a+=ni(t.clientWidth,n.clientWidth)-r),{width:r,height:s,x:a,y:l}}function rp(e,t){const i=oi(e),n=kn(e),r=i.visualViewport;let s=n.clientWidth,a=n.clientHeight,l=0,d=0;if(r){s=r.width,a=r.height;const g=il();(!g||g&&t==="fixed")&&(l=r.offsetLeft,d=r.offsetTop)}return{width:s,height:a,x:l,y:d}}function sp(e,t){const i=xr(e,!0,t==="fixed"),n=i.top+e.clientTop,r=i.left+e.clientLeft,s=an(e)?Wr(e):Wn(1),a=e.clientWidth*s.x,l=e.clientHeight*s.y,d=r*s.x,g=n*s.y;return{width:a,height:l,x:d,y:g}}function ed(e,t,i){let n;if(t==="viewport")n=rp(e,i);else if(t==="document")n=np(kn(e));else if(qi(t))n=sp(t,i);else{const r=Eu(e);n={...t,x:t.x-r.x,y:t.y-r.y}}return Po(n)}function _u(e,t){const i=Hn(e);return i===t||!qi(i)||Kr(i)?!1:Fi(i).position==="fixed"||_u(i,t)}function op(e,t){const i=t.get(e);if(i)return i;let n=Fs(e,[],!1).filter(l=>qi(l)&&as(l)!=="body"),r=null;const s=Fi(e).position==="fixed";let a=s?Hn(e):e;for(;qi(a)&&!Kr(a);){const l=Fi(a),d=tl(a);!d&&l.position==="fixed"&&(r=null),(s?!d&&!r:!d&&l.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||Gs(a)&&!d&&_u(e,a))?n=n.filter(y=>y!==a):r=l,a=Hn(a)}return t.set(e,n),n}function ap(e){let{element:t,boundary:i,rootBoundary:n,strategy:r}=e;const a=[...i==="clippingAncestors"?sa(t)?[]:op(t,this._c):[].concat(i),n],l=a[0],d=a.reduce((g,y)=>{const b=ed(t,y,r);return g.top=ni(b.top,g.top),g.right=Zi(b.right,g.right),g.bottom=Zi(b.bottom,g.bottom),g.left=ni(b.left,g.left),g},ed(t,l,r));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function cp(e){const{width:t,height:i}=Cu(e);return{width:t,height:i}}function lp(e,t,i){const n=an(t),r=kn(t),s=i==="fixed",a=xr(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const d=Wn(0);if(n||!n&&!s)if((as(t)!=="body"||Gs(r))&&(l=oa(t)),n){const b=xr(t,!0,s,t);d.x=b.x+t.clientLeft,d.y=b.y+t.clientTop}else r&&(d.x=Nu(r));const g=a.left+l.scrollLeft-d.x,y=a.top+l.scrollTop-d.y;return{x:g,y,width:a.width,height:a.height}}function _a(e){return Fi(e).position==="static"}function td(e,t){return!an(e)||Fi(e).position==="fixed"?null:t?t(e):e.offsetParent}function ku(e,t){const i=oi(e);if(sa(e))return i;if(!an(e)){let r=Hn(e);for(;r&&!Kr(r);){if(qi(r)&&!_a(r))return r;r=Hn(r)}return i}let n=td(e,t);for(;n&&Zm(n)&&_a(n);)n=td(n,t);return n&&Kr(n)&&_a(n)&&!tl(n)?i:n||Jm(e)||i}const dp=async function(e){const t=this.getOffsetParent||ku,i=this.getDimensions,n=await i(e.floating);return{reference:lp(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function hp(e){return Fi(e).direction==="rtl"}const up={convertOffsetParentRelativeRectToViewportRelativeRect:tp,getDocumentElement:kn,getClippingRect:ap,getOffsetParent:ku,getElementRects:dp,getClientRects:ip,getDimensions:cp,getScale:Wr,isElement:qi,isRTL:hp};function fp(e,t){let i=null,n;const r=kn(e);function s(){var l;clearTimeout(n),(l=i)==null||l.disconnect(),i=null}function a(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),s();const{left:g,top:y,width:b,height:M}=e.getBoundingClientRect();if(l||t(),!b||!M)return;const A=ho(y),S=ho(r.clientWidth-(g+b)),C=ho(r.clientHeight-(y+M)),k=ho(g),D={rootMargin:-A+"px "+-S+"px "+-C+"px "+-k+"px",threshold:ni(0,Zi(1,d))||1};let B=!0;function P(z){const W=z[0].intersectionRatio;if(W!==d){if(!B)return a();W?a(!1,W):n=setTimeout(()=>{a(!1,1e-7)},1e3)}B=!1}try{i=new IntersectionObserver(P,{...D,root:r.ownerDocument})}catch{i=new IntersectionObserver(P,D)}i.observe(e)}return a(!0),s}function gp(e,t,i,n){n===void 0&&(n={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,g=nl(e),y=r||s?[...g?Fs(g):[],...Fs(t)]:[];y.forEach(N=>{r&&N.addEventListener("scroll",i,{passive:!0}),s&&N.addEventListener("resize",i)});const b=g&&l?fp(g,i):null;let M=-1,A=null;a&&(A=new ResizeObserver(N=>{let[D]=N;D&&D.target===g&&A&&(A.unobserve(t),cancelAnimationFrame(M),M=requestAnimationFrame(()=>{var B;(B=A)==null||B.observe(t)})),i()}),g&&!d&&A.observe(g),A.observe(t));let S,C=d?xr(e):null;d&&k();function k(){const N=xr(e);C&&(N.x!==C.x||N.y!==C.y||N.width!==C.width||N.height!==C.height)&&i(),C=N,S=requestAnimationFrame(k)}return i(),()=>{var N;y.forEach(D=>{r&&D.removeEventListener("scroll",i),s&&D.removeEventListener("resize",i)}),b==null||b(),(N=A)==null||N.disconnect(),A=null,d&&cancelAnimationFrame(S)}}const mp=Qm,pp=Vm,yp=$m,bp=Gm,vp=Hm,id=Wm,xp=Km,wp=(e,t,i)=>{const n=new Map,r={platform:up,...i},s={...r.platform,_c:n};return Um(e,t,{...r,platform:s})};var xo=typeof document<"u"?L.useLayoutEffect:L.useEffect;function zo(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let i,n,r;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(i=e.length,i!==t.length)return!1;for(n=i;n--!==0;)if(!zo(e[n],t[n]))return!1;return!0}if(r=Object.keys(e),i=r.length,i!==Object.keys(t).length)return!1;for(n=i;n--!==0;)if(!{}.hasOwnProperty.call(t,r[n]))return!1;for(n=i;n--!==0;){const s=r[n];if(!(s==="_owner"&&e.$$typeof)&&!zo(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Du(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function nd(e,t){const i=Du(e);return Math.round(t*i)/i}function rd(e){const t=L.useRef(e);return xo(()=>{t.current=e}),t}function Mp(e){e===void 0&&(e={});const{placement:t="bottom",strategy:i="absolute",middleware:n=[],platform:r,elements:{reference:s,floating:a}={},transform:l=!0,whileElementsMounted:d,open:g}=e,[y,b]=L.useState({x:0,y:0,strategy:i,placement:t,middlewareData:{},isPositioned:!1}),[M,A]=L.useState(n);zo(M,n)||A(n);const[S,C]=L.useState(null),[k,N]=L.useState(null),D=L.useCallback(x=>{x!==W.current&&(W.current=x,C(x))},[]),B=L.useCallback(x=>{x!==Y.current&&(Y.current=x,N(x))},[]),P=s||S,z=a||k,W=L.useRef(null),Y=L.useRef(null),Z=L.useRef(y),H=d!=null,X=rd(d),E=rd(r),m=L.useCallback(()=>{if(!W.current||!Y.current)return;const x={placement:t,strategy:i,middleware:M};E.current&&(x.platform=E.current),wp(W.current,Y.current,x).then(I=>{const w={...I,isPositioned:!0};c.current&&!zo(Z.current,w)&&(Z.current=w,E1.flushSync(()=>{b(w)}))})},[M,t,i,E]);xo(()=>{g===!1&&Z.current.isPositioned&&(Z.current.isPositioned=!1,b(x=>({...x,isPositioned:!1})))},[g]);const c=L.useRef(!1);xo(()=>(c.current=!0,()=>{c.current=!1}),[]),xo(()=>{if(P&&(W.current=P),z&&(Y.current=z),P&&z){if(X.current)return X.current(P,z,m);m()}},[P,z,m,X,H]);const h=L.useMemo(()=>({reference:W,floating:Y,setReference:D,setFloating:B}),[D,B]),p=L.useMemo(()=>({reference:P,floating:z}),[P,z]),v=L.useMemo(()=>{const x={position:i,left:0,top:0};if(!p.floating)return x;const I=nd(p.floating,y.x),w=nd(p.floating,y.y);return l?{...x,transform:"translate("+I+"px, "+w+"px)",...Du(p.floating)>=1.5&&{willChange:"transform"}}:{position:i,left:I,top:w}},[i,l,p.floating,y.x,y.y]);return L.useMemo(()=>({...y,update:m,refs:h,elements:p,floatingStyles:v}),[y,m,h,p,v])}const Ap=e=>{function t(i){return{}.hasOwnProperty.call(i,"current")}return{name:"arrow",options:e,fn(i){const{element:n,padding:r}=typeof e=="function"?e(i):e;return n&&t(n)?n.current!=null?id({element:n.current,padding:r}).fn(i):{}:n?id({element:n,padding:r}).fn(i):{}}}},Sp=(e,t)=>({...mp(e),options:[e,t]}),jp=(e,t)=>({...pp(e),options:[e,t]}),Ip=(e,t)=>({...xp(e),options:[e,t]}),Tp=(e,t)=>({...yp(e),options:[e,t]}),Cp=(e,t)=>({...bp(e),options:[e,t]}),Ep=(e,t)=>({...vp(e),options:[e,t]}),Np=(e,t)=>({...Ap(e),options:[e,t]});var _p="Arrow",Lu=L.forwardRef((e,t)=>{const{children:i,width:n=10,height:r=5,...s}=e;return o.jsx(Hs.svg,{...s,ref:t,width:n,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?i:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});Lu.displayName=_p;var kp=Lu;function Dp(e){const[t,i]=L.useState(void 0);return gc(()=>{if(e){i({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const s=r[0];let a,l;if("borderBoxSize"in s){const d=s.borderBoxSize,g=Array.isArray(d)?d[0]:d;a=g.inlineSize,l=g.blockSize}else a=e.offsetWidth,l=e.offsetHeight;i({width:a,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else i(void 0)},[e]),t}var rl="Popper",[Pu,zu]=Yh(rl),[Lp,Ru]=Pu(rl),Ou=e=>{const{__scopePopper:t,children:i}=e,[n,r]=L.useState(null);return o.jsx(Lp,{scope:t,anchor:n,onAnchorChange:r,children:i})};Ou.displayName=rl;var Bu="PopperAnchor",qu=L.forwardRef((e,t)=>{const{__scopePopper:i,virtualRef:n,...r}=e,s=Ru(Bu,i),a=L.useRef(null),l=Zo(t,a);return L.useEffect(()=>{s.onAnchorChange((n==null?void 0:n.current)||a.current)}),n?null:o.jsx(Hs.div,{...r,ref:l})});qu.displayName=Bu;var sl="PopperContent",[Pp,zp]=Pu(sl),Fu=L.forwardRef((e,t)=>{var R,Q,K,G,te,J;const{__scopePopper:i,side:n="bottom",sideOffset:r=0,align:s="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:g=[],collisionPadding:y=0,sticky:b="partial",hideWhenDetached:M=!1,updatePositionStrategy:A="optimized",onPlaced:S,...C}=e,k=Ru(sl,i),[N,D]=L.useState(null),B=Zo(t,ne=>D(ne)),[P,z]=L.useState(null),W=Dp(P),Y=(W==null?void 0:W.width)??0,Z=(W==null?void 0:W.height)??0,H=n+(s!=="center"?"-"+s:""),X=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},E=Array.isArray(g)?g:[g],m=E.length>0,c={padding:X,boundary:E.filter(Op),altBoundary:m},{refs:h,floatingStyles:p,placement:v,isPositioned:x,middlewareData:I}=Mp({strategy:"fixed",placement:H,whileElementsMounted:(...ne)=>gp(...ne,{animationFrame:A==="always"}),elements:{reference:k.anchor},middleware:[Sp({mainAxis:r+Z,alignmentAxis:a}),d&&jp({mainAxis:!0,crossAxis:!1,limiter:b==="partial"?Ip():void 0,...c}),d&&Tp({...c}),Cp({...c,apply:({elements:ne,rects:re,availableWidth:de,availableHeight:he})=>{const{width:De,height:Le}=re.reference,le=ne.floating.style;le.setProperty("--radix-popper-available-width",`${de}px`),le.setProperty("--radix-popper-available-height",`${he}px`),le.setProperty("--radix-popper-anchor-width",`${De}px`),le.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),P&&Np({element:P,padding:l}),Bp({arrowWidth:Y,arrowHeight:Z}),M&&Ep({strategy:"referenceHidden",...c})]}),[w,u]=$u(v),f=N1(S);gc(()=>{x&&(f==null||f())},[x,f]);const T=(R=I.arrow)==null?void 0:R.x,$=(Q=I.arrow)==null?void 0:Q.y,V=((K=I.arrow)==null?void 0:K.centerOffset)!==0,[j,O]=L.useState();return gc(()=>{N&&O(window.getComputedStyle(N).zIndex)},[N]),o.jsx("div",{ref:h.setFloating,"data-radix-popper-content-wrapper":"",style:{...p,transform:x?p.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:j,"--radix-popper-transform-origin":[(G=I.transformOrigin)==null?void 0:G.x,(te=I.transformOrigin)==null?void 0:te.y].join(" "),...((J=I.hide)==null?void 0:J.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(Pp,{scope:i,placedSide:w,onArrowChange:z,arrowX:T,arrowY:$,shouldHideArrow:V,children:o.jsx(Hs.div,{"data-side":w,"data-align":u,...C,ref:B,style:{...C.style,animation:x?void 0:"none"}})})})});Fu.displayName=sl;var Uu="PopperArrow",Rp={top:"bottom",right:"left",bottom:"top",left:"right"},Wu=L.forwardRef(function(t,i){const{__scopePopper:n,...r}=t,s=zp(Uu,n),a=Rp[s.placedSide];return o.jsx("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0},children:o.jsx(kp,{...r,ref:i,style:{...r.style,display:"block"}})})});Wu.displayName=Uu;function Op(e){return e!==null}var Bp=e=>({name:"transformOrigin",options:e,fn(t){var k,N,D;const{placement:i,rects:n,middlewareData:r}=t,a=((k=r.arrow)==null?void 0:k.centerOffset)!==0,l=a?0:e.arrowWidth,d=a?0:e.arrowHeight,[g,y]=$u(i),b={start:"0%",center:"50%",end:"100%"}[y],M=(((N=r.arrow)==null?void 0:N.x)??0)+l/2,A=(((D=r.arrow)==null?void 0:D.y)??0)+d/2;let S="",C="";return g==="bottom"?(S=a?b:`${M}px`,C=`${-d}px`):g==="top"?(S=a?b:`${M}px`,C=`${n.floating.height+d}px`):g==="right"?(S=`${-d}px`,C=a?b:`${A}px`):g==="left"&&(S=`${n.floating.width+d}px`,C=a?b:`${A}px`),{data:{x:S,y:C}}}});function $u(e){const[t,i="center"]=e.split("-");return[t,i]}var qp=Ou,Fp=qu,Up=Fu,Wp=Wu,$p="VisuallyHidden",Hu=L.forwardRef((e,t)=>o.jsx(Hs.span,{...e,ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}));Hu.displayName=$p;var Hp=Hu,[aa,uA]=Yh("Tooltip",[zu]),ca=zu(),Yu="TooltipProvider",Yp=700,vc="tooltip.open",[Qp,ol]=aa(Yu),Qu=e=>{const{__scopeTooltip:t,delayDuration:i=Yp,skipDelayDuration:n=300,disableHoverableContent:r=!1,children:s}=e,[a,l]=L.useState(!0),d=L.useRef(!1),g=L.useRef(0);return L.useEffect(()=>{const y=g.current;return()=>window.clearTimeout(y)},[]),o.jsx(Qp,{scope:t,isOpenDelayed:a,delayDuration:i,onOpen:L.useCallback(()=>{window.clearTimeout(g.current),l(!1)},[]),onClose:L.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>l(!0),n)},[n]),isPointerInTransitRef:d,onPointerInTransitChange:L.useCallback(y=>{d.current=y},[]),disableHoverableContent:r,children:s})};Qu.displayName=Yu;var la="Tooltip",[Vp,Zs]=aa(la),Vu=e=>{const{__scopeTooltip:t,children:i,open:n,defaultOpen:r=!1,onOpenChange:s,disableHoverableContent:a,delayDuration:l}=e,d=ol(la,e.__scopeTooltip),g=ca(t),[y,b]=L.useState(null),M=D1(),A=L.useRef(0),S=a??d.disableHoverableContent,C=l??d.delayDuration,k=L.useRef(!1),[N=!1,D]=L1({prop:n,defaultProp:r,onChange:Y=>{Y?(d.onOpen(),document.dispatchEvent(new CustomEvent(vc))):d.onClose(),s==null||s(Y)}}),B=L.useMemo(()=>N?k.current?"delayed-open":"instant-open":"closed",[N]),P=L.useCallback(()=>{window.clearTimeout(A.current),k.current=!1,D(!0)},[D]),z=L.useCallback(()=>{window.clearTimeout(A.current),D(!1)},[D]),W=L.useCallback(()=>{window.clearTimeout(A.current),A.current=window.setTimeout(()=>{k.current=!0,D(!0)},C)},[C,D]);return L.useEffect(()=>()=>window.clearTimeout(A.current),[]),o.jsx(qp,{...g,children:o.jsx(Vp,{scope:t,contentId:M,open:N,stateAttribute:B,trigger:y,onTriggerChange:b,onTriggerEnter:L.useCallback(()=>{d.isOpenDelayed?W():P()},[d.isOpenDelayed,W,P]),onTriggerLeave:L.useCallback(()=>{S?z():window.clearTimeout(A.current)},[z,S]),onOpen:P,onClose:z,disableHoverableContent:S,children:i})})};Vu.displayName=la;var xc="TooltipTrigger",Ku=L.forwardRef((e,t)=>{const{__scopeTooltip:i,...n}=e,r=Zs(xc,i),s=ol(xc,i),a=ca(i),l=L.useRef(null),d=Zo(t,l,r.onTriggerChange),g=L.useRef(!1),y=L.useRef(!1),b=L.useCallback(()=>g.current=!1,[]);return L.useEffect(()=>()=>document.removeEventListener("pointerup",b),[b]),o.jsx(Fp,{asChild:!0,...a,children:o.jsx(Hs.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...n,ref:d,onPointerMove:kr(e.onPointerMove,M=>{M.pointerType!=="touch"&&!y.current&&!s.isPointerInTransitRef.current&&(r.onTriggerEnter(),y.current=!0)}),onPointerLeave:kr(e.onPointerLeave,()=>{r.onTriggerLeave(),y.current=!1}),onPointerDown:kr(e.onPointerDown,()=>{g.current=!0,document.addEventListener("pointerup",b,{once:!0})}),onFocus:kr(e.onFocus,()=>{g.current||r.onOpen()}),onBlur:kr(e.onBlur,r.onClose),onClick:kr(e.onClick,r.onClose)})})});Ku.displayName=xc;var al="TooltipPortal",[Kp,Gp]=aa(al,{forceMount:void 0}),Gu=e=>{const{__scopeTooltip:t,forceMount:i,children:n,container:r}=e,s=Zs(al,t);return o.jsx(Kp,{scope:t,forceMount:i,children:o.jsx(Qh,{present:i||s.open,children:o.jsx(P1,{asChild:!0,container:r,children:n})})})};Gu.displayName=al;var Gr="TooltipContent",Zu=L.forwardRef((e,t)=>{const i=Gp(Gr,e.__scopeTooltip),{forceMount:n=i.forceMount,side:r="top",...s}=e,a=Zs(Gr,e.__scopeTooltip);return o.jsx(Qh,{present:n||a.open,children:a.disableHoverableContent?o.jsx(Ju,{side:r,...s,ref:t}):o.jsx(Zp,{side:r,...s,ref:t})})}),Zp=L.forwardRef((e,t)=>{const i=Zs(Gr,e.__scopeTooltip),n=ol(Gr,e.__scopeTooltip),r=L.useRef(null),s=Zo(t,r),[a,l]=L.useState(null),{trigger:d,onClose:g}=i,y=r.current,{onPointerInTransitChange:b}=n,M=L.useCallback(()=>{l(null),b(!1)},[b]),A=L.useCallback((S,C)=>{const k=S.currentTarget,N={x:S.clientX,y:S.clientY},D=e2(N,k.getBoundingClientRect()),B=t2(N,D),P=i2(C.getBoundingClientRect()),z=r2([...B,...P]);l(z),b(!0)},[b]);return L.useEffect(()=>()=>M(),[M]),L.useEffect(()=>{if(d&&y){const S=k=>A(k,y),C=k=>A(k,d);return d.addEventListener("pointerleave",S),y.addEventListener("pointerleave",C),()=>{d.removeEventListener("pointerleave",S),y.removeEventListener("pointerleave",C)}}},[d,y,A,M]),L.useEffect(()=>{if(a){const S=C=>{const k=C.target,N={x:C.clientX,y:C.clientY},D=(d==null?void 0:d.contains(k))||(y==null?void 0:y.contains(k)),B=!n2(N,a);D?M():B&&(M(),g())};return document.addEventListener("pointermove",S),()=>document.removeEventListener("pointermove",S)}},[d,y,a,g,M]),o.jsx(Ju,{...e,ref:s})}),[Jp,Xp]=aa(la,{isInside:!1}),Ju=L.forwardRef((e,t)=>{const{__scopeTooltip:i,children:n,"aria-label":r,onEscapeKeyDown:s,onPointerDownOutside:a,...l}=e,d=Zs(Gr,i),g=ca(i),{onClose:y}=d;return L.useEffect(()=>(document.addEventListener(vc,y),()=>document.removeEventListener(vc,y)),[y]),L.useEffect(()=>{if(d.trigger){const b=M=>{const A=M.target;A!=null&&A.contains(d.trigger)&&y()};return window.addEventListener("scroll",b,{capture:!0}),()=>window.removeEventListener("scroll",b,{capture:!0})}},[d.trigger,y]),o.jsx(_1,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:b=>b.preventDefault(),onDismiss:y,children:o.jsxs(Up,{"data-state":d.stateAttribute,...g,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(k1,{children:n}),o.jsx(Jp,{scope:i,isInside:!0,children:o.jsx(Hp,{id:d.contentId,role:"tooltip",children:r||n})})]})})});Zu.displayName=Gr;var Xu="TooltipArrow",ef=L.forwardRef((e,t)=>{const{__scopeTooltip:i,...n}=e,r=ca(i);return Xp(Xu,i).isInside?null:o.jsx(Wp,{...r,...n,ref:t})});ef.displayName=Xu;function e2(e,t){const i=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),s=Math.abs(t.left-e.x);switch(Math.min(i,n,r,s)){case s:return"left";case r:return"right";case i:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function t2(e,t,i=5){const n=[];switch(t){case"top":n.push({x:e.x-i,y:e.y+i},{x:e.x+i,y:e.y+i});break;case"bottom":n.push({x:e.x-i,y:e.y-i},{x:e.x+i,y:e.y-i});break;case"left":n.push({x:e.x+i,y:e.y-i},{x:e.x+i,y:e.y+i});break;case"right":n.push({x:e.x-i,y:e.y-i},{x:e.x-i,y:e.y+i});break}return n}function i2(e){const{top:t,right:i,bottom:n,left:r}=e;return[{x:r,y:t},{x:i,y:t},{x:i,y:n},{x:r,y:n}]}function n2(e,t){const{x:i,y:n}=e;let r=!1;for(let s=0,a=t.length-1;s<t.length;a=s++){const l=t[s].x,d=t[s].y,g=t[a].x,y=t[a].y;d>n!=y>n&&i<(g-l)*(n-d)/(y-d)+l&&(r=!r)}return r}function r2(e){const t=e.slice();return t.sort((i,n)=>i.x<n.x?-1:i.x>n.x?1:i.y<n.y?-1:i.y>n.y?1:0),s2(t)}function s2(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const r=e[n];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))t.pop();else break}t.push(r)}t.pop();const i=[];for(let n=e.length-1;n>=0;n--){const r=e[n];for(;i.length>=2;){const s=i[i.length-1],a=i[i.length-2];if((s.x-a.x)*(r.y-a.y)>=(s.y-a.y)*(r.x-a.x))i.pop();else break}i.push(r)}return i.pop(),t.length===1&&i.length===1&&t[0].x===i[0].x&&t[0].y===i[0].y?t:t.concat(i)}var o2=Qu,a2=Vu,c2=Ku,l2=Gu,d2=Zu,h2=ef;const Ro=e=>o.jsx(o2,{delayDuration:200,children:o.jsxs(a2,{children:[o.jsx(c2,{asChild:!0,children:e.children}),o.jsx(l2,{children:o.jsxs(f2,{sideOffset:e.sideOffset||6,align:e.align||"center",side:e.side||"top",children:[e.tip,o.jsx(g2,{})]})})]})}),u2=$c`
from {
  opacity: 0;
  transform: translateY(2px);
}
to {
  opacity: 1;
  transform: translateY(0);
}
`,f2=Ti(d2)(e=>{const t=gt();return{background:t.colors.tooltipBg,color:t.colors.tooltipText,borderRadius:pt.sm,padding:`${ie.xs} ${ie.sm}`,fontSize:je.sm,boxShadow:z1.sm,userSelect:"none",willChange:"transform, opacity",animation:`${u2} 200ms cubic-bezier(0.16, 1, 0.3, 1)`,zIndex:999999999999999,maxWidth:"300px",lineHeight:1.5}}),g2=Ti(h2)(()=>({fill:gt().colors.tooltipBg})),tf=e=>{const{hasCopied:t,onCopy:i}=Su(e.text),n=e.hasCopied||t;return o.jsx("div",{onClick:i,style:{display:"flex",alignItems:"center",justifyContent:"center"},onKeyDown:r=>{(r.key==="Enter"||r.key===" ")&&i()},children:o.jsx(Ro,{tip:e.tip,side:e.side,align:e.align,children:o.jsx("div",{children:o.jsx(_,{color:n?"success":void 0,flex:"row",center:"both",children:n?o.jsx(Ys,{}):o.jsx(R1,{})})})})})},m2=e=>{const t=gt();return o.jsx("div",{style:{position:"relative",overflow:"hidden",display:"flex",justifyItems:"center",flexShrink:0,alignItems:"center",padding:e.padding??"6px",borderRadius:"100%",border:`1px solid ${t.colors.borderColor}`,...e.style},children:e.children})},sd=[["#fca5a5","#b91c1c"],["#fdba74","#c2410c"],["#fcd34d","#b45309"],["#fde047","#a16207"],["#a3e635","#4d7c0f"],["#86efac","#15803d"],["#67e8f9","#0e7490"],["#7dd3fc","#0369a1"],["#93c5fd","#1d4ed8"],["#a5b4fc","#4338ca"],["#c4b5fd","#6d28d9"],["#d8b4fe","#7e22ce"],["#f0abfc","#a21caf"],["#f9a8d4","#be185d"],["#fda4af","#be123c"]];function cl(e){const t=L.useId(),i=L.useMemo(()=>sd[Number(_m(e.address.slice(2,4)))%sd.length],[e.address]);return o.jsx("div",{id:t,style:{width:`${e.size}px`,height:`${e.size}px`,backgroundImage:`radial-gradient(ellipse at left bottom, ${i[0]}, ${i[1]})`}})}const Si=Jo(e=>{const t=gt();return{all:"unset",padding:`${ie.sm} ${ie.sm}`,borderRadius:pt.md,backgroundColor:"transparent",boxSizing:"border-box",display:"flex",alignItems:"center",width:"100%",cursor:"pointer",fontSize:je.md,fontWeight:500,color:t.colors.secondaryText,gap:ie.sm,WebkitTapHighlightColor:"transparent",lineHeight:1.3,transition:"background-color 200ms ease, transform 200ms ease","&:hover":{backgroundColor:t.colors.tertiaryBg,svg:{color:t.colors.accentText}},"&[disabled]":{cursor:"not-allowed",svg:{display:"none"}},svg:{color:t.colors.secondaryText,transition:"color 200ms ease"},"&[data-variant='danger']:hover svg":{color:`${t.colors.danger}!important`},"&[data-variant='primary']:hover svg":{color:`${t.colors.primaryText}!important`}}}),p2=Si.withComponent("a");function ll(e){var Y,Z,H,X;const t=e.connectLocale.networkSelector,[i,n]=L.useState(""),[r,s]=L.useState("all"),a=gu(i,300),{onSwitch:l,onCustomClick:d}=e.networkSelector||{},g=t.categoryLabel.others,y=t.categoryLabel.popular,b=t.categoryLabel.recentlyUsed,{chainSections:M,allChains:A,allChainsToSectionMap:S}=L.useMemo(()=>{var v,x,I,w;const E=[],m=[],c=new Map;function h(u,f){c.set(u.id,f),m.push(u)}if((v=e.networkSelector)!=null&&v.sections)for(const u of e.networkSelector.sections){const f=u.chains.filter(T=>!c.has(T.id));if(f.length>0){E.push({label:u.label,chains:f});for(const T of f)h(T,u.label)}}else{const u=new Map(e.chains.map(f=>[f.id,f]));if((x=e.networkSelector)!=null&&x.recentChainIds&&((I=e.networkSelector)==null?void 0:I.recentChainIds.length)>0){const f=e.networkSelector.recentChainIds.map(T=>u.get(T)).filter(T=>T!==void 0);E.push({label:b,chains:f});for(const T of f)h(T,b)}if((w=e.networkSelector)!=null&&w.popularChainIds&&e.networkSelector.popularChainIds.length>0){const T=e.networkSelector.popularChainIds.map($=>u.get($)).filter($=>$!==void 0).filter($=>!c.has($.id));if(T.length>0){E.push({label:y,chains:T});for(const $ of T)h($,y)}}}const p=e.chains.filter(u=>!c.has(u.id));if(p.length>0){E.push({label:g,chains:p});for(const u of p)h(u,g)}return{chainSections:E,allChains:m,allChainsToSectionMap:c}},[(Y=e.networkSelector)==null?void 0:Y.sections,(Z=e.networkSelector)==null?void 0:Z.recentChainIds,(H=e.networkSelector)==null?void 0:H.popularChainIds,e.chains,b,y,g]),C=A.every(E=>!!E.name),k=O1(C?[]:A,10),N=C?!1:k.some(E=>E.isLoading),D=C?A:N?[]:k.filter(E=>!!E.data).map(E=>B1(E.data)),B=L.useMemo(()=>new nm(D,{threshold:.4,keys:[{name:"name",weight:1},{name:"chainId",weight:1}]}),[D]),P=L.useMemo(()=>{if(a==="")return;const E=[],m=B.search(a).map(c=>c.item);for(const c of m){const h=S.get(c.id);if(!h)return;const p=E.find(v=>v.label===h);p?p.chains.push(c):E.push({label:h,chains:[c]})}return E},[a,B,S])||M,z=L.useMemo(()=>r==="all"?P:P.map(E=>({label:E.label,chains:E.chains.filter(m=>r==="mainnet"&&!m.testnet||r==="testnet"&&m.testnet)})),[P,r]),W=L.useCallback(E=>{l&&l(E),e.closeModal()},[l,e]);return o.jsxs(_,{children:[o.jsx(_,{p:"lg",children:e.onBack?o.jsx(Oe,{title:t.title,onBack:e.onBack}):o.jsx(q1,{children:t.title})}),e.showTabs!==!1&&o.jsxs(o.Fragment,{children:[o.jsx(_,{px:"lg",children:o.jsxs(_,{flex:"row",gap:"xxs",children:[o.jsx(ka,{onClick:()=>s("all"),"data-active":r==="all",children:t.allNetworks}),o.jsx(ka,{onClick:()=>s("mainnet"),"data-active":r==="mainnet",children:t.mainnets}),o.jsx(ka,{onClick:()=>s("testnet"),"data-active":r==="testnet",children:t.testnets})]})}),o.jsx(q,{y:"lg"})]}),e.showTabs===!1&&o.jsx(q,{y:"xxs"}),o.jsx(_,{px:"lg",children:o.jsxs("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:[o.jsx(M2,{width:U.md,height:U.md}),o.jsx(Bs,{style:{padding:`${ie.sm} ${ie.md} ${ie.sm} ${ie.xxl}`},tabIndex:-1,variant:"outline",value:i,onChange:E=>{n(E.target.value)},disabled:N,placeholder:N?"Loading chains...":t.inputPlaceholder}),(a!==i||N)&&o.jsx("div",{style:{position:"absolute",right:ie.md},children:o.jsx(Mt,{size:"md",color:"accentText"})})]})}),o.jsx(q,{y:"lg"}),o.jsx(_,{px:"md",children:o.jsx(y2,{chainSections:z,onSwitch:W,renderChain:(X=e.networkSelector)==null?void 0:X.renderChain,connectLocale:e.connectLocale,client:e.client,close:e.closeModal})}),d&&o.jsxs(o.Fragment,{children:[o.jsx(qe,{}),o.jsx(_,{p:"lg",children:o.jsx(Ie,{fullWidth:!0,variant:"link",onClick:()=>{d(),e.closeModal()},style:{display:"flex",fontSize:je.sm,boxShadow:"none"},children:t.addCustomNetwork})})]})]})}const y2=e=>{const{chainSections:t}=e,i=t.every(n=>n.chains.length===0);return o.jsx(_,{scrollY:!0,animate:"fadein",style:{height:"330px",paddingBottom:ie.lg},children:i?o.jsxs(_,{flex:"column",gap:"md",center:"both",color:"secondaryText",children:[o.jsx(q,{y:"xl"}),o.jsx(Nn,{width:U.xl,height:U.xl}),o.jsx(F,{children:" No Results "})]}):t.map((n,r)=>n.chains.length===0?null:o.jsxs(L.Fragment,{children:[r!==0&&o.jsx(q,{y:"lg"}),o.jsx(v2,{children:n.label}),o.jsx(q,{y:"xs"}),o.jsx(b2,{chains:n.chains,onSwitch:e.onSwitch,renderChain:e.renderChain,close:e.close,client:e.client,connectLocale:e.connectLocale})]},n.label))})},b2=L.memo(function(t){const{itemsToShow:i,lastItemRef:n}=rm(10,10),r=Vh(),s=Bt(),[a,l]=L.useState(-1),[d,g]=L.useState(-1),y=t.close;L.useEffect(()=>{a!==-1&&(s==null?void 0:s.id)===a&&y&&y()},[a,y,s==null?void 0:s.id]);const b=async S=>{g(-1),l(S.id);try{await r(S),t.onSwitch(S)}catch(C){g(S.id),console.error(C)}finally{l(-1)}},M=t.renderChain,A=t.chains.slice(0,i);return o.jsx(x2,{children:A.map((S,C)=>{if(!S)return null;const k=a===S.id,N=d===S.id,D=C===A.length-1;return o.jsx("li",{ref:D?n:void 0,children:M?o.jsx(M,{switchChain:()=>{b(S)},chain:S,switching:a===S.id,switchFailed:d===S.id,close:t.close}):o.jsx(dl,{chain:S,confirming:k,onClick:()=>b(S),switchingFailed:N,client:t.client,connectLocale:t.connectLocale})},S.id)})})}),dl=L.memo(function(t){const i=t.connectLocale,{chain:n,confirming:r,switchingFailed:s}=t,a=Bt(),l=si(n),d=Qs(n);let g;return l.name?g=o.jsxs("span",{children:[l.name," "]}):g=o.jsx(lt,{width:"150px",height:"20px"}),o.jsxs(w2,{"data-active":(a==null?void 0:a.id)===n.id,onClick:t.onClick,children:[d.isLoading?o.jsx(lt,{width:`${U.lg}px`,height:`${U.lg}px`}):o.jsx(Un,{chainIconUrl:d.url,size:U.lg,active:(a==null?void 0:a.id)===n.id,loading:"lazy",client:t.client}),r||s?o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:ie.xs},children:[g,o.jsxs(_,{animate:"fadein",flex:"row",gap:"xxs",center:"y",children:[r&&o.jsxs(o.Fragment,{children:[o.jsx(F,{size:"xs",color:"accentText",children:i.confirmInWallet}),o.jsx(Mt,{size:"xs",color:"accentText"})]}),s&&o.jsx(_,{animate:"fadein",children:o.jsx(F,{size:"xs",color:"danger",children:i.networkSelector.failedToSwitch})})]})]}):g]})}),ka=Ti.button(e=>{const t=gt();return{all:"unset",fontSize:je.sm,fontWeight:500,color:t.colors.secondaryText,cursor:"pointer",padding:`${ie.sm} ${ie.sm}`,WebkitTapHighlightColor:"transparent",borderRadius:pt.lg,transition:"background 0.2s ease, color 0.2s ease","&[data-active='true']":{background:t.colors.secondaryButtonBg,color:t.colors.primaryText}}}),v2=F1(()=>{const e=gt();return{fontSize:je.sm,color:e.colors.secondaryText,margin:0,display:"block",padding:`0 ${ie.xs}`}}),x2=U1({padding:0,margin:0,listStyle:"none",display:"flex",flexDirection:"column",gap:ie.xs,boxSizing:"border-box"}),w2=Jo(e=>{const t=gt();return{all:"unset",display:"flex",width:"100%",boxSizing:"border-box",alignItems:"center",gap:ie.md,padding:`${ie.xs} ${ie.sm}`,borderRadius:pt.md,cursor:"pointer",transition:"background 0.2s ease",color:t.colors.primaryText,fontWeight:500,fontSize:je.md,"&:hover":{background:t.colors.secondaryButtonBg},[W1.mobile]:{fontSize:je.sm}}}),M2=Ti($1)(e=>({color:gt().colors.secondaryText,position:"absolute",left:ie.sm}));function nf({selected:e,onSelect:t,options:i,children:n}){const r=gt();return o.jsxs("div",{children:[o.jsx(_,{flex:"row",center:"y",style:{width:"100%",borderRadius:pt.lg},p:"xxs",bg:"secondaryButtonBg",children:i.map(s=>o.jsx(Ie,{variant:"accent",type:"button",onClick:()=>t(s.value),style:{flex:1,paddingBlock:ie.sm,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",borderRadius:pt.md,backgroundColor:s.value===e?r.colors.modalBg:"transparent"},children:o.jsx(F,{color:s.value===e?"primaryText":"secondaryText",style:{textAlign:"center"},size:"sm",children:s.label})},s.value))}),o.jsx(q,{y:"sm"}),n]})}const da=e=>o.jsxs("svg",{width:e.size,height:e.size,role:"presentation",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M18.0901 10.37C19.0354 10.7224 19.8766 11.3075 20.5358 12.0712C21.1951 12.8349 21.6512 13.7524 21.8618 14.7391C22.0725 15.7257 22.031 16.7495 21.7411 17.7158C21.4513 18.6822 20.9224 19.5598 20.2035 20.2676C19.4846 20.9754 18.5988 21.4905 17.6281 21.7652C16.6573 22.04 15.633 22.0655 14.6498 21.8395C13.6666 21.6134 12.7562 21.1431 12.0029 20.472C11.2496 19.8009 10.6777 18.9507 10.3401 18",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M7 6H8V10",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M16.7101 13.88L17.4101 14.59L14.5901 17.41",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),rf=({size:e})=>o.jsxs("svg",{width:e,height:e,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",children:[o.jsx("path",{d:"M14.001 8.00048C14.001 9.18726 13.649 10.3474 12.9897 11.3342C12.3304 12.3209 11.3932 13.09 10.2968 13.5442C9.20032 13.9984 7.99382 14.1172 6.82984 13.8857C5.66587 13.6541 4.59668 13.0826 3.7575 12.2435C2.91832 11.4043 2.34683 10.3351 2.1153 9.17111C1.88377 8.00713 2.0026 6.80064 2.45676 5.70419C2.91092 4.60775 3.68002 3.6706 4.66679 3.01126C5.65357 2.35192 6.8137 2 8.00048 2",stroke:"currentColor",strokeWidth:"1.2001",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M14.0005 2L8 8.00048",stroke:"currentColor",strokeWidth:"1.2001",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M10.3984 2H13.9987V5.60029",stroke:"currentColor",strokeWidth:"1.2001",strokeLinecap:"round",strokeLinejoin:"round"})]}),hl=e=>{const{name:t}=si(e.chain);return t?o.jsx(F,{size:e.size,children:e.short?A2(t):t}):o.jsx(lt,{width:"50px",height:je[e.size]})};function A2(e){const t=e.split(" "),i=new Set(["mainnet","testnet","chain"]);return t.filter(n=>!i.has(n.toLowerCase())).join(" ")}const cn={nativeToken:!0};function mt(e){var t;return"nativeToken"in e||((t=e.address)==null?void 0:t.toLowerCase())===At.toLowerCase()}function Ir(e){const t=Qs(e.chain),i=L.useMemo(()=>mt(e.token)||e.token.address===At?t.url:e.token.icon,[e.token,t.url]);return o.jsx(ns,{src:i||"",width:U[e.size],height:U[e.size],fallbackImage:H1,client:e.client})}const Vn=()=>{const e=Kh().pay;return e.startsWith("localhost")?`http://${e}`:`https://${e}`},S2=()=>`${Vn()}/buy-with-crypto/status/v1`,j2=()=>`${Vn()}/buy-with-crypto/quote/v1`,I2=()=>`${Vn()}/buy-with-crypto/transfer/v1`,T2=()=>`${Vn()}/buy-with-fiat/quote/v1`,C2=()=>`${Vn()}/buy-with-fiat/status/v1`,E2=()=>`${Vn()}/destination-tokens/v1`,N2=()=>`${Vn()}/buy-with-crypto/source-tokens/v1`,_2=()=>`${Vn()}/wallet/history/v1`;async function k2(e){return Gh(async()=>(await(await Qn(e)(E2())).json()).result.map(r=>({chain:Hc({id:r.chainId}),tokens:r.tokens})),{cacheKey:"destination-tokens",cacheTime:5*60*1e3})}function sf(e){return Ct({queryKey:["destination-tokens",e],queryFn:async()=>k2(e)})}function D2(e){return Ct({queryKey:["source-tokens",e],queryFn:async()=>{const t=Qn(e.client),i=N2(),n=new URL(i);return n.searchParams.append("destinationChainId",e.destinationChainId.toString()),n.searchParams.append("destinationTokenAddress",e.destinationTokenAddress),(await(await t(n.toString())).json()).result.map(a=>({chain:Hc({id:a.chainId}),tokens:a.tokens}))}})}function wr(e){var r,s,a;const t=sf(e.client),i=e.token,n=mt(i)||(a=(s=(r=t.data)==null?void 0:r.find(l=>l.chain.id===e.chain.id))==null?void 0:s.tokens.find(l=>Qr(l.address)===Qr(i.address)))==null?void 0:a.icon;return o.jsx(Ir,{token:mt(i)?{nativeToken:!0}:{address:i.address,icon:i.icon||n},chain:e.chain,client:e.client,size:e.size})}function of(e){if(e.status==="NOT_FOUND")return{status:"Unknown",color:"secondaryText"};const t=e.subStatus,i=e.status;return t==="WAITING_BRIDGE"?{status:"Bridging",color:"accentText",loading:!0}:t==="PARTIAL_SUCCESS"?{status:"Incomplete",color:"secondaryText"}:i==="PENDING"?{status:"Pending",color:"accentText",loading:!0}:i==="FAILED"?{status:"Failed",color:"danger"}:i==="COMPLETED"?{status:"Completed",color:"success"}:{status:"Unknown",color:"secondaryText"}}function ha(e){const t=e.status;switch(t){case"CRYPTO_SWAP_FALLBACK":return{status:"Incomplete",color:"danger",step:2,progressStatus:"partialSuccess"};case"CRYPTO_SWAP_IN_PROGRESS":case"PENDING_ON_RAMP_TRANSFER":case"ON_RAMP_TRANSFER_IN_PROGRESS":case"PENDING_PAYMENT":return{status:"Pending",color:"accentText",loading:!0,step:t==="CRYPTO_SWAP_IN_PROGRESS"?2:1,progressStatus:"pending"};case"ON_RAMP_TRANSFER_COMPLETED":case"CRYPTO_SWAP_COMPLETED":return{status:"Completed",color:"success",loading:!0,step:t==="CRYPTO_SWAP_COMPLETED"?2:1,progressStatus:"completed"};case"CRYPTO_SWAP_FAILED":case"CRYPTO_SWAP_REQUIRED":return{status:"Action Required",color:"accentText",step:2,progressStatus:"actionRequired"};case"PAYMENT_FAILED":case"ON_RAMP_TRANSFER_FAILED":return{status:"Failed",color:"danger",step:1,progressStatus:"failed"}}return{status:"Unknown",color:"secondaryText",step:1,progressStatus:"unknown"}}const wo="62px";function L2(e){const t=e.txInfo.type==="swap"?of(e.txInfo.status):ha(e.txInfo.status);return o.jsxs(P2,{onClick:e.onClick,variant:"secondary",fullWidth:!0,style:{paddingBlock:ie.sm},children:[o.jsxs(_,{flex:"row",center:"y",gap:"sm",style:{flex:1},children:[o.jsx(wr,{client:e.client,chain:wt(e.txInfo.status.quote.toToken.chainId),size:"md",token:{address:e.txInfo.status.quote.toToken.tokenAddress}}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[o.jsxs(_,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"space-between"},children:[o.jsxs(F,{size:"sm",color:"primaryText",children:["Buy"," ",ft(Number(e.txInfo.type==="swap"?e.txInfo.status.quote.toAmount:e.txInfo.status.quote.estimatedToTokenAmount),6)," ",e.txInfo.status.quote.toToken.symbol]})," "]}),o.jsx(q,{y:"xxs"}),o.jsx(_,{flex:"row",center:"y",gap:"xxs",style:{justifyContent:"space-between"},children:o.jsx(hl,{chain:wt(e.txInfo.status.quote.toToken.chainId),size:"xs",client:e.client})})]})]}),o.jsx(_,{flex:"row",gap:"xxs",center:"y",children:o.jsx(F,{size:"xs",color:t.color,children:t.status})})]})}const P2=Ti(Ie)(()=>{const e=gt();return{background:e.colors.tertiaryBg,"&:hover":{background:e.colors.secondaryButtonBg},height:wo}});async function ul(e){var t;try{const n=new URLSearchParams({intentId:e.intentId}).toString(),r=`${C2()}?${n}`,s=await Qn(e.client)(r);if(!s.ok)throw(t=s.body)==null||t.cancel(),new Error(`HTTP error! status: ${s.status}`);return(await s.json()).result}catch(i){throw console.error("Fetch error:",i),new Error(`Fetch failed: ${i}`)}}function af(e){return Ct({queryKey:["useBuyWithFiatStatus",e],queryFn:async()=>{if(!e)throw new Error("No params provided");return ul(e)},enabled:!!e,refetchInterval:5e3,refetchIntervalInBackground:!0,retry:!0})}function Rr(e){const t=L.useMemo(()=>wt(e.chainId),[e.chainId]),{name:i}=si(t);return o.jsxs(_,{flex:"row",style:{justifyContent:"space-between"},children:[o.jsx(F,{size:"sm",children:e.label}),o.jsxs(_,{flex:"column",gap:"xxs",style:{alignItems:"flex-end"},children:[o.jsxs(_,{flex:"row",gap:"xs",center:"y",children:[o.jsx(wr,{chain:t,size:"sm",token:{address:e.tokenAddress},client:e.client}),o.jsxs(F,{color:"primaryText",children:[ft(Number(e.tokenAmount),6)," ",e.tokenSymbol]})]}),o.jsx(F,{size:"sm",children:i})]})]})}const z2=e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"0 0 512 512","aria-hidden":"true",children:[o.jsx("mask",{id:"a",children:o.jsx("circle",{cx:"256",cy:"256",r:"256",fill:"#fff"})}),o.jsxs("g",{mask:"url(#a)",children:[o.jsx("path",{fill:"#d80027",d:"M0 0v512h144l112-64 112 64h144V0H368L256 64 144 0Z"}),o.jsx("path",{fill:"#eee",d:"M144 0h224v512H144Z"}),o.jsx("path",{fill:"#d80027",d:"m301 289 44-22-22-11v-22l-45 22 23-44h-23l-22-34-22 33h-23l23 45-45-22v22l-22 11 45 22-12 23h45v33h22v-33h45z"})]})]}),R2=e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"0 0 512 512","aria-hidden":"true",children:[o.jsx("mask",{id:"a",children:o.jsx("circle",{cx:"256",cy:"256",r:"256",fill:"#fff"})}),o.jsxs("g",{mask:"url(#a)",children:[o.jsx("path",{fill:"#0052b4",d:"M0 0h512v512H0z"}),o.jsx("path",{fill:"#ffda44",d:"m256 100.2 8.3 25.5H291l-21.7 15.7 8.3 25.6-21.7-15.8-21.7 15.8 8.3-25.6-21.7-15.7h26.8zm-110.2 45.6 24 12.2 18.9-19-4.2 26.5 23.9 12.2-26.5 4.2-4.2 26.5-12.2-24-26.5 4.3 19-19zM100.2 256l25.5-8.3V221l15.7 21.7 25.6-8.3-15.8 21.7 15.8 21.7-25.6-8.3-15.7 21.7v-26.8zm45.6 110.2 12.2-24-19-18.9 26.5 4.2 12.2-23.9 4.2 26.5 26.5 4.2-24 12.2 4.3 26.5-19-19zM256 411.8l-8.3-25.5H221l21.7-15.7-8.3-25.6 21.7 15.8 21.7-15.8-8.3 25.6 21.7 15.7h-26.8zm110.2-45.6-24-12.2-18.9 19 4.2-26.5-23.9-12.2 26.5-4.2 4.2-26.5 12.2 24 26.5-4.3-19 19zM411.8 256l-25.5 8.3V291l-15.7-21.7-25.6 8.3 15.8-21.7-15.8-21.7 25.6 8.3 15.7-21.7v26.8zm-45.6-110.2-12.2 24 19 18.9-26.5-4.2-12.2 23.9-4.2-26.5-26.5-4.2 24-12.2-4.3-26.5 19 19z"})]})]}),O2=e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",id:"Layer_1",x:"0px",y:"0px",width:e.size,height:e.size,viewBox:"0 0 512 512","aria-hidden":"true",children:[o.jsx("circle",{fill:"#F0F0F0",cx:"256",cy:"256",r:"256"}),o.jsxs("g",{children:[o.jsx("path",{fill:"#0052B4",d:"M52.92,100.142c-20.109,26.163-35.272,56.318-44.101,89.077h133.178L52.92,100.142z"}),o.jsx("path",{fill:"#0052B4",d:"M503.181,189.219c-8.829-32.758-23.993-62.913-44.101-89.076l-89.075,89.076H503.181z"}),o.jsx("path",{fill:"#0052B4",d:"M8.819,322.784c8.83,32.758,23.993,62.913,44.101,89.075l89.074-89.075L8.819,322.784L8.819,322.784   z"}),o.jsx("path",{fill:"#0052B4",d:"M411.858,52.921c-26.163-20.109-56.317-35.272-89.076-44.102v133.177L411.858,52.921z"}),o.jsx("path",{fill:"#0052B4",d:"M100.142,459.079c26.163,20.109,56.318,35.272,89.076,44.102V370.005L100.142,459.079z"}),o.jsx("path",{fill:"#0052B4",d:"M189.217,8.819c-32.758,8.83-62.913,23.993-89.075,44.101l89.075,89.075V8.819z"}),o.jsx("path",{fill:"#0052B4",d:"M322.783,503.181c32.758-8.83,62.913-23.993,89.075-44.101l-89.075-89.075V503.181z"}),o.jsx("path",{fill:"#0052B4",d:"M370.005,322.784l89.075,89.076c20.108-26.162,35.272-56.318,44.101-89.076H370.005z"})]}),o.jsxs("g",{children:[o.jsx("path",{fill:"#D80027",d:"M509.833,222.609h-220.44h-0.001V2.167C278.461,0.744,267.317,0,256,0   c-11.319,0-22.461,0.744-33.391,2.167v220.44v0.001H2.167C0.744,233.539,0,244.683,0,256c0,11.319,0.744,22.461,2.167,33.391   h220.44h0.001v220.442C233.539,511.256,244.681,512,256,512c11.317,0,22.461-0.743,33.391-2.167v-220.44v-0.001h220.442   C511.256,278.461,512,267.319,512,256C512,244.683,511.256,233.539,509.833,222.609z"}),o.jsx("path",{fill:"#D80027",d:"M322.783,322.784L322.783,322.784L437.019,437.02c5.254-5.252,10.266-10.743,15.048-16.435   l-97.802-97.802h-31.482V322.784z"}),o.jsx("path",{fill:"#D80027",d:"M189.217,322.784h-0.002L74.98,437.019c5.252,5.254,10.743,10.266,16.435,15.048l97.802-97.804   V322.784z"}),o.jsx("path",{fill:"#D80027",d:"M189.217,189.219v-0.002L74.981,74.98c-5.254,5.252-10.266,10.743-15.048,16.435l97.803,97.803   H189.217z"}),o.jsx("path",{fill:"#D80027",d:"M322.783,189.219L322.783,189.219L437.02,74.981c-5.252-5.254-10.743-10.266-16.435-15.047   l-97.802,97.803V189.219z"})]})]}),B2=e=>o.jsx("svg",{width:e.size,height:e.size,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",role:"presentation",children:o.jsxs("g",{fill:"none","fill-rule":"evenodd",children:[o.jsx("circle",{cx:"16",cy:"16",fill:"#a81b1b",r:"16"}),o.jsx("path",{d:"M17.548 18.711v1.878h5.063v2.288h-5.063V25.5h-3.096v-2.623H9.389v-2.288h5.063v-1.878H9.389v-2.288h4.171L7.5 7.5h3.752l4.8 7.534L20.853 7.5H24.5l-6.086 8.923h4.197v2.288z",fill:"#ffffff"})]})}),q2=e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:e.size,height:e.size,x:"0px",y:"0px",viewBox:"0 0 512 512","aria-hidden":"true",children:[o.jsx("circle",{fill:"#F0F0F0",cx:"256",cy:"256",r:"256"}),o.jsxs("g",{children:[o.jsx("path",{fill:"#D80027",d:"M244.87,256H512c0-23.106-3.08-45.49-8.819-66.783H244.87V256z"}),o.jsx("path",{fill:"#D80027",d:"M244.87,122.435h229.556c-15.671-25.572-35.708-48.175-59.07-66.783H244.87V122.435z"}),o.jsx("path",{fill:"#D80027",d:"M256,512c60.249,0,115.626-20.824,159.356-55.652H96.644C140.374,491.176,195.751,512,256,512z"}),o.jsx("path",{fill:"#D80027",d:"M37.574,389.565h436.852c12.581-20.529,22.338-42.969,28.755-66.783H8.819   C15.236,346.596,24.993,369.036,37.574,389.565z"})]}),o.jsx("path",{fill:"#0052B4",d:"M118.584,39.978h23.329l-21.7,15.765l8.289,25.509l-21.699-15.765L85.104,81.252l7.16-22.037  C73.158,75.13,56.412,93.776,42.612,114.552h7.475l-13.813,10.035c-2.152,3.59-4.216,7.237-6.194,10.938l6.596,20.301l-12.306-8.941  c-3.059,6.481-5.857,13.108-8.372,19.873l7.267,22.368h26.822l-21.7,15.765l8.289,25.509l-21.699-15.765l-12.998,9.444  C0.678,234.537,0,245.189,0,256h256c0-141.384,0-158.052,0-256C205.428,0,158.285,14.67,118.584,39.978z M128.502,230.4  l-21.699-15.765L85.104,230.4l8.289-25.509l-21.7-15.765h26.822l8.288-25.509l8.288,25.509h26.822l-21.7,15.765L128.502,230.4z   M120.213,130.317l8.289,25.509l-21.699-15.765l-21.699,15.765l8.289-25.509l-21.7-15.765h26.822l8.288-25.509l8.288,25.509h26.822  L120.213,130.317z M220.328,230.4l-21.699-15.765L176.93,230.4l8.289-25.509l-21.7-15.765h26.822l8.288-25.509l8.288,25.509h26.822  l-21.7,15.765L220.328,230.4z M212.039,130.317l8.289,25.509l-21.699-15.765l-21.699,15.765l8.289-25.509l-21.7-15.765h26.822  l8.288-25.509l8.288,25.509h26.822L212.039,130.317z M212.039,55.743l8.289,25.509l-21.699-15.765L176.93,81.252l8.289-25.509  l-21.7-15.765h26.822l8.288-25.509l8.288,25.509h26.822L212.039,55.743z"})]}),cf={shorthand:"USD",name:"US Dollar",icon:q2},fl=[cf,{shorthand:"CAD",name:"Canadian Dollar",icon:z2},{shorthand:"GBP",name:"British Pound",icon:O2},{shorthand:"EUR",name:"Euro",icon:R2},{shorthand:"JPY",name:"Japanese Yen",icon:B2}];function lf(e){return fl.find(t=>t.shorthand.toLowerCase()===e.toLowerCase())??{icon:F2,name:e,shorthand:e}}const F2=e=>o.jsx(Y1,{width:e.size,height:e.size});function df(e){var s,a,l;const t=br(wt(e.token.chainId)),i=(s=e.statusMeta)==null?void 0:s.txHash,n=lf(e.fiat.currencySymbol),r=o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsx(qe,{}),o.jsx(q,{y:"md"})]});return o.jsxs("div",{children:[o.jsxs(_,{flex:"row",style:{justifyContent:"space-between"},children:[o.jsx(F,{children:"Pay"}),o.jsx(_,{flex:"column",gap:"xxs",style:{alignItems:"flex-end"},children:o.jsxs(_,{flex:"row",gap:"xs",center:"y",children:[o.jsx(n.icon,{size:U.sm}),o.jsxs(F,{color:"primaryText",children:[ft(Number(e.fiat.amount),2)," ",e.fiat.currencySymbol]})]})})]}),r,o.jsx(Rr,{chainId:e.token.chainId,client:e.client,label:"Receive",tokenAmount:e.token.amount,tokenSymbol:e.token.symbol,tokenAddress:e.token.address}),e.statusMeta&&o.jsxs(o.Fragment,{children:[r,o.jsxs(_,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[o.jsx(F,{children:"Status"}),o.jsx(_,{flex:"row",gap:"xs",center:"y",children:o.jsx(F,{color:e.statusMeta.color,children:e.statusMeta.text})})]})]}),r,i&&((l=(a=t.explorers)==null?void 0:a[0])==null?void 0:l.url)&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsxs(qr,{fullWidth:!0,variant:"outline",href:`${t.explorers[0].url||""}/tx/${i}`,target:"_blank",gap:"xs",style:{fontSize:je.sm},children:["View on Explorer",o.jsx(Fr,{width:U.sm,height:U.sm})]})]})]})}function ii(e){return mt(e.token)?o.jsx(U2,{chain:e.chain,size:e.size,color:e.color,inline:e.inline}):o.jsx(F,{size:e.size,color:e.color||"primaryText",inline:e.inline,children:e.token.symbol})}function U2(e){const t=Zh(e.chain);return t.isLoading?o.jsx(lt,{width:"70px",height:je[e.size]}):o.jsx(F,{size:e.size,color:e.color||"primaryText",inline:e.inline,children:t.symbol??"ETH"})}function hf(e){return o.jsx(_,{flex:"row",center:"both",color:e.isDone?"success":e.isActive?"accentText":"secondaryText",children:o.jsx(H2,{children:e.isDone?o.jsx(Ys,{width:U.sm,height:U.sm}):o.jsx($2,{"data-active":e.isActive})})})}function Oo(e){return o.jsxs(_,{flex:"row",center:"y",gap:"xs",style:{fontSize:je.sm},color:e.isDone?"success":e.isActive?"accentText":"secondaryText",children:[o.jsx(hf,{isDone:e.isDone,isActive:e.isActive}),e.label]})}const W2=$c`
0% {
  opacity: 1;
  transform: scale(0.5);
}
100% {
  opacity: 0;
  transform: scale(1.5);
}
`,$2=Sr(()=>({background:"currentColor",width:"9px",height:"9px",borderRadius:"50%",'&[data-active="true"]':{animation:`${W2} 1s infinite`}})),H2=Sr(()=>({border:"1px solid currentColor",width:"20px",height:"20px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"}));function od(e){return{fromCurrencyAmount:e.fromCurrencyWithFees.amount,fromCurrencySymbol:e.fromCurrencyWithFees.currencySymbol,onRampTokenAmount:e.onRampToken.amount,toTokenAmount:e.estimatedToAmountMin,onRampToken:{chainId:e.onRampToken.token.chainId,tokenAddress:e.onRampToken.token.tokenAddress,name:e.onRampToken.token.name,symbol:e.onRampToken.token.symbol},toToken:{chainId:e.toToken.chainId,tokenAddress:e.toToken.tokenAddress,name:e.toToken.name,symbol:e.toToken.symbol}}}function uf(e){var I,w,u,f,T,$,V,j,O,R,Q,K,G;const t=e.status?ha(e.status):void 0,{toToken:i,onRampToken:n,onRampTokenAmount:r,fromCurrencySymbol:s,fromCurrencyAmount:a,toTokenAmount:l}=e.partialQuote,d=lf(s),g=(t==null?void 0:t.progressStatus)==="partialSuccess",y=L.useMemo(()=>wt(i.chainId),[i.chainId]),b=L.useMemo(()=>{var te,J,ne;if(((te=e.status)==null?void 0:te.status)!=="NOT_FOUND"&&((J=e.status)!=null&&J.destination))return wt((ne=e.status)==null?void 0:ne.destination.token.chainId)},[e.status]),M=L.useMemo(()=>i.tokenAddress===At?cn:{address:i.tokenAddress,name:i.name||"",symbol:i.symbol||""},[i]),A=L.useMemo(()=>wt(n.chainId),[n.chainId]),S=L.useMemo(()=>n.tokenAddress===At?cn:{address:n.tokenAddress,name:n.name||"",symbol:n.symbol||""},[n]),C=si(A),k=br(A),N=si(y),D=br(y),B=si(b),P=o.jsx("div",{children:o.jsxs(F,{color:"primaryText",size:"sm",children:[ft(Number(r),6)," ",o.jsx(ii,{token:S,chain:A,size:"sm",inline:!0})]})}),z=o.jsx(d.icon,{size:U.sm}),W=o.jsx(wr,{token:S,chain:A,size:"sm",client:e.client}),Y=o.jsx(wr,{token:M,chain:y,size:"sm",client:e.client}),Z=o.jsx(F,{size:"xs",children:C.name}),X=(((I=e.status)==null?void 0:I.status)==="CRYPTO_SWAP_FALLBACK"&&e.status.destination?o.jsxs("div",{children:[o.jsxs(F,{color:"secondaryText",size:"sm",inline:!0,style:{textDecoration:"line-through"},children:[ft(Number(l),6)," ",o.jsx(ii,{token:M,chain:y,size:"sm",inline:!0,color:"secondaryText"})]})," ",o.jsxs(F,{color:"danger",size:"sm",inline:!0,children:[ft(Number(e.status.destination.amount),6)," ",o.jsx(ii,{token:{address:e.status.destination.token.tokenAddress,name:e.status.destination.token.name||"",symbol:e.status.destination.token.symbol||""},chain:y,size:"sm",inline:!0,color:"danger"})]})]}):null)||o.jsxs(F,{color:"primaryText",size:"sm",children:[ft(Number(l),6)," ",o.jsx(ii,{token:M,chain:y,size:"sm",inline:!0})]}),m=(((w=e.status)==null?void 0:w.status)==="CRYPTO_SWAP_FALLBACK"&&e.status.destination&&e.status.destination.token.chainId!==e.status.quote.toToken.chainId?o.jsxs("div",{children:[o.jsx(F,{size:"xs",inline:!0,style:{textDecoration:"line-through"},children:N.name})," ",o.jsx(F,{size:"xs",inline:!0,children:B.name})]}):null)||o.jsx(F,{size:"xs",children:N.name}),c=((u=e.status)==null?void 0:u.status)!=="NOT_FOUND"?(T=(f=e.status)==null?void 0:f.source)==null?void 0:T.transactionHash:void 0,h=(($=e.status)==null?void 0:$.status)!=="NOT_FOUND"?(j=(V=e.status)==null?void 0:V.destination)==null?void 0:j.transactionHash:void 0,p=!e.status||e.status.status==="CRYPTO_SWAP_REQUIRED"||e.status.status==="CRYPTO_SWAP_FAILED";function v(){return t?t.step===2?"completed":t.progressStatus:e.step===2?"completed":"actionRequired"}function x(){if(!t)return e.step===2?"actionRequired":void 0;if(t.step===2)return t.progressStatus}return o.jsxs(_,{p:"lg",children:[o.jsx(Oe,{title:e.title,onBack:e.onBack}),o.jsx(q,{y:"lg"}),o.jsx(ad,{title:o.jsxs(F,{color:"primaryText",size:"md",children:["Get"," ",o.jsx(ii,{token:S,chain:A,size:"md",inline:!0})," ","with ",e.partialQuote.fromCurrencySymbol]}),step:1,from:{icon:z,primaryText:o.jsxs(F,{color:"primaryText",size:"sm",children:[ft(Number(a),6)," ",s]})},to:{icon:W,primaryText:P,secondaryText:Z},state:v(),explorer:(O=k.explorers[0])!=null&&O.url&&c?{label:"View on Explorer",url:`${(R=k.explorers[0])==null?void 0:R.url}/tx/${c}`}:void 0}),o.jsx(q,{y:"md"}),o.jsx(ad,{title:o.jsxs(F,{color:"primaryText",size:"md",children:["Convert"," ",o.jsx(ii,{token:S,chain:A,size:"md",inline:!0})," ","to ",o.jsx(ii,{token:M,chain:y,size:"md",inline:!0})]}),step:2,from:{icon:W,primaryText:P,secondaryText:Z},to:{icon:Y,primaryText:X,secondaryText:m},state:x(),explorer:(Q=D.explorers[0])!=null&&Q.url&&h?{label:"View on Explorer",url:`${D.explorers[0].url}/tx/${h}`}:void 0}),g&&e.status&&e.status.status!=="NOT_FOUND"&&e.status.source&&e.status.destination&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsxs(F,{color:"danger",size:"sm",center:!0,children:["Expected ",(K=e.status.source)==null?void 0:K.token.symbol,", Got"," ",(G=e.status.destination)==null?void 0:G.token.symbol," instead"]}),o.jsx(q,{y:"sm"})]}),p&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsx(Ie,{variant:"accent",onClick:e.onContinue,fullWidth:!0,children:"Continue"})]})]})}function ad(e){return o.jsxs(Y2,{state:e.state,children:[o.jsxs(F,{size:"sm",children:["Step ",e.step]}),o.jsx(q,{y:"sm"}),e.title,o.jsx(q,{y:"sm"}),o.jsx(qe,{}),o.jsx(q,{y:"md"}),o.jsx(cd,{...e.from}),o.jsxs(_,{color:"borderColor",style:{paddingLeft:"18px",position:"relative",marginBlock:"3px"},children:[o.jsx("div",{style:{height:"18px",width:"2px",backgroundColor:"currentColor",transform:"translateX(-50%)"}}),o.jsx(Q1,{width:U.sm,height:U.sm,style:{position:"absolute",bottom:"0",transform:"translate(-50%, 50%)"}})]}),o.jsx(cd,{...e.to}),e.explorer&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsxs(qr,{variant:"outline",fullWidth:!0,href:e.explorer.url,style:{fontSize:je.xs,padding:ie.xs},gap:"xxs",target:"_blank",children:[e.explorer.label," ",o.jsx(Fr,{width:U.xs,height:U.xs})]})]})]})}function cd(e){return o.jsxs(_,{flex:"row",gap:"sm",center:"y",style:{flexWrap:"nowrap"},children:[o.jsx(_,{p:"xs",borderColor:"borderColor",flex:"row",center:"both",style:{borderStyle:"solid",borderWidth:"1.5px",borderRadius:pt.lg},children:e.icon}),o.jsxs(_,{flex:"column",gap:"xxs",children:[e.primaryText,e.secondaryText]})]})}function Y2(e){let t="borderColor",i;return e.state==="pending"?(i="Pending",t="accentText"):e.state==="actionRequired"?t="accentText":e.state==="completed"?(i="Completed",t="success"):e.state==="failed"?(t="danger",i="Failed"):e.state==="partialSuccess"&&(t="danger",i="Incomplete"),o.jsxs(_,{bg:"tertiaryBg",borderColor:t==="success"?"borderColor":t,py:"sm",px:"md",style:{borderRadius:pt.lg,alignItems:"flex-start",borderWidth:"1px",borderStyle:"solid",position:"relative"},children:[e.children,o.jsxs("div",{style:{position:"absolute",right:ie.sm,top:ie.sm,display:"flex",gap:ie.xs,alignItems:"center"},children:[e.state&&i&&o.jsx(F,{size:"sm",color:t,children:i}),(e.state==="actionRequired"||e.state==="completed")&&o.jsx(hf,{isActive:e.state==="actionRequired",isDone:e.state==="completed"}),e.state==="pending"&&o.jsx(Mt,{color:"accentText",size:"sm"}),e.state==="failed"&&o.jsx(_,{color:"danger",flex:"row",center:"both",children:o.jsx(V1,{width:U.sm,height:U.sm})})]})]})}async function ff(e){var t;try{const n=await Qn(e.client)(j2(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({fromAddress:e.fromAddress,toAddress:e.toAddress,fromChainId:e.fromChainId.toString(),fromTokenAddress:e.fromTokenAddress,toChainId:e.toChainId.toString(),toTokenAddress:e.toTokenAddress,fromAmount:e.fromAmount,toAmount:e.toAmount,maxSlippageBPS:e.maxSlippageBPS,intentId:e.intentId,purchaseData:e.purchaseData})});if(!n.ok){const a=await n.json();throw a&&"error"in a?a:new Error(`HTTP error! status: ${n.status}`)}const r=(await n.json()).result;return{transactionRequest:{chain:wt(r.transactionRequest.chainId),client:e.client,data:r.transactionRequest.data,to:r.transactionRequest.to,value:BigInt(r.transactionRequest.value),gas:BigInt(r.transactionRequest.gasLimit),gasPrice:BigInt(r.transactionRequest.gasPrice)},approval:r.approval?fu({contract:Wi({client:e.client,address:r.approval.tokenAddress,chain:wt(r.approval.chainId)}),spender:(t=r.approval)==null?void 0:t.spenderAddress,amountWei:BigInt(r.approval.amountWei)}):void 0,swapDetails:{fromAddress:r.fromAddress,toAddress:r.toAddress,fromToken:r.fromToken,toToken:r.toToken,fromAmount:r.fromAmount,fromAmountWei:r.fromAmountWei,toAmountMinWei:r.toAmountMinWei,toAmountMin:r.toAmountMin,toAmountWei:r.toAmountWei,toAmount:r.toAmount,estimated:r.estimated,maxSlippageBPS:r.maxSlippageBPS},paymentTokens:r.paymentTokens,processingFees:r.processingFees,client:e.client}}catch(i){throw console.error("Error getting buy with crypto quote",i),i}}async function Q2({client:e,buyWithFiatStatus:t}){if(t.status==="NOT_FOUND")throw new Error("Invalid buyWithFiatStatus");return ff({client:e,intentId:t.intentId,fromAddress:t.fromAddress,toAddress:t.toAddress,fromChainId:t.quote.onRampToken.chainId,fromTokenAddress:t.quote.onRampToken.tokenAddress,toChainId:t.quote.toToken.chainId,toTokenAddress:t.quote.toToken.tokenAddress,toAmount:t.quote.estimatedToTokenAmount})}function gl(e){return o.jsx(_,{bg:"tertiaryBg",flex:"row",style:{height:"8px",borderRadius:pt.lg},children:o.jsx(_,{bg:"accentText",style:{width:`${e.currentStep/e.steps*95}%`,borderRadius:pt.lg},children:null})})}function ml(e){const[t,i]=L.useState(!1);return o.jsx(Ie,{...e,gap:"xs",onClick:async()=>{i(!0);try{await e.switchChain()}catch{}i(!1)},children:t?o.jsxs(o.Fragment,{children:["Switching",o.jsx(Mt,{size:"sm",color:"accentButtonText"})]}):"Switch Network"})}function gf(e){return o.jsx(_,{flex:"column",gap:"xs",style:{alignItems:e.align==="right"?"flex-end":"flex-start"},children:e.quote.processingFees.map(t=>{const i=ft(Number(t.amount),6);return o.jsxs(_,{flex:"column",gap:"xxs",children:[o.jsxs(F,{color:"primaryText",size:"sm",style:{textAlign:"right"},children:[i===0?"~":"",i," ",t.token.symbol]}),o.jsxs(F,{color:"secondaryText",size:"xs",style:{textAlign:"right"},children:["$",(t.amountUSDCents/100).toFixed(2)]})]},`${t.token.chainId}_${t.token.tokenAddress}_${i}`)})})}function V2(e){return o.jsxs(_,{flex:"column",gap:"xs",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx(F,{inline:!0,color:"secondaryText",children:"Amount"}),o.jsxs(F,{color:"primaryText",inline:!0,children:[ft(Number(e.quote.fromCurrency.amount),2)," ",e.quote.fromCurrency.currencySymbol]})]}),e.quote.processingFees.map((t,i)=>{const n=ft(Number(t.amount),6);return o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx(F,{inline:!0,color:"secondaryText",children:t.feeType==="NETWORK"?"Network Fee":"Processing Fee"}),o.jsxs(F,{color:"primaryText",inline:!0,children:[n===0?"~":"",n," ",t.currencySymbol," "]})]},i)}),o.jsx(q,{y:"xxs"}),o.jsx(qe,{}),o.jsx(q,{y:"xxs"}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx(F,{inline:!0,color:"secondaryText",children:"Total"}),o.jsxs(F,{color:"primaryText",inline:!0,children:[ft(Number(e.quote.fromCurrencyWithFees.amount),6)," ",e.quote.fromCurrencyWithFees.currencySymbol]})]})]})}function pl(e){if(e>3600){const t=Math.floor(e/3600),i=Math.floor(e%3600/60);return`${t} Hours ${i} Minutes`}return e>60?`${Math.ceil(e/60)} Minutes`:`${e}s`}const Bo=K1([]),yl=e=>{const t=Bo.getValue();Bo.setValue([e,...t])};function K2(e){const t=e.quote.approval!==void 0,i=t?"approval":"swap",[n,r]=L.useState(i),[s,a]=L.useState("idle"),l=e.quote.swapDetails.toAddress,d=e.quote.swapDetails.fromAddress,g=l.toLowerCase()!==d.toLowerCase(),y=Yc({client:e.client,address:l});return o.jsxs(_,{p:"lg",children:[o.jsx(Oe,{title:e.title,onBack:e.onBack}),e.isFiatFlow?o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"lg"}),o.jsx(gl,{steps:2,currentStep:2}),o.jsx(q,{y:"sm"}),o.jsxs(F,{size:"xs",children:["Step 2 of 2 - Converting ",e.fromTokenSymbol," to"," ",e.toTokenSymbol]}),o.jsx(q,{y:"md"})]}):o.jsx(q,{y:"lg"}),o.jsx(Ms,{label:"Pay",children:o.jsx(ld,{chain:e.fromChain,amount:String(ft(Number(e.fromAmount),6)),symbol:e.fromTokenSymbol||"",token:e.fromToken,client:e.client})}),!g&&o.jsx(Ms,{label:"Receive",children:o.jsx(ld,{chain:e.toChain,amount:String(ft(Number(e.toAmount),6)),symbol:e.toTokenSymbol,token:e.toToken,client:e.client})}),o.jsx(Ms,{label:"Fees",children:o.jsx(gf,{quote:e.quote,align:"right"})}),o.jsx(Ms,{label:"Time",children:o.jsxs(F,{size:"sm",color:"primaryText",children:["~",pl(e.quote.swapDetails.estimated.durationSeconds||0)]})}),g&&o.jsx(Ms,{label:"Seller",children:o.jsx(F,{color:"primaryText",size:"sm",children:y.data||vr(l)})}),o.jsx(q,{y:"xl"}),t&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"sm"}),o.jsxs(_,{gap:"sm",flex:"row",style:{justifyContent:"space-between"},center:"y",color:"accentText",children:[o.jsx(Oo,{isDone:n==="swap",isActive:n==="approval",label:n==="approval"?"Approve":"Approved"}),o.jsx(mf,{}),o.jsx(Oo,{isDone:!1,label:"Confirm",isActive:n==="swap"})]}),o.jsx(q,{y:"lg"})]}),s==="error"&&o.jsxs(o.Fragment,{children:[o.jsxs(_,{flex:"row",gap:"xs",center:"both",color:"danger",children:[o.jsx(Nn,{width:U.sm,height:U.sm}),o.jsx(F,{color:"danger",size:"sm",children:n==="approval"?"Failed to Approve":"Failed to Confirm"})]}),o.jsx(q,{y:"md"})]}),e.payer.chain.id!==e.fromChain.id?o.jsx(ml,{fullWidth:!0,variant:"accent",switchChain:async()=>{await e.payer.wallet.switchChain(e.fromChain)}}):o.jsxs(Ie,{variant:"accent",fullWidth:!0,disabled:s==="pending",onClick:async()=>{if(n==="approval"&&e.quote.approval)try{a("pending");const b=await Vr({account:e.payer.account,transaction:e.quote.approval});await Co({...b,maxBlocksWaitTime:50}),r("swap"),a("idle")}catch(b){console.error(b),a("error")}if(n==="swap"){a("pending");try{let b=e.quote.transactionRequest;(e.payer.wallet.id==="inApp"||e.payer.wallet.id==="embedded")&&(b={...e.quote.transactionRequest,gasPrice:void 0});const M=await Vr({account:e.payer.account,transaction:b});await Co({...M,maxBlocksWaitTime:50}),e.isFiatFlow||yl({type:"swap",txHash:M.transactionHash}),e.setSwapTxHash(M.transactionHash)}catch(b){console.error(b),a("error")}}},gap:"xs",children:[n==="approval"&&(s==="pending"?"Approving":"Approve"),n==="swap"&&(s==="pending"?"Confirming":"Confirm"),s==="pending"&&o.jsx(Mt,{size:"sm",color:"accentButtonText"})]})]})}const mf=Sr(()=>({height:"4px",background:gt().colors.borderColor,flex:1}));function ld(e){const{name:t}=si(e.chain);return o.jsxs(_,{flex:"column",gap:"xxs",style:{alignItems:"flex-end"},children:[o.jsxs(_,{flex:"row",center:"y",gap:"xs",children:[o.jsxs(F,{color:"primaryText",size:"sm",children:[e.amount," ",e.symbol]}),o.jsx(wr,{token:e.token,chain:e.chain,size:"xs",client:e.client})]}),t?o.jsx(F,{size:"xs",children:t}):o.jsx(lt,{width:"100px",height:je.xs})]})}function Ms(e){return o.jsxs(o.Fragment,{children:[o.jsxs(_,{flex:"row",gap:"md",py:"md",style:{justifyContent:"space-between"},children:[o.jsx(F,{size:"sm",color:"secondaryText",children:e.label}),e.children]}),o.jsx(qe,{})]})}async function pf(e){var t;try{if(!e.transactionHash)throw new Error("Transaction hash is required");const i=new URLSearchParams({transactionHash:e.transactionHash}).toString(),n=`${S2()}?${i}`,r=await Qn(e.client)(n);if(!r.ok)throw(t=r.body)==null||t.cancel(),new Error(`HTTP error! status: ${r.status}`);return(await r.json()).result}catch(i){throw console.error("Fetch error:",i),new Error(`Fetch failed: ${i}`)}}function yf(e){return Ct({queryKey:["getBuyWithCryptoStatus",e==null?void 0:e.transactionHash],queryFn:async()=>{if(!e)throw new Error("No params");return pf(e)},enabled:!!e,refetchInterval:5e3,refetchIntervalInBackground:!0,retry:!0})}function G2(e){var s,a;const{status:t,client:i}=e,n=yf((s=t.source)!=null&&s.transactionHash?{client:i,transactionHash:t.source.transactionHash}:void 0),r=(((a=n.data)==null?void 0:a.status)!=="NOT_FOUND"?n.data:void 0)||t;return o.jsxs(_,{children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:"Transaction Details",onBack:e.onBack})}),o.jsx(qe,{}),o.jsx(_,{p:"lg",children:o.jsx(wc,{type:"status",status:r,client:i})})]})}function wc(e){var P,z,W,Y,Z,H,X,E;let t,i=!0,n=!1;if(e.type==="status"){n=e.status.swapType==="TRANSFER";const m=e.status;e.hideStatusRow&&(i=!1);const c=m.status==="COMPLETED"&&m.subStatus==="PARTIAL_SUCCESS";t={fromToken:{chainId:m.quote.fromToken.chainId,symbol:m.quote.fromToken.symbol||"",address:m.quote.fromToken.tokenAddress,amount:m.quote.fromAmount},quotedToToken:{chainId:m.quote.toToken.chainId,symbol:m.quote.toToken.symbol||"",address:m.quote.toToken.tokenAddress,amount:m.quote.toAmount},gotToken:m.destination?{chainId:m.destination.token.chainId,symbol:m.destination.token.symbol||"",address:m.destination.token.tokenAddress,amount:m.destination.amount}:void 0,statusMeta:of(m),estimatedDuration:m.quote.estimated.durationSeconds||0,isPartialSuccess:c,destinationTxHash:(P=m.destination)==null?void 0:P.transactionHash,sourceTxHash:(z=m.source)==null?void 0:z.transactionHash,fromAddress:m.fromAddress,toAddress:m.toAddress}}else{const m=e.quote;t={fromToken:{chainId:m.swapDetails.fromToken.chainId,symbol:m.swapDetails.fromToken.symbol||"",address:m.swapDetails.fromToken.tokenAddress,amount:m.swapDetails.fromAmount},quotedToToken:{chainId:m.swapDetails.toToken.chainId,symbol:m.swapDetails.toToken.symbol||"",address:m.swapDetails.toToken.tokenAddress,amount:m.swapDetails.toAmount},isPartialSuccess:!1,estimatedDuration:m.swapDetails.estimated.durationSeconds||0,fromAddress:m.swapDetails.fromAddress,toAddress:m.swapDetails.toAddress}}const{client:r}=e,{fromToken:s,quotedToToken:a,statusMeta:l,sourceTxHash:d,destinationTxHash:g,isPartialSuccess:y,gotToken:b,estimatedDuration:M}=t,A=s.chainId,S=a.chainId,C=si(wt(A)),k=br(wt(A)),N=si(wt(S)),D=br(wt(S)),B=o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsx(qe,{}),o.jsx(q,{y:"md"})]});return n?o.jsx("div",{children:((Y=(W=k.explorers)==null?void 0:W[0])==null?void 0:Y.url)&&d&&o.jsxs(qr,{fullWidth:!0,variant:"outline",href:`${k.explorers[0].url}/tx/${d}`,target:"_blank",gap:"xs",style:{fontSize:je.sm,padding:ie.sm},children:["View on ",C.name," Explorer",o.jsx(Fr,{width:U.sm,height:U.sm})]})}):o.jsxs("div",{children:[y&&b?o.jsxs(o.Fragment,{children:[o.jsx(Rr,{chainId:a.chainId,client:r,label:y?"Expected":"Received",tokenAmount:a.amount,tokenSymbol:a.symbol||"",tokenAddress:a.address}),B,o.jsx(Rr,{chainId:b.chainId,client:r,label:"Got",tokenAmount:b.amount,tokenSymbol:b.symbol||"",tokenAddress:b.address})]}):o.jsx(Rr,{chainId:a.chainId,client:r,label:"Receive",tokenAmount:a.amount,tokenSymbol:a.symbol||"",tokenAddress:a.address}),B,o.jsx(Rr,{chainId:s.chainId,client:r,label:"Pay",tokenAmount:s.amount,tokenSymbol:s.symbol||"",tokenAddress:s.address}),B,o.jsxs(_,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[o.jsx(F,{children:" Time "}),o.jsx(_,{flex:"row",gap:"xs",center:"y",children:o.jsxs(F,{color:"primaryText",children:["~",pl(M||0)]})})]}),l&&i&&o.jsxs(o.Fragment,{children:[B,o.jsxs(_,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[o.jsx(F,{children:"Status"}),o.jsx(_,{flex:"row",gap:"xs",center:"y",children:o.jsx(F,{color:l.color,children:l.status})})]})]}),t.fromAddress.toLowerCase()!==t.toAddress.toLowerCase()&&o.jsxs(o.Fragment,{children:[B,o.jsxs(_,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[o.jsx(F,{children:"Send to"}),o.jsx(_,{flex:"row",gap:"xs",center:"y",children:o.jsx(F,{color:"primaryText",size:"sm",children:vr(t.toAddress)})})]})]}),B,((H=(Z=k.explorers)==null?void 0:Z[0])==null?void 0:H.url)&&d&&o.jsxs(qr,{fullWidth:!0,variant:"outline",href:`${k.explorers[0].url}/tx/${d}`,target:"_blank",gap:"xs",style:{fontSize:je.sm,padding:ie.sm},children:["View on ",C.name," Explorer",o.jsx(Fr,{width:U.sm,height:U.sm})]}),g&&d!==g&&((E=(X=D==null?void 0:D.explorers)==null?void 0:X[0])==null?void 0:E.url)&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"sm"}),o.jsxs(qr,{fullWidth:!0,variant:"outline",href:`${D.explorers[0].url}/tx/${g}`,target:"_blank",gap:"xs",style:{fontSize:je.sm,padding:ie.sm},children:["View on ",N.name," Explorer",o.jsx(Fr,{width:U.sm,height:U.sm})]})]})]})}function bf(e){var d,g,y,b,M,A;const{onSuccess:t}=e,i=yf({client:e.client,transactionHash:e.swapTxHash});let n="pending";((d=i.data)==null?void 0:d.status)==="COMPLETED"?n="success":((g=i.data)==null?void 0:g.status)==="FAILED"&&(n="failed"),((y=i.data)==null?void 0:y.status)==="COMPLETED"&&((b=i.data)==null?void 0:b.subStatus)==="PARTIAL_SUCCESS"&&(n="partialSuccess");const r=L.useRef(!1);L.useEffect(()=>{var S;r.current||!t||((S=i.data)==null?void 0:S.status)==="COMPLETED"&&(r.current=!0,t(i.data))},[t,i]);const s=Xo(),a=L.useRef(!1);L.useEffect(()=>{(n==="success"||n==="partialSuccess")&&!a.current&&(a.current=!0,Jh(s))},[s,n]);const l=i.data&&i.data.status!=="NOT_FOUND"?o.jsx(wc,{status:i.data,type:"status",hideStatusRow:!0,client:e.client}):e.quote?o.jsx(wc,{type:"quote",quote:e.quote,client:e.client}):null;return o.jsx(_,{animate:"fadein",children:o.jsxs(_,{p:"lg",children:[o.jsx(Oe,{title:e.title,onBack:e.onBack}),o.jsx(q,{y:"sm"}),n==="success"&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsxs(_,{color:"success",flex:"column",center:"x",children:[o.jsx(ea,{width:U["3xl"],height:U["3xl"]}),o.jsx(q,{y:"sm"}),o.jsx(F,{color:"primaryText",size:"lg",children:"Buy Complete"})]}),o.jsx(q,{y:"xl"}),l,o.jsx(q,{y:"sm"}),!e.isEmbed&&o.jsx(Ie,{variant:"accent",fullWidth:!0,onClick:e.onDone,children:e.transactionMode?"Continue Transaction":"Done"})]}),n==="partialSuccess"&&((M=i.data)==null?void 0:M.status)!=="NOT_FOUND"&&((A=i.data)==null?void 0:A.destination)&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"lg"}),o.jsxs(_,{color:"success",flex:"column",center:"x",children:[o.jsx(Eo,{size:U["3xl"]}),o.jsx(q,{y:"xl"}),o.jsx(F,{color:"primaryText",size:"lg",children:"Incomplete"}),o.jsx(q,{y:"sm"}),o.jsxs(F,{size:"sm",color:"danger",children:["Expected ",i.data.quote.toToken.symbol,", Got"," ",i.data.destination.token.symbol," instead"]})]}),o.jsx(q,{y:"xl"}),l]}),n==="failed"&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"xxl"}),o.jsxs(_,{flex:"column",children:[o.jsxs(_,{flex:"column",center:"both",children:[o.jsx(Eo,{size:U["3xl"]}),o.jsx(q,{y:"xl"}),o.jsx(F,{color:"primaryText",size:"lg",children:"Transaction Failed"}),o.jsx(q,{y:"sm"}),o.jsxs(F,{size:"sm",children:["Your transaction ","couldn't"," be processed"]})]}),o.jsx(q,{y:"md"}),o.jsx(Ie,{variant:"accent",fullWidth:!0,onClick:e.onTryAgain,children:"Try Again"}),o.jsx(q,{y:"xl"}),l]})]}),n==="pending"&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"xl"}),o.jsxs(_,{flex:"column",animate:"fadein",center:"both",children:[o.jsx("div",{style:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:o.jsx(Mt,{size:"3xl",color:"accentText"})}),o.jsx(q,{y:"lg"}),o.jsx(F,{color:"primaryText",size:"lg",children:"Buy Pending"})]}),o.jsx(q,{y:"xxl"}),l]})]})})}function vf(e){const[t,i]=L.useState(),n=e.buyWithCryptoQuote,r=L.useMemo(()=>wt(n.swapDetails.fromToken.chainId),[n]),s=L.useMemo(()=>wt(n.swapDetails.toToken.chainId),[n]),a=n.swapDetails.fromToken.symbol||"",l=n.swapDetails.toToken.symbol||"",d=n.swapDetails.fromAmount,g=n.swapDetails.toAmount,y=n.swapDetails.toToken,b=n.swapDetails.fromToken,M=L.useMemo(()=>y.tokenAddress===At?cn:{address:y.tokenAddress,name:y.name||"",symbol:y.symbol||""},[y]),A=L.useMemo(()=>b.tokenAddress===At?cn:{address:b.tokenAddress,name:b.name||"",symbol:b.symbol||""},[b]);return t?o.jsx(bf,{title:e.title,onBack:e.onBack,onTryAgain:e.onTryAgain,swapTxHash:t,client:e.client,onDone:e.onDone,transactionMode:e.transactionMode,isEmbed:e.isEmbed,quote:n,onSuccess:e.onSuccess}):o.jsx(K2,{title:e.title,setSwapTxHash:i,toChain:s,toAmount:g,toTokenSymbol:l,fromChain:r,toToken:M,fromAmount:d,fromToken:A,fromTokenSymbol:a,client:e.client,onBack:e.onBack,onTryAgain:e.onTryAgain,quote:n,isFiatFlow:e.isFiatFlow,payer:e.payer})}function Z2(e){const[t,i]=L.useState(void 0),n=Ct({queryKey:["getPostOnRampQuote",e.buyWithFiatStatus],queryFn:async()=>await Q2({client:e.client,buyWithFiatStatus:e.buyWithFiatStatus}),enabled:!t,refetchOnWindowFocus:!1});return L.useEffect(()=>{n.data&&!t&&!n.isRefetching&&i(n.data)},[n.data,t,n.isRefetching]),n.isError?o.jsxs(_,{fullHeight:!0,children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:e.title,onBack:e.onBack})}),o.jsxs(_,{style:{minHeight:"300px"},flex:"column",center:"both",p:"lg",children:[o.jsx(Eo,{size:U["3xl"]}),o.jsx(q,{y:"xl"}),o.jsx(F,{color:"primaryText",children:"Failed to get a price quote"}),o.jsx(q,{y:"lg"}),o.jsx(Ie,{fullWidth:!0,variant:"primary",onClick:()=>{n.refetch()},children:"Try Again"})]}),o.jsx(q,{y:"xxl"})]}):t?o.jsx(vf,{title:e.title,payer:e.payer,buyWithCryptoQuote:t,client:e.client,onBack:e.onBack,isFiatFlow:!0,onDone:e.onDone,onTryAgain:()=>{i(void 0),n.refetch()},transactionMode:e.transactionMode,isEmbed:e.isEmbed,onSuccess:e.onSuccess}):o.jsxs(_,{fullHeight:!0,children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:e.title,onBack:e.onBack})}),o.jsxs(_,{style:{minHeight:"300px"},flex:"column",center:"both",children:[o.jsx(Mt,{size:"xxl",color:"accentText"}),o.jsx(q,{y:"xl"}),o.jsx(F,{color:"primaryText",children:"Getting price quote"})]}),o.jsx(q,{y:"xxl"})]})}function xf(e){const[t,i]=L.useState();return t?o.jsx(Z2,{title:e.title,buyWithFiatStatus:t,client:e.client,onDone:e.onDone,transactionMode:e.transactionMode,isEmbed:e.isEmbed,payer:e.payer,onSuccess:e.onSuccess}):o.jsx(uf,{title:e.title,client:e.client,onBack:e.onBack,partialQuote:e.quote,step:2,onContinue:()=>{e.onSwapFlowStarted(),i(e.status)},status:e.status})}function J2(e){var d,g;const t=e.status,[i,n]=L.useState(!1),r=af(i?void 0:{client:e.client,intentId:t.intentId}),s=(((d=r.data)==null?void 0:d.status)==="NOT_FOUND"?void 0:r.data)||t,a=X2(s),l=ha(s);if(a){const y=s.quote;return o.jsx(xf,{title:e.title,client:e.client,status:s,onBack:e.onBack,transactionMode:e.transactionMode,isEmbed:e.isEmbed,quote:{fromCurrencyAmount:y.fromCurrencyWithFees.amount,fromCurrencySymbol:y.fromCurrencyWithFees.currencySymbol,onRampTokenAmount:y.estimatedOnRampAmount,toTokenAmount:y.estimatedToTokenAmount,onRampToken:{chainId:y.onRampToken.chainId,tokenAddress:y.onRampToken.tokenAddress,name:y.onRampToken.name,symbol:y.onRampToken.symbol},toToken:{chainId:y.toToken.chainId,tokenAddress:y.toToken.tokenAddress,name:y.toToken.name,symbol:y.toToken.symbol}},onDone:e.onDone,onSwapFlowStarted:()=>{n(!0)},payer:e.payer,onSuccess:void 0})}return o.jsxs(_,{children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:"Transaction Details",onBack:e.onBack})}),o.jsx(qe,{}),o.jsx(_,{p:"lg",children:o.jsx(df,{client:e.client,token:s.source?{chainId:s.source.token.chainId,address:s.source.token.tokenAddress,symbol:s.source.token.symbol||"",amount:s.source.amount}:{address:s.quote.onRampToken.tokenAddress,amount:s.quote.estimatedOnRampAmount,chainId:s.quote.onRampToken.chainId,symbol:s.quote.onRampToken.symbol||""},fiat:{amount:s.quote.fromCurrencyWithFees.amount,currencySymbol:s.quote.fromCurrencyWithFees.currencySymbol},statusMeta:{color:l.color,text:l.status,txHash:(g=s.source)==null?void 0:g.transactionHash}})})]})}function X2(e){if(e.status==="NOT_FOUND")return!1;const t=e.quote.toToken.chainId===e.quote.onRampToken.chainId,i=e.quote.toToken.tokenAddress===e.quote.onRampToken.tokenAddress;return!(t&&i)}function ey(e){const{statusInfo:t}=e;return t.type==="swap"?o.jsx(G2,{client:e.client,status:t.status,onBack:e.onBack}):t.type==="fiat"?o.jsx(J2,{title:e.title,client:e.client,status:t.status,onBack:e.onBack,onDone:e.onDone,transactionMode:e.transactionMode,isEmbed:e.isEmbed,payer:e.payer}):null}async function ty(e){var t;try{const i=new URLSearchParams;i.append("walletAddress",e.walletAddress),i.append("start",e.start.toString()),i.append("count",e.count.toString());const n=i.toString(),r=`${_2()}?${n}`,s=await Qn(e.client)(r);if(!s.ok)throw(t=s.body)==null||t.cancel(),new Error(`HTTP error! status: ${s.status}`);return(await s.json()).result}catch(i){throw new Error(`Fetch failed: ${i}`)}}function iy(e,t){return Ct({...t,queryKey:["getBuyHistory",e],queryFn:()=>{if(!e)throw new Error("params are required");return ty(e)},enabled:!!e})}function ny(e){const t=ti(),[i,n]=L.useState(0),r=[],s=10,a=iy({walletAddress:(t==null?void 0:t.address)||"",start:i*s,count:s,client:e},{refetchInterval:10*1e3}),l=L.useSyncExternalStore(Bo.subscribe,Bo.getValue),d=Wc({queries:l.map(y=>({queryKey:["pending-tx-status",y],queryFn:async()=>{if(y.type==="swap"){const M=await pf({client:e,transactionHash:y.txHash});return M.status==="NOT_FOUND"||M.status==="NONE"?null:{type:"swap",status:M}}const b=await ul({client:e,intentId:y.intentId});return b.status==="NOT_FOUND"||b.status==="NONE"?null:{type:"fiat",status:b}},refetchInterval:10*1e3}))});if(d.length>0&&i===0){for(const y of d)if(y.data){const b=y.data;a.data?(b.type==="swap"&&(a.data.page.find(A=>{var S,C;return"buyWithCryptoStatus"in A&&A.buyWithCryptoStatus.status!=="NOT_FOUND"?((S=A.buyWithCryptoStatus.source)==null?void 0:S.transactionHash)===((C=b.status.source)==null?void 0:C.transactionHash):!1})||r.push(b)),b.type==="fiat"&&(a.data.page.find(A=>"buyWithFiatStatus"in A&&A.buyWithFiatStatus.status!=="NOT_FOUND"?A.buyWithFiatStatus.intentId===b.status.intentId:!1)||r.push(b))):r.push(b)}}if(a.data)for(const y of a.data.page)"buyWithCryptoStatus"in y?y.buyWithCryptoStatus.status!=="NOT_FOUND"&&y.buyWithCryptoStatus.status!=="NONE"&&r.push({type:"swap",status:y.buyWithCryptoStatus}):y.buyWithFiatStatus.status!=="NOT_FOUND"&&y.buyWithFiatStatus.status!=="NONE"&&r.push({type:"fiat",status:y.buyWithFiatStatus});const g=!a.data||a.data&&!a.data.hasNextPage&&i===0;return{pageIndex:i,setPageIndex:n,txInfosToShow:r,hidePagination:g,isLoading:a.isLoading,pagination:a.data?{hasNextPage:a.data.hasNextPage}:void 0}}function ry(e){const{pageIndex:t,setPageIndex:i,txInfosToShow:n,hidePagination:r,isLoading:s,pagination:a}=ny(e.client),l=n.length===0;return o.jsxs(_,{scrollY:!0,flex:"column",fullHeight:!0,style:{width:"100%",minHeight:"250px",maxHeight:"370px",paddingBottom:ie.lg},children:[o.jsxs(_,{flex:"column",gap:"xs",expand:!0,children:[l&&!s&&o.jsxs(_,{flex:"column",gap:"md",center:"both",color:"secondaryText",style:{minHeight:"250px"},children:[o.jsx(Nn,{width:U.xl,height:U.xl}),o.jsx(F,{children:"No Transactions"})]}),l&&s&&o.jsx(_,{flex:"row",center:"both",style:{minHeight:"250px"},children:o.jsx(Mt,{size:"xl",color:"accentText"})}),n.length>0&&o.jsx(_,{animate:"fadein",flex:"column",gap:"xs",children:n.map(d=>{var g;return o.jsx(L2,{txInfo:d,client:e.client,onClick:()=>{e.onSelectTx(d)}},d.type==="swap"?(g=d.status.source)==null?void 0:g.transactionHash:d.status.intentId)})}),s&&n.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(lt,{width:"100%",height:wo}),o.jsx(lt,{width:"100%",height:wo}),o.jsx(lt,{width:"100%",height:wo})]})]}),a&&!r&&o.jsx(_,{py:"md",children:o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:ie.sm},children:[o.jsxs(Ie,{variant:"outline",gap:"xs",disabled:t===0,"data-disabled":t===0,style:{fontSize:je.sm,paddingBlock:ie.sm},onClick:()=>{i(d=>d-1)},children:[o.jsx(Ul,{width:U.sm,height:U.sm,style:{transform:"rotate(180deg)"}}),"Prev"]}),o.jsxs(Ie,{variant:"outline",gap:"xs",disabled:!a.hasNextPage,"data-disabled":!a.hasNextPage,style:{fontSize:je.sm,paddingBlock:ie.sm},onClick:()=>{i(d=>d+1)},children:["Next",o.jsx(Ul,{width:U.sm,height:U.sm})]})]})})]})}function sy(e){return Ct({queryKey:["waitForReceipt",(e==null?void 0:e.chain.id)||-1,e==null?void 0:e.transactionHash],queryFn:async()=>{if(!(e!=null&&e.transactionHash))throw new Error("No transaction hash or user op hash provided");return Co(e)},enabled:!!(e!=null&&e.transactionHash),retry:!1})}function oy(e){const t=Bt(),i=br(t),n=G1(e.address),s=[...L.useSyncExternalStore(n.subscribe,n.getValue)].reverse();return o.jsx(_,{scrollY:!0,flex:"column",fullHeight:!0,style:{minHeight:"250px",maxHeight:"370px",paddingBottom:ie.lg},children:o.jsx(_,{flex:"column",gap:"xs",expand:!0,children:s.length===0?o.jsxs(_,{flex:"column",gap:"md",center:"both",color:"secondaryText",style:{flex:"1",minHeight:"250px"},children:[o.jsx(Nn,{width:U.xl,height:U.xl}),o.jsx(F,{children:"No Transactions"})]}):o.jsx(_,{animate:"fadein",flex:"column",gap:"xs",style:{minHeight:"250px"},children:s.map(a=>{var l;return o.jsx(ay,{explorerUrl:(l=i.explorers[0])==null?void 0:l.url,client:e.client,hash:a.transactionHash,chainId:a.chainId},a.transactionHash)})})})})}function ay(e){const{data:t,isLoading:i,error:n}=sy({transactionHash:e.hash,chain:wt(e.chainId),client:e.client}),r=Qs(wt(e.chainId)),s=o.jsxs(cy,{variant:"secondary",fullWidth:!0,style:{paddingBlock:ie.sm},children:[o.jsxs(_,{flex:"row",center:"y",gap:"md",style:{flex:1},children:[o.jsx(Un,{chainIconUrl:r.url,size:U.lg,client:e.client}),o.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},children:[o.jsx(_,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"space-between"},children:o.jsx(F,{size:"sm",color:"primaryText",children:t!=null&&t.to?`Interacted with ${Wl(t.to,4)}`:`Hash: ${Wl(e.hash,4)}`})}),o.jsx(q,{y:"xxs"}),o.jsx(_,{flex:"row",center:"y",gap:"xxs",style:{justifyContent:"space-between"},children:o.jsx(hl,{chain:wt(e.chainId),size:"xs",client:e.client})})]})]}),o.jsxs(_,{flex:"row",gap:"xxs",center:"y",children:[i&&o.jsx(Mt,{size:"sm",color:"primaryText"}),!i&&t&&t.status==="success"&&o.jsx(F,{size:"md",color:"success",children:o.jsx(Ys,{width:U.md,height:U.md})}),(n||!i&&t&&t.status!=="success")&&o.jsx(F,{size:"md",color:"danger",children:o.jsx(Nn,{width:U.md,height:U.md})})]})]});return e.explorerUrl?o.jsx("a",{href:`${e.explorerUrl}/tx/${e.hash}`,target:"_blank",rel:"noreferrer",children:s}):s}const cy=Ti(Ie)(()=>{const e=gt();return{background:e.colors.tertiaryBg,"&:hover":{background:e.colors.secondaryButtonBg},height:"62px"}});function ly(e){var y;const[t,i]=L.useState("Transactions"),[n,r]=L.useState(null),s=Bt(),a=$t(),l=ti(),d=br(s),g=s&&l&&a?{chain:s,account:l,wallet:a}:void 0;return g?n?o.jsx(ey,{title:e.title,client:e.client,statusInfo:n,onBack:()=>r(null),onDone:()=>r(null),payer:g,transactionMode:!1,isEmbed:!1}):o.jsxs(_,{animate:"fadein",children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:e.locale.transactions,onBack:e.onBack})}),o.jsx(qe,{}),o.jsxs(_,{px:"lg",scrollY:!0,style:{minHeight:"330px"},children:[o.jsx(q,{y:"md"}),o.jsxs(nf,{options:[{label:o.jsxs("span",{className:"flex gap-2",children:[o.jsx(da,{size:U.sm})," Transactions"]}),value:"Transactions"},{label:o.jsxs("span",{className:"flex gap-2",children:[o.jsx(rf,{size:U.sm})," Purchases"]}),value:"Purchases"}],selected:t,onSelect:i,children:[t==="Purchases"&&o.jsx(ry,{client:e.client,onSelectTx:r}),t==="Transactions"&&o.jsx(oy,{locale:e.locale,client:e.client,address:g.account.address})]})]}),o.jsx(qe,{}),o.jsx(_,{p:"lg",children:o.jsxs(qr,{fullWidth:!0,variant:"outline",href:`${(y=d.explorers[0])==null?void 0:y.url}/address/${l==null?void 0:l.address}`,target:"_blank",as:"a",gap:"xs",style:{textDecoration:"none",color:"inherit"},children:["View on Explorer"," ",o.jsx(Fr,{width:U.sm,height:U.sm})]})})]}):o.jsx(Fn,{})}const dy=e=>o.jsxs("svg",{width:e.size,height:e.size,viewBox:"0 0 24 24",role:"presentation",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M19 7V4C19 3.73478 18.8946 3.48043 18.7071 3.29289C18.5196 3.10536 18.2652 3 18 3H5C4.46957 3 3.96086 3.21071 3.58579 3.58579C3.21071 3.96086 3 4.46957 3 5C3 5.53043 3.21071 6.03914 3.58579 6.41421C3.96086 6.78929 4.46957 7 5 7H20C20.2652 7 20.5196 7.10536 20.7071 7.29289C20.8946 7.48043 21 7.73478 21 8V12M21 12H18C17.4696 12 16.9609 12.2107 16.5858 12.5858C16.2107 12.9609 16 13.4696 16 14C16 14.5304 16.2107 15.0391 16.5858 15.4142C16.9609 15.7893 17.4696 16 18 16H21C21.2652 16 21.5196 15.8946 21.7071 15.7071C21.8946 15.5196 22 15.2652 22 15V13C22 12.7348 21.8946 12.4804 21.7071 12.2929C21.5196 12.1054 21.2652 12 21 12Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M3 5V19C3 19.5304 3.21071 20.0391 3.58579 20.4142C3.96086 20.7893 4.46957 21 5 21H20C20.2652 21 20.5196 20.8946 20.7071 20.7071C20.8946 20.5196 21 20.2652 21 20V16",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]});function ua(){const t=Uc("useConnectedWallets").connectedWallets;return L.useSyncExternalStore(t.subscribe,t.getValue,t.getValue)}function wf(e){const t=ua(),i=e.wallets||Xh({appMetadata:e.appMetadata,chains:e.chains}),n=eu({size:"compact",welcomeScreen:void 0,wallets:i});return o.jsx(Z1,{accountAbstraction:e.accountAbstraction,auth:void 0,chain:e.chain,chains:e.chains,client:e.client,connectLocale:e.connectLocale,hideHeader:e.isEmbed,isOpen:!0,meta:{showThirdwebBranding:!1},onClose:()=>{},onConnect:r=>{e.onSelect(r),e.onBack()},recommendedWallets:e.recommendedWallets,screenSetup:n,welcomeScreen:void 0,wallets:i,setModalVisibility:()=>{},shouldSetActive:!1,showAllWallets:e.showAllWallets,size:"compact",walletConnect:e.walletConnect,modalHeader:{title:"Connect",onBack:e.onBack},walletIdsToHide:t.map(r=>r.id)})}function Js(e,t=!0){return ft(Number(e.displayValue),5)+(t?` ${e.symbol}`:"")}function hy(e){var a;const[t,i]=L.useState("wallets"),n=ua(),r=J1(),s=!e.showAllWallets&&((a=e.wallets)==null?void 0:a.every(l=>n.includes(l)));return t==="connect"?o.jsx(wf,{...e,isEmbed:!1,onSelect:l=>{r(l),e.onBack()}}):o.jsxs(_,{children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:"Wallets",onBack:e.onBack})}),o.jsx(qe,{}),o.jsx(q,{y:"md"}),o.jsx(_,{px:"md",style:{minHeight:"150px"},children:o.jsx(_,{flex:"column",gap:"xs",children:n.map(l=>o.jsx(uy,{client:e.client,onClick:()=>{r(l),e.onBack()},chain:e.activeChain,wallet:l},l.id))})}),o.jsx(q,{y:"xxl"}),o.jsx(_,{p:"lg",children:!s&&o.jsxs(Ie,{variant:"accent",fullWidth:!0,onClick:()=>{i("connect")},gap:"xs",children:[o.jsx(Qc,{width:U.sm,height:U.sm}),"Connect Wallet"]})})]})}function uy(e){var l;const t=gt(),i=$t(),{disconnect:n}=tu(),r=e.wallet.id,s=(l=e.wallet.getAccount())==null?void 0:l.address,a=Vs({address:s,chain:e.chain,client:e.client});return o.jsxs("div",{style:{position:"relative"},children:[o.jsx(X1,{onClick:e.onClick,style:{justifyContent:"space-between"},children:o.jsxs(_,{flex:"row",gap:"md",center:"y",children:[o.jsx(rs,{client:e.client,id:r,size:U.lg}),o.jsxs(_,{flex:"column",gap:"4xs",children:[o.jsx(F,{color:"primaryText",children:vr(s||"")}),a.data?o.jsx(F,{size:"xs",color:"secondaryText",weight:400,children:Js(a.data)}):o.jsx(lt,{width:"100px",height:je.sm})]})]})}),o.jsx("div",{style:{position:"absolute",zIndex:1,right:ie.xxs,top:"50%",transform:"translateY(-50%)"},children:(i==null?void 0:i.id)===e.wallet.id?o.jsx(Ro,{tip:"Active Wallet",children:o.jsx(No,{children:o.jsx(Ys,{width:U.md,height:U.md})})}):o.jsx(Ro,{tip:"Disconnect",children:o.jsx(No,{onClick:()=>{n(e.wallet)},children:o.jsx(eg,{width:U.md,height:U.md,style:{color:t.colors.secondaryText}})})})})]})}const fy=L.lazy(()=>Kt(()=>import("./InAppWalletConnectUI-DZdYxCbv.js"),__vite__mapDeps([8,0,1,9,10,11,12,7,13,3,5,6,14,15,16])));function gy(e){const t=$t(),i=Bt(),n=Xo();return t?t.id==="inApp"?o.jsx(L.Suspense,{fallback:o.jsx(Fn,{}),children:o.jsx(fy,{walletConnect:e.walletConnect,wallet:t,done:()=>{n.invalidateQueries({queryKey:["profiles"]}),e.onBack()},connectLocale:e.locale,client:e.client,size:"compact",chain:i,meta:{title:e.locale.manageWallet.linkProfile,showThirdwebBranding:!1},isLinking:!0,goBack:e.onBack})}):o.jsxs(_,{style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:e.locale.manageWallet.linkProfile,onBack:e.onBack})}),o.jsx(qe,{}),o.jsxs(_,{flex:"column",gap:"md",center:"both",px:"xl",color:"secondaryText",style:{flex:"1",minHeight:"250px"},children:[o.jsx(Nn,{width:U.xl,height:U.xl}),o.jsx(F,{center:!0,children:"This wallet does not support account linking"})]})]}):o.jsx(Fn,{})}function my(){const e=$t();return Ct({queryKey:["profiles",e==null?void 0:e.id],enabled:!!e&&e.id==="inApp",queryFn:async()=>sm(e)})}const py=e=>o.jsx("svg",{width:e.size,height:e.size,viewBox:"0 0 24 24",fill:"none",role:"presentation",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M12 15.5H7.5C6.10444 15.5 5.40665 15.5 4.83886 15.6722C3.56045 16.06 2.56004 17.0605 2.17224 18.3389C2 18.9067 2 19.6044 2 21M19 21V15M16 18H22M14.5 7.5C14.5 9.98528 12.4853 12 10 12C7.51472 12 5.5 9.98528 5.5 7.5C5.5 5.01472 7.51472 3 10 3C12.4853 3 14.5 5.01472 14.5 7.5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})});function dd(e){switch(!0){case(e.type==="email"&&e.details.email!==void 0):return e.details.email;case(e.type==="google"&&e.details.email!==void 0):return e.details.email;case(e.type==="phone"&&e.details.phone!==void 0):return e.details.phone;case e.details.address!==void 0:return vr(e.details.address,6);case(e.type==="cognito"&&e.details.email!==void 0):return e.details.email;default:return e.type.slice(0,1).toUpperCase()+e.type.slice(1)}}function yy(e){const{data:t,isLoading:i}=my();return i?o.jsx(Fn,{}):o.jsxs(_,{style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:e.locale.manageWallet.linkedProfiles,onBack:e.onBack})}),o.jsx(qe,{}),i?o.jsx(Fn,{}):o.jsxs(_,{scrollY:!0,style:{height:"300px"},children:[o.jsx(q,{y:"md"}),o.jsxs(_,{px:"sm",children:[o.jsxs(Si,{onClick:()=>{e.setScreen("link-profile")},style:{fontSize:je.sm},children:[o.jsx(py,{size:U.md}),o.jsx(F,{color:"primaryText",children:e.locale.manageWallet.linkProfile})]}),o.jsx(q,{y:"xs"}),t==null?void 0:t.map(n=>o.jsxs(Si,{onClick:()=>{e.setScreen("linked-profiles")},style:{fontSize:je.sm,cursor:"default"},disabled:!0,children:[n.type==="wallet"&&n.details.address?o.jsx(_,{style:{width:"24px",height:"24px",borderRadius:"100%",overflow:"hidden"},children:o.jsx(cl,{address:n.details.address,size:24})}):o.jsx(ns,{src:tg(n.type),width:U.md,height:U.md,loading:"eager",client:e.client}),o.jsx(F,{color:"primaryText",children:dd(n)})]},`${n.type}-${dd(n)}`))]}),o.jsx(q,{y:"md"})]})]})}const by=e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"0 0 24 24",fill:"none",role:"presentation",children:[o.jsx("path",{d:"M2 5.99999L2 2.99999C2 2.39999 2.4 1.99999 3 1.99999H7L7 4.99999H10V7.99999H12L13.4 9.39999C14.7898 8.91585 16.3028 8.9177 17.6915 9.40524C19.0801 9.89278 20.2622 10.8372 21.0444 12.0839C21.8265 13.3306 22.1624 14.8058 21.9971 16.2683C21.8318 17.7307 21.1751 19.0937 20.1344 20.1344C19.0937 21.1751 17.7307 21.8318 16.2683 21.9971C14.8058 22.1624 13.3306 21.8265 12.0839 21.0444C10.8372 20.2622 9.89279 19.0801 9.40525 17.6915C8.91771 16.3028 8.91585 14.7898 9.4 13.4L2 5.99999Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M15.5 15C15.7761 15 16 15.2239 16 15.5C16 15.7761 15.7761 16 15.5 16C15.2239 16 15 15.7761 15 15.5C15 15.2239 15.2239 15 15.5 15Z",fill:"currentColor",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),vy=e=>o.jsx("svg",{width:e.size,height:e.size,viewBox:"0 0 24 24",fill:"none",role:"presentation",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M22 21V19C22 17.1362 20.7252 15.5701 19 15.126M15.5 3.29076C16.9659 3.88415 18 5.32131 18 7C18 8.67869 16.9659 10.1159 15.5 10.7092M17 21C17 19.1362 17 18.2044 16.6955 17.4693C16.2895 16.4892 15.5108 15.7105 14.5307 15.3045C13.7956 15 12.8638 15 11 15H8C6.13623 15 5.20435 15 4.46927 15.3045C3.48915 15.7105 2.71046 16.4892 2.30448 17.4693C2 18.2044 2 19.1362 2 21M13.5 7C13.5 9.20914 11.7091 11 9.5 11C7.29086 11 5.5 9.20914 5.5 7C5.5 4.79086 7.29086 3 9.5 3C11.7091 3 13.5 4.79086 13.5 7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),xy=e=>o.jsx("svg",{width:e.size,height:e.size,viewBox:"0 0 24 24",fill:"none",role:"presentation",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M4.91334 7.73539C8.82714 4.0882 15.1729 4.0882 19.0867 7.73539L19.5577 8.17432C19.7534 8.35664 19.7534 8.65232 19.5577 8.83464L17.9464 10.3362C17.8485 10.4274 17.6899 10.4274 17.5921 10.3362L16.9439 9.73217C14.2134 7.18782 9.7866 7.18782 7.05614 9.73217L6.36193 10.379C6.26407 10.4702 6.10547 10.4702 6.0076 10.379L4.39629 8.87747C4.20056 8.69515 4.20056 8.39947 4.39629 8.21715L4.91334 7.73539ZM22.4191 10.8407L23.8532 12.1771C24.0489 12.3594 24.0489 12.6551 23.8532 12.8374L17.3867 18.8632C17.1911 19.0456 16.8738 19.0456 16.6781 18.8632L12.0886 14.5865C12.0397 14.5409 11.9604 14.5409 11.9115 14.5865L7.32202 18.8632C7.12638 19.0456 6.8091 19.0456 6.61337 18.8632L0.146771 12.8373C-0.0489237 12.655 -0.0489237 12.3593 0.146771 12.177L1.58087 10.8406C1.77657 10.6582 2.09384 10.6582 2.28954 10.8406L6.87907 15.1173C6.928 15.163 7.0073 15.163 7.05623 15.1173L11.6456 10.8406C11.8412 10.6582 12.1585 10.6582 12.3542 10.8406L16.9438 15.1173C16.9927 15.163 17.072 15.163 17.1209 15.1173L21.7105 10.8407C21.9061 10.6583 22.2234 10.6583 22.4191 10.8407Z",fill:"currentColor"})});function wy(e){var i;const t=$t();return o.jsxs(_,{style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:e.locale.manageWallet.title,onBack:e.onBack})}),o.jsx(qe,{}),o.jsxs(_,{px:"sm",scrollY:!0,style:{maxHeight:"500px"},children:[o.jsx(q,{y:"md"}),o.jsxs(_,{style:{position:"relative",height:"250px"},children:[o.jsx(My,{closeModal:e.closeModal,connectLocale:e.locale}),(t==null?void 0:t.id)==="inApp"&&o.jsxs(Si,{onClick:()=>{e.setScreen("linked-profiles")},style:{fontSize:je.sm},children:[o.jsx(vy,{size:U.md}),o.jsx(F,{color:"primaryText",children:e.locale.manageWallet.linkedProfiles})]}),o.jsxs(Si,{onClick:()=>{e.setScreen("wallet-connect-receiver")},style:{fontSize:je.sm},children:[o.jsx(xy,{size:U.md}),o.jsx(F,{color:"primaryText",children:e.locale.manageWallet.connectAnApp})]}),t&&am(t)&&!((i=t.getConfig())!=null&&i.hidePrivateKeyExport)&&o.jsxs(Si,{onClick:()=>{e.setScreen("private-key")},style:{fontSize:je.sm},children:[o.jsx(by,{size:U.md}),o.jsx(F,{color:"primaryText",children:e.locale.manageWallet.exportPrivateKey})]})]}),o.jsx(q,{y:"lg"})]})]})}function My(e){const t=$t(),i=e.connectLocale;if((t==null?void 0:t.id)!=="io.metamask")return null;const n=ig("io.metamask");return n?o.jsxs(Si,{type:"button",onClick:async()=>{await n.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}),e.closeModal()},children:[o.jsx(ng,{width:U.md,height:U.md}),o.jsx(F,{color:"primaryText",children:i.switchAccount})]}):null}function Ay(e){var s;const[t,i]=L.useState(!0);if(!e.wallet)throw new Error("[PrivateKey] No wallet found");const n=Kh().inAppWallet,r=fc(e.wallet)?{id:e.wallet.id,partnerId:(s=e.wallet.getConfig())==null?void 0:s.partnerId}:void 0;return o.jsxs(_,{style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:"Export Private Key",onBack:e.onBack})}),o.jsx(qe,{}),o.jsxs(_,{px:"sm",scrollY:!0,style:{maxHeight:"500px"},children:[o.jsx(q,{y:"md"}),o.jsxs(_,{style:{position:"relative",height:"250px"},children:[t?o.jsx(_,{center:"both",flex:"column",style:{position:"absolute",width:"100%",height:"100%"},children:o.jsx(Mt,{size:"lg",color:"primaryButtonBg"})}):o.jsx(o.Fragment,{}),o.jsx(_,{style:{position:"absolute",height:"100%",width:"100%",zIndex:11},children:o.jsx("iframe",{title:"Export In-App Wallet",style:{width:"100%",height:"250px",visibility:t?"hidden":"unset"},onLoad:()=>{i(!1)},allow:"clipboard-read; clipboard-write",src:`${n.includes("localhost")?"http":"https"}://${n}/sdk/2022-08-12/embedded-wallet/export-private-key?clientId=${e.client.clientId}&theme=${typeof e.theme=="string"?e.theme:e.theme.type}${r?`&ecosystemId=${r.id}`:""}${r!=null&&r.partnerId?`&partnerId=${r.partnerId}`:""}`})})]}),o.jsx(q,{y:"lg"})]})]})}function Sy(e,t=!0){return`${e.substring(0,t?4:6)}...${e.substring(e.length-(t?3:4))}`}function jy(e){const t=ti(),i=t==null?void 0:t.address,{hasCopied:n,onCopy:r}=Su(i||""),{connectLocale:s,client:a}=e,l=s.receiveFundsScreen;return o.jsxs(_,{p:"lg",children:[o.jsx(Oe,{title:l.title,onBack:e.onBack}),o.jsx(q,{y:"xl"}),o.jsx(_,{flex:"row",center:"x",children:o.jsx(rg,{qrCodeUri:i,size:310,QRIcon:e.walletId&&o.jsx(rs,{id:e.walletId,size:U.xxl,client:a})})}),o.jsx(q,{y:"xl"}),o.jsxs(Iy,{onClick:r,children:[o.jsx(F,{color:"primaryText",size:"md",children:Sy(i||"")}),o.jsx(tf,{text:i||"",tip:"Copy address",hasCopied:n})]}),o.jsx(q,{y:"lg"}),o.jsx(F,{multiline:!0,center:!0,balance:!0,children:l.instruction})]})}const Iy=Jo(e=>{const t=gt();return{all:"unset",width:"100%",boxSizing:"border-box",cursor:"pointer",padding:ie.md,display:"flex",justifyContent:"space-between",border:`1px solid ${t.colors.borderColor}`,borderRadius:pt.md,transition:"border-color 200ms ease","&:hover":{borderColor:t.colors.accentText}}}),Ty="0x3b3b57de",Cy=[{type:"bytes32",name:"name"}];function Ey(e){return sg(Cy,[e.name])}function Ny(e){return Ty+Ey(e).slice(2)}async function _y(e){const{client:t,name:i,resolverAddress:n,resolverChain:r}=e;return iu(i)?Qr(i):Gh(async()=>{const s=Wi({client:t,chain:r||dg,address:n||hg}),a=Ny({name:og(i)}),l=await ag({contract:s,name:cg(lg(i)),data:a});return Qr(`0x${l[0].slice(-40)}`)},{cacheKey:`ens:addr:${i}`,cacheTime:60*1e3})}const ky="0xa9059cbb",Dy=[{type:"address",name:"to"},{type:"uint256",name:"value"}],Ly=[{type:"bool"}];function Py(e){const t=fg(async()=>"asyncParams"in e?await e.asyncParams():e);return ug({contract:e.contract,method:[ky,Dy,Ly],params:async()=>{const i=await t();return[i.to,i.value]},value:async()=>{var i;return(i=(await t()).overrides)==null?void 0:i.value},accessList:async()=>{var i;return(i=(await t()).overrides)==null?void 0:i.accessList},gas:async()=>{var i;return(i=(await t()).overrides)==null?void 0:i.gas},gasPrice:async()=>{var i;return(i=(await t()).overrides)==null?void 0:i.gasPrice},maxFeePerGas:async()=>{var i;return(i=(await t()).overrides)==null?void 0:i.maxFeePerGas},maxPriorityFeePerGas:async()=>{var i;return(i=(await t()).overrides)==null?void 0:i.maxPriorityFeePerGas},nonce:async()=>{var i;return(i=(await t()).overrides)==null?void 0:i.nonce},extraGas:async()=>{var i;return(i=(await t()).overrides)==null?void 0:i.extraGas},erc20Value:async()=>{var i;return(i=(await t()).overrides)==null?void 0:i.erc20Value}})}function Mf(e){return Py({contract:e.contract,asyncParams:async()=>{let t;if("amount"in e){const{decimals:i}=await Kt(async()=>{const{decimals:r}=await import("./decimals-3CvhMhix.js");return{decimals:r}},__vite__mapDeps([17,0,1,18])),n=await i(e).catch(()=>18);t=gg(e.amount.toString(),n)}else t=e.amountWei;return{to:e.to,value:t,overrides:{erc20Value:{amountWei:t,tokenAddress:e.contract.address}}}}})}function zy(e){const t=$t();return nu({async mutationFn(i){const{tokenAddress:n,receiverAddress:r,amount:s}=i,a=t==null?void 0:t.getChain(),l=t==null?void 0:t.getAccount();if(!a)throw new Error("No active chain");if(!l)throw new Error("No active account");if(!r||!r.endsWith(".eth")&&!iu(r))throw new Error("Invalid receiver address");if(!s||Number.isNaN(Number(s))||Number(s)<0)throw new Error("Invalid amount");let d=r;try{d=await _y({client:e,name:r})}catch{throw new Error("Failed to resolve address")}if(n){const g=Wi({address:n,client:e,chain:a}),y=Mf({amount:s,contract:g,to:d});await Vr({transaction:y,account:l})}else{const g=ru({chain:a,client:e,to:d,value:su(s)});await Vr({transaction:g,account:l})}}})}async function Ry(e){const{account:t,client:i,chain:n,tokenAddress:r}=e;if(r){const{getBalance:y}=await Kt(async()=>{const{getBalance:b}=await import("./getBalance-JN6XpBG8.js");return{getBalance:b}},__vite__mapDeps([19,0,1,20,21,18]));return y({contract:Wi({client:i,chain:n,address:r}),address:t.address})}const s=mg({client:i,chain:n}),[a,l,d,g]=await Promise.all([pg(n),yg(n),bg(n),vg(s,{address:t.address})]);return{value:g,decimals:l,displayValue:Ps(g,l),symbol:a,name:d}}function Af(e){const{chain:t,tokenAddress:i,client:n}=e;return Ct({queryKey:["tokenInfo",(t==null?void 0:t.id)||-1,{tokenAddress:i}],queryFn:async()=>{if(i){const{getCurrencyMetadata:b}=await Kt(async()=>{const{getCurrencyMetadata:A}=await import("./getCurrencyMetadata-A66ufPbR.js");return{getCurrencyMetadata:A}},__vite__mapDeps([20,0,1,21,18]));return await b({contract:Wi({client:n,chain:t,address:i})})}const{getChainDecimals:r,getChainNativeCurrencyName:s,getChainSymbol:a}=await Kt(async()=>{const{getChainDecimals:b,getChainNativeCurrencyName:M,getChainSymbol:A}=await import("./index-DillEupA.js").then(S=>S.dJ);return{getChainDecimals:b,getChainNativeCurrencyName:M,getChainSymbol:A}},__vite__mapDeps([0,1])),[l,d,g]=await Promise.all([a(t),r(t),s(t)]);return{decimals:d,symbol:l,name:g}},enabled:!!t&&!!n})}function Mc(e){const[t,i]=L.useState("base"),[n,r]=L.useState(""),s=e.chain,a=si(s),l=Qs(s),d=Af({chain:s,tokenAddress:n,client:e.client}),g=e.connectLocale.sendFundsScreen;let y=e.tokenList;d.data&&n&&(y=[{...d.data,address:n},...y]);const b=n?y.filter(A=>{const S=n.toLowerCase();return A.name.toLowerCase().includes(S)||A.symbol.toLowerCase().includes(S)||A.address.includes(n)}):y,{chainSelection:M}=e;return t==="select-chain"&&M?o.jsx(ll,{client:e.client,connectLocale:e.connectLocale,showTabs:!1,onBack:()=>i("base"),chains:M.chains,closeModal:()=>i("base"),networkSelector:{renderChain(A){return o.jsx(dl,{chain:A.chain,confirming:!1,switchingFailed:!1,onClick:()=>{M.select(A.chain),i("base")},client:e.client,connectLocale:e.connectLocale})}}}):o.jsxs(_,{animate:"fadein",style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{onBack:e.onBack,title:e.modalTitle||g.selectTokenTitle})}),o.jsx(qe,{}),o.jsxs(_,{scrollY:!0,style:{maxHeight:"450px"},children:[o.jsx(q,{y:"md"}),e.chainSelection&&o.jsx(o.Fragment,{children:o.jsxs(_,{px:"lg",children:[o.jsx(F,{size:"sm",children:"Select Network"}),o.jsx(q,{y:"xxs"}),o.jsxs(Sf,{fullWidth:!0,variant:"secondary",onClick:()=>{i("select-chain")},children:[o.jsx(Un,{chainIconUrl:l.url,size:U.lg,client:e.client}),a.name?o.jsx(F,{color:"primaryText",size:"sm",children:a.name}):o.jsx(lt,{height:je.md}),o.jsx(Ks,{width:U.sm,height:U.sm,style:{marginLeft:"auto"}})]}),o.jsx(q,{y:"xl"}),o.jsx(F,{size:"sm",children:"Select Token"})]})}),o.jsxs(_,{px:"lg",children:[o.jsx(q,{y:"xs"}),o.jsx(Bs,{placeholder:g.searchToken,variant:"outline",value:n,onChange:A=>{r(A.target.value)}})]}),o.jsx(q,{y:"md"}),(b.length>0||!n)&&o.jsxs(_,{flex:"column",gap:"xs",px:"lg",scrollY:!0,style:{paddingTop:0,paddingBottom:ie.lg},children:[!n&&o.jsx(hd,{onClick:()=>{e.onTokenSelect(cn)},chain:e.chain,token:cn,client:e.client}),b.map(A=>o.jsx(hd,{onClick:()=>e.onTokenSelect(A),token:A,chain:e.chain,client:e.client},A.address))]}),b.length===0&&d.isLoading&&n&&o.jsx(_,{animate:"fadein",p:"lg",flex:"column",gap:"md",center:"both",style:{minHeight:"200px",paddingTop:0},color:"secondaryText",children:o.jsx(Mt,{size:"lg",color:"accentText"})}),b.length===0&&!d.isLoading&&n&&o.jsxs(_,{animate:"fadein",p:"lg",flex:"column",gap:"md",center:"both",style:{minHeight:"200px",paddingTop:0},color:"secondaryText",children:[o.jsx(Nn,{width:U.lg,height:U.lg}),g.noTokensFound]}),o.jsx(q,{y:"md"})]})]})}function hd(e){var r;const t=ti(),i=Af({chain:e.chain,tokenAddress:mt(e.token)?void 0:e.token.address,client:e.client}),n=mt(e.token)?(r=i.data)==null?void 0:r.name:e.token.name;return o.jsxs(Sf,{fullWidth:!0,variant:"secondary",onClick:e.onClick,children:[o.jsx(Ir,{token:e.token,chain:e.chain,size:"lg",client:e.client}),o.jsxs(_,{flex:"column",gap:"xxs",children:[n?o.jsx(F,{size:"sm",color:"primaryText",children:n}):o.jsx(lt,{height:je.md,width:"150px"}),t&&o.jsx(Oy,{account:t,chain:e.chain,client:e.client,tokenAddress:mt(e.token)?void 0:e.token.address})]})]})}function Oy(e){const t=Ct({queryKey:["tokenBalance",e],queryFn:async()=>Ry({account:e.account,chain:e.chain,client:e.client,tokenAddress:e.tokenAddress})});return t.data?o.jsxs(F,{size:"xs",children:[" ",Js(t.data)]}):o.jsx(lt,{height:je.xs,width:"100px"})}const Sf=Ti(Ie)(()=>{const e=gt();return{background:e.colors.tertiaryBg,justifyContent:"flex-start",gap:ie.sm,padding:ie.sm,"&:hover":{background:e.colors.secondaryButtonBg,transform:"scale(1.01)"},transition:"background 200ms ease, transform 150ms ease"}});function By(e){const[t,i]=L.useState("base"),n=Bt(),r=n==null?void 0:n.id,{connectLocale:s,client:a}=e;let l=cn;const d=e.supportedTokens||ko;if(r&&d[r]&&d[r]!==ko[r]){const N=d[r],D=N==null?void 0:N[0];D&&(l=D)}const[g,y]=L.useState(l),[b,M]=L.useState(""),[A,S]=L.useState("0"),C=Bt(),k=(C!=null&&C.id?d[C.id]:void 0)||[];return t==="tokenSelector"&&C?o.jsx(Mc,{tokenList:k,onBack:()=>{i("base")},onTokenSelect:N=>{y(N),i("base")},chain:C,connectLocale:s,client:a}):o.jsx(qy,{token:g,onTokenSelect:()=>{i("tokenSelector")},receiverAddress:b,setReceiverAddress:M,amount:A,setAmount:S,onBack:e.onBack,client:a,connectLocale:s})}function qy(e){var C,k;const t=e.connectLocale.sendFundsScreen,i=e.token&&"address"in e.token?e.token.address:void 0,n=Bt(),r=ti(),s=Bt(),a=Vs({chain:n,tokenAddress:i,address:r==null?void 0:r.address,client:e.client}),{receiverAddress:l,setReceiverAddress:d,amount:g,setAmount:y}=e,b=zy(e.client);function M(N){var B;const D=((B=N==null?void 0:N.data)==null?void 0:B.message)||(N==null?void 0:N.message);return D?D.includes("user rejected")?t.transactionRejected:D.includes("insufficient funds")?t.insufficientFunds:D:t.transactionFailed}if(!s)return null;if(b.isError)return o.jsxs(_,{p:"lg",animate:"fadein",children:[o.jsx(Oe,{title:t.title,onBack:()=>{b.reset()}}),o.jsx(q,{y:"xl"}),o.jsxs(_,{flex:"column",gap:"lg",animate:"fadein",center:"both",style:{minHeight:"200px"},color:"danger",children:[o.jsx(Nn,{width:U.xl,height:U.xl}),o.jsx(F,{center:!0,multiline:!0,color:"danger",children:M(b.error)})]})]});if(b.isSuccess)return o.jsxs(_,{p:"lg",animate:"fadein",children:[o.jsx(Oe,{title:t.title,onBack:()=>{b.reset()}}),o.jsxs(_,{flex:"column",gap:"lg",animate:"fadein",center:"both",style:{minHeight:"250px"},color:"success",children:[o.jsx(ea,{width:U.xl,height:U.xl}),o.jsxs(F,{color:"success",children:[" ",t.successMessage," "]})]})]});const A=(e.token&&"name"in e.token?e.token.name:void 0)||((C=a==null?void 0:a.data)==null?void 0:C.name),S=(e.token&&"symbol"in e.token?e.token.symbol:void 0)||((k=a==null?void 0:a.data)==null?void 0:k.symbol);return o.jsxs(_,{p:"lg",animate:"fadein",children:[o.jsx(Oe,{title:t.title,onBack:e.onBack}),o.jsx(q,{y:"xl"}),o.jsxs("form",{onSubmit:N=>{N.preventDefault()},children:[o.jsx(Ca,{htmlFor:"token",color:"secondaryText",children:t.token}),o.jsx(q,{y:"sm"}),o.jsxs(Ie,{id:"token",variant:"outline",fullWidth:!0,style:{justifyContent:"flex-start",gap:ie.sm,padding:ie.sm},onClick:e.onTokenSelect,children:[o.jsx(Ir,{token:e.token,chain:s,size:"lg",client:e.client}),o.jsxs(_,{flex:"column",gap:"xs",children:[A?o.jsx(F,{size:"sm",color:"primaryText",children:A}):o.jsx(lt,{height:je.xs,width:"150px"}),a.data?o.jsx(F,{size:"xs",children:Js(a.data)}):o.jsx(lt,{height:je.xs,width:"100px"})]})]}),o.jsx(q,{y:"lg"}),o.jsx(Ca,{htmlFor:"receiver",color:"secondaryText",children:t.sendTo}),o.jsx(q,{y:"sm"}),o.jsx(Bs,{required:!0,id:"receiver",placeholder:"0x... or ENS name",variant:"outline",value:l,onChange:N=>{d(N.target.value)}}),o.jsx(q,{y:"lg"}),o.jsx(Ca,{htmlFor:"amount",color:"secondaryText",children:t.amount}),o.jsx(q,{y:"sm"}),o.jsxs(_,{relative:!0,children:[o.jsx(Bs,{required:!0,type:"number",id:"amount",variant:"outline",value:g,onChange:N=>{y(N.target.value)}}),o.jsx(Fy,{children:o.jsxs(F,{size:"xs",children:[" ",S," "]})})]}),o.jsx(q,{y:"xxl"}),o.jsxs(Ie,{fullWidth:!0,variant:"accent",type:"submit",onClick:async()=>{!l||!g||await b.mutateAsync({receiverAddress:l,amount:g,tokenAddress:i})},style:{alignItems:"center",gap:ie.sm,padding:ie.md},children:[b.isPending&&o.jsx(Mt,{size:"sm",color:"accentButtonText"}),b.isPending?t.sending:t.submitButton]})]})]})}const Fy=Sr({position:"absolute",top:"50%",transform:"translateY(-50%)",right:ie.sm}),Uy=e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",role:"presentation",children:[o.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),o.jsx("circle",{cx:"9",cy:"9",r:"2"}),o.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),Wy="0x70a08231",$y=[{type:"address",name:"owner"}],Hy=[{type:"uint256"}];async function Yy(e){return ta({contract:e.contract,method:[Wy,$y,Hy],params:[e.owner]})}const Qy="0x8462151c",Vy=[{type:"address",name:"owner"}],Ky=[{type:"uint256[]"}];async function Gy(e){return ta({contract:e.contract,method:[Qy,Vy,Ky],params:[e.owner]})}const Zy="0x2f745c59",Jy=[{type:"address",name:"_owner"},{type:"uint256",name:"_index"}],Xy=[{type:"uint256"}];async function eb(e){return ta({contract:e.contract,method:[Zy,Jy,Xy],params:[e.owner,e.index]})}async function tb(e){const t=await Promise.any([Gy({...e}),(async()=>{const i=await Yy(e),n=[];for(let r=0n;r<i;r++)n.push(eb({...e,index:r}));return Promise.all(n)})()]).catch(()=>null);if(t)return t;throw new Error(`The contract at ${e.contract.address} on chain ${e.contract.chain.id} does not support the tokenOfOwnerByIndex or tokensOfOwner interface`)}async function ib(e){const t=await tb(e);return Promise.all(t.map(i=>cm({contract:e.contract,tokenId:i}).then(n=>({...n,owner:e.owner}))))}const nb="0x01ffc9a7",rb=[{type:"bytes4",name:"interfaceId"}],sb=[{type:"bool"}];async function jf(e){return ta({contract:e.contract,method:[nb,rb,sb],params:[e.interfaceId]})}function ob(e){return jf({contract:e.contract,interfaceId:"0x80ac58cd"})}function ab(e){return jf({contract:e.contract,interfaceId:"0xd9b67a26"})}const cb=e=>o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 32 32",role:"presentation",...e,children:[o.jsx("circle",{cx:"9",cy:"28.5",r:"1.5",fill:"currentColor"}),o.jsx("path",{fill:"currentColor",d:"M10 25H8v-4h2a2 2 0 0 0 0-4H8a2.002 2.002 0 0 0-2 2v.5H4V19a4.005 4.005 0 0 1 4-4h2a4 4 0 0 1 0 8Z"}),o.jsx("path",{fill:"currentColor",d:"m27.7 9.3l-7-7A.908.908 0 0 0 20 2H10a2.006 2.006 0 0 0-2 2v8h2V4h8v6a2.006 2.006 0 0 0 2 2h6v16H14v2h12a2.006 2.006 0 0 0 2-2V10a.91.91 0 0 0-.3-.7ZM20 10V4.4l5.6 5.6Z"})]}),lb=e=>o.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 32 32",role:"presentation",...e,children:[o.jsx("path",{fill:"currentColor",d:"M29 31a.999.999 0 0 1-.625-.22L23.65 27H20a1 1 0 0 1-1-1v-5a1 1 0 0 1 1-1h3.65l4.726-3.78A1 1 0 0 1 30 17v13a1 1 0 0 1-1 1Zm-8-6h3a1 1 0 0 1 .625.22L28 27.92v-8.84l-3.376 2.7A1 1 0 0 1 24 22h-3Z"}),o.jsx("path",{fill:"currentColor",d:"M16 28H8V4h8v6a2.006 2.006 0 0 0 2 2h6v3h2v-5a.91.91 0 0 0-.3-.7l-7-7A.909.909 0 0 0 18 2H8a2.006 2.006 0 0 0-2 2v24a2.006 2.006 0 0 0 2 2h8Zm2-23.6l5.6 5.6H18Z"})]}),db=e=>o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 32 32",role:"presentation",...e,children:o.jsx("path",{fill:"currentColor",d:"M12 6h-2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2zm10 0h-2a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2z"})}),hb=e=>o.jsx("svg",{width:"16",height:"16",viewBox:"0 0 32 32",role:"presentation",...e,children:o.jsx("path",{fill:"currentColor",d:"M7 28a1 1 0 0 1-1-1V5a1 1 0 0 1 1.482-.876l20 11a1 1 0 0 1 0 1.752l-20 11A1 1 0 0 1 7 28Z"})}),Lr="audio/mpeg",uo="audio/midi",fo="audio/ogg",Da="image/jpeg",ub={"*3gpp":"audio/3gpp",adp:"audio/adpcm",amr:"audio/amr",au:"audio/basic",snd:"audio/basic",mid:uo,midi:uo,kar:uo,rmi:uo,mxmf:"audio/mobile-xmf","*mp3":"audio/mp3",m4a:"audio/mp4",mp4a:"audio/mp4",mpga:Lr,mp2:Lr,mp2a:Lr,mp3:Lr,m2a:Lr,m3a:Lr,oga:fo,ogg:fo,spx:fo,opus:fo,s3m:"audio/s3m",sil:"audio/silk",wav:"audio/wav","*wav":"audio/wave",weba:"audio/webm",xm:"audio/xm",exr:"image/aces",apng:"image/apng",avif:"image/avif",bmp:"image/bmp",cgm:"image/cgm",drle:"image/dicom-rle",emf:"image/emf",fits:"image/fits",g3:"image/g3fax",gif:"image/gif",heic:"image/heic",heics:"image/heic-sequence",heif:"image/heif",heifs:"image/heif-sequence",hej2:"image/hej2k",hsj2:"image/hsj2",ief:"image/ief",jls:"image/jls",jp2:"image/jp2",jpg2:"image/jp2",jpeg:Da,jpg:Da,jpe:Da,jph:"image/jph",jhc:"image/jphc",jpm:"image/jpm",jpx:"image/jpx",jpf:"image/jpx",jxr:"image/jxr",jxra:"image/jxra",jxrs:"image/jxrs",jxs:"image/jxs",jxsc:"image/jxsc",jxsi:"image/jxsi",jxss:"image/jxss",ktx:"image/ktx",ktx2:"image/ktx2",png:"image/png",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",t38:"image/t38",tif:"image/tiff",tiff:"image/tiff",tfx:"image/tiff-fx",webp:"image/webp",wmf:"image/wmf","3mf":"model/3mf",gltf:"model/gltf+json",glb:"model/gltf-binary",igs:"model/iges",iges:"model/iges",msh:"model/mesh",mesh:"model/mesh",silo:"model/mesh",mtl:"model/mtl",obj:"model/obj",stl:"model/stl",wrl:"model/vrml",vrml:"model/vrml","*x3db":"model/x3d+binary",x3dbz:"model/x3d+binary",x3db:"model/x3d+fastinfoset","*x3dv":"model/x3d+vrml",x3dvz:"model/x3d+vrml",x3d:"model/x3d+xml",x3dz:"model/x3d+xml",x3dv:"model/x3d-vrml",html:"text/html",htm:"text/html",shtml:"text/html","3gp":"video/3gpp","3gpp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",m4s:"video/iso.segment",jpgv:"video/jpeg","*jpm":"video/jpm",jpgm:"video/jpm",mj2:"video/mj2",mjp2:"video/mj2",ts:"video/mp2t",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",webm:"video/webm",mkv:"video/x-matroska"};function fb(e){const t=e.replace(/^.*[/\\]/,"").toLowerCase(),i=t.replace(/^.*\./,"").toLowerCase(),n=t.length<e.length;return(i.length<t.length-1||!n)&&ub[i]||null}async function gb(e){if(!e)return;const t=fb(e);if(t)return t;const i=await fetch(e,{method:"HEAD"});if(i.ok&&i.headers.has("content-type"))return i.headers.get("content-type")||void 0}function ud(e,t,i,n){const r=L.useMemo(()=>{if(!t)return"";if(t.startsWith("ar://"))return lm({uri:t,gatewayUrl:n});if(n)return t.replace("ipfs://",n);try{return Hh({client:e,uri:t})}catch{return t.replace("ipfs://","https://ipfs.io/ipfs/")}},[t,n,e]),s=Ct({queryKey:["mime-type",r],queryFn:()=>gb(r),enabled:!!r&&!i,initialData:i});return{mediaInfo:{url:r,mimeType:s.data},isFetched:s.isFetched}}const mb=ss.forwardRef(function({src:t,poster:i,alt:n,gatewayUrl:r,requireInteraction:s=!1,width:a="300px",height:l="300px",style:d,mimeType:g,client:y,controls:b,className:M},A){var D;const S={objectFit:"contain",...d},{mediaInfo:C,isFetched:k}=ud(y,t??void 0,g,r),{mediaInfo:N}=ud(y,i??void 0,void 0,r);if(!k||!t)return o.jsx("div",{style:d});if(C.mimeType){if(C.mimeType.startsWith("text/html"))return o.jsx(xb,{style:S,src:C.url,poster:N.url,ref:A,requireInteraction:s,className:M,alt:n});if(C.mimeType.startsWith("model"))return o.jsx(L.Suspense,{fallback:i?o.jsx("img",{style:S,src:i,alt:n,ref:A,className:M}):null,children:o.jsx(pb,{style:S,src:C.url||"",poster:i,alt:n,className:M})});if(C.mimeType.startsWith("video"))return o.jsx(bb,{style:S,src:C.url,ref:A,poster:(D=N.mimeType)!=null&&D.startsWith("image/")?N.url:void 0,requireInteraction:s,className:M,controls:b});if(C.mimeType.startsWith("audio"))return o.jsx(vb,{style:S,src:C.url,poster:N.url,alt:n,ref:A,className:M,height:l,width:a,controls:b});if(C.mimeType.startsWith("image/"))return o.jsx(yb,{style:S,src:C.url,alt:n,ref:A,className:M,height:l,width:a})}return o.jsx(fa,{style:S,src:C.url,alt:n,ref:A,className:M})}),pb=L.lazy(()=>Kt(()=>import("./ModelViewer-C-9G3B-d.js"),__vite__mapDeps([22,0,1,23]))),bl=({onClick:e,isPlaying:t})=>{const[i,n]=L.useState(!1),r=()=>n(!0),s=()=>n(!1),a=()=>n(!1),l=()=>n(!0);return o.jsx("button",{type:"button",style:{position:"absolute",bottom:0,right:0,transform:"translate(-25%, -25%)",width:"32px",height:"32px",zIndex:3,backgroundColor:"#fff",color:"rgb(138, 147, 155)",display:"grid",placeItems:"center",borderRadius:"50%",border:"1px solid rgb(229, 232, 235)",cursor:"pointer",padding:0,...i?{color:"rgb(53, 56, 64)",boxShadow:"rgb(4 17 29 / 25%) 0px 0px 8px 0px"}:{}},onClick:e,onMouseEnter:r,onMouseLeave:s,onMouseDown:a,onMouseUp:l,children:t?o.jsx(db,{}):o.jsx(hb,{})})},yb=ss.forwardRef(function(t,i){const{style:n,src:r,alt:s,className:a,height:l,width:d}=t,[g,y]=L.useState(!1);return g?o.jsx(fa,{style:n,src:r,alt:s,ref:i,className:a}):o.jsx("img",{style:n,src:r??void 0,alt:s,ref:i,className:a,height:l,width:d,onError:()=>{y(!0)}})}),bb=ss.forwardRef(function({src:t,alt:i,poster:n,requireInteraction:r,style:s,width:a,height:l,controls:d,className:g},y){const b=L.useRef(null),[M,A]=L.useState(!r),[S,C]=L.useState(!0),[k,N]=L.useState(!1);return L.useEffect(()=>{if(b.current)if(M)try{b.current.play()}catch(D){console.error("error playing video",D)}else try{b.current.pause(),b.current.currentTime=0}catch(D){console.error("error pausing video",D)}},[M]),k?o.jsx(fa,{style:s,src:t,alt:i,ref:y,className:g}):o.jsxs("div",{style:{position:"relative",...s},className:g,children:[o.jsx("video",{ref:If([b,y]),src:t??void 0,poster:n??void 0,loop:!0,playsInline:!0,controlsList:"nodownload",muted:S,preload:n?"metadata":"auto",onCanPlay:()=>{var D;M&&((D=b.current)==null||D.play())},onError:()=>{N(!0)},width:a,height:l,controls:d,style:{height:"100%",width:"100%",objectFit:"contain",zIndex:1,transition:"opacity .5s",opacity:n?M?1:0:1}}),n&&o.jsx("img",{src:n,style:{objectFit:"contain",pointerEvents:"none",position:"absolute",width:"100%",height:"100%",zIndex:2,transition:"opacity .5s",opacity:M?0:1,top:0,left:0,right:0,bottom:0},alt:i}),o.jsx(bl,{onClick:()=>{A(D=>!D),C(!1)},isPlaying:M})]})}),vb=ss.forwardRef(function({src:t,alt:i,poster:n,style:r,height:s,width:a,className:l,controls:d},g){const y=L.useRef(null),[b,M]=L.useState(!1),[A,S]=L.useState(!0),[C,k]=L.useState(!1);return L.useEffect(()=>{y.current&&(b?y.current.play():(y.current.pause(),y.current.currentTime=0))},[b]),C?o.jsx(fa,{style:r,src:t,alt:i,ref:g,className:l}):o.jsxs("div",{style:{position:"relative",...r},className:l,children:[n?o.jsx("img",{height:s,width:a,src:n,style:{height:"100%",width:"100%",pointerEvents:"none",objectFit:"contain"},alt:i}):o.jsx("div",{style:{width:"100%",height:"100%",display:"grid",placeItems:"center",pointerEvents:"none",backgroundColor:"#fff",color:"rgb(138, 147, 155)"},children:o.jsx(lb,{style:{height:"64px",width:"64px"}})}),o.jsx(bl,{onClick:()=>{M(N=>!N),S(!1)},isPlaying:b}),o.jsx("audio",{ref:If([y,g]),src:t??void 0,loop:!0,playsInline:!0,controls:d,muted:A,preload:"none",controlsList:"nodownload",style:{position:"absolute",opacity:0,pointerEvents:"none",zIndex:-1,visibility:"hidden"},onError:()=>{k(!0)}})]})}),xb=ss.forwardRef(function({src:t,alt:i,poster:n,requireInteraction:r,style:s,...a},l){const[d,g]=L.useState(!r);return o.jsxs("div",{style:{position:"relative",...s},...a,children:[o.jsx("iframe",{title:i||"thirdweb iframe player",src:d?t??void 0:void 0,ref:l,style:{objectFit:"contain",zIndex:1,height:"100%",width:"100%",transition:"opacity .5s",opacity:n?d?1:0:1,border:"none"},sandbox:"allow-scripts",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"}),n&&o.jsx("img",{src:n,style:{objectFit:"contain",pointerEvents:"none",position:"absolute",width:"100%",height:"100%",zIndex:2,transition:"opacity .5s",opacity:d?0:1,top:0,left:0,right:0,bottom:0},alt:i}),o.jsx(bl,{onClick:()=>{g(y=>!y)},isPlaying:d})]})}),fa=ss.forwardRef(function({src:t,alt:i,style:n,className:r},s){return o.jsx("div",{style:{position:"relative",...n},className:r,children:o.jsx("div",{style:{width:"100%",height:"100%",display:"grid",placeItems:"center",backgroundColor:"#fff",color:"rgb(138, 147, 155)"},children:o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px",alignItems:"center",flexWrap:"nowrap"},children:[o.jsx(cb,{style:{maxWidth:"128px",minWidth:"48px",width:"50%",aspectRatio:"1"}}),o.jsx("a",{rel:"noopener noreferrer",style:{textDecoration:"underline",color:"rgb(138, 147, 155)"},href:t??void 0,target:"_blank",ref:s,children:i||"File"})]})})})});function If(e){return t=>{for(const i of e)typeof i=="function"?i(t):i!=null&&(i.current=t)}}const wb=async(e,t,i,n)=>{const r=Wi({address:i,chain:t,client:e});if(await ob({contract:r}).catch(()=>{throw new Error(`Failed to read contract bytecode for NFT ${i} on ${t.name||t.id}, is this NFT on the correct chain?`)}))return(await ib({contract:r,owner:n})).map(d=>({...d,quantityOwned:BigInt(1),address:r.address,chain:t}));if(await ab({contract:r}).catch(()=>!1))return(await xg({contract:r,address:n})).map(d=>({...d,address:r.address,chain:t}));throw new Error(`NFT at ${i} on chain ${t.id} is not ERC721 or ERC1155, or does not properly identify itself as supporting either interface`)};function Mb(e){return o.jsxs(_,{style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:e.connectLocale.viewFunds.viewNFTs,onBack:e.onBack})}),o.jsx(qe,{}),o.jsxs(_,{px:"sm",scrollY:!0,style:{maxHeight:"500px"},children:[o.jsx(q,{y:"md"}),o.jsx(Tf,{...e})]})]})}function Tf(e){const t=ti(),i=Bt(),n=L.useMemo(()=>{const s=[];if(!e.supportedNFTs)return[];for(const a in e.supportedNFTs)e.supportedNFTs[a]&&s.push(...e.supportedNFTs[a].map(l=>({address:l,chain:wt(Number.parseInt(a))})));return s},[e.supportedNFTs]),r=Wc({queries:n.map(s=>({queryKey:["readContract",s.chain.id,s.address],queryFn:()=>{if(!t)throw new Error("No active account");return wb(e.client,s.chain,s.address,t.address)},enabled:!!t}))});return!(i!=null&&i.id)||!(t!=null&&t.address)?null:o.jsxs(o.Fragment,{children:[o.jsx(_,{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:r.map((s,a)=>{var l,d,g;return s.error?(console.error(s.error),null):s.isLoading||!s.data?o.jsx(lt,{height:"150px",width:"150px"},`${(d=(l=n[a])==null?void 0:l.chain)==null?void 0:d.id}:${(g=n[a])==null?void 0:g.address}`):s.data.map(y=>o.jsx(Ab,{...y,client:e.client,chain:y.chain,theme:e.theme},`${y.chain.id}:${y.address}:${y.id}`))})}),o.jsx(q,{y:"lg"})]})}function Ab(e){var r;const t=typeof e.theme=="string"?e.theme:e.theme.type,i=typeof e.theme=="string"?void 0:e.theme,n=o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"4px",alignItems:"center"},children:[o.jsxs("div",{style:{position:"relative",display:"flex",flexShrink:0,alignItems:"center",width:"150px",height:"150px",borderRadius:"8px",overflow:"hidden",background:t==="light"?"rgba(0, 0, 0, 0.10)":"rgba(0, 0, 0, 0.20)"},children:[e.metadata.image&&o.jsx(mb,{src:e.metadata.image,style:{width:"100%",height:"100%"},client:e.client}),e.quantityOwned>1&&o.jsx("div",{style:{position:"absolute",bottom:"4px",right:"4px",background:((r=i==null?void 0:i.colors)==null?void 0:r.modalBg)??(t==="light"?"white":"black"),fontSize:"10px",padding:"4px 4px",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"100%"},children:e.quantityOwned.toString()}),e.chain.icon&&o.jsx("img",{alt:e.chain.name,style:{position:"absolute",bottom:"4px",left:"4px",width:"20px",height:"20px"},src:e.chain.icon.url})]}),o.jsx("span",{style:{fontWeight:600},children:e.metadata.name})]});return e.chain.name?o.jsx("a",{href:`https://thirdweb.com/${e.chain.id}/${e.address}/nfts/${e.id}`,target:"_blank",rel:"noreferrer",children:n}):n}function fd(e){return o.jsxs(_,{style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:e.connectLocale.viewFunds.title,onBack:e.onBack})}),o.jsx(qe,{}),o.jsxs(_,{px:"sm",scrollY:!0,style:{maxHeight:"500px"},children:[o.jsx(q,{y:"md"}),o.jsx(Cf,{...e}),o.jsx(q,{y:"lg"})]})]})}function Cf(e){const t=Bt();if(!t)return null;const i=e.supportedTokens||ko,n=(t!=null&&t.id?i[t.id]:void 0)||[];return o.jsxs(o.Fragment,{children:[o.jsx(gd,{token:cn,chain:t,client:e.client}),n.map(r=>o.jsx(gd,{token:r,chain:t,client:e.client},r.address))]})}function gd(e){var r;const t=ti(),i=Vs({address:t==null?void 0:t.address,chain:e.chain,tokenAddress:mt(e.token)?void 0:e.token.address,client:e.client}),n=mt(e.token)?(r=i.data)==null?void 0:r.name:e.token.name;return o.jsxs(_,{flex:"row",gap:"sm",p:"sm",children:[o.jsx(Ir,{token:e.token,chain:e.chain,size:"lg",client:e.client}),o.jsxs(_,{flex:"column",gap:"xxs",children:[n?o.jsx(F,{size:"sm",color:"primaryText",children:n}):o.jsx(lt,{height:je.md,width:"150px"}),i.data?o.jsxs(F,{size:"xs",children:[" ",Js(i.data)]}):o.jsx(lt,{height:je.xs,width:"100px"})]})]})}function Sb(e){const[t,i]=L.useState("Tokens"),{connectLocale:n}=e;return o.jsxs(_,{animate:"fadein",style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:n.viewFunds.title,onBack:e.onBack})}),o.jsx(qe,{}),o.jsxs(_,{px:"lg",scrollY:!0,style:{minHeight:"330px"},children:[o.jsx(q,{y:"md"}),o.jsx(nf,{options:[{label:o.jsxs("span",{className:"flex gap-2",children:[o.jsx(da,{size:U.sm})," Tokens"]}),value:"Tokens"},{label:o.jsxs("span",{className:"flex gap-2",children:[o.jsx(Uy,{size:U.sm})," NFTs"]}),value:"NFTs"}],selected:t,onSelect:i,children:o.jsxs(_,{scrollY:!0,style:{maxHeight:"300px"},children:[t==="Tokens"&&o.jsx(Cf,{client:e.client,connectLocale:n,supportedTokens:e.supportedTokens}),t==="NFTs"&&o.jsx(Tf,{supportedNFTs:e.supportedNFTs,client:e.client,theme:e.theme,connectLocale:n})]})}),o.jsx(q,{y:"lg"})]})]})}let jb=class extends jr{constructor(t){super()}};const md=se.FIVE_SECONDS,cs={pulse:"heartbeat_pulse"};class vl extends jb{constructor(t){super(t),this.events=new _n.EventEmitter,this.interval=md,this.interval=(t==null?void 0:t.interval)||md}static async init(t){const i=new vl(t);return await i.init(),i}async init(){await this.initialize()}stop(){clearInterval(this.intervalRef)}on(t,i){this.events.on(t,i)}once(t,i){this.events.once(t,i)}off(t,i){this.events.off(t,i)}removeListener(t,i){this.events.removeListener(t,i)}async initialize(){this.intervalRef=setInterval(()=>this.pulse(),se.toMiliseconds(this.interval))}pulse(){this.events.emit(cs.pulse)}}class Ib extends jr{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class Tb extends jr{constructor(t,i){super(),this.core=t,this.logger=i,this.records=new Map}}class Cb{constructor(t,i){this.logger=t,this.core=i}}class Eb extends jr{constructor(t,i){super(),this.relayer=t,this.logger=i}}class Nb extends jr{constructor(t){super()}}class _b{constructor(t,i,n,r){this.core=t,this.logger=i,this.name=n}}class kb extends jr{constructor(t,i){super(),this.relayer=t,this.logger=i}}let Db=class extends jr{constructor(t,i){super(),this.core=t,this.logger=i}},Lb=class{constructor(t,i,n){this.core=t,this.logger=i,this.store=n}};class Pb{constructor(t,i){this.projectId=t,this.logger=i}}class zb{constructor(t,i,n){this.core=t,this.logger=i,this.telemetryEnabled=n}}let Rb=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}};class Ob{constructor(t){this.client=t}}function Ef(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function pd(e,t){t||(t=e.reduce((r,s)=>r+s.length,0));const i=Ef(t);let n=0;for(const r of e)i.set(r,n),n+=r.length;return i}function Nf(e,t,i,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:i},decoder:{decode:n}}}const yd=Nf("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),La=Nf("ascii","a",e=>{let t="a";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e=>{e=e.substring(1);const t=Ef(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}),_f={utf8:yd,"utf-8":yd,hex:Hl.base16,latin1:La,ascii:La,binary:La,...Hl};function Oi(e,t="utf8"){const i=_f[t];if(!i)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):i.decoder.decode(`${i.prefix}${e}`)}function ji(e,t="utf8"){const i=_f[t];if(!i)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):i.encoder.encode(e).substring(1)}var kf={};const Bb="elliptic",qb="6.5.7",Fb="EC cryptography",Ub="lib/elliptic.js",Wb=["lib"],$b={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},Hb={type:"git",url:"git@github.com:indutny/elliptic"},Yb=["EC","Elliptic","curve","Cryptography"],Qb="Fedor Indutny <fedor@indutny.com>",Vb="MIT",Kb={url:"https://github.com/indutny/elliptic/issues"},Gb="https://github.com/indutny/elliptic",Zb={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},Jb={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},Xb={name:Bb,version:qb,description:Fb,main:Ub,files:Wb,scripts:$b,repository:Hb,keywords:Yb,author:Qb,license:Vb,bugs:Kb,homepage:Gb,devDependencies:Zb,dependencies:Jb};var di={},xl={exports:{}};xl.exports;(function(e){(function(t,i){function n(E,m){if(!E)throw new Error(m||"Assertion failed")}function r(E,m){E.super_=m;var c=function(){};c.prototype=m.prototype,E.prototype=new c,E.prototype.constructor=E}function s(E,m,c){if(s.isBN(E))return E;this.negative=0,this.words=null,this.length=0,this.red=null,E!==null&&((m==="le"||m==="be")&&(c=m,m=10),this._init(E||0,m||10,c||"be"))}typeof t=="object"?t.exports=s:i.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=mu.Buffer}catch{}s.isBN=function(m){return m instanceof s?!0:m!==null&&typeof m=="object"&&m.constructor.wordSize===s.wordSize&&Array.isArray(m.words)},s.max=function(m,c){return m.cmp(c)>0?m:c},s.min=function(m,c){return m.cmp(c)<0?m:c},s.prototype._init=function(m,c,h){if(typeof m=="number")return this._initNumber(m,c,h);if(typeof m=="object")return this._initArray(m,c,h);c==="hex"&&(c=16),n(c===(c|0)&&c>=2&&c<=36),m=m.toString().replace(/\s+/g,"");var p=0;m[0]==="-"&&(p++,this.negative=1),p<m.length&&(c===16?this._parseHex(m,p,h):(this._parseBase(m,c,p),h==="le"&&this._initArray(this.toArray(),c,h)))},s.prototype._initNumber=function(m,c,h){m<0&&(this.negative=1,m=-m),m<67108864?(this.words=[m&67108863],this.length=1):m<4503599627370496?(this.words=[m&67108863,m/67108864&67108863],this.length=2):(n(m<9007199254740992),this.words=[m&67108863,m/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),c,h)},s.prototype._initArray=function(m,c,h){if(n(typeof m.length=="number"),m.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(m.length/3),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var v,x,I=0;if(h==="be")for(p=m.length-1,v=0;p>=0;p-=3)x=m[p]|m[p-1]<<8|m[p-2]<<16,this.words[v]|=x<<I&67108863,this.words[v+1]=x>>>26-I&67108863,I+=24,I>=26&&(I-=26,v++);else if(h==="le")for(p=0,v=0;p<m.length;p+=3)x=m[p]|m[p+1]<<8|m[p+2]<<16,this.words[v]|=x<<I&67108863,this.words[v+1]=x>>>26-I&67108863,I+=24,I>=26&&(I-=26,v++);return this.strip()};function l(E,m){var c=E.charCodeAt(m);return c>=65&&c<=70?c-55:c>=97&&c<=102?c-87:c-48&15}function d(E,m,c){var h=l(E,c);return c-1>=m&&(h|=l(E,c-1)<<4),h}s.prototype._parseHex=function(m,c,h){this.length=Math.ceil((m.length-c)/6),this.words=new Array(this.length);for(var p=0;p<this.length;p++)this.words[p]=0;var v=0,x=0,I;if(h==="be")for(p=m.length-1;p>=c;p-=2)I=d(m,c,p)<<v,this.words[x]|=I&67108863,v>=18?(v-=18,x+=1,this.words[x]|=I>>>26):v+=8;else{var w=m.length-c;for(p=w%2===0?c+1:c;p<m.length;p+=2)I=d(m,c,p)<<v,this.words[x]|=I&67108863,v>=18?(v-=18,x+=1,this.words[x]|=I>>>26):v+=8}this.strip()};function g(E,m,c,h){for(var p=0,v=Math.min(E.length,c),x=m;x<v;x++){var I=E.charCodeAt(x)-48;p*=h,I>=49?p+=I-49+10:I>=17?p+=I-17+10:p+=I}return p}s.prototype._parseBase=function(m,c,h){this.words=[0],this.length=1;for(var p=0,v=1;v<=67108863;v*=c)p++;p--,v=v/c|0;for(var x=m.length-h,I=x%p,w=Math.min(x,x-I)+h,u=0,f=h;f<w;f+=p)u=g(m,f,f+p,c),this.imuln(v),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(I!==0){var T=1;for(u=g(m,f,m.length,c),f=0;f<I;f++)T*=c;this.imuln(T),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},s.prototype.copy=function(m){m.words=new Array(this.length);for(var c=0;c<this.length;c++)m.words[c]=this.words[c];m.length=this.length,m.negative=this.negative,m.red=this.red},s.prototype.clone=function(){var m=new s(null);return this.copy(m),m},s.prototype._expand=function(m){for(;this.length<m;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var y=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],b=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],M=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(m,c){m=m||10,c=c|0||1;var h;if(m===16||m==="hex"){h="";for(var p=0,v=0,x=0;x<this.length;x++){var I=this.words[x],w=((I<<p|v)&16777215).toString(16);v=I>>>24-p&16777215,v!==0||x!==this.length-1?h=y[6-w.length]+w+h:h=w+h,p+=2,p>=26&&(p-=26,x--)}for(v!==0&&(h=v.toString(16)+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(m===(m|0)&&m>=2&&m<=36){var u=b[m],f=M[m];h="";var T=this.clone();for(T.negative=0;!T.isZero();){var $=T.modn(f).toString(m);T=T.idivn(f),T.isZero()?h=$+h:h=y[u-$.length]+$+h}for(this.isZero()&&(h="0"+h);h.length%c!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var m=this.words[0];return this.length===2?m+=this.words[1]*67108864:this.length===3&&this.words[2]===1?m+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-m:m},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(m,c){return n(typeof a<"u"),this.toArrayLike(a,m,c)},s.prototype.toArray=function(m,c){return this.toArrayLike(Array,m,c)},s.prototype.toArrayLike=function(m,c,h){var p=this.byteLength(),v=h||Math.max(1,p);n(p<=v,"byte array longer than desired length"),n(v>0,"Requested array length <= 0"),this.strip();var x=c==="le",I=new m(v),w,u,f=this.clone();if(x){for(u=0;!f.isZero();u++)w=f.andln(255),f.iushrn(8),I[u]=w;for(;u<v;u++)I[u]=0}else{for(u=0;u<v-p;u++)I[u]=0;for(u=0;!f.isZero();u++)w=f.andln(255),f.iushrn(8),I[v-u-1]=w}return I},Math.clz32?s.prototype._countBits=function(m){return 32-Math.clz32(m)}:s.prototype._countBits=function(m){var c=m,h=0;return c>=4096&&(h+=13,c>>>=13),c>=64&&(h+=7,c>>>=7),c>=8&&(h+=4,c>>>=4),c>=2&&(h+=2,c>>>=2),h+c},s.prototype._zeroBits=function(m){if(m===0)return 26;var c=m,h=0;return c&8191||(h+=13,c>>>=13),c&127||(h+=7,c>>>=7),c&15||(h+=4,c>>>=4),c&3||(h+=2,c>>>=2),c&1||h++,h},s.prototype.bitLength=function(){var m=this.words[this.length-1],c=this._countBits(m);return(this.length-1)*26+c};function A(E){for(var m=new Array(E.bitLength()),c=0;c<m.length;c++){var h=c/26|0,p=c%26;m[c]=(E.words[h]&1<<p)>>>p}return m}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var m=0,c=0;c<this.length;c++){var h=this._zeroBits(this.words[c]);if(m+=h,h!==26)break}return m},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(m){return this.negative!==0?this.abs().inotn(m).iaddn(1):this.clone()},s.prototype.fromTwos=function(m){return this.testn(m-1)?this.notn(m).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(m){for(;this.length<m.length;)this.words[this.length++]=0;for(var c=0;c<m.length;c++)this.words[c]=this.words[c]|m.words[c];return this.strip()},s.prototype.ior=function(m){return n((this.negative|m.negative)===0),this.iuor(m)},s.prototype.or=function(m){return this.length>m.length?this.clone().ior(m):m.clone().ior(this)},s.prototype.uor=function(m){return this.length>m.length?this.clone().iuor(m):m.clone().iuor(this)},s.prototype.iuand=function(m){var c;this.length>m.length?c=m:c=this;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]&m.words[h];return this.length=c.length,this.strip()},s.prototype.iand=function(m){return n((this.negative|m.negative)===0),this.iuand(m)},s.prototype.and=function(m){return this.length>m.length?this.clone().iand(m):m.clone().iand(this)},s.prototype.uand=function(m){return this.length>m.length?this.clone().iuand(m):m.clone().iuand(this)},s.prototype.iuxor=function(m){var c,h;this.length>m.length?(c=this,h=m):(c=m,h=this);for(var p=0;p<h.length;p++)this.words[p]=c.words[p]^h.words[p];if(this!==c)for(;p<c.length;p++)this.words[p]=c.words[p];return this.length=c.length,this.strip()},s.prototype.ixor=function(m){return n((this.negative|m.negative)===0),this.iuxor(m)},s.prototype.xor=function(m){return this.length>m.length?this.clone().ixor(m):m.clone().ixor(this)},s.prototype.uxor=function(m){return this.length>m.length?this.clone().iuxor(m):m.clone().iuxor(this)},s.prototype.inotn=function(m){n(typeof m=="number"&&m>=0);var c=Math.ceil(m/26)|0,h=m%26;this._expand(c),h>0&&c--;for(var p=0;p<c;p++)this.words[p]=~this.words[p]&67108863;return h>0&&(this.words[p]=~this.words[p]&67108863>>26-h),this.strip()},s.prototype.notn=function(m){return this.clone().inotn(m)},s.prototype.setn=function(m,c){n(typeof m=="number"&&m>=0);var h=m/26|0,p=m%26;return this._expand(h+1),c?this.words[h]=this.words[h]|1<<p:this.words[h]=this.words[h]&~(1<<p),this.strip()},s.prototype.iadd=function(m){var c;if(this.negative!==0&&m.negative===0)return this.negative=0,c=this.isub(m),this.negative^=1,this._normSign();if(this.negative===0&&m.negative!==0)return m.negative=0,c=this.isub(m),m.negative=1,c._normSign();var h,p;this.length>m.length?(h=this,p=m):(h=m,p=this);for(var v=0,x=0;x<p.length;x++)c=(h.words[x]|0)+(p.words[x]|0)+v,this.words[x]=c&67108863,v=c>>>26;for(;v!==0&&x<h.length;x++)c=(h.words[x]|0)+v,this.words[x]=c&67108863,v=c>>>26;if(this.length=h.length,v!==0)this.words[this.length]=v,this.length++;else if(h!==this)for(;x<h.length;x++)this.words[x]=h.words[x];return this},s.prototype.add=function(m){var c;return m.negative!==0&&this.negative===0?(m.negative=0,c=this.sub(m),m.negative^=1,c):m.negative===0&&this.negative!==0?(this.negative=0,c=m.sub(this),this.negative=1,c):this.length>m.length?this.clone().iadd(m):m.clone().iadd(this)},s.prototype.isub=function(m){if(m.negative!==0){m.negative=0;var c=this.iadd(m);return m.negative=1,c._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(m),this.negative=1,this._normSign();var h=this.cmp(m);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var p,v;h>0?(p=this,v=m):(p=m,v=this);for(var x=0,I=0;I<v.length;I++)c=(p.words[I]|0)-(v.words[I]|0)+x,x=c>>26,this.words[I]=c&67108863;for(;x!==0&&I<p.length;I++)c=(p.words[I]|0)+x,x=c>>26,this.words[I]=c&67108863;if(x===0&&I<p.length&&p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this.length=Math.max(this.length,I),p!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(m){return this.clone().isub(m)};function S(E,m,c){c.negative=m.negative^E.negative;var h=E.length+m.length|0;c.length=h,h=h-1|0;var p=E.words[0]|0,v=m.words[0]|0,x=p*v,I=x&67108863,w=x/67108864|0;c.words[0]=I;for(var u=1;u<h;u++){for(var f=w>>>26,T=w&67108863,$=Math.min(u,m.length-1),V=Math.max(0,u-E.length+1);V<=$;V++){var j=u-V|0;p=E.words[j]|0,v=m.words[V]|0,x=p*v+T,f+=x/67108864|0,T=x&67108863}c.words[u]=T|0,w=f|0}return w!==0?c.words[u]=w|0:c.length--,c.strip()}var C=function(m,c,h){var p=m.words,v=c.words,x=h.words,I=0,w,u,f,T=p[0]|0,$=T&8191,V=T>>>13,j=p[1]|0,O=j&8191,R=j>>>13,Q=p[2]|0,K=Q&8191,G=Q>>>13,te=p[3]|0,J=te&8191,ne=te>>>13,re=p[4]|0,de=re&8191,he=re>>>13,De=p[5]|0,Le=De&8191,le=De>>>13,Pe=p[6]|0,ze=Pe&8191,ue=Pe>>>13,Re=p[7]|0,ce=Re&8191,oe=Re>>>13,ae=p[8]|0,Ee=ae&8191,fe=ae>>>13,Fe=p[9]|0,Ue=Fe&8191,ge=Fe>>>13,We=v[0]|0,$e=We&8191,me=We>>>13,He=v[1]|0,Ye=He&8191,pe=He>>>13,Qe=v[2]|0,Ve=Qe&8191,ye=Qe>>>13,Ke=v[3]|0,Ge=Ke&8191,be=Ke>>>13,Ze=v[4]|0,Je=Ze&8191,ve=Ze>>>13,Xe=v[5]|0,et=Xe&8191,xe=Xe>>>13,tt=v[6]|0,it=tt&8191,we=tt>>>13,nt=v[7]|0,rt=nt&8191,Me=nt>>>13,st=v[8]|0,ot=st&8191,Ae=st>>>13,at=v[9]|0,ct=at&8191,Se=at>>>13;h.negative=m.negative^c.negative,h.length=19,w=Math.imul($,$e),u=Math.imul($,me),u=u+Math.imul(V,$e)|0,f=Math.imul(V,me);var Be=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(Be>>>26)|0,Be&=67108863,w=Math.imul(O,$e),u=Math.imul(O,me),u=u+Math.imul(R,$e)|0,f=Math.imul(R,me),w=w+Math.imul($,Ye)|0,u=u+Math.imul($,pe)|0,u=u+Math.imul(V,Ye)|0,f=f+Math.imul(V,pe)|0;var hi=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(hi>>>26)|0,hi&=67108863,w=Math.imul(K,$e),u=Math.imul(K,me),u=u+Math.imul(G,$e)|0,f=Math.imul(G,me),w=w+Math.imul(O,Ye)|0,u=u+Math.imul(O,pe)|0,u=u+Math.imul(R,Ye)|0,f=f+Math.imul(R,pe)|0,w=w+Math.imul($,Ve)|0,u=u+Math.imul($,ye)|0,u=u+Math.imul(V,Ve)|0,f=f+Math.imul(V,ye)|0;var ui=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(ui>>>26)|0,ui&=67108863,w=Math.imul(J,$e),u=Math.imul(J,me),u=u+Math.imul(ne,$e)|0,f=Math.imul(ne,me),w=w+Math.imul(K,Ye)|0,u=u+Math.imul(K,pe)|0,u=u+Math.imul(G,Ye)|0,f=f+Math.imul(G,pe)|0,w=w+Math.imul(O,Ve)|0,u=u+Math.imul(O,ye)|0,u=u+Math.imul(R,Ve)|0,f=f+Math.imul(R,ye)|0,w=w+Math.imul($,Ge)|0,u=u+Math.imul($,be)|0,u=u+Math.imul(V,Ge)|0,f=f+Math.imul(V,be)|0;var fi=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(fi>>>26)|0,fi&=67108863,w=Math.imul(de,$e),u=Math.imul(de,me),u=u+Math.imul(he,$e)|0,f=Math.imul(he,me),w=w+Math.imul(J,Ye)|0,u=u+Math.imul(J,pe)|0,u=u+Math.imul(ne,Ye)|0,f=f+Math.imul(ne,pe)|0,w=w+Math.imul(K,Ve)|0,u=u+Math.imul(K,ye)|0,u=u+Math.imul(G,Ve)|0,f=f+Math.imul(G,ye)|0,w=w+Math.imul(O,Ge)|0,u=u+Math.imul(O,be)|0,u=u+Math.imul(R,Ge)|0,f=f+Math.imul(R,be)|0,w=w+Math.imul($,Je)|0,u=u+Math.imul($,ve)|0,u=u+Math.imul(V,Je)|0,f=f+Math.imul(V,ve)|0;var gi=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(gi>>>26)|0,gi&=67108863,w=Math.imul(Le,$e),u=Math.imul(Le,me),u=u+Math.imul(le,$e)|0,f=Math.imul(le,me),w=w+Math.imul(de,Ye)|0,u=u+Math.imul(de,pe)|0,u=u+Math.imul(he,Ye)|0,f=f+Math.imul(he,pe)|0,w=w+Math.imul(J,Ve)|0,u=u+Math.imul(J,ye)|0,u=u+Math.imul(ne,Ve)|0,f=f+Math.imul(ne,ye)|0,w=w+Math.imul(K,Ge)|0,u=u+Math.imul(K,be)|0,u=u+Math.imul(G,Ge)|0,f=f+Math.imul(G,be)|0,w=w+Math.imul(O,Je)|0,u=u+Math.imul(O,ve)|0,u=u+Math.imul(R,Je)|0,f=f+Math.imul(R,ve)|0,w=w+Math.imul($,et)|0,u=u+Math.imul($,xe)|0,u=u+Math.imul(V,et)|0,f=f+Math.imul(V,xe)|0;var mi=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(mi>>>26)|0,mi&=67108863,w=Math.imul(ze,$e),u=Math.imul(ze,me),u=u+Math.imul(ue,$e)|0,f=Math.imul(ue,me),w=w+Math.imul(Le,Ye)|0,u=u+Math.imul(Le,pe)|0,u=u+Math.imul(le,Ye)|0,f=f+Math.imul(le,pe)|0,w=w+Math.imul(de,Ve)|0,u=u+Math.imul(de,ye)|0,u=u+Math.imul(he,Ve)|0,f=f+Math.imul(he,ye)|0,w=w+Math.imul(J,Ge)|0,u=u+Math.imul(J,be)|0,u=u+Math.imul(ne,Ge)|0,f=f+Math.imul(ne,be)|0,w=w+Math.imul(K,Je)|0,u=u+Math.imul(K,ve)|0,u=u+Math.imul(G,Je)|0,f=f+Math.imul(G,ve)|0,w=w+Math.imul(O,et)|0,u=u+Math.imul(O,xe)|0,u=u+Math.imul(R,et)|0,f=f+Math.imul(R,xe)|0,w=w+Math.imul($,it)|0,u=u+Math.imul($,we)|0,u=u+Math.imul(V,it)|0,f=f+Math.imul(V,we)|0;var pi=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(pi>>>26)|0,pi&=67108863,w=Math.imul(ce,$e),u=Math.imul(ce,me),u=u+Math.imul(oe,$e)|0,f=Math.imul(oe,me),w=w+Math.imul(ze,Ye)|0,u=u+Math.imul(ze,pe)|0,u=u+Math.imul(ue,Ye)|0,f=f+Math.imul(ue,pe)|0,w=w+Math.imul(Le,Ve)|0,u=u+Math.imul(Le,ye)|0,u=u+Math.imul(le,Ve)|0,f=f+Math.imul(le,ye)|0,w=w+Math.imul(de,Ge)|0,u=u+Math.imul(de,be)|0,u=u+Math.imul(he,Ge)|0,f=f+Math.imul(he,be)|0,w=w+Math.imul(J,Je)|0,u=u+Math.imul(J,ve)|0,u=u+Math.imul(ne,Je)|0,f=f+Math.imul(ne,ve)|0,w=w+Math.imul(K,et)|0,u=u+Math.imul(K,xe)|0,u=u+Math.imul(G,et)|0,f=f+Math.imul(G,xe)|0,w=w+Math.imul(O,it)|0,u=u+Math.imul(O,we)|0,u=u+Math.imul(R,it)|0,f=f+Math.imul(R,we)|0,w=w+Math.imul($,rt)|0,u=u+Math.imul($,Me)|0,u=u+Math.imul(V,rt)|0,f=f+Math.imul(V,Me)|0;var Gn=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,w=Math.imul(Ee,$e),u=Math.imul(Ee,me),u=u+Math.imul(fe,$e)|0,f=Math.imul(fe,me),w=w+Math.imul(ce,Ye)|0,u=u+Math.imul(ce,pe)|0,u=u+Math.imul(oe,Ye)|0,f=f+Math.imul(oe,pe)|0,w=w+Math.imul(ze,Ve)|0,u=u+Math.imul(ze,ye)|0,u=u+Math.imul(ue,Ve)|0,f=f+Math.imul(ue,ye)|0,w=w+Math.imul(Le,Ge)|0,u=u+Math.imul(Le,be)|0,u=u+Math.imul(le,Ge)|0,f=f+Math.imul(le,be)|0,w=w+Math.imul(de,Je)|0,u=u+Math.imul(de,ve)|0,u=u+Math.imul(he,Je)|0,f=f+Math.imul(he,ve)|0,w=w+Math.imul(J,et)|0,u=u+Math.imul(J,xe)|0,u=u+Math.imul(ne,et)|0,f=f+Math.imul(ne,xe)|0,w=w+Math.imul(K,it)|0,u=u+Math.imul(K,we)|0,u=u+Math.imul(G,it)|0,f=f+Math.imul(G,we)|0,w=w+Math.imul(O,rt)|0,u=u+Math.imul(O,Me)|0,u=u+Math.imul(R,rt)|0,f=f+Math.imul(R,Me)|0,w=w+Math.imul($,ot)|0,u=u+Math.imul($,Ae)|0,u=u+Math.imul(V,ot)|0,f=f+Math.imul(V,Ae)|0;var Zn=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,w=Math.imul(Ue,$e),u=Math.imul(Ue,me),u=u+Math.imul(ge,$e)|0,f=Math.imul(ge,me),w=w+Math.imul(Ee,Ye)|0,u=u+Math.imul(Ee,pe)|0,u=u+Math.imul(fe,Ye)|0,f=f+Math.imul(fe,pe)|0,w=w+Math.imul(ce,Ve)|0,u=u+Math.imul(ce,ye)|0,u=u+Math.imul(oe,Ve)|0,f=f+Math.imul(oe,ye)|0,w=w+Math.imul(ze,Ge)|0,u=u+Math.imul(ze,be)|0,u=u+Math.imul(ue,Ge)|0,f=f+Math.imul(ue,be)|0,w=w+Math.imul(Le,Je)|0,u=u+Math.imul(Le,ve)|0,u=u+Math.imul(le,Je)|0,f=f+Math.imul(le,ve)|0,w=w+Math.imul(de,et)|0,u=u+Math.imul(de,xe)|0,u=u+Math.imul(he,et)|0,f=f+Math.imul(he,xe)|0,w=w+Math.imul(J,it)|0,u=u+Math.imul(J,we)|0,u=u+Math.imul(ne,it)|0,f=f+Math.imul(ne,we)|0,w=w+Math.imul(K,rt)|0,u=u+Math.imul(K,Me)|0,u=u+Math.imul(G,rt)|0,f=f+Math.imul(G,Me)|0,w=w+Math.imul(O,ot)|0,u=u+Math.imul(O,Ae)|0,u=u+Math.imul(R,ot)|0,f=f+Math.imul(R,Ae)|0,w=w+Math.imul($,ct)|0,u=u+Math.imul($,Se)|0,u=u+Math.imul(V,ct)|0,f=f+Math.imul(V,Se)|0;var Jn=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,w=Math.imul(Ue,Ye),u=Math.imul(Ue,pe),u=u+Math.imul(ge,Ye)|0,f=Math.imul(ge,pe),w=w+Math.imul(Ee,Ve)|0,u=u+Math.imul(Ee,ye)|0,u=u+Math.imul(fe,Ve)|0,f=f+Math.imul(fe,ye)|0,w=w+Math.imul(ce,Ge)|0,u=u+Math.imul(ce,be)|0,u=u+Math.imul(oe,Ge)|0,f=f+Math.imul(oe,be)|0,w=w+Math.imul(ze,Je)|0,u=u+Math.imul(ze,ve)|0,u=u+Math.imul(ue,Je)|0,f=f+Math.imul(ue,ve)|0,w=w+Math.imul(Le,et)|0,u=u+Math.imul(Le,xe)|0,u=u+Math.imul(le,et)|0,f=f+Math.imul(le,xe)|0,w=w+Math.imul(de,it)|0,u=u+Math.imul(de,we)|0,u=u+Math.imul(he,it)|0,f=f+Math.imul(he,we)|0,w=w+Math.imul(J,rt)|0,u=u+Math.imul(J,Me)|0,u=u+Math.imul(ne,rt)|0,f=f+Math.imul(ne,Me)|0,w=w+Math.imul(K,ot)|0,u=u+Math.imul(K,Ae)|0,u=u+Math.imul(G,ot)|0,f=f+Math.imul(G,Ae)|0,w=w+Math.imul(O,ct)|0,u=u+Math.imul(O,Se)|0,u=u+Math.imul(R,ct)|0,f=f+Math.imul(R,Se)|0;var Xn=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,w=Math.imul(Ue,Ve),u=Math.imul(Ue,ye),u=u+Math.imul(ge,Ve)|0,f=Math.imul(ge,ye),w=w+Math.imul(Ee,Ge)|0,u=u+Math.imul(Ee,be)|0,u=u+Math.imul(fe,Ge)|0,f=f+Math.imul(fe,be)|0,w=w+Math.imul(ce,Je)|0,u=u+Math.imul(ce,ve)|0,u=u+Math.imul(oe,Je)|0,f=f+Math.imul(oe,ve)|0,w=w+Math.imul(ze,et)|0,u=u+Math.imul(ze,xe)|0,u=u+Math.imul(ue,et)|0,f=f+Math.imul(ue,xe)|0,w=w+Math.imul(Le,it)|0,u=u+Math.imul(Le,we)|0,u=u+Math.imul(le,it)|0,f=f+Math.imul(le,we)|0,w=w+Math.imul(de,rt)|0,u=u+Math.imul(de,Me)|0,u=u+Math.imul(he,rt)|0,f=f+Math.imul(he,Me)|0,w=w+Math.imul(J,ot)|0,u=u+Math.imul(J,Ae)|0,u=u+Math.imul(ne,ot)|0,f=f+Math.imul(ne,Ae)|0,w=w+Math.imul(K,ct)|0,u=u+Math.imul(K,Se)|0,u=u+Math.imul(G,ct)|0,f=f+Math.imul(G,Se)|0;var er=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(er>>>26)|0,er&=67108863,w=Math.imul(Ue,Ge),u=Math.imul(Ue,be),u=u+Math.imul(ge,Ge)|0,f=Math.imul(ge,be),w=w+Math.imul(Ee,Je)|0,u=u+Math.imul(Ee,ve)|0,u=u+Math.imul(fe,Je)|0,f=f+Math.imul(fe,ve)|0,w=w+Math.imul(ce,et)|0,u=u+Math.imul(ce,xe)|0,u=u+Math.imul(oe,et)|0,f=f+Math.imul(oe,xe)|0,w=w+Math.imul(ze,it)|0,u=u+Math.imul(ze,we)|0,u=u+Math.imul(ue,it)|0,f=f+Math.imul(ue,we)|0,w=w+Math.imul(Le,rt)|0,u=u+Math.imul(Le,Me)|0,u=u+Math.imul(le,rt)|0,f=f+Math.imul(le,Me)|0,w=w+Math.imul(de,ot)|0,u=u+Math.imul(de,Ae)|0,u=u+Math.imul(he,ot)|0,f=f+Math.imul(he,Ae)|0,w=w+Math.imul(J,ct)|0,u=u+Math.imul(J,Se)|0,u=u+Math.imul(ne,ct)|0,f=f+Math.imul(ne,Se)|0;var tr=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(tr>>>26)|0,tr&=67108863,w=Math.imul(Ue,Je),u=Math.imul(Ue,ve),u=u+Math.imul(ge,Je)|0,f=Math.imul(ge,ve),w=w+Math.imul(Ee,et)|0,u=u+Math.imul(Ee,xe)|0,u=u+Math.imul(fe,et)|0,f=f+Math.imul(fe,xe)|0,w=w+Math.imul(ce,it)|0,u=u+Math.imul(ce,we)|0,u=u+Math.imul(oe,it)|0,f=f+Math.imul(oe,we)|0,w=w+Math.imul(ze,rt)|0,u=u+Math.imul(ze,Me)|0,u=u+Math.imul(ue,rt)|0,f=f+Math.imul(ue,Me)|0,w=w+Math.imul(Le,ot)|0,u=u+Math.imul(Le,Ae)|0,u=u+Math.imul(le,ot)|0,f=f+Math.imul(le,Ae)|0,w=w+Math.imul(de,ct)|0,u=u+Math.imul(de,Se)|0,u=u+Math.imul(he,ct)|0,f=f+Math.imul(he,Se)|0;var ir=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(ir>>>26)|0,ir&=67108863,w=Math.imul(Ue,et),u=Math.imul(Ue,xe),u=u+Math.imul(ge,et)|0,f=Math.imul(ge,xe),w=w+Math.imul(Ee,it)|0,u=u+Math.imul(Ee,we)|0,u=u+Math.imul(fe,it)|0,f=f+Math.imul(fe,we)|0,w=w+Math.imul(ce,rt)|0,u=u+Math.imul(ce,Me)|0,u=u+Math.imul(oe,rt)|0,f=f+Math.imul(oe,Me)|0,w=w+Math.imul(ze,ot)|0,u=u+Math.imul(ze,Ae)|0,u=u+Math.imul(ue,ot)|0,f=f+Math.imul(ue,Ae)|0,w=w+Math.imul(Le,ct)|0,u=u+Math.imul(Le,Se)|0,u=u+Math.imul(le,ct)|0,f=f+Math.imul(le,Se)|0;var nr=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(nr>>>26)|0,nr&=67108863,w=Math.imul(Ue,it),u=Math.imul(Ue,we),u=u+Math.imul(ge,it)|0,f=Math.imul(ge,we),w=w+Math.imul(Ee,rt)|0,u=u+Math.imul(Ee,Me)|0,u=u+Math.imul(fe,rt)|0,f=f+Math.imul(fe,Me)|0,w=w+Math.imul(ce,ot)|0,u=u+Math.imul(ce,Ae)|0,u=u+Math.imul(oe,ot)|0,f=f+Math.imul(oe,Ae)|0,w=w+Math.imul(ze,ct)|0,u=u+Math.imul(ze,Se)|0,u=u+Math.imul(ue,ct)|0,f=f+Math.imul(ue,Se)|0;var rr=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(rr>>>26)|0,rr&=67108863,w=Math.imul(Ue,rt),u=Math.imul(Ue,Me),u=u+Math.imul(ge,rt)|0,f=Math.imul(ge,Me),w=w+Math.imul(Ee,ot)|0,u=u+Math.imul(Ee,Ae)|0,u=u+Math.imul(fe,ot)|0,f=f+Math.imul(fe,Ae)|0,w=w+Math.imul(ce,ct)|0,u=u+Math.imul(ce,Se)|0,u=u+Math.imul(oe,ct)|0,f=f+Math.imul(oe,Se)|0;var sr=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(sr>>>26)|0,sr&=67108863,w=Math.imul(Ue,ot),u=Math.imul(Ue,Ae),u=u+Math.imul(ge,ot)|0,f=Math.imul(ge,Ae),w=w+Math.imul(Ee,ct)|0,u=u+Math.imul(Ee,Se)|0,u=u+Math.imul(fe,ct)|0,f=f+Math.imul(fe,Se)|0;var or=(I+w|0)+((u&8191)<<13)|0;I=(f+(u>>>13)|0)+(or>>>26)|0,or&=67108863,w=Math.imul(Ue,ct),u=Math.imul(Ue,Se),u=u+Math.imul(ge,ct)|0,f=Math.imul(ge,Se);var ar=(I+w|0)+((u&8191)<<13)|0;return I=(f+(u>>>13)|0)+(ar>>>26)|0,ar&=67108863,x[0]=Be,x[1]=hi,x[2]=ui,x[3]=fi,x[4]=gi,x[5]=mi,x[6]=pi,x[7]=Gn,x[8]=Zn,x[9]=Jn,x[10]=Xn,x[11]=er,x[12]=tr,x[13]=ir,x[14]=nr,x[15]=rr,x[16]=sr,x[17]=or,x[18]=ar,I!==0&&(x[19]=I,h.length++),h};Math.imul||(C=S);function k(E,m,c){c.negative=m.negative^E.negative,c.length=E.length+m.length;for(var h=0,p=0,v=0;v<c.length-1;v++){var x=p;p=0;for(var I=h&67108863,w=Math.min(v,m.length-1),u=Math.max(0,v-E.length+1);u<=w;u++){var f=v-u,T=E.words[f]|0,$=m.words[u]|0,V=T*$,j=V&67108863;x=x+(V/67108864|0)|0,j=j+I|0,I=j&67108863,x=x+(j>>>26)|0,p+=x>>>26,x&=67108863}c.words[v]=I,h=x,x=p}return h!==0?c.words[v]=h:c.length--,c.strip()}function N(E,m,c){var h=new D;return h.mulp(E,m,c)}s.prototype.mulTo=function(m,c){var h,p=this.length+m.length;return this.length===10&&m.length===10?h=C(this,m,c):p<63?h=S(this,m,c):p<1024?h=k(this,m,c):h=N(this,m,c),h};function D(E,m){this.x=E,this.y=m}D.prototype.makeRBT=function(m){for(var c=new Array(m),h=s.prototype._countBits(m)-1,p=0;p<m;p++)c[p]=this.revBin(p,h,m);return c},D.prototype.revBin=function(m,c,h){if(m===0||m===h-1)return m;for(var p=0,v=0;v<c;v++)p|=(m&1)<<c-v-1,m>>=1;return p},D.prototype.permute=function(m,c,h,p,v,x){for(var I=0;I<x;I++)p[I]=c[m[I]],v[I]=h[m[I]]},D.prototype.transform=function(m,c,h,p,v,x){this.permute(x,m,c,h,p,v);for(var I=1;I<v;I<<=1)for(var w=I<<1,u=Math.cos(2*Math.PI/w),f=Math.sin(2*Math.PI/w),T=0;T<v;T+=w)for(var $=u,V=f,j=0;j<I;j++){var O=h[T+j],R=p[T+j],Q=h[T+j+I],K=p[T+j+I],G=$*Q-V*K;K=$*K+V*Q,Q=G,h[T+j]=O+Q,p[T+j]=R+K,h[T+j+I]=O-Q,p[T+j+I]=R-K,j!==w&&(G=u*$-f*V,V=u*V+f*$,$=G)}},D.prototype.guessLen13b=function(m,c){var h=Math.max(c,m)|1,p=h&1,v=0;for(h=h/2|0;h;h=h>>>1)v++;return 1<<v+1+p},D.prototype.conjugate=function(m,c,h){if(!(h<=1))for(var p=0;p<h/2;p++){var v=m[p];m[p]=m[h-p-1],m[h-p-1]=v,v=c[p],c[p]=-c[h-p-1],c[h-p-1]=-v}},D.prototype.normalize13b=function(m,c){for(var h=0,p=0;p<c/2;p++){var v=Math.round(m[2*p+1]/c)*8192+Math.round(m[2*p]/c)+h;m[p]=v&67108863,v<67108864?h=0:h=v/67108864|0}return m},D.prototype.convert13b=function(m,c,h,p){for(var v=0,x=0;x<c;x++)v=v+(m[x]|0),h[2*x]=v&8191,v=v>>>13,h[2*x+1]=v&8191,v=v>>>13;for(x=2*c;x<p;++x)h[x]=0;n(v===0),n((v&-8192)===0)},D.prototype.stub=function(m){for(var c=new Array(m),h=0;h<m;h++)c[h]=0;return c},D.prototype.mulp=function(m,c,h){var p=2*this.guessLen13b(m.length,c.length),v=this.makeRBT(p),x=this.stub(p),I=new Array(p),w=new Array(p),u=new Array(p),f=new Array(p),T=new Array(p),$=new Array(p),V=h.words;V.length=p,this.convert13b(m.words,m.length,I,p),this.convert13b(c.words,c.length,f,p),this.transform(I,x,w,u,p,v),this.transform(f,x,T,$,p,v);for(var j=0;j<p;j++){var O=w[j]*T[j]-u[j]*$[j];u[j]=w[j]*$[j]+u[j]*T[j],w[j]=O}return this.conjugate(w,u,p),this.transform(w,u,V,x,p,v),this.conjugate(V,x,p),this.normalize13b(V,p),h.negative=m.negative^c.negative,h.length=m.length+c.length,h.strip()},s.prototype.mul=function(m){var c=new s(null);return c.words=new Array(this.length+m.length),this.mulTo(m,c)},s.prototype.mulf=function(m){var c=new s(null);return c.words=new Array(this.length+m.length),N(this,m,c)},s.prototype.imul=function(m){return this.clone().mulTo(m,this)},s.prototype.imuln=function(m){n(typeof m=="number"),n(m<67108864);for(var c=0,h=0;h<this.length;h++){var p=(this.words[h]|0)*m,v=(p&67108863)+(c&67108863);c>>=26,c+=p/67108864|0,c+=v>>>26,this.words[h]=v&67108863}return c!==0&&(this.words[h]=c,this.length++),this},s.prototype.muln=function(m){return this.clone().imuln(m)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(m){var c=A(m);if(c.length===0)return new s(1);for(var h=this,p=0;p<c.length&&c[p]===0;p++,h=h.sqr());if(++p<c.length)for(var v=h.sqr();p<c.length;p++,v=v.sqr())c[p]!==0&&(h=h.mul(v));return h},s.prototype.iushln=function(m){n(typeof m=="number"&&m>=0);var c=m%26,h=(m-c)/26,p=67108863>>>26-c<<26-c,v;if(c!==0){var x=0;for(v=0;v<this.length;v++){var I=this.words[v]&p,w=(this.words[v]|0)-I<<c;this.words[v]=w|x,x=I>>>26-c}x&&(this.words[v]=x,this.length++)}if(h!==0){for(v=this.length-1;v>=0;v--)this.words[v+h]=this.words[v];for(v=0;v<h;v++)this.words[v]=0;this.length+=h}return this.strip()},s.prototype.ishln=function(m){return n(this.negative===0),this.iushln(m)},s.prototype.iushrn=function(m,c,h){n(typeof m=="number"&&m>=0);var p;c?p=(c-c%26)/26:p=0;var v=m%26,x=Math.min((m-v)/26,this.length),I=67108863^67108863>>>v<<v,w=h;if(p-=x,p=Math.max(0,p),w){for(var u=0;u<x;u++)w.words[u]=this.words[u];w.length=x}if(x!==0)if(this.length>x)for(this.length-=x,u=0;u<this.length;u++)this.words[u]=this.words[u+x];else this.words[0]=0,this.length=1;var f=0;for(u=this.length-1;u>=0&&(f!==0||u>=p);u--){var T=this.words[u]|0;this.words[u]=f<<26-v|T>>>v,f=T&I}return w&&f!==0&&(w.words[w.length++]=f),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(m,c,h){return n(this.negative===0),this.iushrn(m,c,h)},s.prototype.shln=function(m){return this.clone().ishln(m)},s.prototype.ushln=function(m){return this.clone().iushln(m)},s.prototype.shrn=function(m){return this.clone().ishrn(m)},s.prototype.ushrn=function(m){return this.clone().iushrn(m)},s.prototype.testn=function(m){n(typeof m=="number"&&m>=0);var c=m%26,h=(m-c)/26,p=1<<c;if(this.length<=h)return!1;var v=this.words[h];return!!(v&p)},s.prototype.imaskn=function(m){n(typeof m=="number"&&m>=0);var c=m%26,h=(m-c)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(c!==0&&h++,this.length=Math.min(h,this.length),c!==0){var p=67108863^67108863>>>c<<c;this.words[this.length-1]&=p}return this.strip()},s.prototype.maskn=function(m){return this.clone().imaskn(m)},s.prototype.iaddn=function(m){return n(typeof m=="number"),n(m<67108864),m<0?this.isubn(-m):this.negative!==0?this.length===1&&(this.words[0]|0)<m?(this.words[0]=m-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(m),this.negative=1,this):this._iaddn(m)},s.prototype._iaddn=function(m){this.words[0]+=m;for(var c=0;c<this.length&&this.words[c]>=67108864;c++)this.words[c]-=67108864,c===this.length-1?this.words[c+1]=1:this.words[c+1]++;return this.length=Math.max(this.length,c+1),this},s.prototype.isubn=function(m){if(n(typeof m=="number"),n(m<67108864),m<0)return this.iaddn(-m);if(this.negative!==0)return this.negative=0,this.iaddn(m),this.negative=1,this;if(this.words[0]-=m,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var c=0;c<this.length&&this.words[c]<0;c++)this.words[c]+=67108864,this.words[c+1]-=1;return this.strip()},s.prototype.addn=function(m){return this.clone().iaddn(m)},s.prototype.subn=function(m){return this.clone().isubn(m)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(m,c,h){var p=m.length+h,v;this._expand(p);var x,I=0;for(v=0;v<m.length;v++){x=(this.words[v+h]|0)+I;var w=(m.words[v]|0)*c;x-=w&67108863,I=(x>>26)-(w/67108864|0),this.words[v+h]=x&67108863}for(;v<this.length-h;v++)x=(this.words[v+h]|0)+I,I=x>>26,this.words[v+h]=x&67108863;if(I===0)return this.strip();for(n(I===-1),I=0,v=0;v<this.length;v++)x=-(this.words[v]|0)+I,I=x>>26,this.words[v]=x&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(m,c){var h=this.length-m.length,p=this.clone(),v=m,x=v.words[v.length-1]|0,I=this._countBits(x);h=26-I,h!==0&&(v=v.ushln(h),p.iushln(h),x=v.words[v.length-1]|0);var w=p.length-v.length,u;if(c!=="mod"){u=new s(null),u.length=w+1,u.words=new Array(u.length);for(var f=0;f<u.length;f++)u.words[f]=0}var T=p.clone()._ishlnsubmul(v,1,w);T.negative===0&&(p=T,u&&(u.words[w]=1));for(var $=w-1;$>=0;$--){var V=(p.words[v.length+$]|0)*67108864+(p.words[v.length+$-1]|0);for(V=Math.min(V/x|0,67108863),p._ishlnsubmul(v,V,$);p.negative!==0;)V--,p.negative=0,p._ishlnsubmul(v,1,$),p.isZero()||(p.negative^=1);u&&(u.words[$]=V)}return u&&u.strip(),p.strip(),c!=="div"&&h!==0&&p.iushrn(h),{div:u||null,mod:p}},s.prototype.divmod=function(m,c,h){if(n(!m.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var p,v,x;return this.negative!==0&&m.negative===0?(x=this.neg().divmod(m,c),c!=="mod"&&(p=x.div.neg()),c!=="div"&&(v=x.mod.neg(),h&&v.negative!==0&&v.iadd(m)),{div:p,mod:v}):this.negative===0&&m.negative!==0?(x=this.divmod(m.neg(),c),c!=="mod"&&(p=x.div.neg()),{div:p,mod:x.mod}):this.negative&m.negative?(x=this.neg().divmod(m.neg(),c),c!=="div"&&(v=x.mod.neg(),h&&v.negative!==0&&v.isub(m)),{div:x.div,mod:v}):m.length>this.length||this.cmp(m)<0?{div:new s(0),mod:this}:m.length===1?c==="div"?{div:this.divn(m.words[0]),mod:null}:c==="mod"?{div:null,mod:new s(this.modn(m.words[0]))}:{div:this.divn(m.words[0]),mod:new s(this.modn(m.words[0]))}:this._wordDiv(m,c)},s.prototype.div=function(m){return this.divmod(m,"div",!1).div},s.prototype.mod=function(m){return this.divmod(m,"mod",!1).mod},s.prototype.umod=function(m){return this.divmod(m,"mod",!0).mod},s.prototype.divRound=function(m){var c=this.divmod(m);if(c.mod.isZero())return c.div;var h=c.div.negative!==0?c.mod.isub(m):c.mod,p=m.ushrn(1),v=m.andln(1),x=h.cmp(p);return x<0||v===1&&x===0?c.div:c.div.negative!==0?c.div.isubn(1):c.div.iaddn(1)},s.prototype.modn=function(m){n(m<=67108863);for(var c=(1<<26)%m,h=0,p=this.length-1;p>=0;p--)h=(c*h+(this.words[p]|0))%m;return h},s.prototype.idivn=function(m){n(m<=67108863);for(var c=0,h=this.length-1;h>=0;h--){var p=(this.words[h]|0)+c*67108864;this.words[h]=p/m|0,c=p%m}return this.strip()},s.prototype.divn=function(m){return this.clone().idivn(m)},s.prototype.egcd=function(m){n(m.negative===0),n(!m.isZero());var c=this,h=m.clone();c.negative!==0?c=c.umod(m):c=c.clone();for(var p=new s(1),v=new s(0),x=new s(0),I=new s(1),w=0;c.isEven()&&h.isEven();)c.iushrn(1),h.iushrn(1),++w;for(var u=h.clone(),f=c.clone();!c.isZero();){for(var T=0,$=1;!(c.words[0]&$)&&T<26;++T,$<<=1);if(T>0)for(c.iushrn(T);T-- >0;)(p.isOdd()||v.isOdd())&&(p.iadd(u),v.isub(f)),p.iushrn(1),v.iushrn(1);for(var V=0,j=1;!(h.words[0]&j)&&V<26;++V,j<<=1);if(V>0)for(h.iushrn(V);V-- >0;)(x.isOdd()||I.isOdd())&&(x.iadd(u),I.isub(f)),x.iushrn(1),I.iushrn(1);c.cmp(h)>=0?(c.isub(h),p.isub(x),v.isub(I)):(h.isub(c),x.isub(p),I.isub(v))}return{a:x,b:I,gcd:h.iushln(w)}},s.prototype._invmp=function(m){n(m.negative===0),n(!m.isZero());var c=this,h=m.clone();c.negative!==0?c=c.umod(m):c=c.clone();for(var p=new s(1),v=new s(0),x=h.clone();c.cmpn(1)>0&&h.cmpn(1)>0;){for(var I=0,w=1;!(c.words[0]&w)&&I<26;++I,w<<=1);if(I>0)for(c.iushrn(I);I-- >0;)p.isOdd()&&p.iadd(x),p.iushrn(1);for(var u=0,f=1;!(h.words[0]&f)&&u<26;++u,f<<=1);if(u>0)for(h.iushrn(u);u-- >0;)v.isOdd()&&v.iadd(x),v.iushrn(1);c.cmp(h)>=0?(c.isub(h),p.isub(v)):(h.isub(c),v.isub(p))}var T;return c.cmpn(1)===0?T=p:T=v,T.cmpn(0)<0&&T.iadd(m),T},s.prototype.gcd=function(m){if(this.isZero())return m.abs();if(m.isZero())return this.abs();var c=this.clone(),h=m.clone();c.negative=0,h.negative=0;for(var p=0;c.isEven()&&h.isEven();p++)c.iushrn(1),h.iushrn(1);do{for(;c.isEven();)c.iushrn(1);for(;h.isEven();)h.iushrn(1);var v=c.cmp(h);if(v<0){var x=c;c=h,h=x}else if(v===0||h.cmpn(1)===0)break;c.isub(h)}while(!0);return h.iushln(p)},s.prototype.invm=function(m){return this.egcd(m).a.umod(m)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(m){return this.words[0]&m},s.prototype.bincn=function(m){n(typeof m=="number");var c=m%26,h=(m-c)/26,p=1<<c;if(this.length<=h)return this._expand(h+1),this.words[h]|=p,this;for(var v=p,x=h;v!==0&&x<this.length;x++){var I=this.words[x]|0;I+=v,v=I>>>26,I&=67108863,this.words[x]=I}return v!==0&&(this.words[x]=v,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(m){var c=m<0;if(this.negative!==0&&!c)return-1;if(this.negative===0&&c)return 1;this.strip();var h;if(this.length>1)h=1;else{c&&(m=-m),n(m<=67108863,"Number is too big");var p=this.words[0]|0;h=p===m?0:p<m?-1:1}return this.negative!==0?-h|0:h},s.prototype.cmp=function(m){if(this.negative!==0&&m.negative===0)return-1;if(this.negative===0&&m.negative!==0)return 1;var c=this.ucmp(m);return this.negative!==0?-c|0:c},s.prototype.ucmp=function(m){if(this.length>m.length)return 1;if(this.length<m.length)return-1;for(var c=0,h=this.length-1;h>=0;h--){var p=this.words[h]|0,v=m.words[h]|0;if(p!==v){p<v?c=-1:p>v&&(c=1);break}}return c},s.prototype.gtn=function(m){return this.cmpn(m)===1},s.prototype.gt=function(m){return this.cmp(m)===1},s.prototype.gten=function(m){return this.cmpn(m)>=0},s.prototype.gte=function(m){return this.cmp(m)>=0},s.prototype.ltn=function(m){return this.cmpn(m)===-1},s.prototype.lt=function(m){return this.cmp(m)===-1},s.prototype.lten=function(m){return this.cmpn(m)<=0},s.prototype.lte=function(m){return this.cmp(m)<=0},s.prototype.eqn=function(m){return this.cmpn(m)===0},s.prototype.eq=function(m){return this.cmp(m)===0},s.red=function(m){return new H(m)},s.prototype.toRed=function(m){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),m.convertTo(this)._forceRed(m)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(m){return this.red=m,this},s.prototype.forceRed=function(m){return n(!this.red,"Already a number in reduction context"),this._forceRed(m)},s.prototype.redAdd=function(m){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,m)},s.prototype.redIAdd=function(m){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,m)},s.prototype.redSub=function(m){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,m)},s.prototype.redISub=function(m){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,m)},s.prototype.redShl=function(m){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,m)},s.prototype.redMul=function(m){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.mul(this,m)},s.prototype.redIMul=function(m){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,m),this.red.imul(this,m)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(m){return n(this.red&&!m.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,m)};var B={k256:null,p224:null,p192:null,p25519:null};function P(E,m){this.name=E,this.p=new s(m,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}P.prototype._tmp=function(){var m=new s(null);return m.words=new Array(Math.ceil(this.n/13)),m},P.prototype.ireduce=function(m){var c=m,h;do this.split(c,this.tmp),c=this.imulK(c),c=c.iadd(this.tmp),h=c.bitLength();while(h>this.n);var p=h<this.n?-1:c.ucmp(this.p);return p===0?(c.words[0]=0,c.length=1):p>0?c.isub(this.p):c.strip!==void 0?c.strip():c._strip(),c},P.prototype.split=function(m,c){m.iushrn(this.n,0,c)},P.prototype.imulK=function(m){return m.imul(this.k)};function z(){P.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(z,P),z.prototype.split=function(m,c){for(var h=4194303,p=Math.min(m.length,9),v=0;v<p;v++)c.words[v]=m.words[v];if(c.length=p,m.length<=9){m.words[0]=0,m.length=1;return}var x=m.words[9];for(c.words[c.length++]=x&h,v=10;v<m.length;v++){var I=m.words[v]|0;m.words[v-10]=(I&h)<<4|x>>>22,x=I}x>>>=22,m.words[v-10]=x,x===0&&m.length>10?m.length-=10:m.length-=9},z.prototype.imulK=function(m){m.words[m.length]=0,m.words[m.length+1]=0,m.length+=2;for(var c=0,h=0;h<m.length;h++){var p=m.words[h]|0;c+=p*977,m.words[h]=c&67108863,c=p*64+(c/67108864|0)}return m.words[m.length-1]===0&&(m.length--,m.words[m.length-1]===0&&m.length--),m};function W(){P.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(W,P);function Y(){P.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(Y,P);function Z(){P.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(Z,P),Z.prototype.imulK=function(m){for(var c=0,h=0;h<m.length;h++){var p=(m.words[h]|0)*19+c,v=p&67108863;p>>>=26,m.words[h]=v,c=p}return c!==0&&(m.words[m.length++]=c),m},s._prime=function(m){if(B[m])return B[m];var c;if(m==="k256")c=new z;else if(m==="p224")c=new W;else if(m==="p192")c=new Y;else if(m==="p25519")c=new Z;else throw new Error("Unknown prime "+m);return B[m]=c,c};function H(E){if(typeof E=="string"){var m=s._prime(E);this.m=m.p,this.prime=m}else n(E.gtn(1),"modulus must be greater than 1"),this.m=E,this.prime=null}H.prototype._verify1=function(m){n(m.negative===0,"red works only with positives"),n(m.red,"red works only with red numbers")},H.prototype._verify2=function(m,c){n((m.negative|c.negative)===0,"red works only with positives"),n(m.red&&m.red===c.red,"red works only with red numbers")},H.prototype.imod=function(m){return this.prime?this.prime.ireduce(m)._forceRed(this):m.umod(this.m)._forceRed(this)},H.prototype.neg=function(m){return m.isZero()?m.clone():this.m.sub(m)._forceRed(this)},H.prototype.add=function(m,c){this._verify2(m,c);var h=m.add(c);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},H.prototype.iadd=function(m,c){this._verify2(m,c);var h=m.iadd(c);return h.cmp(this.m)>=0&&h.isub(this.m),h},H.prototype.sub=function(m,c){this._verify2(m,c);var h=m.sub(c);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},H.prototype.isub=function(m,c){this._verify2(m,c);var h=m.isub(c);return h.cmpn(0)<0&&h.iadd(this.m),h},H.prototype.shl=function(m,c){return this._verify1(m),this.imod(m.ushln(c))},H.prototype.imul=function(m,c){return this._verify2(m,c),this.imod(m.imul(c))},H.prototype.mul=function(m,c){return this._verify2(m,c),this.imod(m.mul(c))},H.prototype.isqr=function(m){return this.imul(m,m.clone())},H.prototype.sqr=function(m){return this.mul(m,m)},H.prototype.sqrt=function(m){if(m.isZero())return m.clone();var c=this.m.andln(3);if(n(c%2===1),c===3){var h=this.m.add(new s(1)).iushrn(2);return this.pow(m,h)}for(var p=this.m.subn(1),v=0;!p.isZero()&&p.andln(1)===0;)v++,p.iushrn(1);n(!p.isZero());var x=new s(1).toRed(this),I=x.redNeg(),w=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);this.pow(u,w).cmp(I)!==0;)u.redIAdd(I);for(var f=this.pow(u,p),T=this.pow(m,p.addn(1).iushrn(1)),$=this.pow(m,p),V=v;$.cmp(x)!==0;){for(var j=$,O=0;j.cmp(x)!==0;O++)j=j.redSqr();n(O<V);var R=this.pow(f,new s(1).iushln(V-O-1));T=T.redMul(R),f=R.redSqr(),$=$.redMul(f),V=O}return T},H.prototype.invm=function(m){var c=m._invmp(this.m);return c.negative!==0?(c.negative=0,this.imod(c).redNeg()):this.imod(c)},H.prototype.pow=function(m,c){if(c.isZero())return new s(1).toRed(this);if(c.cmpn(1)===0)return m.clone();var h=4,p=new Array(1<<h);p[0]=new s(1).toRed(this),p[1]=m;for(var v=2;v<p.length;v++)p[v]=this.mul(p[v-1],m);var x=p[0],I=0,w=0,u=c.bitLength()%26;for(u===0&&(u=26),v=c.length-1;v>=0;v--){for(var f=c.words[v],T=u-1;T>=0;T--){var $=f>>T&1;if(x!==p[0]&&(x=this.sqr(x)),$===0&&I===0){w=0;continue}I<<=1,I|=$,w++,!(w!==h&&(v!==0||T!==0))&&(x=this.mul(x,p[I]),w=0,I=0)}u=26}return x},H.prototype.convertTo=function(m){var c=m.umod(this.m);return c===m?c.clone():c},H.prototype.convertFrom=function(m){var c=m.clone();return c.red=null,c},s.mont=function(m){return new X(m)};function X(E){H.call(this,E),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(X,H),X.prototype.convertTo=function(m){return this.imod(m.ushln(this.shift))},X.prototype.convertFrom=function(m){var c=this.imod(m.mul(this.rinv));return c.red=null,c},X.prototype.imul=function(m,c){if(m.isZero()||c.isZero())return m.words[0]=0,m.length=1,m;var h=m.imul(c),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=h.isub(p).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},X.prototype.mul=function(m,c){if(m.isZero()||c.isZero())return new s(0)._forceRed(this);var h=m.mul(c),p=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=h.isub(p).iushrn(this.shift),x=v;return v.cmp(this.m)>=0?x=v.isub(this.m):v.cmpn(0)<0&&(x=v.iadd(this.m)),x._forceRed(this)},X.prototype.invm=function(m){var c=this.imod(m._invmp(this.m).mul(this.r2));return c._forceRed(this)}})(e,wg)})(xl);var Dn=xl.exports,Tr=Df;function Df(e,t){if(!e)throw new Error(t||"Assertion failed")}Df.equal=function(t,i,n){if(t!=i)throw new Error(n||"Assertion failed: "+t+" != "+i)};var wl={};(function(e){var t=e;function i(s,a){if(Array.isArray(s))return s.slice();if(!s)return[];var l=[];if(typeof s!="string"){for(var d=0;d<s.length;d++)l[d]=s[d]|0;return l}if(a==="hex"){s=s.replace(/[^a-z0-9]+/ig,""),s.length%2!==0&&(s="0"+s);for(var d=0;d<s.length;d+=2)l.push(parseInt(s[d]+s[d+1],16))}else for(var d=0;d<s.length;d++){var g=s.charCodeAt(d),y=g>>8,b=g&255;y?l.push(y,b):l.push(b)}return l}t.toArray=i;function n(s){return s.length===1?"0"+s:s}t.zero2=n;function r(s){for(var a="",l=0;l<s.length;l++)a+=n(s[l].toString(16));return a}t.toHex=r,t.encode=function(a,l){return l==="hex"?r(a):a}})(wl);(function(e){var t=e,i=Dn,n=Tr,r=wl;t.assert=n,t.toArray=r.toArray,t.zero2=r.zero2,t.toHex=r.toHex,t.encode=r.encode;function s(y,b,M){var A=new Array(Math.max(y.bitLength(),M)+1),S;for(S=0;S<A.length;S+=1)A[S]=0;var C=1<<b+1,k=y.clone();for(S=0;S<A.length;S++){var N,D=k.andln(C-1);k.isOdd()?(D>(C>>1)-1?N=(C>>1)-D:N=D,k.isubn(N)):N=0,A[S]=N,k.iushrn(1)}return A}t.getNAF=s;function a(y,b){var M=[[],[]];y=y.clone(),b=b.clone();for(var A=0,S=0,C;y.cmpn(-A)>0||b.cmpn(-S)>0;){var k=y.andln(3)+A&3,N=b.andln(3)+S&3;k===3&&(k=-1),N===3&&(N=-1);var D;k&1?(C=y.andln(7)+A&7,(C===3||C===5)&&N===2?D=-k:D=k):D=0,M[0].push(D);var B;N&1?(C=b.andln(7)+S&7,(C===3||C===5)&&k===2?B=-N:B=N):B=0,M[1].push(B),2*A===D+1&&(A=1-A),2*S===B+1&&(S=1-S),y.iushrn(1),b.iushrn(1)}return M}t.getJSF=a;function l(y,b,M){var A="_"+b;y.prototype[b]=function(){return this[A]!==void 0?this[A]:this[A]=M.call(this)}}t.cachedProperty=l;function d(y){return typeof y=="string"?t.toArray(y,"hex"):y}t.parseBytes=d;function g(y){return new i(y,"hex","le")}t.intFromLE=g})(di);var Ml={exports:{}},Pa;Ml.exports=function(t){return Pa||(Pa=new qn(null)),Pa.generate(t)};function qn(e){this.rand=e}Ml.exports.Rand=qn;qn.prototype.generate=function(t){return this._rand(t)};qn.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var i=new Uint8Array(t),n=0;n<i.length;n++)i[n]=this.rand.getByte();return i};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?qn.prototype._rand=function(t){var i=new Uint8Array(t);return self.crypto.getRandomValues(i),i}:self.msCrypto&&self.msCrypto.getRandomValues?qn.prototype._rand=function(t){var i=new Uint8Array(t);return self.msCrypto.getRandomValues(i),i}:typeof window=="object"&&(qn.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var bd=mu;if(typeof bd.randomBytes!="function")throw new Error("Not supported");qn.prototype._rand=function(t){return bd.randomBytes(t)}}catch{}var Lf=Ml.exports,Al={},cr=Dn,Xs=di,qo=Xs.getNAF,e3=Xs.getJSF,Fo=Xs.assert;function Kn(e,t){this.type=e,this.p=new cr(t.p,16),this.red=t.prime?cr.red(t.prime):cr.mont(this.p),this.zero=new cr(0).toRed(this.red),this.one=new cr(1).toRed(this.red),this.two=new cr(2).toRed(this.red),this.n=t.n&&new cr(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ga=Kn;Kn.prototype.point=function(){throw new Error("Not implemented")};Kn.prototype.validate=function(){throw new Error("Not implemented")};Kn.prototype._fixedNafMul=function(t,i){Fo(t.precomputed);var n=t._getDoubles(),r=qo(i,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var a=[],l,d;for(l=0;l<r.length;l+=n.step){d=0;for(var g=l+n.step-1;g>=l;g--)d=(d<<1)+r[g];a.push(d)}for(var y=this.jpoint(null,null,null),b=this.jpoint(null,null,null),M=s;M>0;M--){for(l=0;l<a.length;l++)d=a[l],d===M?b=b.mixedAdd(n.points[l]):d===-M&&(b=b.mixedAdd(n.points[l].neg()));y=y.add(b)}return y.toP()};Kn.prototype._wnafMul=function(t,i){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var s=r.points,a=qo(i,n,this._bitLength),l=this.jpoint(null,null,null),d=a.length-1;d>=0;d--){for(var g=0;d>=0&&a[d]===0;d--)g++;if(d>=0&&g++,l=l.dblp(g),d<0)break;var y=a[d];Fo(y!==0),t.type==="affine"?y>0?l=l.mixedAdd(s[y-1>>1]):l=l.mixedAdd(s[-y-1>>1].neg()):y>0?l=l.add(s[y-1>>1]):l=l.add(s[-y-1>>1].neg())}return t.type==="affine"?l.toP():l};Kn.prototype._wnafMulAdd=function(t,i,n,r,s){var a=this._wnafT1,l=this._wnafT2,d=this._wnafT3,g=0,y,b,M;for(y=0;y<r;y++){M=i[y];var A=M._getNAFPoints(t);a[y]=A.wnd,l[y]=A.points}for(y=r-1;y>=1;y-=2){var S=y-1,C=y;if(a[S]!==1||a[C]!==1){d[S]=qo(n[S],a[S],this._bitLength),d[C]=qo(n[C],a[C],this._bitLength),g=Math.max(d[S].length,g),g=Math.max(d[C].length,g);continue}var k=[i[S],null,null,i[C]];i[S].y.cmp(i[C].y)===0?(k[1]=i[S].add(i[C]),k[2]=i[S].toJ().mixedAdd(i[C].neg())):i[S].y.cmp(i[C].y.redNeg())===0?(k[1]=i[S].toJ().mixedAdd(i[C]),k[2]=i[S].add(i[C].neg())):(k[1]=i[S].toJ().mixedAdd(i[C]),k[2]=i[S].toJ().mixedAdd(i[C].neg()));var N=[-3,-1,-5,-7,0,7,5,1,3],D=e3(n[S],n[C]);for(g=Math.max(D[0].length,g),d[S]=new Array(g),d[C]=new Array(g),b=0;b<g;b++){var B=D[0][b]|0,P=D[1][b]|0;d[S][b]=N[(B+1)*3+(P+1)],d[C][b]=0,l[S]=k}}var z=this.jpoint(null,null,null),W=this._wnafT4;for(y=g;y>=0;y--){for(var Y=0;y>=0;){var Z=!0;for(b=0;b<r;b++)W[b]=d[b][y]|0,W[b]!==0&&(Z=!1);if(!Z)break;Y++,y--}if(y>=0&&Y++,z=z.dblp(Y),y<0)break;for(b=0;b<r;b++){var H=W[b];H!==0&&(H>0?M=l[b][H-1>>1]:H<0&&(M=l[b][-H-1>>1].neg()),M.type==="affine"?z=z.mixedAdd(M):z=z.add(M))}}for(y=0;y<r;y++)l[y]=null;return s?z:z.toP()};function Ci(e,t){this.curve=e,this.type=t,this.precomputed=null}Kn.BasePoint=Ci;Ci.prototype.eq=function(){throw new Error("Not implemented")};Ci.prototype.validate=function(){return this.curve.validate(this)};Kn.prototype.decodePoint=function(t,i){t=Xs.toArray(t,i);var n=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*n){t[0]===6?Fo(t[t.length-1]%2===0):t[0]===7&&Fo(t[t.length-1]%2===1);var r=this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));return r}else if((t[0]===2||t[0]===3)&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),t[0]===3);throw new Error("Unknown point format")};Ci.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Ci.prototype._encode=function(t){var i=this.curve.p.byteLength(),n=this.getX().toArray("be",i);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",i))};Ci.prototype.encode=function(t,i){return Xs.encode(this._encode(i),t)};Ci.prototype.precompute=function(t){if(this.precomputed)return this;var i={doubles:null,naf:null,beta:null};return i.naf=this._getNAFPoints(8),i.doubles=this._getDoubles(4,t),i.beta=this._getBeta(),this.precomputed=i,this};Ci.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var i=this.precomputed.doubles;return i?i.points.length>=Math.ceil((t.bitLength()+1)/i.step):!1};Ci.prototype._getDoubles=function(t,i){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,s=0;s<i;s+=t){for(var a=0;a<t;a++)r=r.dbl();n.push(r)}return{step:t,points:n}};Ci.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var i=[this],n=(1<<t)-1,r=n===1?null:this.dbl(),s=1;s<n;s++)i[s]=i[s-1].add(r);return{wnd:t,points:i}};Ci.prototype._getBeta=function(){return null};Ci.prototype.dblp=function(t){for(var i=this,n=0;n<t;n++)i=i.dbl();return i};var t3=di,bt=Dn,Sl=ra,ls=ga,i3=t3.assert;function Ei(e){ls.call(this,"short",e),this.a=new bt(e.a,16).toRed(this.red),this.b=new bt(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}Sl(Ei,ls);var n3=Ei;Ei.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var i,n;if(t.beta)i=new bt(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);i=r[0].cmp(r[1])<0?r[0]:r[1],i=i.toRed(this.red)}if(t.lambda)n=new bt(t.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(i))===0?n=s[0]:(n=s[1],i3(this.g.mul(n).x.cmp(this.g.x.redMul(i))===0))}var a;return t.basis?a=t.basis.map(function(l){return{a:new bt(l.a,16),b:new bt(l.b,16)}}):a=this._getEndoBasis(n),{beta:i,lambda:n,basis:a}}};Ei.prototype._getEndoRoots=function(t){var i=t===this.p?this.red:bt.mont(t),n=new bt(2).toRed(i).redInvm(),r=n.redNeg(),s=new bt(3).toRed(i).redNeg().redSqrt().redMul(n),a=r.redAdd(s).fromRed(),l=r.redSub(s).fromRed();return[a,l]};Ei.prototype._getEndoBasis=function(t){for(var i=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=t,r=this.n.clone(),s=new bt(1),a=new bt(0),l=new bt(0),d=new bt(1),g,y,b,M,A,S,C,k=0,N,D;n.cmpn(0)!==0;){var B=r.div(n);N=r.sub(B.mul(n)),D=l.sub(B.mul(s));var P=d.sub(B.mul(a));if(!b&&N.cmp(i)<0)g=C.neg(),y=s,b=N.neg(),M=D;else if(b&&++k===2)break;C=N,r=n,n=N,l=s,s=D,d=a,a=P}A=N.neg(),S=D;var z=b.sqr().add(M.sqr()),W=A.sqr().add(S.sqr());return W.cmp(z)>=0&&(A=g,S=y),b.negative&&(b=b.neg(),M=M.neg()),A.negative&&(A=A.neg(),S=S.neg()),[{a:b,b:M},{a:A,b:S}]};Ei.prototype._endoSplit=function(t){var i=this.endo.basis,n=i[0],r=i[1],s=r.b.mul(t).divRound(this.n),a=n.b.neg().mul(t).divRound(this.n),l=s.mul(n.a),d=a.mul(r.a),g=s.mul(n.b),y=a.mul(r.b),b=t.sub(l).sub(d),M=g.add(y).neg();return{k1:b,k2:M}};Ei.prototype.pointFromX=function(t,i){t=new bt(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(r.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=r.fromRed().isOdd();return(i&&!s||!i&&s)&&(r=r.redNeg()),this.point(t,r)};Ei.prototype.validate=function(t){if(t.inf)return!0;var i=t.x,n=t.y,r=this.a.redMul(i),s=i.redSqr().redMul(i).redIAdd(r).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Ei.prototype._endoWnafMulAdd=function(t,i,n){for(var r=this._endoWnafT1,s=this._endoWnafT2,a=0;a<t.length;a++){var l=this._endoSplit(i[a]),d=t[a],g=d._getBeta();l.k1.negative&&(l.k1.ineg(),d=d.neg(!0)),l.k2.negative&&(l.k2.ineg(),g=g.neg(!0)),r[a*2]=d,r[a*2+1]=g,s[a*2]=l.k1,s[a*2+1]=l.k2}for(var y=this._wnafMulAdd(1,r,s,a*2,n),b=0;b<a*2;b++)r[b]=null,s[b]=null;return y};function Nt(e,t,i,n){ls.BasePoint.call(this,e,"affine"),t===null&&i===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new bt(t,16),this.y=new bt(i,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}Sl(Nt,ls.BasePoint);Ei.prototype.point=function(t,i,n){return new Nt(this,t,i,n)};Ei.prototype.pointFromJSON=function(t,i){return Nt.fromJSON(this,t,i)};Nt.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var i=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,r=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};t.beta=i,i.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return i}};Nt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Nt.fromJSON=function(t,i,n){typeof i=="string"&&(i=JSON.parse(i));var r=t.point(i[0],i[1],n);if(!i[2])return r;function s(l){return t.point(l[0],l[1],n)}var a=i[2];return r.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[r].concat(a.doubles.points.map(s))},naf:a.naf&&{wnd:a.naf.wnd,points:[r].concat(a.naf.points.map(s))}},r};Nt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Nt.prototype.isInfinity=function(){return this.inf};Nt.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var i=this.y.redSub(t.y);i.cmpn(0)!==0&&(i=i.redMul(this.x.redSub(t.x).redInvm()));var n=i.redSqr().redISub(this.x).redISub(t.x),r=i.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)};Nt.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var i=this.curve.a,n=this.x.redSqr(),r=t.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(i).redMul(r),a=s.redSqr().redISub(this.x.redAdd(this.x)),l=s.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,l)};Nt.prototype.getX=function(){return this.x.fromRed()};Nt.prototype.getY=function(){return this.y.fromRed()};Nt.prototype.mul=function(t){return t=new bt(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};Nt.prototype.mulAdd=function(t,i,n){var r=[this,i],s=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,s):this.curve._wnafMulAdd(1,r,s,2)};Nt.prototype.jmulAdd=function(t,i,n){var r=[this,i],s=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,s,!0):this.curve._wnafMulAdd(1,r,s,2,!0)};Nt.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};Nt.prototype.neg=function(t){if(this.inf)return this;var i=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,r=function(s){return s.neg()};i.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return i};Nt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function Pt(e,t,i,n){ls.BasePoint.call(this,e,"jacobian"),t===null&&i===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new bt(0)):(this.x=new bt(t,16),this.y=new bt(i,16),this.z=new bt(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}Sl(Pt,ls.BasePoint);Ei.prototype.jpoint=function(t,i,n){return new Pt(this,t,i,n)};Pt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),i=t.redSqr(),n=this.x.redMul(i),r=this.y.redMul(i).redMul(t);return this.curve.point(n,r)};Pt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};Pt.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var i=t.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(i),s=t.x.redMul(n),a=this.y.redMul(i.redMul(t.z)),l=t.y.redMul(n.redMul(this.z)),d=r.redSub(s),g=a.redSub(l);if(d.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=d.redSqr(),b=y.redMul(d),M=r.redMul(y),A=g.redSqr().redIAdd(b).redISub(M).redISub(M),S=g.redMul(M.redISub(A)).redISub(a.redMul(b)),C=this.z.redMul(t.z).redMul(d);return this.curve.jpoint(A,S,C)};Pt.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var i=this.z.redSqr(),n=this.x,r=t.x.redMul(i),s=this.y,a=t.y.redMul(i).redMul(this.z),l=n.redSub(r),d=s.redSub(a);if(l.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=l.redSqr(),y=g.redMul(l),b=n.redMul(g),M=d.redSqr().redIAdd(y).redISub(b).redISub(b),A=d.redMul(b.redISub(M)).redISub(s.redMul(y)),S=this.z.redMul(l);return this.curve.jpoint(M,A,S)};Pt.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var i;if(this.curve.zeroA||this.curve.threeA){var n=this;for(i=0;i<t;i++)n=n.dbl();return n}var r=this.curve.a,s=this.curve.tinv,a=this.x,l=this.y,d=this.z,g=d.redSqr().redSqr(),y=l.redAdd(l);for(i=0;i<t;i++){var b=a.redSqr(),M=y.redSqr(),A=M.redSqr(),S=b.redAdd(b).redIAdd(b).redIAdd(r.redMul(g)),C=a.redMul(M),k=S.redSqr().redISub(C.redAdd(C)),N=C.redISub(k),D=S.redMul(N);D=D.redIAdd(D).redISub(A);var B=y.redMul(d);i+1<t&&(g=g.redMul(A)),a=k,d=B,y=D}return this.curve.jpoint(a,y.redMul(s),d)};Pt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};Pt.prototype._zeroDbl=function(){var t,i,n;if(this.zOne){var r=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),l=this.x.redAdd(s).redSqr().redISub(r).redISub(a);l=l.redIAdd(l);var d=r.redAdd(r).redIAdd(r),g=d.redSqr().redISub(l).redISub(l),y=a.redIAdd(a);y=y.redIAdd(y),y=y.redIAdd(y),t=g,i=d.redMul(l.redISub(g)).redISub(y),n=this.y.redAdd(this.y)}else{var b=this.x.redSqr(),M=this.y.redSqr(),A=M.redSqr(),S=this.x.redAdd(M).redSqr().redISub(b).redISub(A);S=S.redIAdd(S);var C=b.redAdd(b).redIAdd(b),k=C.redSqr(),N=A.redIAdd(A);N=N.redIAdd(N),N=N.redIAdd(N),t=k.redISub(S).redISub(S),i=C.redMul(S.redISub(t)).redISub(N),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(t,i,n)};Pt.prototype._threeDbl=function(){var t,i,n;if(this.zOne){var r=this.x.redSqr(),s=this.y.redSqr(),a=s.redSqr(),l=this.x.redAdd(s).redSqr().redISub(r).redISub(a);l=l.redIAdd(l);var d=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),g=d.redSqr().redISub(l).redISub(l);t=g;var y=a.redIAdd(a);y=y.redIAdd(y),y=y.redIAdd(y),i=d.redMul(l.redISub(g)).redISub(y),n=this.y.redAdd(this.y)}else{var b=this.z.redSqr(),M=this.y.redSqr(),A=this.x.redMul(M),S=this.x.redSub(b).redMul(this.x.redAdd(b));S=S.redAdd(S).redIAdd(S);var C=A.redIAdd(A);C=C.redIAdd(C);var k=C.redAdd(C);t=S.redSqr().redISub(k),n=this.y.redAdd(this.z).redSqr().redISub(M).redISub(b);var N=M.redSqr();N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N),i=S.redMul(C.redISub(t)).redISub(N)}return this.curve.jpoint(t,i,n)};Pt.prototype._dbl=function(){var t=this.curve.a,i=this.x,n=this.y,r=this.z,s=r.redSqr().redSqr(),a=i.redSqr(),l=n.redSqr(),d=a.redAdd(a).redIAdd(a).redIAdd(t.redMul(s)),g=i.redAdd(i);g=g.redIAdd(g);var y=g.redMul(l),b=d.redSqr().redISub(y.redAdd(y)),M=y.redISub(b),A=l.redSqr();A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var S=d.redMul(M).redISub(A),C=n.redAdd(n).redMul(r);return this.curve.jpoint(b,S,C)};Pt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),i=this.y.redSqr(),n=this.z.redSqr(),r=i.redSqr(),s=t.redAdd(t).redIAdd(t),a=s.redSqr(),l=this.x.redAdd(i).redSqr().redISub(t).redISub(r);l=l.redIAdd(l),l=l.redAdd(l).redIAdd(l),l=l.redISub(a);var d=l.redSqr(),g=r.redIAdd(r);g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var y=s.redIAdd(l).redSqr().redISub(a).redISub(d).redISub(g),b=i.redMul(y);b=b.redIAdd(b),b=b.redIAdd(b);var M=this.x.redMul(d).redISub(b);M=M.redIAdd(M),M=M.redIAdd(M);var A=this.y.redMul(y.redMul(g.redISub(y)).redISub(l.redMul(d)));A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var S=this.z.redAdd(l).redSqr().redISub(n).redISub(d);return this.curve.jpoint(M,A,S)};Pt.prototype.mul=function(t,i){return t=new bt(t,i),this.curve._wnafMul(this,t)};Pt.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var i=this.z.redSqr(),n=t.z.redSqr();if(this.x.redMul(n).redISub(t.x.redMul(i)).cmpn(0)!==0)return!1;var r=i.redMul(this.z),s=n.redMul(t.z);return this.y.redMul(s).redISub(t.y.redMul(r)).cmpn(0)===0};Pt.prototype.eqXToP=function(t){var i=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(i);if(this.x.cmp(n)===0)return!0;for(var r=t.clone(),s=this.curve.redN.redMul(i);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};Pt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};Pt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Or=Dn,Pf=ra,ma=ga,r3=di;function ds(e){ma.call(this,"mont",e),this.a=new Or(e.a,16).toRed(this.red),this.b=new Or(e.b,16).toRed(this.red),this.i4=new Or(4).toRed(this.red).redInvm(),this.two=new Or(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}Pf(ds,ma);var s3=ds;ds.prototype.validate=function(t){var i=t.normalize().x,n=i.redSqr(),r=n.redMul(i).redAdd(n.redMul(this.a)).redAdd(i),s=r.redSqrt();return s.redSqr().cmp(r)===0};function Et(e,t,i){ma.BasePoint.call(this,e,"projective"),t===null&&i===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Or(t,16),this.z=new Or(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}Pf(Et,ma.BasePoint);ds.prototype.decodePoint=function(t,i){return this.point(r3.toArray(t,i),1)};ds.prototype.point=function(t,i){return new Et(this,t,i)};ds.prototype.pointFromJSON=function(t){return Et.fromJSON(this,t)};Et.prototype.precompute=function(){};Et.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Et.fromJSON=function(t,i){return new Et(t,i[0],i[1]||t.one)};Et.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Et.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Et.prototype.dbl=function(){var t=this.x.redAdd(this.z),i=t.redSqr(),n=this.x.redSub(this.z),r=n.redSqr(),s=i.redSub(r),a=i.redMul(r),l=s.redMul(r.redAdd(this.curve.a24.redMul(s)));return this.curve.point(a,l)};Et.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Et.prototype.diffAdd=function(t,i){var n=this.x.redAdd(this.z),r=this.x.redSub(this.z),s=t.x.redAdd(t.z),a=t.x.redSub(t.z),l=a.redMul(n),d=s.redMul(r),g=i.z.redMul(l.redAdd(d).redSqr()),y=i.x.redMul(l.redISub(d).redSqr());return this.curve.point(g,y)};Et.prototype.mul=function(t){for(var i=t.clone(),n=this,r=this.curve.point(null,null),s=this,a=[];i.cmpn(0)!==0;i.iushrn(1))a.push(i.andln(1));for(var l=a.length-1;l>=0;l--)a[l]===0?(n=n.diffAdd(r,s),r=r.dbl()):(r=n.diffAdd(r,s),n=n.dbl());return r};Et.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Et.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Et.prototype.eq=function(t){return this.getX().cmp(t.getX())===0};Et.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Et.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var o3=di,Sn=Dn,zf=ra,pa=ga,a3=o3.assert;function fn(e){this.twisted=(e.a|0)!==1,this.mOneA=this.twisted&&(e.a|0)===-1,this.extended=this.mOneA,pa.call(this,"edwards",e),this.a=new Sn(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new Sn(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new Sn(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a3(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(e.c|0)===1}zf(fn,pa);var c3=fn;fn.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)};fn.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)};fn.prototype.jpoint=function(t,i,n,r){return this.point(t,i,n,r)};fn.prototype.pointFromX=function(t,i){t=new Sn(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr(),r=this.c2.redSub(this.a.redMul(n)),s=this.one.redSub(this.c2.redMul(this.d).redMul(n)),a=r.redMul(s.redInvm()),l=a.redSqrt();if(l.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var d=l.fromRed().isOdd();return(i&&!d||!i&&d)&&(l=l.redNeg()),this.point(t,l)};fn.prototype.pointFromY=function(t,i){t=new Sn(t,16),t.red||(t=t.toRed(this.red));var n=t.redSqr(),r=n.redSub(this.c2),s=n.redMul(this.d).redMul(this.c2).redSub(this.a),a=r.redMul(s.redInvm());if(a.cmp(this.zero)===0){if(i)throw new Error("invalid point");return this.point(this.zero,t)}var l=a.redSqrt();if(l.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");return l.fromRed().isOdd()!==i&&(l=l.redNeg()),this.point(l,t)};fn.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var i=t.x.redSqr(),n=t.y.redSqr(),r=i.redMul(this.a).redAdd(n),s=this.c2.redMul(this.one.redAdd(this.d.redMul(i).redMul(n)));return r.cmp(s)===0};function ht(e,t,i,n,r){pa.BasePoint.call(this,e,"projective"),t===null&&i===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new Sn(t,16),this.y=new Sn(i,16),this.z=n?new Sn(n,16):this.curve.one,this.t=r&&new Sn(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}zf(ht,pa.BasePoint);fn.prototype.pointFromJSON=function(t){return ht.fromJSON(this,t)};fn.prototype.point=function(t,i,n,r){return new ht(this,t,i,n,r)};ht.fromJSON=function(t,i){return new ht(t,i[0],i[1],i[2])};ht.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ht.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};ht.prototype._extDbl=function(){var t=this.x.redSqr(),i=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var r=this.curve._mulA(t),s=this.x.redAdd(this.y).redSqr().redISub(t).redISub(i),a=r.redAdd(i),l=a.redSub(n),d=r.redSub(i),g=s.redMul(l),y=a.redMul(d),b=s.redMul(d),M=l.redMul(a);return this.curve.point(g,y,M,b)};ht.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),i=this.x.redSqr(),n=this.y.redSqr(),r,s,a,l,d,g;if(this.curve.twisted){l=this.curve._mulA(i);var y=l.redAdd(n);this.zOne?(r=t.redSub(i).redSub(n).redMul(y.redSub(this.curve.two)),s=y.redMul(l.redSub(n)),a=y.redSqr().redSub(y).redSub(y)):(d=this.z.redSqr(),g=y.redSub(d).redISub(d),r=t.redSub(i).redISub(n).redMul(g),s=y.redMul(l.redSub(n)),a=y.redMul(g))}else l=i.redAdd(n),d=this.curve._mulC(this.z).redSqr(),g=l.redSub(d).redSub(d),r=this.curve._mulC(t.redISub(l)).redMul(g),s=this.curve._mulC(l).redMul(i.redISub(n)),a=l.redMul(g);return this.curve.point(r,s,a)};ht.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};ht.prototype._extAdd=function(t){var i=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),n=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),s=this.z.redMul(t.z.redAdd(t.z)),a=n.redSub(i),l=s.redSub(r),d=s.redAdd(r),g=n.redAdd(i),y=a.redMul(l),b=d.redMul(g),M=a.redMul(g),A=l.redMul(d);return this.curve.point(y,b,A,M)};ht.prototype._projAdd=function(t){var i=this.z.redMul(t.z),n=i.redSqr(),r=this.x.redMul(t.x),s=this.y.redMul(t.y),a=this.curve.d.redMul(r).redMul(s),l=n.redSub(a),d=n.redAdd(a),g=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(r).redISub(s),y=i.redMul(l).redMul(g),b,M;return this.curve.twisted?(b=i.redMul(d).redMul(s.redSub(this.curve._mulA(r))),M=l.redMul(d)):(b=i.redMul(d).redMul(s.redSub(r)),M=this.curve._mulC(l).redMul(d)),this.curve.point(y,b,M)};ht.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)};ht.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)};ht.prototype.mulAdd=function(t,i,n){return this.curve._wnafMulAdd(1,[this,i],[t,n],2,!1)};ht.prototype.jmulAdd=function(t,i,n){return this.curve._wnafMulAdd(1,[this,i],[t,n],2,!0)};ht.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this};ht.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};ht.prototype.getX=function(){return this.normalize(),this.x.fromRed()};ht.prototype.getY=function(){return this.normalize(),this.y.fromRed()};ht.prototype.eq=function(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0};ht.prototype.eqXToP=function(t){var i=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(i)===0)return!0;for(var n=t.clone(),r=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(r),this.x.cmp(i)===0)return!0}};ht.prototype.toP=ht.prototype.normalize;ht.prototype.mixedAdd=ht.prototype.add;(function(e){var t=e;t.base=ga,t.short=n3,t.mont=s3,t.edwards=c3})(Al);var ya={},ba={},_e={},l3=Tr,d3=ra;_e.inherits=d3;function h3(e,t){return(e.charCodeAt(t)&64512)!==55296||t<0||t+1>=e.length?!1:(e.charCodeAt(t+1)&64512)===56320}function u3(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if(typeof e=="string")if(t){if(t==="hex")for(e=e.replace(/[^a-z0-9]+/ig,""),e.length%2!==0&&(e="0"+e),r=0;r<e.length;r+=2)i.push(parseInt(e[r]+e[r+1],16))}else for(var n=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);s<128?i[n++]=s:s<2048?(i[n++]=s>>6|192,i[n++]=s&63|128):h3(e,r)?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),i[n++]=s>>18|240,i[n++]=s>>12&63|128,i[n++]=s>>6&63|128,i[n++]=s&63|128):(i[n++]=s>>12|224,i[n++]=s>>6&63|128,i[n++]=s&63|128)}else for(r=0;r<e.length;r++)i[r]=e[r]|0;return i}_e.toArray=u3;function f3(e){for(var t="",i=0;i<e.length;i++)t+=Of(e[i].toString(16));return t}_e.toHex=f3;function Rf(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}_e.htonl=Rf;function g3(e,t){for(var i="",n=0;n<e.length;n++){var r=e[n];t==="little"&&(r=Rf(r)),i+=Bf(r.toString(16))}return i}_e.toHex32=g3;function Of(e){return e.length===1?"0"+e:e}_e.zero2=Of;function Bf(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}_e.zero8=Bf;function m3(e,t,i,n){var r=i-t;l3(r%4===0);for(var s=new Array(r/4),a=0,l=t;a<s.length;a++,l+=4){var d;n==="big"?d=e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:d=e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],s[a]=d>>>0}return s}_e.join32=m3;function p3(e,t){for(var i=new Array(e.length*4),n=0,r=0;n<e.length;n++,r+=4){var s=e[n];t==="big"?(i[r]=s>>>24,i[r+1]=s>>>16&255,i[r+2]=s>>>8&255,i[r+3]=s&255):(i[r+3]=s>>>24,i[r+2]=s>>>16&255,i[r+1]=s>>>8&255,i[r]=s&255)}return i}_e.split32=p3;function y3(e,t){return e>>>t|e<<32-t}_e.rotr32=y3;function b3(e,t){return e<<t|e>>>32-t}_e.rotl32=b3;function v3(e,t){return e+t>>>0}_e.sum32=v3;function x3(e,t,i){return e+t+i>>>0}_e.sum32_3=x3;function w3(e,t,i,n){return e+t+i+n>>>0}_e.sum32_4=w3;function M3(e,t,i,n,r){return e+t+i+n+r>>>0}_e.sum32_5=M3;function A3(e,t,i,n){var r=e[t],s=e[t+1],a=n+s>>>0,l=(a<n?1:0)+i+r;e[t]=l>>>0,e[t+1]=a}_e.sum64=A3;function S3(e,t,i,n){var r=t+n>>>0,s=(r<t?1:0)+e+i;return s>>>0}_e.sum64_hi=S3;function j3(e,t,i,n){var r=t+n;return r>>>0}_e.sum64_lo=j3;function I3(e,t,i,n,r,s,a,l){var d=0,g=t;g=g+n>>>0,d+=g<t?1:0,g=g+s>>>0,d+=g<s?1:0,g=g+l>>>0,d+=g<l?1:0;var y=e+i+r+a+d;return y>>>0}_e.sum64_4_hi=I3;function T3(e,t,i,n,r,s,a,l){var d=t+n+s+l;return d>>>0}_e.sum64_4_lo=T3;function C3(e,t,i,n,r,s,a,l,d,g){var y=0,b=t;b=b+n>>>0,y+=b<t?1:0,b=b+s>>>0,y+=b<s?1:0,b=b+l>>>0,y+=b<l?1:0,b=b+g>>>0,y+=b<g?1:0;var M=e+i+r+a+d+y;return M>>>0}_e.sum64_5_hi=C3;function E3(e,t,i,n,r,s,a,l,d,g){var y=t+n+s+l+g;return y>>>0}_e.sum64_5_lo=E3;function N3(e,t,i){var n=t<<32-i|e>>>i;return n>>>0}_e.rotr64_hi=N3;function _3(e,t,i){var n=e<<32-i|t>>>i;return n>>>0}_e.rotr64_lo=_3;function k3(e,t,i){return e>>>i}_e.shr64_hi=k3;function D3(e,t,i){var n=e<<32-i|t>>>i;return n>>>0}_e.shr64_lo=D3;var hs={},vd=_e,L3=Tr;function va(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}hs.BlockHash=va;va.prototype.update=function(t,i){if(t=vd.toArray(t,i),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var n=t.length%this._delta8;this.pending=t.slice(t.length-n,t.length),this.pending.length===0&&(this.pending=null),t=vd.join32(t,0,t.length-n,this.endian);for(var r=0;r<t.length;r+=this._delta32)this._update(t,r,r+this._delta32)}return this};va.prototype.digest=function(t){return this.update(this._pad()),L3(this.pending===null),this._digest(t)};va.prototype._pad=function(){var t=this.pendingTotal,i=this._delta8,n=i-(t+this.padLength)%i,r=new Array(n+this.padLength);r[0]=128;for(var s=1;s<n;s++)r[s]=0;if(t<<=3,this.endian==="big"){for(var a=8;a<this.padLength;a++)r[s++]=0;r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=t>>>24&255,r[s++]=t>>>16&255,r[s++]=t>>>8&255,r[s++]=t&255}else for(r[s++]=t&255,r[s++]=t>>>8&255,r[s++]=t>>>16&255,r[s++]=t>>>24&255,r[s++]=0,r[s++]=0,r[s++]=0,r[s++]=0,a=8;a<this.padLength;a++)r[s++]=0;return r};var us={},gn={},P3=_e,Ji=P3.rotr32;function z3(e,t,i,n){if(e===0)return qf(t,i,n);if(e===1||e===3)return Uf(t,i,n);if(e===2)return Ff(t,i,n)}gn.ft_1=z3;function qf(e,t,i){return e&t^~e&i}gn.ch32=qf;function Ff(e,t,i){return e&t^e&i^t&i}gn.maj32=Ff;function Uf(e,t,i){return e^t^i}gn.p32=Uf;function R3(e){return Ji(e,2)^Ji(e,13)^Ji(e,22)}gn.s0_256=R3;function O3(e){return Ji(e,6)^Ji(e,11)^Ji(e,25)}gn.s1_256=O3;function B3(e){return Ji(e,7)^Ji(e,18)^e>>>3}gn.g0_256=B3;function q3(e){return Ji(e,17)^Ji(e,19)^e>>>10}gn.g1_256=q3;var Zr=_e,F3=hs,U3=gn,za=Zr.rotl32,As=Zr.sum32,W3=Zr.sum32_5,$3=U3.ft_1,Wf=F3.BlockHash,H3=[1518500249,1859775393,2400959708,3395469782];function ln(){if(!(this instanceof ln))return new ln;Wf.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Zr.inherits(ln,Wf);var Y3=ln;ln.blockSize=512;ln.outSize=160;ln.hmacStrength=80;ln.padLength=64;ln.prototype._update=function(t,i){for(var n=this.W,r=0;r<16;r++)n[r]=t[i+r];for(;r<n.length;r++)n[r]=za(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var s=this.h[0],a=this.h[1],l=this.h[2],d=this.h[3],g=this.h[4];for(r=0;r<n.length;r++){var y=~~(r/20),b=W3(za(s,5),$3(y,a,l,d),g,n[r],H3[y]);g=d,d=l,l=za(a,30),a=s,s=b}this.h[0]=As(this.h[0],s),this.h[1]=As(this.h[1],a),this.h[2]=As(this.h[2],l),this.h[3]=As(this.h[3],d),this.h[4]=As(this.h[4],g)};ln.prototype._digest=function(t){return t==="hex"?Zr.toHex32(this.h,"big"):Zr.split32(this.h,"big")};var Jr=_e,Q3=hs,fs=gn,V3=Tr,Ni=Jr.sum32,K3=Jr.sum32_4,G3=Jr.sum32_5,Z3=fs.ch32,J3=fs.maj32,X3=fs.s0_256,ev=fs.s1_256,tv=fs.g0_256,iv=fs.g1_256,$f=Q3.BlockHash,nv=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function dn(){if(!(this instanceof dn))return new dn;$f.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=nv,this.W=new Array(64)}Jr.inherits(dn,$f);var Hf=dn;dn.blockSize=512;dn.outSize=256;dn.hmacStrength=192;dn.padLength=64;dn.prototype._update=function(t,i){for(var n=this.W,r=0;r<16;r++)n[r]=t[i+r];for(;r<n.length;r++)n[r]=K3(iv(n[r-2]),n[r-7],tv(n[r-15]),n[r-16]);var s=this.h[0],a=this.h[1],l=this.h[2],d=this.h[3],g=this.h[4],y=this.h[5],b=this.h[6],M=this.h[7];for(V3(this.k.length===n.length),r=0;r<n.length;r++){var A=G3(M,ev(g),Z3(g,y,b),this.k[r],n[r]),S=Ni(X3(s),J3(s,a,l));M=b,b=y,y=g,g=Ni(d,A),d=l,l=a,a=s,s=Ni(A,S)}this.h[0]=Ni(this.h[0],s),this.h[1]=Ni(this.h[1],a),this.h[2]=Ni(this.h[2],l),this.h[3]=Ni(this.h[3],d),this.h[4]=Ni(this.h[4],g),this.h[5]=Ni(this.h[5],y),this.h[6]=Ni(this.h[6],b),this.h[7]=Ni(this.h[7],M)};dn.prototype._digest=function(t){return t==="hex"?Jr.toHex32(this.h,"big"):Jr.split32(this.h,"big")};var Ac=_e,Yf=Hf;function Cn(){if(!(this instanceof Cn))return new Cn;Yf.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Ac.inherits(Cn,Yf);var rv=Cn;Cn.blockSize=512;Cn.outSize=224;Cn.hmacStrength=192;Cn.padLength=64;Cn.prototype._digest=function(t){return t==="hex"?Ac.toHex32(this.h.slice(0,7),"big"):Ac.split32(this.h.slice(0,7),"big")};var Jt=_e,sv=hs,ov=Tr,Xi=Jt.rotr64_hi,en=Jt.rotr64_lo,Qf=Jt.shr64_hi,Vf=Jt.shr64_lo,Ln=Jt.sum64,Ra=Jt.sum64_hi,Oa=Jt.sum64_lo,av=Jt.sum64_4_hi,cv=Jt.sum64_4_lo,lv=Jt.sum64_5_hi,dv=Jt.sum64_5_lo,Kf=sv.BlockHash,hv=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ui(){if(!(this instanceof Ui))return new Ui;Kf.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=hv,this.W=new Array(160)}Jt.inherits(Ui,Kf);var Gf=Ui;Ui.blockSize=1024;Ui.outSize=512;Ui.hmacStrength=192;Ui.padLength=128;Ui.prototype._prepareBlock=function(t,i){for(var n=this.W,r=0;r<32;r++)n[r]=t[i+r];for(;r<n.length;r+=2){var s=Mv(n[r-4],n[r-3]),a=Av(n[r-4],n[r-3]),l=n[r-14],d=n[r-13],g=xv(n[r-30],n[r-29]),y=wv(n[r-30],n[r-29]),b=n[r-32],M=n[r-31];n[r]=av(s,a,l,d,g,y,b,M),n[r+1]=cv(s,a,l,d,g,y,b,M)}};Ui.prototype._update=function(t,i){this._prepareBlock(t,i);var n=this.W,r=this.h[0],s=this.h[1],a=this.h[2],l=this.h[3],d=this.h[4],g=this.h[5],y=this.h[6],b=this.h[7],M=this.h[8],A=this.h[9],S=this.h[10],C=this.h[11],k=this.h[12],N=this.h[13],D=this.h[14],B=this.h[15];ov(this.k.length===n.length);for(var P=0;P<n.length;P+=2){var z=D,W=B,Y=bv(M,A),Z=vv(M,A),H=uv(M,A,S,C,k),X=fv(M,A,S,C,k,N),E=this.k[P],m=this.k[P+1],c=n[P],h=n[P+1],p=lv(z,W,Y,Z,H,X,E,m,c,h),v=dv(z,W,Y,Z,H,X,E,m,c,h);z=pv(r,s),W=yv(r,s),Y=gv(r,s,a,l,d),Z=mv(r,s,a,l,d,g);var x=Ra(z,W,Y,Z),I=Oa(z,W,Y,Z);D=k,B=N,k=S,N=C,S=M,C=A,M=Ra(y,b,p,v),A=Oa(b,b,p,v),y=d,b=g,d=a,g=l,a=r,l=s,r=Ra(p,v,x,I),s=Oa(p,v,x,I)}Ln(this.h,0,r,s),Ln(this.h,2,a,l),Ln(this.h,4,d,g),Ln(this.h,6,y,b),Ln(this.h,8,M,A),Ln(this.h,10,S,C),Ln(this.h,12,k,N),Ln(this.h,14,D,B)};Ui.prototype._digest=function(t){return t==="hex"?Jt.toHex32(this.h,"big"):Jt.split32(this.h,"big")};function uv(e,t,i,n,r){var s=e&i^~e&r;return s<0&&(s+=4294967296),s}function fv(e,t,i,n,r,s){var a=t&n^~t&s;return a<0&&(a+=4294967296),a}function gv(e,t,i,n,r){var s=e&i^e&r^i&r;return s<0&&(s+=4294967296),s}function mv(e,t,i,n,r,s){var a=t&n^t&s^n&s;return a<0&&(a+=4294967296),a}function pv(e,t){var i=Xi(e,t,28),n=Xi(t,e,2),r=Xi(t,e,7),s=i^n^r;return s<0&&(s+=4294967296),s}function yv(e,t){var i=en(e,t,28),n=en(t,e,2),r=en(t,e,7),s=i^n^r;return s<0&&(s+=4294967296),s}function bv(e,t){var i=Xi(e,t,14),n=Xi(e,t,18),r=Xi(t,e,9),s=i^n^r;return s<0&&(s+=4294967296),s}function vv(e,t){var i=en(e,t,14),n=en(e,t,18),r=en(t,e,9),s=i^n^r;return s<0&&(s+=4294967296),s}function xv(e,t){var i=Xi(e,t,1),n=Xi(e,t,8),r=Qf(e,t,7),s=i^n^r;return s<0&&(s+=4294967296),s}function wv(e,t){var i=en(e,t,1),n=en(e,t,8),r=Vf(e,t,7),s=i^n^r;return s<0&&(s+=4294967296),s}function Mv(e,t){var i=Xi(e,t,19),n=Xi(t,e,29),r=Qf(e,t,6),s=i^n^r;return s<0&&(s+=4294967296),s}function Av(e,t){var i=en(e,t,19),n=en(t,e,29),r=Vf(e,t,6),s=i^n^r;return s<0&&(s+=4294967296),s}var Sc=_e,Zf=Gf;function En(){if(!(this instanceof En))return new En;Zf.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Sc.inherits(En,Zf);var Sv=En;En.blockSize=1024;En.outSize=384;En.hmacStrength=192;En.padLength=128;En.prototype._digest=function(t){return t==="hex"?Sc.toHex32(this.h.slice(0,12),"big"):Sc.split32(this.h.slice(0,12),"big")};us.sha1=Y3;us.sha224=rv;us.sha256=Hf;us.sha384=Sv;us.sha512=Gf;var Jf={},Mr=_e,jv=hs,go=Mr.rotl32,xd=Mr.sum32,Ss=Mr.sum32_3,wd=Mr.sum32_4,Xf=jv.BlockHash;function hn(){if(!(this instanceof hn))return new hn;Xf.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Mr.inherits(hn,Xf);Jf.ripemd160=hn;hn.blockSize=512;hn.outSize=160;hn.hmacStrength=192;hn.padLength=64;hn.prototype._update=function(t,i){for(var n=this.h[0],r=this.h[1],s=this.h[2],a=this.h[3],l=this.h[4],d=n,g=r,y=s,b=a,M=l,A=0;A<80;A++){var S=xd(go(wd(n,Md(A,r,s,a),t[Cv[A]+i],Iv(A)),Nv[A]),l);n=l,l=a,a=go(s,10),s=r,r=S,S=xd(go(wd(d,Md(79-A,g,y,b),t[Ev[A]+i],Tv(A)),_v[A]),M),d=M,M=b,b=go(y,10),y=g,g=S}S=Ss(this.h[1],s,b),this.h[1]=Ss(this.h[2],a,M),this.h[2]=Ss(this.h[3],l,d),this.h[3]=Ss(this.h[4],n,g),this.h[4]=Ss(this.h[0],r,y),this.h[0]=S};hn.prototype._digest=function(t){return t==="hex"?Mr.toHex32(this.h,"little"):Mr.split32(this.h,"little")};function Md(e,t,i,n){return e<=15?t^i^n:e<=31?t&i|~t&n:e<=47?(t|~i)^n:e<=63?t&n|i&~n:t^(i|~n)}function Iv(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function Tv(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}var Cv=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],Ev=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Nv=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],_v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],kv=_e,Dv=Tr;function Xr(e,t,i){if(!(this instanceof Xr))return new Xr(e,t,i);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(kv.toArray(t,i))}var Lv=Xr;Xr.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),Dv(t.length<=this.blockSize);for(var i=t.length;i<this.blockSize;i++)t.push(0);for(i=0;i<t.length;i++)t[i]^=54;for(this.inner=new this.Hash().update(t),i=0;i<t.length;i++)t[i]^=106;this.outer=new this.Hash().update(t)};Xr.prototype.update=function(t,i){return this.inner.update(t,i),this};Xr.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)};(function(e){var t=e;t.utils=_e,t.common=hs,t.sha=us,t.ripemd=Jf,t.hmac=Lv,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160})(ba);var Ba,Ad;function Pv(){return Ad||(Ad=1,Ba={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Ba}(function(e){var t=e,i=ba,n=Al,r=di,s=r.assert;function a(g){g.type==="short"?this.curve=new n.short(g):g.type==="edwards"?this.curve=new n.edwards(g):this.curve=new n.mont(g),this.g=this.curve.g,this.n=this.curve.n,this.hash=g.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=a;function l(g,y){Object.defineProperty(t,g,{configurable:!0,enumerable:!0,get:function(){var b=new a(y);return Object.defineProperty(t,g,{configurable:!0,enumerable:!0,value:b}),b}})}l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:i.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:i.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:i.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:i.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:i.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:i.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var d;try{d=Pv()}catch{d=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:i.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",d]})})(ya);var zv=ba,mr=wl,e0=Tr;function Yn(e){if(!(this instanceof Yn))return new Yn(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=mr.toArray(e.entropy,e.entropyEnc||"hex"),i=mr.toArray(e.nonce,e.nonceEnc||"hex"),n=mr.toArray(e.pers,e.persEnc||"hex");e0(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,n)}var Rv=Yn;Yn.prototype._init=function(t,i,n){var r=t.concat(i).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656};Yn.prototype._hmac=function(){return new zv.hmac(this.hash,this.K)};Yn.prototype._update=function(t){var i=this._hmac().update(this.V).update([0]);t&&(i=i.update(t)),this.K=i.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())};Yn.prototype.reseed=function(t,i,n,r){typeof i!="string"&&(r=n,n=i,i=null),t=mr.toArray(t,i),n=mr.toArray(n,r),e0(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1};Yn.prototype.generate=function(t,i,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof i!="string"&&(r=n,n=i,i=null),n&&(n=mr.toArray(n,r||"hex"),this._update(n));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var a=s.slice(0,t);return this._update(n),this._reseed++,mr.encode(a,i)};var Ov=Dn,Bv=di,jc=Bv.assert;function Ot(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var qv=Ot;Ot.fromPublic=function(t,i,n){return i instanceof Ot?i:new Ot(t,{pub:i,pubEnc:n})};Ot.fromPrivate=function(t,i,n){return i instanceof Ot?i:new Ot(t,{priv:i,privEnc:n})};Ot.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Ot.prototype.getPublic=function(t,i){return typeof t=="string"&&(i=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),i?this.pub.encode(i,t):this.pub};Ot.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};Ot.prototype._importPrivate=function(t,i){this.priv=new Ov(t,i||16),this.priv=this.priv.umod(this.ec.curve.n)};Ot.prototype._importPublic=function(t,i){if(t.x||t.y){this.ec.curve.type==="mont"?jc(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&jc(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,i)};Ot.prototype.derive=function(t){return t.validate()||jc(t.validate(),"public point not validated"),t.mul(this.priv).getX()};Ot.prototype.sign=function(t,i,n){return this.ec.sign(t,this,i,n)};Ot.prototype.verify=function(t,i){return this.ec.verify(t,i,this)};Ot.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Uo=Dn,jl=di,Fv=jl.assert;function xa(e,t){if(e instanceof xa)return e;this._importDER(e,t)||(Fv(e.r&&e.s,"Signature without r or s"),this.r=new Uo(e.r,16),this.s=new Uo(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var Uv=xa;function Wv(){this.place=0}function qa(e,t){var i=e[t.place++];if(!(i&128))return i;var n=i&15;if(n===0||n>4||e[t.place]===0)return!1;for(var r=0,s=0,a=t.place;s<n;s++,a++)r<<=8,r|=e[a],r>>>=0;return r<=127?!1:(t.place=a,r)}function Sd(e){for(var t=0,i=e.length-1;!e[t]&&!(e[t+1]&128)&&t<i;)t++;return t===0?e:e.slice(t)}xa.prototype._importDER=function(t,i){t=jl.toArray(t,i);var n=new Wv;if(t[n.place++]!==48)return!1;var r=qa(t,n);if(r===!1||r+n.place!==t.length||t[n.place++]!==2)return!1;var s=qa(t,n);if(s===!1||t[n.place]&128)return!1;var a=t.slice(n.place,s+n.place);if(n.place+=s,t[n.place++]!==2)return!1;var l=qa(t,n);if(l===!1||t.length!==l+n.place||t[n.place]&128)return!1;var d=t.slice(n.place,l+n.place);if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;if(d[0]===0)if(d[1]&128)d=d.slice(1);else return!1;return this.r=new Uo(a),this.s=new Uo(d),this.recoveryParam=null,!0};function Fa(e,t){if(t<128){e.push(t);return}var i=1+(Math.log(t)/Math.LN2>>>3);for(e.push(i|128);--i;)e.push(t>>>(i<<3)&255);e.push(t)}xa.prototype.toDER=function(t){var i=this.r.toArray(),n=this.s.toArray();for(i[0]&128&&(i=[0].concat(i)),n[0]&128&&(n=[0].concat(n)),i=Sd(i),n=Sd(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var r=[2];Fa(r,i.length),r=r.concat(i),r.push(2),Fa(r,n.length);var s=r.concat(n),a=[48];return Fa(a,s.length),a=a.concat(s),jl.encode(a,t)};var pr=Dn,t0=Rv,$v=di,Ua=ya,Hv=Lf,i0=$v.assert,Il=qv,wa=Uv;function Ii(e){if(!(this instanceof Ii))return new Ii(e);typeof e=="string"&&(i0(Object.prototype.hasOwnProperty.call(Ua,e),"Unknown curve "+e),e=Ua[e]),e instanceof Ua.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var Yv=Ii;Ii.prototype.keyPair=function(t){return new Il(this,t)};Ii.prototype.keyFromPrivate=function(t,i){return Il.fromPrivate(this,t,i)};Ii.prototype.keyFromPublic=function(t,i){return Il.fromPublic(this,t,i)};Ii.prototype.genKeyPair=function(t){t||(t={});for(var i=new t0({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||Hv(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),r=this.n.sub(new pr(2));;){var s=new pr(i.generate(n));if(!(s.cmp(r)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Ii.prototype._truncateToN=function(t,i){var n=t.byteLength()*8-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!i&&t.cmp(this.n)>=0?t.sub(this.n):t};Ii.prototype.sign=function(t,i,n,r){typeof n=="object"&&(r=n,n=null),r||(r={}),i=this.keyFromPrivate(i,n),t=this._truncateToN(new pr(t,16));for(var s=this.n.byteLength(),a=i.getPrivate().toArray("be",s),l=t.toArray("be",s),d=new t0({hash:this.hash,entropy:a,nonce:l,pers:r.pers,persEnc:r.persEnc||"utf8"}),g=this.n.sub(new pr(1)),y=0;;y++){var b=r.k?r.k(y):new pr(d.generate(this.n.byteLength()));if(b=this._truncateToN(b,!0),!(b.cmpn(1)<=0||b.cmp(g)>=0)){var M=this.g.mul(b);if(!M.isInfinity()){var A=M.getX(),S=A.umod(this.n);if(S.cmpn(0)!==0){var C=b.invm(this.n).mul(S.mul(i.getPrivate()).iadd(t));if(C=C.umod(this.n),C.cmpn(0)!==0){var k=(M.getY().isOdd()?1:0)|(A.cmp(S)!==0?2:0);return r.canonical&&C.cmp(this.nh)>0&&(C=this.n.sub(C),k^=1),new wa({r:S,s:C,recoveryParam:k})}}}}}};Ii.prototype.verify=function(t,i,n,r){t=this._truncateToN(new pr(t,16)),n=this.keyFromPublic(n,r),i=new wa(i,"hex");var s=i.r,a=i.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;var l=a.invm(this.n),d=l.mul(t).umod(this.n),g=l.mul(s).umod(this.n),y;return this.curve._maxwellTrick?(y=this.g.jmulAdd(d,n.getPublic(),g),y.isInfinity()?!1:y.eqXToP(s)):(y=this.g.mulAdd(d,n.getPublic(),g),y.isInfinity()?!1:y.getX().umod(this.n).cmp(s)===0)};Ii.prototype.recoverPubKey=function(e,t,i,n){i0((3&i)===i,"The recovery param is more than two bits"),t=new wa(t,n);var r=this.n,s=new pr(e),a=t.r,l=t.s,d=i&1,g=i>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?a=this.curve.pointFromX(a.add(this.curve.n),d):a=this.curve.pointFromX(a,d);var y=t.r.invm(r),b=r.sub(s).mul(y).umod(r),M=l.mul(y).umod(r);return this.g.mulAdd(b,a,M)};Ii.prototype.getKeyRecoveryParam=function(e,t,i,n){if(t=new wa(t,n),t.recoveryParam!==null)return t.recoveryParam;for(var r=0;r<4;r++){var s;try{s=this.recoverPubKey(e,t,r)}catch{continue}if(s.eq(i))return r}throw new Error("Unable to find valid recovery factor")};var eo=di,n0=eo.assert,jd=eo.parseBytes,gs=eo.cachedProperty;function Tt(e,t){this.eddsa=e,this._secret=jd(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=jd(t.pub)}Tt.fromPublic=function(t,i){return i instanceof Tt?i:new Tt(t,{pub:i})};Tt.fromSecret=function(t,i){return i instanceof Tt?i:new Tt(t,{secret:i})};Tt.prototype.secret=function(){return this._secret};gs(Tt,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});gs(Tt,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});gs(Tt,"privBytes",function(){var t=this.eddsa,i=this.hash(),n=t.encodingLength-1,r=i.slice(0,t.encodingLength);return r[0]&=248,r[n]&=127,r[n]|=64,r});gs(Tt,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});gs(Tt,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});gs(Tt,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});Tt.prototype.sign=function(t){return n0(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)};Tt.prototype.verify=function(t,i){return this.eddsa.verify(t,i,this)};Tt.prototype.getSecret=function(t){return n0(this._secret,"KeyPair is public only"),eo.encode(this.secret(),t)};Tt.prototype.getPublic=function(t){return eo.encode(this.pubBytes(),t)};var Qv=Tt,Vv=Dn,Ma=di,Id=Ma.assert,Aa=Ma.cachedProperty,Kv=Ma.parseBytes;function Cr(e,t){this.eddsa=e,typeof t!="object"&&(t=Kv(t)),Array.isArray(t)&&(Id(t.length===e.encodingLength*2,"Signature has invalid size"),t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),Id(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof Vv&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}Aa(Cr,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Aa(Cr,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Aa(Cr,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Aa(Cr,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Cr.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Cr.prototype.toHex=function(){return Ma.encode(this.toBytes(),"hex").toUpperCase()};var Gv=Cr,Zv=ba,Jv=ya,es=di,Xv=es.assert,r0=es.parseBytes,s0=Qv,Td=Gv;function Xt(e){if(Xv(e==="ed25519","only tested with ed25519 so far"),!(this instanceof Xt))return new Xt(e);e=Jv[e].curve,this.curve=e,this.g=e.g,this.g.precompute(e.n.bitLength()+1),this.pointClass=e.point().constructor,this.encodingLength=Math.ceil(e.n.bitLength()/8),this.hash=Zv.sha512}var ex=Xt;Xt.prototype.sign=function(t,i){t=r0(t);var n=this.keyFromSecret(i),r=this.hashInt(n.messagePrefix(),t),s=this.g.mul(r),a=this.encodePoint(s),l=this.hashInt(a,n.pubBytes(),t).mul(n.priv()),d=r.add(l).umod(this.curve.n);return this.makeSignature({R:s,S:d,Rencoded:a})};Xt.prototype.verify=function(t,i,n){if(t=r0(t),i=this.makeSignature(i),i.S().gte(i.eddsa.curve.n)||i.S().isNeg())return!1;var r=this.keyFromPublic(n),s=this.hashInt(i.Rencoded(),r.pubBytes(),t),a=this.g.mul(i.S()),l=i.R().add(r.pub().mul(s));return l.eq(a)};Xt.prototype.hashInt=function(){for(var t=this.hash(),i=0;i<arguments.length;i++)t.update(arguments[i]);return es.intFromLE(t.digest()).umod(this.curve.n)};Xt.prototype.keyFromPublic=function(t){return s0.fromPublic(this,t)};Xt.prototype.keyFromSecret=function(t){return s0.fromSecret(this,t)};Xt.prototype.makeSignature=function(t){return t instanceof Td?t:new Td(this,t)};Xt.prototype.encodePoint=function(t){var i=t.getY().toArray("le",this.encodingLength);return i[this.encodingLength-1]|=t.getX().isOdd()?128:0,i};Xt.prototype.decodePoint=function(t){t=es.parseBytes(t);var i=t.length-1,n=t.slice(0,i).concat(t[i]&-129),r=(t[i]&128)!==0,s=es.intFromLE(n);return this.curve.pointFromY(s,r)};Xt.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)};Xt.prototype.decodeInt=function(t){return es.intFromLE(t)};Xt.prototype.isPoint=function(t){return t instanceof this.pointClass};(function(e){var t=e;t.version=Xb.version,t.utils=di,t.rand=Lf,t.curve=Al,t.curves=ya,t.ec=Yv,t.eddsa=ex})(kf);const tx=":";function Wa(e){const[t,i]=e.split(tx);return{namespace:t,reference:i}}function o0(e,t){return e.includes(":")?[e]:t.chains||[]}var ix=Object.defineProperty,Cd=Object.getOwnPropertySymbols,nx=Object.prototype.hasOwnProperty,rx=Object.prototype.propertyIsEnumerable,Ed=(e,t,i)=>t in e?ix(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Nd=(e,t)=>{for(var i in t||(t={}))nx.call(t,i)&&Ed(e,i,t[i]);if(Cd)for(var i of Cd(t))rx.call(t,i)&&Ed(e,i,t[i]);return e};const sx="ReactNative",ri={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},ox="js";function Us(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function to(){return!bu()&&!!yu()&&navigator.product===sx}function io(){return!Us()&&!!yu()&&!!bu()}function no(){return to()?ri.reactNative:Us()?ri.node:io()?ri.browser:ri.unknown}function ax(){var e;try{return to()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(e=global.Application)==null?void 0:e.applicationId:void 0}catch{return}}function cx(e,t){let i=_o.parse(e);return i=Nd(Nd({},i),t),e=_o.stringify(i),e}function lx(){return dm()||{name:"",description:"",url:"",icons:[""]}}function dx(){if(no()===ri.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:i,Version:n}=global.Platform;return[i,n].join("-")}const e=fm();if(e===null)return"unknown";const t=e.os?e.os.replace(" ","").toLowerCase():"unknown";return e.type==="browser"?[t,e.name,e.version].join("-"):[t,e.version].join("-")}function hx(){var e;const t=no();return t===ri.browser?[t,((e=gm())==null?void 0:e.host)||"unknown"].join(":"):t}function ux(e,t,i){const n=dx(),r=hx();return[[e,t].join("-"),[ox,i].join("-"),n,r].join("/")}function fx({protocol:e,version:t,relayUrl:i,sdkVersion:n,auth:r,projectId:s,useOnCloseEvent:a,bundleId:l}){const d=i.split("?"),g=ux(e,t,n),y={auth:r,ua:g,projectId:s,useOnCloseEvent:a||void 0,origin:l||void 0},b=cx(d[1]||"",y);return d[0]+"?"+b}function gr(e,t){return e.filter(i=>t.includes(i)).length===e.length}function a0(e){return Object.fromEntries(e.entries())}function c0(e){return new Map(Object.entries(e))}function ur(e=se.FIVE_MINUTES,t){const i=se.toMiliseconds(e||se.FIVE_MINUTES);let n,r,s;return{resolve:a=>{s&&n&&(clearTimeout(s),n(a))},reject:a=>{s&&r&&(clearTimeout(s),r(a))},done:()=>new Promise((a,l)=>{s=setTimeout(()=>{l(new Error(t))},i),n=a,r=l})}}function $r(e,t,i){return new Promise(async(n,r)=>{const s=setTimeout(()=>r(new Error(i)),t);try{const a=await e;n(a)}catch(a){r(a)}clearTimeout(s)})}function l0(e,t){if(typeof t=="string"&&t.startsWith(`${e}:`))return t;if(e.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(e.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${e}`)}function gx(e){return l0("topic",e)}function mx(e){return l0("id",e)}function d0(e){const[t,i]=e.split(":"),n={id:void 0,topic:void 0};if(t==="topic"&&typeof i=="string")n.topic=i;else if(t==="id"&&Number.isInteger(Number(i)))n.id=Number(i);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${i}`);return n}function Dt(e,t){return se.fromMiliseconds(Date.now()+se.toMiliseconds(e))}function zn(e){return Date.now()>=se.toMiliseconds(e)}function Ce(e,t){return`${e}${t?`:${t}`:""}`}function px(e=[],t=[]){return[...new Set([...e,...t])]}async function yx({id:e,topic:t,wcDeepLink:i}){try{if(!i)return;const n=typeof i=="string"?JSON.parse(i):i;let r=n==null?void 0:n.href;if(typeof r!="string")return;r.endsWith("/")&&(r=r.slice(0,-1));const s=`${r}/wc?requestId=${e}&sessionTopic=${t}`,a=no();a===ri.browser?s.startsWith("https://")||s.startsWith("http://")?window.open(s,"_blank","noreferrer noopener"):window.open(s,"_self","noreferrer noopener"):a===ri.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(s)}catch(n){console.error(n)}}async function bx(e,t){try{return await e.getItem(t)||(io()?localStorage.getItem(t):void 0)}catch(i){console.error(i)}}function vx(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}var h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xx(e){var t=e.default;if(typeof t=="function"){var i=function(){return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(i,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),i}var u0={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(e){(function(){var t="input is invalid type",i="finalize already called",n=typeof window=="object",r=n?window:{};r.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",a=!r.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;a?r=h0:s&&(r=self);var l=!r.JS_SHA3_NO_COMMON_JS&&!0&&e.exports,d=!r.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),y=[31,7936,2031616,520093696],b=[4,1024,262144,67108864],M=[1,256,65536,16777216],A=[6,1536,393216,100663296],S=[0,8,16,24],C=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],k=[224,256,384,512],N=[128,256],D=["hex","buffer","arrayBuffer","array","digest"],B={128:168,256:136};(r.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(j){return Object.prototype.toString.call(j)==="[object Array]"}),d&&(r.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(j){return typeof j=="object"&&j.buffer&&j.buffer.constructor===ArrayBuffer});for(var P=function(j,O,R){return function(Q){return new T(j,O,j).update(Q)[R]()}},z=function(j,O,R){return function(Q,K){return new T(j,O,K).update(Q)[R]()}},W=function(j,O,R){return function(Q,K,G,te){return h["cshake"+j].update(Q,K,G,te)[R]()}},Y=function(j,O,R){return function(Q,K,G,te){return h["kmac"+j].update(Q,K,G,te)[R]()}},Z=function(j,O,R,Q){for(var K=0;K<D.length;++K){var G=D[K];j[G]=O(R,Q,G)}return j},H=function(j,O){var R=P(j,O,"hex");return R.create=function(){return new T(j,O,j)},R.update=function(Q){return R.create().update(Q)},Z(R,P,j,O)},X=function(j,O){var R=z(j,O,"hex");return R.create=function(Q){return new T(j,O,Q)},R.update=function(Q,K){return R.create(K).update(Q)},Z(R,z,j,O)},E=function(j,O){var R=B[j],Q=W(j,O,"hex");return Q.create=function(K,G,te){return!G&&!te?h["shake"+j].create(K):new T(j,O,K).bytepad([G,te],R)},Q.update=function(K,G,te,J){return Q.create(G,te,J).update(K)},Z(Q,W,j,O)},m=function(j,O){var R=B[j],Q=Y(j,O,"hex");return Q.create=function(K,G,te){return new $(j,O,G).bytepad(["KMAC",te],R).bytepad([K],R)},Q.update=function(K,G,te,J){return Q.create(K,te,J).update(G)},Z(Q,Y,j,O)},c=[{name:"keccak",padding:M,bits:k,createMethod:H},{name:"sha3",padding:A,bits:k,createMethod:H},{name:"shake",padding:y,bits:N,createMethod:X},{name:"cshake",padding:b,bits:N,createMethod:E},{name:"kmac",padding:b,bits:N,createMethod:m}],h={},p=[],v=0;v<c.length;++v)for(var x=c[v],I=x.bits,w=0;w<I.length;++w){var u=x.name+"_"+I[w];if(p.push(u),h[u]=x.createMethod(I[w],x.padding),x.name!=="sha3"){var f=x.name+I[w];p.push(f),h[f]=h[u]}}function T(j,O,R){this.blocks=[],this.s=[],this.padding=O,this.outputBits=R,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(j<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=R>>5,this.extraBytes=(R&31)>>3;for(var Q=0;Q<50;++Q)this.s[Q]=0}T.prototype.update=function(j){if(this.finalized)throw new Error(i);var O,R=typeof j;if(R!=="string"){if(R==="object"){if(j===null)throw new Error(t);if(d&&j.constructor===ArrayBuffer)j=new Uint8Array(j);else if(!Array.isArray(j)&&(!d||!ArrayBuffer.isView(j)))throw new Error(t)}else throw new Error(t);O=!0}for(var Q=this.blocks,K=this.byteCount,G=j.length,te=this.blockCount,J=0,ne=this.s,re,de;J<G;){if(this.reset)for(this.reset=!1,Q[0]=this.block,re=1;re<te+1;++re)Q[re]=0;if(O)for(re=this.start;J<G&&re<K;++J)Q[re>>2]|=j[J]<<S[re++&3];else for(re=this.start;J<G&&re<K;++J)de=j.charCodeAt(J),de<128?Q[re>>2]|=de<<S[re++&3]:de<2048?(Q[re>>2]|=(192|de>>6)<<S[re++&3],Q[re>>2]|=(128|de&63)<<S[re++&3]):de<55296||de>=57344?(Q[re>>2]|=(224|de>>12)<<S[re++&3],Q[re>>2]|=(128|de>>6&63)<<S[re++&3],Q[re>>2]|=(128|de&63)<<S[re++&3]):(de=65536+((de&1023)<<10|j.charCodeAt(++J)&1023),Q[re>>2]|=(240|de>>18)<<S[re++&3],Q[re>>2]|=(128|de>>12&63)<<S[re++&3],Q[re>>2]|=(128|de>>6&63)<<S[re++&3],Q[re>>2]|=(128|de&63)<<S[re++&3]);if(this.lastByteIndex=re,re>=K){for(this.start=re-K,this.block=Q[te],re=0;re<te;++re)ne[re]^=Q[re];V(ne),this.reset=!0}else this.start=re}return this},T.prototype.encode=function(j,O){var R=j&255,Q=1,K=[R];for(j=j>>8,R=j&255;R>0;)K.unshift(R),j=j>>8,R=j&255,++Q;return O?K.push(Q):K.unshift(Q),this.update(K),K.length},T.prototype.encodeString=function(j){var O,R=typeof j;if(R!=="string"){if(R==="object"){if(j===null)throw new Error(t);if(d&&j.constructor===ArrayBuffer)j=new Uint8Array(j);else if(!Array.isArray(j)&&(!d||!ArrayBuffer.isView(j)))throw new Error(t)}else throw new Error(t);O=!0}var Q=0,K=j.length;if(O)Q=K;else for(var G=0;G<j.length;++G){var te=j.charCodeAt(G);te<128?Q+=1:te<2048?Q+=2:te<55296||te>=57344?Q+=3:(te=65536+((te&1023)<<10|j.charCodeAt(++G)&1023),Q+=4)}return Q+=this.encode(Q*8),this.update(j),Q},T.prototype.bytepad=function(j,O){for(var R=this.encode(O),Q=0;Q<j.length;++Q)R+=this.encodeString(j[Q]);var K=O-R%O,G=[];return G.length=K,this.update(G),this},T.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var j=this.blocks,O=this.lastByteIndex,R=this.blockCount,Q=this.s;if(j[O>>2]|=this.padding[O&3],this.lastByteIndex===this.byteCount)for(j[0]=j[R],O=1;O<R+1;++O)j[O]=0;for(j[R-1]|=2147483648,O=0;O<R;++O)Q[O]^=j[O];V(Q)}},T.prototype.toString=T.prototype.hex=function(){this.finalize();for(var j=this.blockCount,O=this.s,R=this.outputBlocks,Q=this.extraBytes,K=0,G=0,te="",J;G<R;){for(K=0;K<j&&G<R;++K,++G)J=O[K],te+=g[J>>4&15]+g[J&15]+g[J>>12&15]+g[J>>8&15]+g[J>>20&15]+g[J>>16&15]+g[J>>28&15]+g[J>>24&15];G%j===0&&(V(O),K=0)}return Q&&(J=O[K],te+=g[J>>4&15]+g[J&15],Q>1&&(te+=g[J>>12&15]+g[J>>8&15]),Q>2&&(te+=g[J>>20&15]+g[J>>16&15])),te},T.prototype.arrayBuffer=function(){this.finalize();var j=this.blockCount,O=this.s,R=this.outputBlocks,Q=this.extraBytes,K=0,G=0,te=this.outputBits>>3,J;Q?J=new ArrayBuffer(R+1<<2):J=new ArrayBuffer(te);for(var ne=new Uint32Array(J);G<R;){for(K=0;K<j&&G<R;++K,++G)ne[G]=O[K];G%j===0&&V(O)}return Q&&(ne[K]=O[K],J=J.slice(0,te)),J},T.prototype.buffer=T.prototype.arrayBuffer,T.prototype.digest=T.prototype.array=function(){this.finalize();for(var j=this.blockCount,O=this.s,R=this.outputBlocks,Q=this.extraBytes,K=0,G=0,te=[],J,ne;G<R;){for(K=0;K<j&&G<R;++K,++G)J=G<<2,ne=O[K],te[J]=ne&255,te[J+1]=ne>>8&255,te[J+2]=ne>>16&255,te[J+3]=ne>>24&255;G%j===0&&V(O)}return Q&&(J=G<<2,ne=O[K],te[J]=ne&255,Q>1&&(te[J+1]=ne>>8&255),Q>2&&(te[J+2]=ne>>16&255)),te};function $(j,O,R){T.call(this,j,O,R)}$.prototype=new T,$.prototype.finalize=function(){return this.encode(this.outputBits,!0),T.prototype.finalize.call(this)};var V=function(j){var O,R,Q,K,G,te,J,ne,re,de,he,De,Le,le,Pe,ze,ue,Re,ce,oe,ae,Ee,fe,Fe,Ue,ge,We,$e,me,He,Ye,pe,Qe,Ve,ye,Ke,Ge,be,Ze,Je,ve,Xe,et,xe,tt,it,we,nt,rt,Me,st,ot,Ae,at,ct,Se,Be,hi,ui,fi,gi,mi,pi;for(Q=0;Q<48;Q+=2)K=j[0]^j[10]^j[20]^j[30]^j[40],G=j[1]^j[11]^j[21]^j[31]^j[41],te=j[2]^j[12]^j[22]^j[32]^j[42],J=j[3]^j[13]^j[23]^j[33]^j[43],ne=j[4]^j[14]^j[24]^j[34]^j[44],re=j[5]^j[15]^j[25]^j[35]^j[45],de=j[6]^j[16]^j[26]^j[36]^j[46],he=j[7]^j[17]^j[27]^j[37]^j[47],De=j[8]^j[18]^j[28]^j[38]^j[48],Le=j[9]^j[19]^j[29]^j[39]^j[49],O=De^(te<<1|J>>>31),R=Le^(J<<1|te>>>31),j[0]^=O,j[1]^=R,j[10]^=O,j[11]^=R,j[20]^=O,j[21]^=R,j[30]^=O,j[31]^=R,j[40]^=O,j[41]^=R,O=K^(ne<<1|re>>>31),R=G^(re<<1|ne>>>31),j[2]^=O,j[3]^=R,j[12]^=O,j[13]^=R,j[22]^=O,j[23]^=R,j[32]^=O,j[33]^=R,j[42]^=O,j[43]^=R,O=te^(de<<1|he>>>31),R=J^(he<<1|de>>>31),j[4]^=O,j[5]^=R,j[14]^=O,j[15]^=R,j[24]^=O,j[25]^=R,j[34]^=O,j[35]^=R,j[44]^=O,j[45]^=R,O=ne^(De<<1|Le>>>31),R=re^(Le<<1|De>>>31),j[6]^=O,j[7]^=R,j[16]^=O,j[17]^=R,j[26]^=O,j[27]^=R,j[36]^=O,j[37]^=R,j[46]^=O,j[47]^=R,O=de^(K<<1|G>>>31),R=he^(G<<1|K>>>31),j[8]^=O,j[9]^=R,j[18]^=O,j[19]^=R,j[28]^=O,j[29]^=R,j[38]^=O,j[39]^=R,j[48]^=O,j[49]^=R,le=j[0],Pe=j[1],it=j[11]<<4|j[10]>>>28,we=j[10]<<4|j[11]>>>28,$e=j[20]<<3|j[21]>>>29,me=j[21]<<3|j[20]>>>29,fi=j[31]<<9|j[30]>>>23,gi=j[30]<<9|j[31]>>>23,Xe=j[40]<<18|j[41]>>>14,et=j[41]<<18|j[40]>>>14,Ve=j[2]<<1|j[3]>>>31,ye=j[3]<<1|j[2]>>>31,ze=j[13]<<12|j[12]>>>20,ue=j[12]<<12|j[13]>>>20,nt=j[22]<<10|j[23]>>>22,rt=j[23]<<10|j[22]>>>22,He=j[33]<<13|j[32]>>>19,Ye=j[32]<<13|j[33]>>>19,mi=j[42]<<2|j[43]>>>30,pi=j[43]<<2|j[42]>>>30,at=j[5]<<30|j[4]>>>2,ct=j[4]<<30|j[5]>>>2,Ke=j[14]<<6|j[15]>>>26,Ge=j[15]<<6|j[14]>>>26,Re=j[25]<<11|j[24]>>>21,ce=j[24]<<11|j[25]>>>21,Me=j[34]<<15|j[35]>>>17,st=j[35]<<15|j[34]>>>17,pe=j[45]<<29|j[44]>>>3,Qe=j[44]<<29|j[45]>>>3,Fe=j[6]<<28|j[7]>>>4,Ue=j[7]<<28|j[6]>>>4,Se=j[17]<<23|j[16]>>>9,Be=j[16]<<23|j[17]>>>9,be=j[26]<<25|j[27]>>>7,Ze=j[27]<<25|j[26]>>>7,oe=j[36]<<21|j[37]>>>11,ae=j[37]<<21|j[36]>>>11,ot=j[47]<<24|j[46]>>>8,Ae=j[46]<<24|j[47]>>>8,xe=j[8]<<27|j[9]>>>5,tt=j[9]<<27|j[8]>>>5,ge=j[18]<<20|j[19]>>>12,We=j[19]<<20|j[18]>>>12,hi=j[29]<<7|j[28]>>>25,ui=j[28]<<7|j[29]>>>25,Je=j[38]<<8|j[39]>>>24,ve=j[39]<<8|j[38]>>>24,Ee=j[48]<<14|j[49]>>>18,fe=j[49]<<14|j[48]>>>18,j[0]=le^~ze&Re,j[1]=Pe^~ue&ce,j[10]=Fe^~ge&$e,j[11]=Ue^~We&me,j[20]=Ve^~Ke&be,j[21]=ye^~Ge&Ze,j[30]=xe^~it&nt,j[31]=tt^~we&rt,j[40]=at^~Se&hi,j[41]=ct^~Be&ui,j[2]=ze^~Re&oe,j[3]=ue^~ce&ae,j[12]=ge^~$e&He,j[13]=We^~me&Ye,j[22]=Ke^~be&Je,j[23]=Ge^~Ze&ve,j[32]=it^~nt&Me,j[33]=we^~rt&st,j[42]=Se^~hi&fi,j[43]=Be^~ui&gi,j[4]=Re^~oe&Ee,j[5]=ce^~ae&fe,j[14]=$e^~He&pe,j[15]=me^~Ye&Qe,j[24]=be^~Je&Xe,j[25]=Ze^~ve&et,j[34]=nt^~Me&ot,j[35]=rt^~st&Ae,j[44]=hi^~fi&mi,j[45]=ui^~gi&pi,j[6]=oe^~Ee&le,j[7]=ae^~fe&Pe,j[16]=He^~pe&Fe,j[17]=Ye^~Qe&Ue,j[26]=Je^~Xe&Ve,j[27]=ve^~et&ye,j[36]=Me^~ot&xe,j[37]=st^~Ae&tt,j[46]=fi^~mi&at,j[47]=gi^~pi&ct,j[8]=Ee^~le&ze,j[9]=fe^~Pe&ue,j[18]=pe^~Fe&ge,j[19]=Qe^~Ue&We,j[28]=Xe^~Ve&Ke,j[29]=et^~ye&Ge,j[38]=ot^~xe&it,j[39]=Ae^~tt&we,j[48]=mi^~at&Se,j[49]=pi^~ct&Be,j[0]^=C[Q],j[1]^=C[Q+1]};if(l)e.exports=h;else for(v=0;v<p.length;++v)r[p[v]]=h[p[v]]})()})(u0);var wx=u0.exports;const Mx="logger/5.7.0";let _d=!1,kd=!1;const Mo={debug:1,default:2,info:2,warning:3,error:4,off:5};let Dd=Mo.default,$a=null;function Ax(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(e){return e.message}return null}const Ld=Ax();var Ic;(function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"})(Ic||(Ic={}));var zi;(function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED",e.ACTION_REJECTED="ACTION_REJECTED"})(zi||(zi={}));const Pd="0123456789abcdef";let Lt=class jt{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,i){const n=t.toLowerCase();Mo[n]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(Dd>Mo[n])&&console.log.apply(console,i)}debug(...t){this._log(jt.levels.DEBUG,t)}info(...t){this._log(jt.levels.INFO,t)}warn(...t){this._log(jt.levels.WARNING,t)}makeError(t,i,n){if(kd)return this.makeError("censored error",i,{});i||(i=jt.errors.UNKNOWN_ERROR),n||(n={});const r=[];Object.keys(n).forEach(d=>{const g=n[d];try{if(g instanceof Uint8Array){let y="";for(let b=0;b<g.length;b++)y+=Pd[g[b]>>4],y+=Pd[g[b]&15];r.push(d+"=Uint8Array(0x"+y+")")}else r.push(d+"="+JSON.stringify(g))}catch{r.push(d+"="+JSON.stringify(n[d].toString()))}}),r.push(`code=${i}`),r.push(`version=${this.version}`);const s=t;let a="";switch(i){case zi.NUMERIC_FAULT:{a="NUMERIC_FAULT";const d=t;switch(d){case"overflow":case"underflow":case"division-by-zero":a+="-"+d;break;case"negative-power":case"negative-width":a+="-unsupported";break;case"unbound-bitwise-result":a+="-unbound-result";break}break}case zi.CALL_EXCEPTION:case zi.INSUFFICIENT_FUNDS:case zi.MISSING_NEW:case zi.NONCE_EXPIRED:case zi.REPLACEMENT_UNDERPRICED:case zi.TRANSACTION_REPLACED:case zi.UNPREDICTABLE_GAS_LIMIT:a=i;break}a&&(t+=" [ See: https://links.ethers.org/v5-errors-"+a+" ]"),r.length&&(t+=" ("+r.join(", ")+")");const l=new Error(t);return l.reason=s,l.code=i,Object.keys(n).forEach(function(d){l[d]=n[d]}),l}throwError(t,i,n){throw this.makeError(t,i,n)}throwArgumentError(t,i,n){return this.throwError(t,jt.errors.INVALID_ARGUMENT,{argument:i,value:n})}assert(t,i,n,r){t||this.throwError(i,n,r)}assertArgument(t,i,n,r){t||this.throwArgumentError(i,n,r)}checkNormalize(t){Ld&&this.throwError("platform missing String.prototype.normalize",jt.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Ld})}checkSafeUint53(t,i){typeof t=="number"&&(i==null&&(i="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(i,jt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(i,jt.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,i,n){n?n=": "+n:n="",t<i&&this.throwError("missing argument"+n,jt.errors.MISSING_ARGUMENT,{count:t,expectedCount:i}),t>i&&this.throwError("too many arguments"+n,jt.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:i})}checkNew(t,i){(t===Object||t==null)&&this.throwError("missing new",jt.errors.MISSING_NEW,{name:i.name})}checkAbstract(t,i){t===i?this.throwError("cannot instantiate abstract class "+JSON.stringify(i.name)+" directly; use a sub-class",jt.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",jt.errors.MISSING_NEW,{name:i.name})}static globalLogger(){return $a||($a=new jt(Mx)),$a}static setCensorship(t,i){if(!t&&i&&this.globalLogger().throwError("cannot permanently disable censorship",jt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_d){if(!t)return;this.globalLogger().throwError("error censorship permanent",jt.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}kd=!!t,_d=!!i}static setLogLevel(t){const i=Mo[t.toLowerCase()];if(i==null){jt.globalLogger().warn("invalid log level - "+t);return}Dd=i}static from(t){return new jt(t)}};Lt.errors=zi,Lt.levels=Ic;const Sx="bytes/5.7.0",vt=new Lt(Sx);function f0(e){return!!e.toHexString}function Hr(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return Hr(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function jx(e){return ai(e)&&!(e.length%2)||ms(e)}function zd(e){return typeof e=="number"&&e==e&&e%1===0}function ms(e){if(e==null)return!1;if(e.constructor===Uint8Array)return!0;if(typeof e=="string"||!zd(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const i=e[t];if(!zd(i)||i<0||i>=256)return!1}return!0}function yt(e,t){if(t||(t={}),typeof e=="number"){vt.checkSafeUint53(e,"invalid arrayify value");const i=[];for(;e;)i.unshift(e&255),e=parseInt(String(e/256));return i.length===0&&i.push(0),Hr(new Uint8Array(i))}if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),f0(e)&&(e=e.toHexString()),ai(e)){let i=e.substring(2);i.length%2&&(t.hexPad==="left"?i="0"+i:t.hexPad==="right"?i+="0":vt.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let r=0;r<i.length;r+=2)n.push(parseInt(i.substring(r,r+2),16));return Hr(new Uint8Array(n))}return ms(e)?Hr(new Uint8Array(e)):vt.throwArgumentError("invalid arrayify value","value",e)}function Ix(e){const t=e.map(r=>yt(r)),i=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(i);return t.reduce((r,s)=>(n.set(s,r),r+s.length),0),Hr(n)}function Tx(e,t){e=yt(e),e.length>t&&vt.throwArgumentError("value out of range","value",arguments[0]);const i=new Uint8Array(t);return i.set(e,t-e.length),Hr(i)}function ai(e,t){return!(typeof e!="string"||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}const Ha="0123456789abcdef";function Vt(e,t){if(t||(t={}),typeof e=="number"){vt.checkSafeUint53(e,"invalid hexlify value");let i="";for(;e;)i=Ha[e&15]+i,e=Math.floor(e/16);return i.length?(i.length%2&&(i="0"+i),"0x"+i):"0x00"}if(typeof e=="bigint")return e=e.toString(16),e.length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&typeof e=="string"&&e.substring(0,2)!=="0x"&&(e="0x"+e),f0(e))return e.toHexString();if(ai(e))return e.length%2&&(t.hexPad==="left"?e="0x0"+e.substring(2):t.hexPad==="right"?e+="0":vt.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(ms(e)){let i="0x";for(let n=0;n<e.length;n++){let r=e[n];i+=Ha[(r&240)>>4]+Ha[r&15]}return i}return vt.throwArgumentError("invalid hexlify value","value",e)}function Cx(e){if(typeof e!="string")e=Vt(e);else if(!ai(e)||e.length%2)return null;return(e.length-2)/2}function Rd(e,t,i){return typeof e!="string"?e=Vt(e):(!ai(e)||e.length%2)&&vt.throwArgumentError("invalid hexData","value",e),t=2+2*t,i!=null?"0x"+e.substring(t,2+2*i):"0x"+e.substring(t)}function tn(e,t){for(typeof e!="string"?e=Vt(e):ai(e)||vt.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&vt.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function g0(e){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(jx(e)){let i=yt(e);i.length===64?(t.v=27+(i[32]>>7),i[32]&=127,t.r=Vt(i.slice(0,32)),t.s=Vt(i.slice(32,64))):i.length===65?(t.r=Vt(i.slice(0,32)),t.s=Vt(i.slice(32,64)),t.v=i[64]):vt.throwArgumentError("invalid signature string","signature",e),t.v<27&&(t.v===0||t.v===1?t.v+=27:vt.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(i[32]|=128),t._vs=Vt(i.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,t._vs!=null){const r=Tx(yt(t._vs),32);t._vs=Vt(r);const s=r[0]>=128?1:0;t.recoveryParam==null?t.recoveryParam=s:t.recoveryParam!==s&&vt.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),r[0]&=127;const a=Vt(r);t.s==null?t.s=a:t.s!==a&&vt.throwArgumentError("signature v mismatch _vs","signature",e)}if(t.recoveryParam==null)t.v==null?vt.throwArgumentError("signature missing v and recoveryParam","signature",e):t.v===0||t.v===1?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(t.v==null)t.v=27+t.recoveryParam;else{const r=t.v===0||t.v===1?t.v:1-t.v%2;t.recoveryParam!==r&&vt.throwArgumentError("signature recoveryParam mismatch v","signature",e)}t.r==null||!ai(t.r)?vt.throwArgumentError("signature missing or invalid r","signature",e):t.r=tn(t.r,32),t.s==null||!ai(t.s)?vt.throwArgumentError("signature missing or invalid s","signature",e):t.s=tn(t.s,32);const i=yt(t.s);i[0]>=128&&vt.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(i[0]|=128);const n=Vt(i);t._vs&&(ai(t._vs)||vt.throwArgumentError("signature invalid _vs","signature",e),t._vs=tn(t._vs,32)),t._vs==null?t._vs=n:t._vs!==n&&vt.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function Tl(e){return"0x"+wx.keccak_256(yt(e))}var m0={exports:{}},Ex={},Nx=Object.freeze({__proto__:null,default:Ex}),_x=xx(Nx);(function(e){(function(t,i){function n(c,h){if(!c)throw new Error(h||"Assertion failed")}function r(c,h){c.super_=h;var p=function(){};p.prototype=h.prototype,c.prototype=new p,c.prototype.constructor=c}function s(c,h,p){if(s.isBN(c))return c;this.negative=0,this.words=null,this.length=0,this.red=null,c!==null&&((h==="le"||h==="be")&&(p=h,h=10),this._init(c||0,h||10,p||"be"))}typeof t=="object"?t.exports=s:i.BN=s,s.BN=s,s.wordSize=26;var a;try{typeof window<"u"&&typeof window.Buffer<"u"?a=window.Buffer:a=_x.Buffer}catch{}s.isBN=function(c){return c instanceof s?!0:c!==null&&typeof c=="object"&&c.constructor.wordSize===s.wordSize&&Array.isArray(c.words)},s.max=function(c,h){return c.cmp(h)>0?c:h},s.min=function(c,h){return c.cmp(h)<0?c:h},s.prototype._init=function(c,h,p){if(typeof c=="number")return this._initNumber(c,h,p);if(typeof c=="object")return this._initArray(c,h,p);h==="hex"&&(h=16),n(h===(h|0)&&h>=2&&h<=36),c=c.toString().replace(/\s+/g,"");var v=0;c[0]==="-"&&(v++,this.negative=1),v<c.length&&(h===16?this._parseHex(c,v,p):(this._parseBase(c,h,v),p==="le"&&this._initArray(this.toArray(),h,p)))},s.prototype._initNumber=function(c,h,p){c<0&&(this.negative=1,c=-c),c<67108864?(this.words=[c&67108863],this.length=1):c<4503599627370496?(this.words=[c&67108863,c/67108864&67108863],this.length=2):(n(c<9007199254740992),this.words=[c&67108863,c/67108864&67108863,1],this.length=3),p==="le"&&this._initArray(this.toArray(),h,p)},s.prototype._initArray=function(c,h,p){if(n(typeof c.length=="number"),c.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(c.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var x,I,w=0;if(p==="be")for(v=c.length-1,x=0;v>=0;v-=3)I=c[v]|c[v-1]<<8|c[v-2]<<16,this.words[x]|=I<<w&67108863,this.words[x+1]=I>>>26-w&67108863,w+=24,w>=26&&(w-=26,x++);else if(p==="le")for(v=0,x=0;v<c.length;v+=3)I=c[v]|c[v+1]<<8|c[v+2]<<16,this.words[x]|=I<<w&67108863,this.words[x+1]=I>>>26-w&67108863,w+=24,w>=26&&(w-=26,x++);return this._strip()};function l(c,h){var p=c.charCodeAt(h);if(p>=48&&p<=57)return p-48;if(p>=65&&p<=70)return p-55;if(p>=97&&p<=102)return p-87;n(!1,"Invalid character in "+c)}function d(c,h,p){var v=l(c,p);return p-1>=h&&(v|=l(c,p-1)<<4),v}s.prototype._parseHex=function(c,h,p){this.length=Math.ceil((c.length-h)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var x=0,I=0,w;if(p==="be")for(v=c.length-1;v>=h;v-=2)w=d(c,h,v)<<x,this.words[I]|=w&67108863,x>=18?(x-=18,I+=1,this.words[I]|=w>>>26):x+=8;else{var u=c.length-h;for(v=u%2===0?h+1:h;v<c.length;v+=2)w=d(c,h,v)<<x,this.words[I]|=w&67108863,x>=18?(x-=18,I+=1,this.words[I]|=w>>>26):x+=8}this._strip()};function g(c,h,p,v){for(var x=0,I=0,w=Math.min(c.length,p),u=h;u<w;u++){var f=c.charCodeAt(u)-48;x*=v,f>=49?I=f-49+10:f>=17?I=f-17+10:I=f,n(f>=0&&I<v,"Invalid character"),x+=I}return x}s.prototype._parseBase=function(c,h,p){this.words=[0],this.length=1;for(var v=0,x=1;x<=67108863;x*=h)v++;v--,x=x/h|0;for(var I=c.length-p,w=I%v,u=Math.min(I,I-w)+p,f=0,T=p;T<u;T+=v)f=g(c,T,T+v,h),this.imuln(x),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(w!==0){var $=1;for(f=g(c,T,c.length,h),T=0;T<w;T++)$*=h;this.imuln($),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},s.prototype.copy=function(c){c.words=new Array(this.length);for(var h=0;h<this.length;h++)c.words[h]=this.words[h];c.length=this.length,c.negative=this.negative,c.red=this.red};function y(c,h){c.words=h.words,c.length=h.length,c.negative=h.negative,c.red=h.red}if(s.prototype._move=function(c){y(c,this)},s.prototype.clone=function(){var c=new s(null);return this.copy(c),c},s.prototype._expand=function(c){for(;this.length<c;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=b}catch{s.prototype.inspect=b}else s.prototype.inspect=b;function b(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var M=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],A=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(c,h){c=c||10,h=h|0||1;var p;if(c===16||c==="hex"){p="";for(var v=0,x=0,I=0;I<this.length;I++){var w=this.words[I],u=((w<<v|x)&16777215).toString(16);x=w>>>24-v&16777215,v+=2,v>=26&&(v-=26,I--),x!==0||I!==this.length-1?p=M[6-u.length]+u+p:p=u+p}for(x!==0&&(p=x.toString(16)+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}if(c===(c|0)&&c>=2&&c<=36){var f=A[c],T=S[c];p="";var $=this.clone();for($.negative=0;!$.isZero();){var V=$.modrn(T).toString(c);$=$.idivn(T),$.isZero()?p=V+p:p=M[f-V.length]+V+p}for(this.isZero()&&(p="0"+p);p.length%h!==0;)p="0"+p;return this.negative!==0&&(p="-"+p),p}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var c=this.words[0];return this.length===2?c+=this.words[1]*67108864:this.length===3&&this.words[2]===1?c+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-c:c},s.prototype.toJSON=function(){return this.toString(16,2)},a&&(s.prototype.toBuffer=function(c,h){return this.toArrayLike(a,c,h)}),s.prototype.toArray=function(c,h){return this.toArrayLike(Array,c,h)};var C=function(c,h){return c.allocUnsafe?c.allocUnsafe(h):new c(h)};s.prototype.toArrayLike=function(c,h,p){this._strip();var v=this.byteLength(),x=p||Math.max(1,v);n(v<=x,"byte array longer than desired length"),n(x>0,"Requested array length <= 0");var I=C(c,x),w=h==="le"?"LE":"BE";return this["_toArrayLike"+w](I,v),I},s.prototype._toArrayLikeLE=function(c,h){for(var p=0,v=0,x=0,I=0;x<this.length;x++){var w=this.words[x]<<I|v;c[p++]=w&255,p<c.length&&(c[p++]=w>>8&255),p<c.length&&(c[p++]=w>>16&255),I===6?(p<c.length&&(c[p++]=w>>24&255),v=0,I=0):(v=w>>>24,I+=2)}if(p<c.length)for(c[p++]=v;p<c.length;)c[p++]=0},s.prototype._toArrayLikeBE=function(c,h){for(var p=c.length-1,v=0,x=0,I=0;x<this.length;x++){var w=this.words[x]<<I|v;c[p--]=w&255,p>=0&&(c[p--]=w>>8&255),p>=0&&(c[p--]=w>>16&255),I===6?(p>=0&&(c[p--]=w>>24&255),v=0,I=0):(v=w>>>24,I+=2)}if(p>=0)for(c[p--]=v;p>=0;)c[p--]=0},Math.clz32?s.prototype._countBits=function(c){return 32-Math.clz32(c)}:s.prototype._countBits=function(c){var h=c,p=0;return h>=4096&&(p+=13,h>>>=13),h>=64&&(p+=7,h>>>=7),h>=8&&(p+=4,h>>>=4),h>=2&&(p+=2,h>>>=2),p+h},s.prototype._zeroBits=function(c){if(c===0)return 26;var h=c,p=0;return h&8191||(p+=13,h>>>=13),h&127||(p+=7,h>>>=7),h&15||(p+=4,h>>>=4),h&3||(p+=2,h>>>=2),h&1||p++,p},s.prototype.bitLength=function(){var c=this.words[this.length-1],h=this._countBits(c);return(this.length-1)*26+h};function k(c){for(var h=new Array(c.bitLength()),p=0;p<h.length;p++){var v=p/26|0,x=p%26;h[p]=c.words[v]>>>x&1}return h}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var c=0,h=0;h<this.length;h++){var p=this._zeroBits(this.words[h]);if(c+=p,p!==26)break}return c},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(c){return this.negative!==0?this.abs().inotn(c).iaddn(1):this.clone()},s.prototype.fromTwos=function(c){return this.testn(c-1)?this.notn(c).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(c){for(;this.length<c.length;)this.words[this.length++]=0;for(var h=0;h<c.length;h++)this.words[h]=this.words[h]|c.words[h];return this._strip()},s.prototype.ior=function(c){return n((this.negative|c.negative)===0),this.iuor(c)},s.prototype.or=function(c){return this.length>c.length?this.clone().ior(c):c.clone().ior(this)},s.prototype.uor=function(c){return this.length>c.length?this.clone().iuor(c):c.clone().iuor(this)},s.prototype.iuand=function(c){var h;this.length>c.length?h=c:h=this;for(var p=0;p<h.length;p++)this.words[p]=this.words[p]&c.words[p];return this.length=h.length,this._strip()},s.prototype.iand=function(c){return n((this.negative|c.negative)===0),this.iuand(c)},s.prototype.and=function(c){return this.length>c.length?this.clone().iand(c):c.clone().iand(this)},s.prototype.uand=function(c){return this.length>c.length?this.clone().iuand(c):c.clone().iuand(this)},s.prototype.iuxor=function(c){var h,p;this.length>c.length?(h=this,p=c):(h=c,p=this);for(var v=0;v<p.length;v++)this.words[v]=h.words[v]^p.words[v];if(this!==h)for(;v<h.length;v++)this.words[v]=h.words[v];return this.length=h.length,this._strip()},s.prototype.ixor=function(c){return n((this.negative|c.negative)===0),this.iuxor(c)},s.prototype.xor=function(c){return this.length>c.length?this.clone().ixor(c):c.clone().ixor(this)},s.prototype.uxor=function(c){return this.length>c.length?this.clone().iuxor(c):c.clone().iuxor(this)},s.prototype.inotn=function(c){n(typeof c=="number"&&c>=0);var h=Math.ceil(c/26)|0,p=c%26;this._expand(h),p>0&&h--;for(var v=0;v<h;v++)this.words[v]=~this.words[v]&67108863;return p>0&&(this.words[v]=~this.words[v]&67108863>>26-p),this._strip()},s.prototype.notn=function(c){return this.clone().inotn(c)},s.prototype.setn=function(c,h){n(typeof c=="number"&&c>=0);var p=c/26|0,v=c%26;return this._expand(p+1),h?this.words[p]=this.words[p]|1<<v:this.words[p]=this.words[p]&~(1<<v),this._strip()},s.prototype.iadd=function(c){var h;if(this.negative!==0&&c.negative===0)return this.negative=0,h=this.isub(c),this.negative^=1,this._normSign();if(this.negative===0&&c.negative!==0)return c.negative=0,h=this.isub(c),c.negative=1,h._normSign();var p,v;this.length>c.length?(p=this,v=c):(p=c,v=this);for(var x=0,I=0;I<v.length;I++)h=(p.words[I]|0)+(v.words[I]|0)+x,this.words[I]=h&67108863,x=h>>>26;for(;x!==0&&I<p.length;I++)h=(p.words[I]|0)+x,this.words[I]=h&67108863,x=h>>>26;if(this.length=p.length,x!==0)this.words[this.length]=x,this.length++;else if(p!==this)for(;I<p.length;I++)this.words[I]=p.words[I];return this},s.prototype.add=function(c){var h;return c.negative!==0&&this.negative===0?(c.negative=0,h=this.sub(c),c.negative^=1,h):c.negative===0&&this.negative!==0?(this.negative=0,h=c.sub(this),this.negative=1,h):this.length>c.length?this.clone().iadd(c):c.clone().iadd(this)},s.prototype.isub=function(c){if(c.negative!==0){c.negative=0;var h=this.iadd(c);return c.negative=1,h._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(c),this.negative=1,this._normSign();var p=this.cmp(c);if(p===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,x;p>0?(v=this,x=c):(v=c,x=this);for(var I=0,w=0;w<x.length;w++)h=(v.words[w]|0)-(x.words[w]|0)+I,I=h>>26,this.words[w]=h&67108863;for(;I!==0&&w<v.length;w++)h=(v.words[w]|0)+I,I=h>>26,this.words[w]=h&67108863;if(I===0&&w<v.length&&v!==this)for(;w<v.length;w++)this.words[w]=v.words[w];return this.length=Math.max(this.length,w),v!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(c){return this.clone().isub(c)};function N(c,h,p){p.negative=h.negative^c.negative;var v=c.length+h.length|0;p.length=v,v=v-1|0;var x=c.words[0]|0,I=h.words[0]|0,w=x*I,u=w&67108863,f=w/67108864|0;p.words[0]=u;for(var T=1;T<v;T++){for(var $=f>>>26,V=f&67108863,j=Math.min(T,h.length-1),O=Math.max(0,T-c.length+1);O<=j;O++){var R=T-O|0;x=c.words[R]|0,I=h.words[O]|0,w=x*I+V,$+=w/67108864|0,V=w&67108863}p.words[T]=V|0,f=$|0}return f!==0?p.words[T]=f|0:p.length--,p._strip()}var D=function(c,h,p){var v=c.words,x=h.words,I=p.words,w=0,u,f,T,$=v[0]|0,V=$&8191,j=$>>>13,O=v[1]|0,R=O&8191,Q=O>>>13,K=v[2]|0,G=K&8191,te=K>>>13,J=v[3]|0,ne=J&8191,re=J>>>13,de=v[4]|0,he=de&8191,De=de>>>13,Le=v[5]|0,le=Le&8191,Pe=Le>>>13,ze=v[6]|0,ue=ze&8191,Re=ze>>>13,ce=v[7]|0,oe=ce&8191,ae=ce>>>13,Ee=v[8]|0,fe=Ee&8191,Fe=Ee>>>13,Ue=v[9]|0,ge=Ue&8191,We=Ue>>>13,$e=x[0]|0,me=$e&8191,He=$e>>>13,Ye=x[1]|0,pe=Ye&8191,Qe=Ye>>>13,Ve=x[2]|0,ye=Ve&8191,Ke=Ve>>>13,Ge=x[3]|0,be=Ge&8191,Ze=Ge>>>13,Je=x[4]|0,ve=Je&8191,Xe=Je>>>13,et=x[5]|0,xe=et&8191,tt=et>>>13,it=x[6]|0,we=it&8191,nt=it>>>13,rt=x[7]|0,Me=rt&8191,st=rt>>>13,ot=x[8]|0,Ae=ot&8191,at=ot>>>13,ct=x[9]|0,Se=ct&8191,Be=ct>>>13;p.negative=c.negative^h.negative,p.length=19,u=Math.imul(V,me),f=Math.imul(V,He),f=f+Math.imul(j,me)|0,T=Math.imul(j,He);var hi=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(hi>>>26)|0,hi&=67108863,u=Math.imul(R,me),f=Math.imul(R,He),f=f+Math.imul(Q,me)|0,T=Math.imul(Q,He),u=u+Math.imul(V,pe)|0,f=f+Math.imul(V,Qe)|0,f=f+Math.imul(j,pe)|0,T=T+Math.imul(j,Qe)|0;var ui=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(ui>>>26)|0,ui&=67108863,u=Math.imul(G,me),f=Math.imul(G,He),f=f+Math.imul(te,me)|0,T=Math.imul(te,He),u=u+Math.imul(R,pe)|0,f=f+Math.imul(R,Qe)|0,f=f+Math.imul(Q,pe)|0,T=T+Math.imul(Q,Qe)|0,u=u+Math.imul(V,ye)|0,f=f+Math.imul(V,Ke)|0,f=f+Math.imul(j,ye)|0,T=T+Math.imul(j,Ke)|0;var fi=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(fi>>>26)|0,fi&=67108863,u=Math.imul(ne,me),f=Math.imul(ne,He),f=f+Math.imul(re,me)|0,T=Math.imul(re,He),u=u+Math.imul(G,pe)|0,f=f+Math.imul(G,Qe)|0,f=f+Math.imul(te,pe)|0,T=T+Math.imul(te,Qe)|0,u=u+Math.imul(R,ye)|0,f=f+Math.imul(R,Ke)|0,f=f+Math.imul(Q,ye)|0,T=T+Math.imul(Q,Ke)|0,u=u+Math.imul(V,be)|0,f=f+Math.imul(V,Ze)|0,f=f+Math.imul(j,be)|0,T=T+Math.imul(j,Ze)|0;var gi=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(gi>>>26)|0,gi&=67108863,u=Math.imul(he,me),f=Math.imul(he,He),f=f+Math.imul(De,me)|0,T=Math.imul(De,He),u=u+Math.imul(ne,pe)|0,f=f+Math.imul(ne,Qe)|0,f=f+Math.imul(re,pe)|0,T=T+Math.imul(re,Qe)|0,u=u+Math.imul(G,ye)|0,f=f+Math.imul(G,Ke)|0,f=f+Math.imul(te,ye)|0,T=T+Math.imul(te,Ke)|0,u=u+Math.imul(R,be)|0,f=f+Math.imul(R,Ze)|0,f=f+Math.imul(Q,be)|0,T=T+Math.imul(Q,Ze)|0,u=u+Math.imul(V,ve)|0,f=f+Math.imul(V,Xe)|0,f=f+Math.imul(j,ve)|0,T=T+Math.imul(j,Xe)|0;var mi=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(mi>>>26)|0,mi&=67108863,u=Math.imul(le,me),f=Math.imul(le,He),f=f+Math.imul(Pe,me)|0,T=Math.imul(Pe,He),u=u+Math.imul(he,pe)|0,f=f+Math.imul(he,Qe)|0,f=f+Math.imul(De,pe)|0,T=T+Math.imul(De,Qe)|0,u=u+Math.imul(ne,ye)|0,f=f+Math.imul(ne,Ke)|0,f=f+Math.imul(re,ye)|0,T=T+Math.imul(re,Ke)|0,u=u+Math.imul(G,be)|0,f=f+Math.imul(G,Ze)|0,f=f+Math.imul(te,be)|0,T=T+Math.imul(te,Ze)|0,u=u+Math.imul(R,ve)|0,f=f+Math.imul(R,Xe)|0,f=f+Math.imul(Q,ve)|0,T=T+Math.imul(Q,Xe)|0,u=u+Math.imul(V,xe)|0,f=f+Math.imul(V,tt)|0,f=f+Math.imul(j,xe)|0,T=T+Math.imul(j,tt)|0;var pi=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(pi>>>26)|0,pi&=67108863,u=Math.imul(ue,me),f=Math.imul(ue,He),f=f+Math.imul(Re,me)|0,T=Math.imul(Re,He),u=u+Math.imul(le,pe)|0,f=f+Math.imul(le,Qe)|0,f=f+Math.imul(Pe,pe)|0,T=T+Math.imul(Pe,Qe)|0,u=u+Math.imul(he,ye)|0,f=f+Math.imul(he,Ke)|0,f=f+Math.imul(De,ye)|0,T=T+Math.imul(De,Ke)|0,u=u+Math.imul(ne,be)|0,f=f+Math.imul(ne,Ze)|0,f=f+Math.imul(re,be)|0,T=T+Math.imul(re,Ze)|0,u=u+Math.imul(G,ve)|0,f=f+Math.imul(G,Xe)|0,f=f+Math.imul(te,ve)|0,T=T+Math.imul(te,Xe)|0,u=u+Math.imul(R,xe)|0,f=f+Math.imul(R,tt)|0,f=f+Math.imul(Q,xe)|0,T=T+Math.imul(Q,tt)|0,u=u+Math.imul(V,we)|0,f=f+Math.imul(V,nt)|0,f=f+Math.imul(j,we)|0,T=T+Math.imul(j,nt)|0;var Gn=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(Gn>>>26)|0,Gn&=67108863,u=Math.imul(oe,me),f=Math.imul(oe,He),f=f+Math.imul(ae,me)|0,T=Math.imul(ae,He),u=u+Math.imul(ue,pe)|0,f=f+Math.imul(ue,Qe)|0,f=f+Math.imul(Re,pe)|0,T=T+Math.imul(Re,Qe)|0,u=u+Math.imul(le,ye)|0,f=f+Math.imul(le,Ke)|0,f=f+Math.imul(Pe,ye)|0,T=T+Math.imul(Pe,Ke)|0,u=u+Math.imul(he,be)|0,f=f+Math.imul(he,Ze)|0,f=f+Math.imul(De,be)|0,T=T+Math.imul(De,Ze)|0,u=u+Math.imul(ne,ve)|0,f=f+Math.imul(ne,Xe)|0,f=f+Math.imul(re,ve)|0,T=T+Math.imul(re,Xe)|0,u=u+Math.imul(G,xe)|0,f=f+Math.imul(G,tt)|0,f=f+Math.imul(te,xe)|0,T=T+Math.imul(te,tt)|0,u=u+Math.imul(R,we)|0,f=f+Math.imul(R,nt)|0,f=f+Math.imul(Q,we)|0,T=T+Math.imul(Q,nt)|0,u=u+Math.imul(V,Me)|0,f=f+Math.imul(V,st)|0,f=f+Math.imul(j,Me)|0,T=T+Math.imul(j,st)|0;var Zn=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(Zn>>>26)|0,Zn&=67108863,u=Math.imul(fe,me),f=Math.imul(fe,He),f=f+Math.imul(Fe,me)|0,T=Math.imul(Fe,He),u=u+Math.imul(oe,pe)|0,f=f+Math.imul(oe,Qe)|0,f=f+Math.imul(ae,pe)|0,T=T+Math.imul(ae,Qe)|0,u=u+Math.imul(ue,ye)|0,f=f+Math.imul(ue,Ke)|0,f=f+Math.imul(Re,ye)|0,T=T+Math.imul(Re,Ke)|0,u=u+Math.imul(le,be)|0,f=f+Math.imul(le,Ze)|0,f=f+Math.imul(Pe,be)|0,T=T+Math.imul(Pe,Ze)|0,u=u+Math.imul(he,ve)|0,f=f+Math.imul(he,Xe)|0,f=f+Math.imul(De,ve)|0,T=T+Math.imul(De,Xe)|0,u=u+Math.imul(ne,xe)|0,f=f+Math.imul(ne,tt)|0,f=f+Math.imul(re,xe)|0,T=T+Math.imul(re,tt)|0,u=u+Math.imul(G,we)|0,f=f+Math.imul(G,nt)|0,f=f+Math.imul(te,we)|0,T=T+Math.imul(te,nt)|0,u=u+Math.imul(R,Me)|0,f=f+Math.imul(R,st)|0,f=f+Math.imul(Q,Me)|0,T=T+Math.imul(Q,st)|0,u=u+Math.imul(V,Ae)|0,f=f+Math.imul(V,at)|0,f=f+Math.imul(j,Ae)|0,T=T+Math.imul(j,at)|0;var Jn=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(Jn>>>26)|0,Jn&=67108863,u=Math.imul(ge,me),f=Math.imul(ge,He),f=f+Math.imul(We,me)|0,T=Math.imul(We,He),u=u+Math.imul(fe,pe)|0,f=f+Math.imul(fe,Qe)|0,f=f+Math.imul(Fe,pe)|0,T=T+Math.imul(Fe,Qe)|0,u=u+Math.imul(oe,ye)|0,f=f+Math.imul(oe,Ke)|0,f=f+Math.imul(ae,ye)|0,T=T+Math.imul(ae,Ke)|0,u=u+Math.imul(ue,be)|0,f=f+Math.imul(ue,Ze)|0,f=f+Math.imul(Re,be)|0,T=T+Math.imul(Re,Ze)|0,u=u+Math.imul(le,ve)|0,f=f+Math.imul(le,Xe)|0,f=f+Math.imul(Pe,ve)|0,T=T+Math.imul(Pe,Xe)|0,u=u+Math.imul(he,xe)|0,f=f+Math.imul(he,tt)|0,f=f+Math.imul(De,xe)|0,T=T+Math.imul(De,tt)|0,u=u+Math.imul(ne,we)|0,f=f+Math.imul(ne,nt)|0,f=f+Math.imul(re,we)|0,T=T+Math.imul(re,nt)|0,u=u+Math.imul(G,Me)|0,f=f+Math.imul(G,st)|0,f=f+Math.imul(te,Me)|0,T=T+Math.imul(te,st)|0,u=u+Math.imul(R,Ae)|0,f=f+Math.imul(R,at)|0,f=f+Math.imul(Q,Ae)|0,T=T+Math.imul(Q,at)|0,u=u+Math.imul(V,Se)|0,f=f+Math.imul(V,Be)|0,f=f+Math.imul(j,Se)|0,T=T+Math.imul(j,Be)|0;var Xn=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(Xn>>>26)|0,Xn&=67108863,u=Math.imul(ge,pe),f=Math.imul(ge,Qe),f=f+Math.imul(We,pe)|0,T=Math.imul(We,Qe),u=u+Math.imul(fe,ye)|0,f=f+Math.imul(fe,Ke)|0,f=f+Math.imul(Fe,ye)|0,T=T+Math.imul(Fe,Ke)|0,u=u+Math.imul(oe,be)|0,f=f+Math.imul(oe,Ze)|0,f=f+Math.imul(ae,be)|0,T=T+Math.imul(ae,Ze)|0,u=u+Math.imul(ue,ve)|0,f=f+Math.imul(ue,Xe)|0,f=f+Math.imul(Re,ve)|0,T=T+Math.imul(Re,Xe)|0,u=u+Math.imul(le,xe)|0,f=f+Math.imul(le,tt)|0,f=f+Math.imul(Pe,xe)|0,T=T+Math.imul(Pe,tt)|0,u=u+Math.imul(he,we)|0,f=f+Math.imul(he,nt)|0,f=f+Math.imul(De,we)|0,T=T+Math.imul(De,nt)|0,u=u+Math.imul(ne,Me)|0,f=f+Math.imul(ne,st)|0,f=f+Math.imul(re,Me)|0,T=T+Math.imul(re,st)|0,u=u+Math.imul(G,Ae)|0,f=f+Math.imul(G,at)|0,f=f+Math.imul(te,Ae)|0,T=T+Math.imul(te,at)|0,u=u+Math.imul(R,Se)|0,f=f+Math.imul(R,Be)|0,f=f+Math.imul(Q,Se)|0,T=T+Math.imul(Q,Be)|0;var er=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(er>>>26)|0,er&=67108863,u=Math.imul(ge,ye),f=Math.imul(ge,Ke),f=f+Math.imul(We,ye)|0,T=Math.imul(We,Ke),u=u+Math.imul(fe,be)|0,f=f+Math.imul(fe,Ze)|0,f=f+Math.imul(Fe,be)|0,T=T+Math.imul(Fe,Ze)|0,u=u+Math.imul(oe,ve)|0,f=f+Math.imul(oe,Xe)|0,f=f+Math.imul(ae,ve)|0,T=T+Math.imul(ae,Xe)|0,u=u+Math.imul(ue,xe)|0,f=f+Math.imul(ue,tt)|0,f=f+Math.imul(Re,xe)|0,T=T+Math.imul(Re,tt)|0,u=u+Math.imul(le,we)|0,f=f+Math.imul(le,nt)|0,f=f+Math.imul(Pe,we)|0,T=T+Math.imul(Pe,nt)|0,u=u+Math.imul(he,Me)|0,f=f+Math.imul(he,st)|0,f=f+Math.imul(De,Me)|0,T=T+Math.imul(De,st)|0,u=u+Math.imul(ne,Ae)|0,f=f+Math.imul(ne,at)|0,f=f+Math.imul(re,Ae)|0,T=T+Math.imul(re,at)|0,u=u+Math.imul(G,Se)|0,f=f+Math.imul(G,Be)|0,f=f+Math.imul(te,Se)|0,T=T+Math.imul(te,Be)|0;var tr=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(tr>>>26)|0,tr&=67108863,u=Math.imul(ge,be),f=Math.imul(ge,Ze),f=f+Math.imul(We,be)|0,T=Math.imul(We,Ze),u=u+Math.imul(fe,ve)|0,f=f+Math.imul(fe,Xe)|0,f=f+Math.imul(Fe,ve)|0,T=T+Math.imul(Fe,Xe)|0,u=u+Math.imul(oe,xe)|0,f=f+Math.imul(oe,tt)|0,f=f+Math.imul(ae,xe)|0,T=T+Math.imul(ae,tt)|0,u=u+Math.imul(ue,we)|0,f=f+Math.imul(ue,nt)|0,f=f+Math.imul(Re,we)|0,T=T+Math.imul(Re,nt)|0,u=u+Math.imul(le,Me)|0,f=f+Math.imul(le,st)|0,f=f+Math.imul(Pe,Me)|0,T=T+Math.imul(Pe,st)|0,u=u+Math.imul(he,Ae)|0,f=f+Math.imul(he,at)|0,f=f+Math.imul(De,Ae)|0,T=T+Math.imul(De,at)|0,u=u+Math.imul(ne,Se)|0,f=f+Math.imul(ne,Be)|0,f=f+Math.imul(re,Se)|0,T=T+Math.imul(re,Be)|0;var ir=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(ir>>>26)|0,ir&=67108863,u=Math.imul(ge,ve),f=Math.imul(ge,Xe),f=f+Math.imul(We,ve)|0,T=Math.imul(We,Xe),u=u+Math.imul(fe,xe)|0,f=f+Math.imul(fe,tt)|0,f=f+Math.imul(Fe,xe)|0,T=T+Math.imul(Fe,tt)|0,u=u+Math.imul(oe,we)|0,f=f+Math.imul(oe,nt)|0,f=f+Math.imul(ae,we)|0,T=T+Math.imul(ae,nt)|0,u=u+Math.imul(ue,Me)|0,f=f+Math.imul(ue,st)|0,f=f+Math.imul(Re,Me)|0,T=T+Math.imul(Re,st)|0,u=u+Math.imul(le,Ae)|0,f=f+Math.imul(le,at)|0,f=f+Math.imul(Pe,Ae)|0,T=T+Math.imul(Pe,at)|0,u=u+Math.imul(he,Se)|0,f=f+Math.imul(he,Be)|0,f=f+Math.imul(De,Se)|0,T=T+Math.imul(De,Be)|0;var nr=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(nr>>>26)|0,nr&=67108863,u=Math.imul(ge,xe),f=Math.imul(ge,tt),f=f+Math.imul(We,xe)|0,T=Math.imul(We,tt),u=u+Math.imul(fe,we)|0,f=f+Math.imul(fe,nt)|0,f=f+Math.imul(Fe,we)|0,T=T+Math.imul(Fe,nt)|0,u=u+Math.imul(oe,Me)|0,f=f+Math.imul(oe,st)|0,f=f+Math.imul(ae,Me)|0,T=T+Math.imul(ae,st)|0,u=u+Math.imul(ue,Ae)|0,f=f+Math.imul(ue,at)|0,f=f+Math.imul(Re,Ae)|0,T=T+Math.imul(Re,at)|0,u=u+Math.imul(le,Se)|0,f=f+Math.imul(le,Be)|0,f=f+Math.imul(Pe,Se)|0,T=T+Math.imul(Pe,Be)|0;var rr=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(rr>>>26)|0,rr&=67108863,u=Math.imul(ge,we),f=Math.imul(ge,nt),f=f+Math.imul(We,we)|0,T=Math.imul(We,nt),u=u+Math.imul(fe,Me)|0,f=f+Math.imul(fe,st)|0,f=f+Math.imul(Fe,Me)|0,T=T+Math.imul(Fe,st)|0,u=u+Math.imul(oe,Ae)|0,f=f+Math.imul(oe,at)|0,f=f+Math.imul(ae,Ae)|0,T=T+Math.imul(ae,at)|0,u=u+Math.imul(ue,Se)|0,f=f+Math.imul(ue,Be)|0,f=f+Math.imul(Re,Se)|0,T=T+Math.imul(Re,Be)|0;var sr=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(sr>>>26)|0,sr&=67108863,u=Math.imul(ge,Me),f=Math.imul(ge,st),f=f+Math.imul(We,Me)|0,T=Math.imul(We,st),u=u+Math.imul(fe,Ae)|0,f=f+Math.imul(fe,at)|0,f=f+Math.imul(Fe,Ae)|0,T=T+Math.imul(Fe,at)|0,u=u+Math.imul(oe,Se)|0,f=f+Math.imul(oe,Be)|0,f=f+Math.imul(ae,Se)|0,T=T+Math.imul(ae,Be)|0;var or=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(or>>>26)|0,or&=67108863,u=Math.imul(ge,Ae),f=Math.imul(ge,at),f=f+Math.imul(We,Ae)|0,T=Math.imul(We,at),u=u+Math.imul(fe,Se)|0,f=f+Math.imul(fe,Be)|0,f=f+Math.imul(Fe,Se)|0,T=T+Math.imul(Fe,Be)|0;var ar=(w+u|0)+((f&8191)<<13)|0;w=(T+(f>>>13)|0)+(ar>>>26)|0,ar&=67108863,u=Math.imul(ge,Se),f=Math.imul(ge,Be),f=f+Math.imul(We,Se)|0,T=Math.imul(We,Be);var Ta=(w+u|0)+((f&8191)<<13)|0;return w=(T+(f>>>13)|0)+(Ta>>>26)|0,Ta&=67108863,I[0]=hi,I[1]=ui,I[2]=fi,I[3]=gi,I[4]=mi,I[5]=pi,I[6]=Gn,I[7]=Zn,I[8]=Jn,I[9]=Xn,I[10]=er,I[11]=tr,I[12]=ir,I[13]=nr,I[14]=rr,I[15]=sr,I[16]=or,I[17]=ar,I[18]=Ta,w!==0&&(I[19]=w,p.length++),p};Math.imul||(D=N);function B(c,h,p){p.negative=h.negative^c.negative,p.length=c.length+h.length;for(var v=0,x=0,I=0;I<p.length-1;I++){var w=x;x=0;for(var u=v&67108863,f=Math.min(I,h.length-1),T=Math.max(0,I-c.length+1);T<=f;T++){var $=I-T,V=c.words[$]|0,j=h.words[T]|0,O=V*j,R=O&67108863;w=w+(O/67108864|0)|0,R=R+u|0,u=R&67108863,w=w+(R>>>26)|0,x+=w>>>26,w&=67108863}p.words[I]=u,v=w,w=x}return v!==0?p.words[I]=v:p.length--,p._strip()}function P(c,h,p){return B(c,h,p)}s.prototype.mulTo=function(c,h){var p,v=this.length+c.length;return this.length===10&&c.length===10?p=D(this,c,h):v<63?p=N(this,c,h):v<1024?p=B(this,c,h):p=P(this,c,h),p},s.prototype.mul=function(c){var h=new s(null);return h.words=new Array(this.length+c.length),this.mulTo(c,h)},s.prototype.mulf=function(c){var h=new s(null);return h.words=new Array(this.length+c.length),P(this,c,h)},s.prototype.imul=function(c){return this.clone().mulTo(c,this)},s.prototype.imuln=function(c){var h=c<0;h&&(c=-c),n(typeof c=="number"),n(c<67108864);for(var p=0,v=0;v<this.length;v++){var x=(this.words[v]|0)*c,I=(x&67108863)+(p&67108863);p>>=26,p+=x/67108864|0,p+=I>>>26,this.words[v]=I&67108863}return p!==0&&(this.words[v]=p,this.length++),h?this.ineg():this},s.prototype.muln=function(c){return this.clone().imuln(c)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(c){var h=k(c);if(h.length===0)return new s(1);for(var p=this,v=0;v<h.length&&h[v]===0;v++,p=p.sqr());if(++v<h.length)for(var x=p.sqr();v<h.length;v++,x=x.sqr())h[v]!==0&&(p=p.mul(x));return p},s.prototype.iushln=function(c){n(typeof c=="number"&&c>=0);var h=c%26,p=(c-h)/26,v=67108863>>>26-h<<26-h,x;if(h!==0){var I=0;for(x=0;x<this.length;x++){var w=this.words[x]&v,u=(this.words[x]|0)-w<<h;this.words[x]=u|I,I=w>>>26-h}I&&(this.words[x]=I,this.length++)}if(p!==0){for(x=this.length-1;x>=0;x--)this.words[x+p]=this.words[x];for(x=0;x<p;x++)this.words[x]=0;this.length+=p}return this._strip()},s.prototype.ishln=function(c){return n(this.negative===0),this.iushln(c)},s.prototype.iushrn=function(c,h,p){n(typeof c=="number"&&c>=0);var v;h?v=(h-h%26)/26:v=0;var x=c%26,I=Math.min((c-x)/26,this.length),w=67108863^67108863>>>x<<x,u=p;if(v-=I,v=Math.max(0,v),u){for(var f=0;f<I;f++)u.words[f]=this.words[f];u.length=I}if(I!==0)if(this.length>I)for(this.length-=I,f=0;f<this.length;f++)this.words[f]=this.words[f+I];else this.words[0]=0,this.length=1;var T=0;for(f=this.length-1;f>=0&&(T!==0||f>=v);f--){var $=this.words[f]|0;this.words[f]=T<<26-x|$>>>x,T=$&w}return u&&T!==0&&(u.words[u.length++]=T),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(c,h,p){return n(this.negative===0),this.iushrn(c,h,p)},s.prototype.shln=function(c){return this.clone().ishln(c)},s.prototype.ushln=function(c){return this.clone().iushln(c)},s.prototype.shrn=function(c){return this.clone().ishrn(c)},s.prototype.ushrn=function(c){return this.clone().iushrn(c)},s.prototype.testn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,p=(c-h)/26,v=1<<h;if(this.length<=p)return!1;var x=this.words[p];return!!(x&v)},s.prototype.imaskn=function(c){n(typeof c=="number"&&c>=0);var h=c%26,p=(c-h)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=p)return this;if(h!==0&&p++,this.length=Math.min(p,this.length),h!==0){var v=67108863^67108863>>>h<<h;this.words[this.length-1]&=v}return this._strip()},s.prototype.maskn=function(c){return this.clone().imaskn(c)},s.prototype.iaddn=function(c){return n(typeof c=="number"),n(c<67108864),c<0?this.isubn(-c):this.negative!==0?this.length===1&&(this.words[0]|0)<=c?(this.words[0]=c-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(c),this.negative=1,this):this._iaddn(c)},s.prototype._iaddn=function(c){this.words[0]+=c;for(var h=0;h<this.length&&this.words[h]>=67108864;h++)this.words[h]-=67108864,h===this.length-1?this.words[h+1]=1:this.words[h+1]++;return this.length=Math.max(this.length,h+1),this},s.prototype.isubn=function(c){if(n(typeof c=="number"),n(c<67108864),c<0)return this.iaddn(-c);if(this.negative!==0)return this.negative=0,this.iaddn(c),this.negative=1,this;if(this.words[0]-=c,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var h=0;h<this.length&&this.words[h]<0;h++)this.words[h]+=67108864,this.words[h+1]-=1;return this._strip()},s.prototype.addn=function(c){return this.clone().iaddn(c)},s.prototype.subn=function(c){return this.clone().isubn(c)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(c,h,p){var v=c.length+p,x;this._expand(v);var I,w=0;for(x=0;x<c.length;x++){I=(this.words[x+p]|0)+w;var u=(c.words[x]|0)*h;I-=u&67108863,w=(I>>26)-(u/67108864|0),this.words[x+p]=I&67108863}for(;x<this.length-p;x++)I=(this.words[x+p]|0)+w,w=I>>26,this.words[x+p]=I&67108863;if(w===0)return this._strip();for(n(w===-1),w=0,x=0;x<this.length;x++)I=-(this.words[x]|0)+w,w=I>>26,this.words[x]=I&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(c,h){var p=this.length-c.length,v=this.clone(),x=c,I=x.words[x.length-1]|0,w=this._countBits(I);p=26-w,p!==0&&(x=x.ushln(p),v.iushln(p),I=x.words[x.length-1]|0);var u=v.length-x.length,f;if(h!=="mod"){f=new s(null),f.length=u+1,f.words=new Array(f.length);for(var T=0;T<f.length;T++)f.words[T]=0}var $=v.clone()._ishlnsubmul(x,1,u);$.negative===0&&(v=$,f&&(f.words[u]=1));for(var V=u-1;V>=0;V--){var j=(v.words[x.length+V]|0)*67108864+(v.words[x.length+V-1]|0);for(j=Math.min(j/I|0,67108863),v._ishlnsubmul(x,j,V);v.negative!==0;)j--,v.negative=0,v._ishlnsubmul(x,1,V),v.isZero()||(v.negative^=1);f&&(f.words[V]=j)}return f&&f._strip(),v._strip(),h!=="div"&&p!==0&&v.iushrn(p),{div:f||null,mod:v}},s.prototype.divmod=function(c,h,p){if(n(!c.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var v,x,I;return this.negative!==0&&c.negative===0?(I=this.neg().divmod(c,h),h!=="mod"&&(v=I.div.neg()),h!=="div"&&(x=I.mod.neg(),p&&x.negative!==0&&x.iadd(c)),{div:v,mod:x}):this.negative===0&&c.negative!==0?(I=this.divmod(c.neg(),h),h!=="mod"&&(v=I.div.neg()),{div:v,mod:I.mod}):this.negative&c.negative?(I=this.neg().divmod(c.neg(),h),h!=="div"&&(x=I.mod.neg(),p&&x.negative!==0&&x.isub(c)),{div:I.div,mod:x}):c.length>this.length||this.cmp(c)<0?{div:new s(0),mod:this}:c.length===1?h==="div"?{div:this.divn(c.words[0]),mod:null}:h==="mod"?{div:null,mod:new s(this.modrn(c.words[0]))}:{div:this.divn(c.words[0]),mod:new s(this.modrn(c.words[0]))}:this._wordDiv(c,h)},s.prototype.div=function(c){return this.divmod(c,"div",!1).div},s.prototype.mod=function(c){return this.divmod(c,"mod",!1).mod},s.prototype.umod=function(c){return this.divmod(c,"mod",!0).mod},s.prototype.divRound=function(c){var h=this.divmod(c);if(h.mod.isZero())return h.div;var p=h.div.negative!==0?h.mod.isub(c):h.mod,v=c.ushrn(1),x=c.andln(1),I=p.cmp(v);return I<0||x===1&&I===0?h.div:h.div.negative!==0?h.div.isubn(1):h.div.iaddn(1)},s.prototype.modrn=function(c){var h=c<0;h&&(c=-c),n(c<=67108863);for(var p=(1<<26)%c,v=0,x=this.length-1;x>=0;x--)v=(p*v+(this.words[x]|0))%c;return h?-v:v},s.prototype.modn=function(c){return this.modrn(c)},s.prototype.idivn=function(c){var h=c<0;h&&(c=-c),n(c<=67108863);for(var p=0,v=this.length-1;v>=0;v--){var x=(this.words[v]|0)+p*67108864;this.words[v]=x/c|0,p=x%c}return this._strip(),h?this.ineg():this},s.prototype.divn=function(c){return this.clone().idivn(c)},s.prototype.egcd=function(c){n(c.negative===0),n(!c.isZero());var h=this,p=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var v=new s(1),x=new s(0),I=new s(0),w=new s(1),u=0;h.isEven()&&p.isEven();)h.iushrn(1),p.iushrn(1),++u;for(var f=p.clone(),T=h.clone();!h.isZero();){for(var $=0,V=1;!(h.words[0]&V)&&$<26;++$,V<<=1);if($>0)for(h.iushrn($);$-- >0;)(v.isOdd()||x.isOdd())&&(v.iadd(f),x.isub(T)),v.iushrn(1),x.iushrn(1);for(var j=0,O=1;!(p.words[0]&O)&&j<26;++j,O<<=1);if(j>0)for(p.iushrn(j);j-- >0;)(I.isOdd()||w.isOdd())&&(I.iadd(f),w.isub(T)),I.iushrn(1),w.iushrn(1);h.cmp(p)>=0?(h.isub(p),v.isub(I),x.isub(w)):(p.isub(h),I.isub(v),w.isub(x))}return{a:I,b:w,gcd:p.iushln(u)}},s.prototype._invmp=function(c){n(c.negative===0),n(!c.isZero());var h=this,p=c.clone();h.negative!==0?h=h.umod(c):h=h.clone();for(var v=new s(1),x=new s(0),I=p.clone();h.cmpn(1)>0&&p.cmpn(1)>0;){for(var w=0,u=1;!(h.words[0]&u)&&w<26;++w,u<<=1);if(w>0)for(h.iushrn(w);w-- >0;)v.isOdd()&&v.iadd(I),v.iushrn(1);for(var f=0,T=1;!(p.words[0]&T)&&f<26;++f,T<<=1);if(f>0)for(p.iushrn(f);f-- >0;)x.isOdd()&&x.iadd(I),x.iushrn(1);h.cmp(p)>=0?(h.isub(p),v.isub(x)):(p.isub(h),x.isub(v))}var $;return h.cmpn(1)===0?$=v:$=x,$.cmpn(0)<0&&$.iadd(c),$},s.prototype.gcd=function(c){if(this.isZero())return c.abs();if(c.isZero())return this.abs();var h=this.clone(),p=c.clone();h.negative=0,p.negative=0;for(var v=0;h.isEven()&&p.isEven();v++)h.iushrn(1),p.iushrn(1);do{for(;h.isEven();)h.iushrn(1);for(;p.isEven();)p.iushrn(1);var x=h.cmp(p);if(x<0){var I=h;h=p,p=I}else if(x===0||p.cmpn(1)===0)break;h.isub(p)}while(!0);return p.iushln(v)},s.prototype.invm=function(c){return this.egcd(c).a.umod(c)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(c){return this.words[0]&c},s.prototype.bincn=function(c){n(typeof c=="number");var h=c%26,p=(c-h)/26,v=1<<h;if(this.length<=p)return this._expand(p+1),this.words[p]|=v,this;for(var x=v,I=p;x!==0&&I<this.length;I++){var w=this.words[I]|0;w+=x,x=w>>>26,w&=67108863,this.words[I]=w}return x!==0&&(this.words[I]=x,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(c){var h=c<0;if(this.negative!==0&&!h)return-1;if(this.negative===0&&h)return 1;this._strip();var p;if(this.length>1)p=1;else{h&&(c=-c),n(c<=67108863,"Number is too big");var v=this.words[0]|0;p=v===c?0:v<c?-1:1}return this.negative!==0?-p|0:p},s.prototype.cmp=function(c){if(this.negative!==0&&c.negative===0)return-1;if(this.negative===0&&c.negative!==0)return 1;var h=this.ucmp(c);return this.negative!==0?-h|0:h},s.prototype.ucmp=function(c){if(this.length>c.length)return 1;if(this.length<c.length)return-1;for(var h=0,p=this.length-1;p>=0;p--){var v=this.words[p]|0,x=c.words[p]|0;if(v!==x){v<x?h=-1:v>x&&(h=1);break}}return h},s.prototype.gtn=function(c){return this.cmpn(c)===1},s.prototype.gt=function(c){return this.cmp(c)===1},s.prototype.gten=function(c){return this.cmpn(c)>=0},s.prototype.gte=function(c){return this.cmp(c)>=0},s.prototype.ltn=function(c){return this.cmpn(c)===-1},s.prototype.lt=function(c){return this.cmp(c)===-1},s.prototype.lten=function(c){return this.cmpn(c)<=0},s.prototype.lte=function(c){return this.cmp(c)<=0},s.prototype.eqn=function(c){return this.cmpn(c)===0},s.prototype.eq=function(c){return this.cmp(c)===0},s.red=function(c){return new E(c)},s.prototype.toRed=function(c){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),c.convertTo(this)._forceRed(c)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(c){return this.red=c,this},s.prototype.forceRed=function(c){return n(!this.red,"Already a number in reduction context"),this._forceRed(c)},s.prototype.redAdd=function(c){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,c)},s.prototype.redIAdd=function(c){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,c)},s.prototype.redSub=function(c){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,c)},s.prototype.redISub=function(c){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,c)},s.prototype.redShl=function(c){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,c)},s.prototype.redMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.mul(this,c)},s.prototype.redIMul=function(c){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,c),this.red.imul(this,c)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(c){return n(this.red&&!c.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,c)};var z={k256:null,p224:null,p192:null,p25519:null};function W(c,h){this.name=c,this.p=new s(h,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}W.prototype._tmp=function(){var c=new s(null);return c.words=new Array(Math.ceil(this.n/13)),c},W.prototype.ireduce=function(c){var h=c,p;do this.split(h,this.tmp),h=this.imulK(h),h=h.iadd(this.tmp),p=h.bitLength();while(p>this.n);var v=p<this.n?-1:h.ucmp(this.p);return v===0?(h.words[0]=0,h.length=1):v>0?h.isub(this.p):h.strip!==void 0?h.strip():h._strip(),h},W.prototype.split=function(c,h){c.iushrn(this.n,0,h)},W.prototype.imulK=function(c){return c.imul(this.k)};function Y(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(Y,W),Y.prototype.split=function(c,h){for(var p=4194303,v=Math.min(c.length,9),x=0;x<v;x++)h.words[x]=c.words[x];if(h.length=v,c.length<=9){c.words[0]=0,c.length=1;return}var I=c.words[9];for(h.words[h.length++]=I&p,x=10;x<c.length;x++){var w=c.words[x]|0;c.words[x-10]=(w&p)<<4|I>>>22,I=w}I>>>=22,c.words[x-10]=I,I===0&&c.length>10?c.length-=10:c.length-=9},Y.prototype.imulK=function(c){c.words[c.length]=0,c.words[c.length+1]=0,c.length+=2;for(var h=0,p=0;p<c.length;p++){var v=c.words[p]|0;h+=v*977,c.words[p]=h&67108863,h=v*64+(h/67108864|0)}return c.words[c.length-1]===0&&(c.length--,c.words[c.length-1]===0&&c.length--),c};function Z(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(Z,W);function H(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(H,W);function X(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(X,W),X.prototype.imulK=function(c){for(var h=0,p=0;p<c.length;p++){var v=(c.words[p]|0)*19+h,x=v&67108863;v>>>=26,c.words[p]=x,h=v}return h!==0&&(c.words[c.length++]=h),c},s._prime=function(c){if(z[c])return z[c];var h;if(c==="k256")h=new Y;else if(c==="p224")h=new Z;else if(c==="p192")h=new H;else if(c==="p25519")h=new X;else throw new Error("Unknown prime "+c);return z[c]=h,h};function E(c){if(typeof c=="string"){var h=s._prime(c);this.m=h.p,this.prime=h}else n(c.gtn(1),"modulus must be greater than 1"),this.m=c,this.prime=null}E.prototype._verify1=function(c){n(c.negative===0,"red works only with positives"),n(c.red,"red works only with red numbers")},E.prototype._verify2=function(c,h){n((c.negative|h.negative)===0,"red works only with positives"),n(c.red&&c.red===h.red,"red works only with red numbers")},E.prototype.imod=function(c){return this.prime?this.prime.ireduce(c)._forceRed(this):(y(c,c.umod(this.m)._forceRed(this)),c)},E.prototype.neg=function(c){return c.isZero()?c.clone():this.m.sub(c)._forceRed(this)},E.prototype.add=function(c,h){this._verify2(c,h);var p=c.add(h);return p.cmp(this.m)>=0&&p.isub(this.m),p._forceRed(this)},E.prototype.iadd=function(c,h){this._verify2(c,h);var p=c.iadd(h);return p.cmp(this.m)>=0&&p.isub(this.m),p},E.prototype.sub=function(c,h){this._verify2(c,h);var p=c.sub(h);return p.cmpn(0)<0&&p.iadd(this.m),p._forceRed(this)},E.prototype.isub=function(c,h){this._verify2(c,h);var p=c.isub(h);return p.cmpn(0)<0&&p.iadd(this.m),p},E.prototype.shl=function(c,h){return this._verify1(c),this.imod(c.ushln(h))},E.prototype.imul=function(c,h){return this._verify2(c,h),this.imod(c.imul(h))},E.prototype.mul=function(c,h){return this._verify2(c,h),this.imod(c.mul(h))},E.prototype.isqr=function(c){return this.imul(c,c.clone())},E.prototype.sqr=function(c){return this.mul(c,c)},E.prototype.sqrt=function(c){if(c.isZero())return c.clone();var h=this.m.andln(3);if(n(h%2===1),h===3){var p=this.m.add(new s(1)).iushrn(2);return this.pow(c,p)}for(var v=this.m.subn(1),x=0;!v.isZero()&&v.andln(1)===0;)x++,v.iushrn(1);n(!v.isZero());var I=new s(1).toRed(this),w=I.redNeg(),u=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,u).cmp(w)!==0;)f.redIAdd(w);for(var T=this.pow(f,v),$=this.pow(c,v.addn(1).iushrn(1)),V=this.pow(c,v),j=x;V.cmp(I)!==0;){for(var O=V,R=0;O.cmp(I)!==0;R++)O=O.redSqr();n(R<j);var Q=this.pow(T,new s(1).iushln(j-R-1));$=$.redMul(Q),T=Q.redSqr(),V=V.redMul(T),j=R}return $},E.prototype.invm=function(c){var h=c._invmp(this.m);return h.negative!==0?(h.negative=0,this.imod(h).redNeg()):this.imod(h)},E.prototype.pow=function(c,h){if(h.isZero())return new s(1).toRed(this);if(h.cmpn(1)===0)return c.clone();var p=4,v=new Array(1<<p);v[0]=new s(1).toRed(this),v[1]=c;for(var x=2;x<v.length;x++)v[x]=this.mul(v[x-1],c);var I=v[0],w=0,u=0,f=h.bitLength()%26;for(f===0&&(f=26),x=h.length-1;x>=0;x--){for(var T=h.words[x],$=f-1;$>=0;$--){var V=T>>$&1;if(I!==v[0]&&(I=this.sqr(I)),V===0&&w===0){u=0;continue}w<<=1,w|=V,u++,!(u!==p&&(x!==0||$!==0))&&(I=this.mul(I,v[w]),u=0,w=0)}f=26}return I},E.prototype.convertTo=function(c){var h=c.umod(this.m);return h===c?h.clone():h},E.prototype.convertFrom=function(c){var h=c.clone();return h.red=null,h},s.mont=function(c){return new m(c)};function m(c){E.call(this,c),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(m,E),m.prototype.convertTo=function(c){return this.imod(c.ushln(this.shift))},m.prototype.convertFrom=function(c){var h=this.imod(c.mul(this.rinv));return h.red=null,h},m.prototype.imul=function(c,h){if(c.isZero()||h.isZero())return c.words[0]=0,c.length=1,c;var p=c.imul(h),v=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(v).iushrn(this.shift),I=x;return x.cmp(this.m)>=0?I=x.isub(this.m):x.cmpn(0)<0&&(I=x.iadd(this.m)),I._forceRed(this)},m.prototype.mul=function(c,h){if(c.isZero()||h.isZero())return new s(0)._forceRed(this);var p=c.mul(h),v=p.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),x=p.isub(v).iushrn(this.shift),I=x;return x.cmp(this.m)>=0?I=x.isub(this.m):x.cmpn(0)<0&&(I=x.iadd(this.m)),I._forceRed(this)},m.prototype.invm=function(c){var h=this.imod(c._invmp(this.m).mul(this.r2));return h._forceRed(this)}})(e,h0)})(m0);var Te=m0.exports;const p0="bignumber/5.7.0";var Wo=Te.BN;const xn=new Lt(p0),Ya={},Od=9007199254740991;function kx(e){return e!=null&&(Wt.isBigNumber(e)||typeof e=="number"&&e%1===0||typeof e=="string"&&!!e.match(/^-?[0-9]+$/)||ai(e)||typeof e=="bigint"||ms(e))}let Bd=!1,Wt=class Li{constructor(t,i){t!==Ya&&xn.throwError("cannot call constructor directly; use BigNumber.from",Lt.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=i,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return Yt(Ne(this).fromTwos(t))}toTwos(t){return Yt(Ne(this).toTwos(t))}abs(){return this._hex[0]==="-"?Li.from(this._hex.substring(1)):this}add(t){return Yt(Ne(this).add(Ne(t)))}sub(t){return Yt(Ne(this).sub(Ne(t)))}div(t){return Li.from(t).isZero()&&bi("division-by-zero","div"),Yt(Ne(this).div(Ne(t)))}mul(t){return Yt(Ne(this).mul(Ne(t)))}mod(t){const i=Ne(t);return i.isNeg()&&bi("division-by-zero","mod"),Yt(Ne(this).umod(i))}pow(t){const i=Ne(t);return i.isNeg()&&bi("negative-power","pow"),Yt(Ne(this).pow(i))}and(t){const i=Ne(t);return(this.isNegative()||i.isNeg())&&bi("unbound-bitwise-result","and"),Yt(Ne(this).and(i))}or(t){const i=Ne(t);return(this.isNegative()||i.isNeg())&&bi("unbound-bitwise-result","or"),Yt(Ne(this).or(i))}xor(t){const i=Ne(t);return(this.isNegative()||i.isNeg())&&bi("unbound-bitwise-result","xor"),Yt(Ne(this).xor(i))}mask(t){return(this.isNegative()||t<0)&&bi("negative-width","mask"),Yt(Ne(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&bi("negative-width","shl"),Yt(Ne(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&bi("negative-width","shr"),Yt(Ne(this).shrn(t))}eq(t){return Ne(this).eq(Ne(t))}lt(t){return Ne(this).lt(Ne(t))}lte(t){return Ne(this).lte(Ne(t))}gt(t){return Ne(this).gt(Ne(t))}gte(t){return Ne(this).gte(Ne(t))}isNegative(){return this._hex[0]==="-"}isZero(){return Ne(this).isZero()}toNumber(){try{return Ne(this).toNumber()}catch{bi("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return xn.throwError("this platform does not support BigInt",Lt.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Bd||(Bd=!0,xn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?xn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Lt.errors.UNEXPECTED_ARGUMENT,{}):xn.throwError("BigNumber.toString does not accept parameters",Lt.errors.UNEXPECTED_ARGUMENT,{})),Ne(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof Li)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new Li(Ya,Ws(t)):t.match(/^-?[0-9]+$/)?new Li(Ya,Ws(new Wo(t))):xn.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&bi("underflow","BigNumber.from",t),(t>=Od||t<=-Od)&&bi("overflow","BigNumber.from",t),Li.from(String(t));const i=t;if(typeof i=="bigint")return Li.from(i.toString());if(ms(i))return Li.from(Vt(i));if(i)if(i.toHexString){const n=i.toHexString();if(typeof n=="string")return Li.from(n)}else{let n=i._hex;if(n==null&&i.type==="BigNumber"&&(n=i.hex),typeof n=="string"&&(ai(n)||n[0]==="-"&&ai(n.substring(1))))return Li.from(n)}return xn.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}};function Ws(e){if(typeof e!="string")return Ws(e.toString(16));if(e[0]==="-")return e=e.substring(1),e[0]==="-"&&xn.throwArgumentError("invalid hex","value",e),e=Ws(e),e==="0x00"?e:"-"+e;if(e.substring(0,2)!=="0x"&&(e="0x"+e),e==="0x")return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&e.substring(0,4)==="0x00";)e="0x"+e.substring(4);return e}function Yt(e){return Wt.from(Ws(e))}function Ne(e){const t=Wt.from(e).toHexString();return t[0]==="-"?new Wo("-"+t.substring(3),16):new Wo(t.substring(2),16)}function bi(e,t,i){const n={fault:e,operation:t};return i!=null&&(n.value=i),xn.throwError(e,Lt.errors.NUMERIC_FAULT,n)}function Dx(e){return new Wo(e,36).toString(16)}const Ft=new Lt(p0),zs={},y0=Wt.from(0),b0=Wt.from(-1);function v0(e,t,i,n){const r={fault:t,operation:i};return n!==void 0&&(r.value=n),Ft.throwError(e,Lt.errors.NUMERIC_FAULT,r)}let Rs="0";for(;Rs.length<256;)Rs+=Rs;function Cl(e){if(typeof e!="number")try{e=Wt.from(e).toNumber()}catch{}return typeof e=="number"&&e>=0&&e<=256&&!(e%1)?"1"+Rs.substring(0,e):Ft.throwArgumentError("invalid decimal size","decimals",e)}function Qa(e,t){t==null&&(t=0);const i=Cl(t);e=Wt.from(e);const n=e.lt(y0);n&&(e=e.mul(b0));let r=e.mod(i).toString();for(;r.length<i.length-1;)r="0"+r;r=r.match(/^([0-9]*[1-9]|0)(0*)/)[1];const s=e.div(i).toString();return i.length===1?e=s:e=s+"."+r,n&&(e="-"+e),e}function yn(e,t){t==null&&(t=0);const i=Cl(t);(typeof e!="string"||!e.match(/^-?[0-9.]+$/))&&Ft.throwArgumentError("invalid decimal value","value",e);const n=e.substring(0,1)==="-";n&&(e=e.substring(1)),e==="."&&Ft.throwArgumentError("missing value","value",e);const r=e.split(".");r.length>2&&Ft.throwArgumentError("too many decimal points","value",e);let s=r[0],a=r[1];for(s||(s="0"),a||(a="0");a[a.length-1]==="0";)a=a.substring(0,a.length-1);for(a.length>i.length-1&&v0("fractional component exceeds decimals","underflow","parseFixed"),a===""&&(a="0");a.length<i.length-1;)a+="0";const l=Wt.from(s),d=Wt.from(a);let g=l.mul(i).add(d);return n&&(g=g.mul(b0)),g}let Va=class Tc{constructor(t,i,n,r){t!==zs&&Ft.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Lt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=i,this.width=n,this.decimals=r,this.name=(i?"":"u")+"fixed"+String(n)+"x"+String(r),this._multiplier=Cl(r),Object.freeze(this)}static from(t){if(t instanceof Tc)return t;typeof t=="number"&&(t=`fixed128x${t}`);let i=!0,n=128,r=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")i=!1;else{const s=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);s||Ft.throwArgumentError("invalid fixed format","format",t),i=s[1]!=="u",n=parseInt(s[2]),r=parseInt(s[3])}}else if(t){const s=(a,l,d)=>t[a]==null?d:(typeof t[a]!==l&&Ft.throwArgumentError("invalid fixed format ("+a+" not "+l+")","format."+a,t[a]),t[a]);i=s("signed","boolean",i),n=s("width","number",n),r=s("decimals","number",r)}return n%8&&Ft.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",n),r>80&&Ft.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",r),new Tc(zs,i,n,r)}},x0=class qt{constructor(t,i,n,r){t!==zs&&Ft.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Lt.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=r,this._hex=i,this._value=n,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&Ft.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const i=yn(this._value,this.format.decimals),n=yn(t._value,t.format.decimals);return qt.fromValue(i.add(n),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const i=yn(this._value,this.format.decimals),n=yn(t._value,t.format.decimals);return qt.fromValue(i.sub(n),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const i=yn(this._value,this.format.decimals),n=yn(t._value,t.format.decimals);return qt.fromValue(i.mul(n).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const i=yn(this._value,this.format.decimals),n=yn(t._value,t.format.decimals);return qt.fromValue(i.mul(this.format._multiplier).div(n),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");t.length===1&&t.push("0");let i=qt.from(t[0],this.format);const n=!t[1].match(/^(0*)$/);return this.isNegative()&&n&&(i=i.subUnsafe(qd.toFormat(i.format))),i}ceiling(){const t=this.toString().split(".");t.length===1&&t.push("0");let i=qt.from(t[0],this.format);const n=!t[1].match(/^(0*)$/);return!this.isNegative()&&n&&(i=i.addUnsafe(qd.toFormat(i.format))),i}round(t){t==null&&(t=0);const i=this.toString().split(".");if(i.length===1&&i.push("0"),(t<0||t>80||t%1)&&Ft.throwArgumentError("invalid decimal count","decimals",t),i[1].length<=t)return this;const n=qt.from("1"+Rs.substring(0,t),this.format),r=Lx.toFormat(this.format);return this.mulUnsafe(n).addUnsafe(r).floor().divUnsafe(n)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(t){if(t==null)return this._hex;t%8&&Ft.throwArgumentError("invalid byte width","width",t);const i=Wt.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return tn(i,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return qt.fromString(this._value,t)}static fromValue(t,i,n){return n==null&&i!=null&&!kx(i)&&(n=i,i=null),i==null&&(i=0),n==null&&(n="fixed"),qt.fromString(Qa(t,i),Va.from(n))}static fromString(t,i){i==null&&(i="fixed");const n=Va.from(i),r=yn(t,n.decimals);!n.signed&&r.lt(y0)&&v0("unsigned value cannot be negative","overflow","value",t);let s=null;n.signed?s=r.toTwos(n.width).toHexString():(s=r.toHexString(),s=tn(s,n.width/8));const a=Qa(r,n.decimals);return new qt(zs,s,a,n)}static fromBytes(t,i){i==null&&(i="fixed");const n=Va.from(i);if(yt(t).length>n.width/8)throw new Error("overflow");let r=Wt.from(t);n.signed&&(r=r.fromTwos(n.width));const s=r.toTwos((n.signed?0:1)+n.width).toHexString(),a=Qa(r,n.decimals);return new qt(zs,s,a,n)}static from(t,i){if(typeof t=="string")return qt.fromString(t,i);if(ms(t))return qt.fromBytes(t,i);try{return qt.fromValue(t,0,i)}catch(n){if(n.code!==Lt.errors.INVALID_ARGUMENT)throw n}return Ft.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!!(t&&t._isFixedNumber)}};const qd=x0.from(1),Lx=x0.from("0.5"),Px="strings/5.7.0",zx=new Lt(Px);var $o;(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})($o||($o={}));var Fd;(function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"})(Fd||(Fd={}));function Ka(e,t=$o.current){t!=$o.current&&(zx.checkNormalize(),e=e.normalize(t));let i=[];for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(r<128)i.push(r);else if(r<2048)i.push(r>>6|192),i.push(r&63|128);else if((r&64512)==55296){n++;const s=e.charCodeAt(n);if(n>=e.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const a=65536+((r&1023)<<10)+(s&1023);i.push(a>>18|240),i.push(a>>12&63|128),i.push(a>>6&63|128),i.push(a&63|128)}else i.push(r>>12|224),i.push(r>>6&63|128),i.push(r&63|128)}return yt(i)}function Rx(e){if(e.length%4!==0)throw new Error("bad data");let t=[];for(let i=0;i<e.length;i+=4)t.push(parseInt(e.substring(i,i+4),16));return t}function Ga(e,t){t||(t=function(r){return[parseInt(r,16)]});let i=0,n={};return e.split(",").forEach(r=>{let s=r.split(":");i+=parseInt(s[0],16),n[i]=t(s[1])}),n}function Ud(e){let t=0;return e.split(",").map(i=>{let n=i.split("-");n.length===1?n[1]="0":n[1]===""&&(n[1]="1");let r=t+parseInt(n[0],16);return t=parseInt(n[1],16),{l:r,h:t}})}Ud("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(e=>parseInt(e,16)),Ga("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Ga("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Ga("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",Rx),Ud("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Ox(e){e=atob(e);const t=[];for(let i=0;i<e.length;i++)t.push(e.charCodeAt(i));return yt(t)}function w0(e,t){t==null&&(t=1);const i=[],n=i.forEach,r=function(s,a){n.call(s,function(l){a>0&&Array.isArray(l)?r(l,a-1):i.push(l)})};return r(e,t),i}function Bx(e){const t={};for(let i=0;i<e.length;i++){const n=e[i];t[n[0]]=n[1]}return t}function qx(e){let t=0;function i(){return e[t++]<<8|e[t++]}let n=i(),r=1,s=[0,1];for(let z=1;z<n;z++)s.push(r+=i());let a=i(),l=t;t+=a;let d=0,g=0;function y(){return d==0&&(g=g<<8|e[t++],d=8),g>>--d&1}const b=31,M=Math.pow(2,b),A=M>>>1,S=A>>1,C=M-1;let k=0;for(let z=0;z<b;z++)k=k<<1|y();let N=[],D=0,B=M;for(;;){let z=Math.floor(((k-D+1)*r-1)/B),W=0,Y=n;for(;Y-W>1;){let X=W+Y>>>1;z<s[X]?Y=X:W=X}if(W==0)break;N.push(W);let Z=D+Math.floor(B*s[W]/r),H=D+Math.floor(B*s[W+1]/r)-1;for(;!((Z^H)&A);)k=k<<1&C|y(),Z=Z<<1&C,H=H<<1&C|1;for(;Z&~H&S;)k=k&A|k<<1&C>>>1|y(),Z=Z<<1^A,H=(H^A)<<1|A|1;D=Z,B=1+H-Z}let P=n-4;return N.map(z=>{switch(z-P){case 3:return P+65792+(e[l++]<<16|e[l++]<<8|e[l++]);case 2:return P+256+(e[l++]<<8|e[l++]);case 1:return P+e[l++];default:return z-1}})}function Fx(e){let t=0;return()=>e[t++]}function Ux(e){return Fx(qx(e))}function Wx(e){return e&1?~e>>1:e>>1}function $x(e,t){let i=Array(e);for(let n=0;n<e;n++)i[n]=1+t();return i}function Wd(e,t){let i=Array(e);for(let n=0,r=-1;n<e;n++)i[n]=r+=1+t();return i}function Hx(e,t){let i=Array(e);for(let n=0,r=0;n<e;n++)i[n]=r+=Wx(t());return i}function Ho(e,t){let i=Wd(e(),e),n=e(),r=Wd(n,e),s=$x(n,e);for(let a=0;a<n;a++)for(let l=0;l<s[a];l++)i.push(r[a]+l);return t?i.map(a=>t[a]):i}function Yx(e){let t=[];for(;;){let i=e();if(i==0)break;t.push(Vx(i,e))}for(;;){let i=e()-1;if(i<0)break;t.push(Kx(i,e))}return Bx(w0(t))}function Qx(e){let t=[];for(;;){let i=e();if(i==0)break;t.push(i)}return t}function M0(e,t,i){let n=Array(e).fill(void 0).map(()=>[]);for(let r=0;r<t;r++)Hx(e,i).forEach((s,a)=>n[a].push(s));return n}function Vx(e,t){let i=1+t(),n=t(),r=Qx(t),s=M0(r.length,1+e,t);return w0(s.map((a,l)=>{const d=a[0],g=a.slice(1);return Array(r[l]).fill(void 0).map((y,b)=>{let M=b*n;return[d+b*i,g.map(A=>A+M)]})}))}function Kx(e,t){let i=1+t();return M0(i,1+e,t).map(n=>[n[0],n.slice(1)])}function Gx(e){let t=Ho(e).sort((n,r)=>n-r);return i();function i(){let n=[];for(;;){let g=Ho(e,t);if(g.length==0)break;n.push({set:new Set(g),node:i()})}n.sort((g,y)=>y.set.size-g.set.size);let r=e(),s=r%3;r=r/3|0;let a=!!(r&1);r>>=1;let l=r==1,d=r==2;return{branches:n,valid:s,fe0f:a,save:l,check:d}}}function Zx(){return Ux(Ox("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const mo=Zx();new Set(Ho(mo)),new Set(Ho(mo)),Yx(mo),Gx(mo);const Jx=new Uint8Array(32);Jx.fill(0);const Xx=`Ethereum Signed Message:
`;function A0(e){return typeof e=="string"&&(e=Ka(e)),Tl(Ix([Ka(Xx),Ka(String(e.length)),e]))}const e4="address/5.7.0",Ds=new Lt(e4);function $d(e){ai(e,20)||Ds.throwArgumentError("invalid address","address",e),e=e.toLowerCase();const t=e.substring(2).split(""),i=new Uint8Array(40);for(let r=0;r<40;r++)i[r]=t[r].charCodeAt(0);const n=yt(Tl(i));for(let r=0;r<40;r+=2)n[r>>1]>>4>=8&&(t[r]=t[r].toUpperCase()),(n[r>>1]&15)>=8&&(t[r+1]=t[r+1].toUpperCase());return"0x"+t.join("")}const t4=9007199254740991;function i4(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}const El={};for(let e=0;e<10;e++)El[String(e)]=String(e);for(let e=0;e<26;e++)El[String.fromCharCode(65+e)]=String(10+e);const Hd=Math.floor(i4(t4));function n4(e){e=e.toUpperCase(),e=e.substring(4)+e.substring(0,2)+"00";let t=e.split("").map(n=>El[n]).join("");for(;t.length>=Hd;){let n=t.substring(0,Hd);t=parseInt(n,10)%97+t.substring(n.length)}let i=String(98-parseInt(t,10)%97);for(;i.length<2;)i="0"+i;return i}function r4(e){let t=null;if(typeof e!="string"&&Ds.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))e.substring(0,2)!=="0x"&&(e="0x"+e),t=$d(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&Ds.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==n4(e)&&Ds.throwArgumentError("bad icap checksum","address",e),t=Dx(e.substring(4));t.length<40;)t="0"+t;t=$d("0x"+t)}else Ds.throwArgumentError("invalid address","address",e);return t}function js(e,t,i){Object.defineProperty(e,t,{enumerable:!0,value:i,writable:!1})}const s4=new Uint8Array(32);s4.fill(0),Wt.from(-1);const o4=Wt.from(0),a4=Wt.from(1);Wt.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),tn(a4.toHexString(),32),tn(o4.toHexString(),32);var Yi={},ke={},ro=S0;function S0(e,t){if(!e)throw new Error(t||"Assertion failed")}S0.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)};var Cc={exports:{}};typeof Object.create=="function"?Cc.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Cc.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}};var c4=ro,l4=Cc.exports;ke.inherits=l4;function d4(e,t){return(e.charCodeAt(t)&64512)!==55296||t<0||t+1>=e.length?!1:(e.charCodeAt(t+1)&64512)===56320}function h4(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var i=[];if(typeof e=="string")if(t){if(t==="hex")for(e=e.replace(/[^a-z0-9]+/ig,""),e.length%2!==0&&(e="0"+e),r=0;r<e.length;r+=2)i.push(parseInt(e[r]+e[r+1],16))}else for(var n=0,r=0;r<e.length;r++){var s=e.charCodeAt(r);s<128?i[n++]=s:s<2048?(i[n++]=s>>6|192,i[n++]=s&63|128):d4(e,r)?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),i[n++]=s>>18|240,i[n++]=s>>12&63|128,i[n++]=s>>6&63|128,i[n++]=s&63|128):(i[n++]=s>>12|224,i[n++]=s>>6&63|128,i[n++]=s&63|128)}else for(r=0;r<e.length;r++)i[r]=e[r]|0;return i}ke.toArray=h4;function u4(e){for(var t="",i=0;i<e.length;i++)t+=I0(e[i].toString(16));return t}ke.toHex=u4;function j0(e){var t=e>>>24|e>>>8&65280|e<<8&16711680|(e&255)<<24;return t>>>0}ke.htonl=j0;function f4(e,t){for(var i="",n=0;n<e.length;n++){var r=e[n];t==="little"&&(r=j0(r)),i+=T0(r.toString(16))}return i}ke.toHex32=f4;function I0(e){return e.length===1?"0"+e:e}ke.zero2=I0;function T0(e){return e.length===7?"0"+e:e.length===6?"00"+e:e.length===5?"000"+e:e.length===4?"0000"+e:e.length===3?"00000"+e:e.length===2?"000000"+e:e.length===1?"0000000"+e:e}ke.zero8=T0;function g4(e,t,i,n){var r=i-t;c4(r%4===0);for(var s=new Array(r/4),a=0,l=t;a<s.length;a++,l+=4){var d;n==="big"?d=e[l]<<24|e[l+1]<<16|e[l+2]<<8|e[l+3]:d=e[l+3]<<24|e[l+2]<<16|e[l+1]<<8|e[l],s[a]=d>>>0}return s}ke.join32=g4;function m4(e,t){for(var i=new Array(e.length*4),n=0,r=0;n<e.length;n++,r+=4){var s=e[n];t==="big"?(i[r]=s>>>24,i[r+1]=s>>>16&255,i[r+2]=s>>>8&255,i[r+3]=s&255):(i[r+3]=s>>>24,i[r+2]=s>>>16&255,i[r+1]=s>>>8&255,i[r]=s&255)}return i}ke.split32=m4;function p4(e,t){return e>>>t|e<<32-t}ke.rotr32=p4;function y4(e,t){return e<<t|e>>>32-t}ke.rotl32=y4;function b4(e,t){return e+t>>>0}ke.sum32=b4;function v4(e,t,i){return e+t+i>>>0}ke.sum32_3=v4;function x4(e,t,i,n){return e+t+i+n>>>0}ke.sum32_4=x4;function w4(e,t,i,n,r){return e+t+i+n+r>>>0}ke.sum32_5=w4;function M4(e,t,i,n){var r=e[t],s=e[t+1],a=n+s>>>0,l=(a<n?1:0)+i+r;e[t]=l>>>0,e[t+1]=a}ke.sum64=M4;function A4(e,t,i,n){var r=t+n>>>0,s=(r<t?1:0)+e+i;return s>>>0}ke.sum64_hi=A4;function S4(e,t,i,n){var r=t+n;return r>>>0}ke.sum64_lo=S4;function j4(e,t,i,n,r,s,a,l){var d=0,g=t;g=g+n>>>0,d+=g<t?1:0,g=g+s>>>0,d+=g<s?1:0,g=g+l>>>0,d+=g<l?1:0;var y=e+i+r+a+d;return y>>>0}ke.sum64_4_hi=j4;function I4(e,t,i,n,r,s,a,l){var d=t+n+s+l;return d>>>0}ke.sum64_4_lo=I4;function T4(e,t,i,n,r,s,a,l,d,g){var y=0,b=t;b=b+n>>>0,y+=b<t?1:0,b=b+s>>>0,y+=b<s?1:0,b=b+l>>>0,y+=b<l?1:0,b=b+g>>>0,y+=b<g?1:0;var M=e+i+r+a+d+y;return M>>>0}ke.sum64_5_hi=T4;function C4(e,t,i,n,r,s,a,l,d,g){var y=t+n+s+l+g;return y>>>0}ke.sum64_5_lo=C4;function E4(e,t,i){var n=t<<32-i|e>>>i;return n>>>0}ke.rotr64_hi=E4;function N4(e,t,i){var n=e<<32-i|t>>>i;return n>>>0}ke.rotr64_lo=N4;function _4(e,t,i){return e>>>i}ke.shr64_hi=_4;function k4(e,t,i){var n=e<<32-i|t>>>i;return n>>>0}ke.shr64_lo=k4;var ps={},Yd=ke,D4=ro;function po(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ps.BlockHash=po,po.prototype.update=function(e,t){if(e=Yd.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var i=e.length%this._delta8;this.pending=e.slice(e.length-i,e.length),this.pending.length===0&&(this.pending=null),e=Yd.join32(e,0,e.length-i,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},po.prototype.digest=function(e){return this.update(this._pad()),D4(this.pending===null),this._digest(e)},po.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,i=t-(e+this.padLength)%t,n=new Array(i+this.padLength);n[0]=128;for(var r=1;r<i;r++)n[r]=0;if(e<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)n[r++]=0;n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=e>>>24&255,n[r++]=e>>>16&255,n[r++]=e>>>8&255,n[r++]=e&255}else for(n[r++]=e&255,n[r++]=e>>>8&255,n[r++]=e>>>16&255,n[r++]=e>>>24&255,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,s=8;s<this.padLength;s++)n[r++]=0;return n};var zr={},mn={},L4=ke,nn=L4.rotr32;function P4(e,t,i,n){if(e===0)return C0(t,i,n);if(e===1||e===3)return N0(t,i,n);if(e===2)return E0(t,i,n)}mn.ft_1=P4;function C0(e,t,i){return e&t^~e&i}mn.ch32=C0;function E0(e,t,i){return e&t^e&i^t&i}mn.maj32=E0;function N0(e,t,i){return e^t^i}mn.p32=N0;function z4(e){return nn(e,2)^nn(e,13)^nn(e,22)}mn.s0_256=z4;function R4(e){return nn(e,6)^nn(e,11)^nn(e,25)}mn.s1_256=R4;function O4(e){return nn(e,7)^nn(e,18)^e>>>3}mn.g0_256=O4;function B4(e){return nn(e,17)^nn(e,19)^e>>>10}mn.g1_256=B4;var ts=ke,q4=ps,F4=mn,Za=ts.rotl32,Is=ts.sum32,U4=ts.sum32_5,W4=F4.ft_1,_0=q4.BlockHash,$4=[1518500249,1859775393,2400959708,3395469782];function Ki(){if(!(this instanceof Ki))return new Ki;_0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}ts.inherits(Ki,_0);var H4=Ki;Ki.blockSize=512,Ki.outSize=160,Ki.hmacStrength=80,Ki.padLength=64,Ki.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=Za(i[n-3]^i[n-8]^i[n-14]^i[n-16],1);var r=this.h[0],s=this.h[1],a=this.h[2],l=this.h[3],d=this.h[4];for(n=0;n<i.length;n++){var g=~~(n/20),y=U4(Za(r,5),W4(g,s,a,l),d,i[n],$4[g]);d=l,l=a,a=Za(s,30),s=r,r=y}this.h[0]=Is(this.h[0],r),this.h[1]=Is(this.h[1],s),this.h[2]=Is(this.h[2],a),this.h[3]=Is(this.h[3],l),this.h[4]=Is(this.h[4],d)},Ki.prototype._digest=function(e){return e==="hex"?ts.toHex32(this.h,"big"):ts.split32(this.h,"big")};var is=ke,Y4=ps,ys=mn,Q4=ro,_i=is.sum32,V4=is.sum32_4,K4=is.sum32_5,G4=ys.ch32,Z4=ys.maj32,J4=ys.s0_256,X4=ys.s1_256,e6=ys.g0_256,t6=ys.g1_256,k0=Y4.BlockHash,i6=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Gi(){if(!(this instanceof Gi))return new Gi;k0.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=i6,this.W=new Array(64)}is.inherits(Gi,k0);var D0=Gi;Gi.blockSize=512,Gi.outSize=256,Gi.hmacStrength=192,Gi.padLength=64,Gi.prototype._update=function(e,t){for(var i=this.W,n=0;n<16;n++)i[n]=e[t+n];for(;n<i.length;n++)i[n]=V4(t6(i[n-2]),i[n-7],e6(i[n-15]),i[n-16]);var r=this.h[0],s=this.h[1],a=this.h[2],l=this.h[3],d=this.h[4],g=this.h[5],y=this.h[6],b=this.h[7];for(Q4(this.k.length===i.length),n=0;n<i.length;n++){var M=K4(b,X4(d),G4(d,g,y),this.k[n],i[n]),A=_i(J4(r),Z4(r,s,a));b=y,y=g,g=d,d=_i(l,M),l=a,a=s,s=r,r=_i(M,A)}this.h[0]=_i(this.h[0],r),this.h[1]=_i(this.h[1],s),this.h[2]=_i(this.h[2],a),this.h[3]=_i(this.h[3],l),this.h[4]=_i(this.h[4],d),this.h[5]=_i(this.h[5],g),this.h[6]=_i(this.h[6],y),this.h[7]=_i(this.h[7],b)},Gi.prototype._digest=function(e){return e==="hex"?is.toHex32(this.h,"big"):is.split32(this.h,"big")};var Ec=ke,L0=D0;function Mn(){if(!(this instanceof Mn))return new Mn;L0.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}Ec.inherits(Mn,L0);var n6=Mn;Mn.blockSize=512,Mn.outSize=224,Mn.hmacStrength=192,Mn.padLength=64,Mn.prototype._digest=function(e){return e==="hex"?Ec.toHex32(this.h.slice(0,7),"big"):Ec.split32(this.h.slice(0,7),"big")};var ei=ke,r6=ps,s6=ro,rn=ei.rotr64_hi,sn=ei.rotr64_lo,P0=ei.shr64_hi,z0=ei.shr64_lo,Pn=ei.sum64,Ja=ei.sum64_hi,Xa=ei.sum64_lo,o6=ei.sum64_4_hi,a6=ei.sum64_4_lo,c6=ei.sum64_5_hi,l6=ei.sum64_5_lo,R0=r6.BlockHash,d6=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Ri(){if(!(this instanceof Ri))return new Ri;R0.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=d6,this.W=new Array(160)}ei.inherits(Ri,R0);var O0=Ri;Ri.blockSize=1024,Ri.outSize=512,Ri.hmacStrength=192,Ri.padLength=128,Ri.prototype._prepareBlock=function(e,t){for(var i=this.W,n=0;n<32;n++)i[n]=e[t+n];for(;n<i.length;n+=2){var r=w6(i[n-4],i[n-3]),s=M6(i[n-4],i[n-3]),a=i[n-14],l=i[n-13],d=v6(i[n-30],i[n-29]),g=x6(i[n-30],i[n-29]),y=i[n-32],b=i[n-31];i[n]=o6(r,s,a,l,d,g,y,b),i[n+1]=a6(r,s,a,l,d,g,y,b)}},Ri.prototype._update=function(e,t){this._prepareBlock(e,t);var i=this.W,n=this.h[0],r=this.h[1],s=this.h[2],a=this.h[3],l=this.h[4],d=this.h[5],g=this.h[6],y=this.h[7],b=this.h[8],M=this.h[9],A=this.h[10],S=this.h[11],C=this.h[12],k=this.h[13],N=this.h[14],D=this.h[15];s6(this.k.length===i.length);for(var B=0;B<i.length;B+=2){var P=N,z=D,W=y6(b,M),Y=b6(b,M),Z=h6(b,M,A,S,C),H=u6(b,M,A,S,C,k),X=this.k[B],E=this.k[B+1],m=i[B],c=i[B+1],h=c6(P,z,W,Y,Z,H,X,E,m,c),p=l6(P,z,W,Y,Z,H,X,E,m,c);P=m6(n,r),z=p6(n,r),W=f6(n,r,s,a,l),Y=g6(n,r,s,a,l,d);var v=Ja(P,z,W,Y),x=Xa(P,z,W,Y);N=C,D=k,C=A,k=S,A=b,S=M,b=Ja(g,y,h,p),M=Xa(y,y,h,p),g=l,y=d,l=s,d=a,s=n,a=r,n=Ja(h,p,v,x),r=Xa(h,p,v,x)}Pn(this.h,0,n,r),Pn(this.h,2,s,a),Pn(this.h,4,l,d),Pn(this.h,6,g,y),Pn(this.h,8,b,M),Pn(this.h,10,A,S),Pn(this.h,12,C,k),Pn(this.h,14,N,D)},Ri.prototype._digest=function(e){return e==="hex"?ei.toHex32(this.h,"big"):ei.split32(this.h,"big")};function h6(e,t,i,n,r){var s=e&i^~e&r;return s<0&&(s+=4294967296),s}function u6(e,t,i,n,r,s){var a=t&n^~t&s;return a<0&&(a+=4294967296),a}function f6(e,t,i,n,r){var s=e&i^e&r^i&r;return s<0&&(s+=4294967296),s}function g6(e,t,i,n,r,s){var a=t&n^t&s^n&s;return a<0&&(a+=4294967296),a}function m6(e,t){var i=rn(e,t,28),n=rn(t,e,2),r=rn(t,e,7),s=i^n^r;return s<0&&(s+=4294967296),s}function p6(e,t){var i=sn(e,t,28),n=sn(t,e,2),r=sn(t,e,7),s=i^n^r;return s<0&&(s+=4294967296),s}function y6(e,t){var i=rn(e,t,14),n=rn(e,t,18),r=rn(t,e,9),s=i^n^r;return s<0&&(s+=4294967296),s}function b6(e,t){var i=sn(e,t,14),n=sn(e,t,18),r=sn(t,e,9),s=i^n^r;return s<0&&(s+=4294967296),s}function v6(e,t){var i=rn(e,t,1),n=rn(e,t,8),r=P0(e,t,7),s=i^n^r;return s<0&&(s+=4294967296),s}function x6(e,t){var i=sn(e,t,1),n=sn(e,t,8),r=z0(e,t,7),s=i^n^r;return s<0&&(s+=4294967296),s}function w6(e,t){var i=rn(e,t,19),n=rn(t,e,29),r=P0(e,t,6),s=i^n^r;return s<0&&(s+=4294967296),s}function M6(e,t){var i=sn(e,t,19),n=sn(t,e,29),r=z0(e,t,6),s=i^n^r;return s<0&&(s+=4294967296),s}var Nc=ke,B0=O0;function An(){if(!(this instanceof An))return new An;B0.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Nc.inherits(An,B0);var A6=An;An.blockSize=1024,An.outSize=384,An.hmacStrength=192,An.padLength=128,An.prototype._digest=function(e){return e==="hex"?Nc.toHex32(this.h.slice(0,12),"big"):Nc.split32(this.h.slice(0,12),"big")},zr.sha1=H4,zr.sha224=n6,zr.sha256=D0,zr.sha384=A6,zr.sha512=O0;var q0={},yr=ke,S6=ps,yo=yr.rotl32,Qd=yr.sum32,Ts=yr.sum32_3,Vd=yr.sum32_4,F0=S6.BlockHash;function Qi(){if(!(this instanceof Qi))return new Qi;F0.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}yr.inherits(Qi,F0),q0.ripemd160=Qi,Qi.blockSize=512,Qi.outSize=160,Qi.hmacStrength=192,Qi.padLength=64,Qi.prototype._update=function(e,t){for(var i=this.h[0],n=this.h[1],r=this.h[2],s=this.h[3],a=this.h[4],l=i,d=n,g=r,y=s,b=a,M=0;M<80;M++){var A=Qd(yo(Vd(i,Kd(M,n,r,s),e[T6[M]+t],j6(M)),E6[M]),a);i=a,a=s,s=yo(r,10),r=n,n=A,A=Qd(yo(Vd(l,Kd(79-M,d,g,y),e[C6[M]+t],I6(M)),N6[M]),b),l=b,b=y,y=yo(g,10),g=d,d=A}A=Ts(this.h[1],r,y),this.h[1]=Ts(this.h[2],s,b),this.h[2]=Ts(this.h[3],a,l),this.h[3]=Ts(this.h[4],i,d),this.h[4]=Ts(this.h[0],n,g),this.h[0]=A},Qi.prototype._digest=function(e){return e==="hex"?yr.toHex32(this.h,"little"):yr.split32(this.h,"little")};function Kd(e,t,i,n){return e<=15?t^i^n:e<=31?t&i|~t&n:e<=47?(t|~i)^n:e<=63?t&n|i&~n:t^(i|~n)}function j6(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function I6(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}var T6=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],C6=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],E6=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],N6=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],_6=ke,k6=ro;function Yr(e,t,i){if(!(this instanceof Yr))return new Yr(e,t,i);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(_6.toArray(t,i))}var D6=Yr;Yr.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),k6(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)},Yr.prototype.update=function(e,t){return this.inner.update(e,t),this},Yr.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},function(e){var t=e;t.utils=ke,t.common=ps,t.sha=zr,t.ripemd=q0,t.hmac=D6,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(Yi);function bs(e,t,i){return i={path:t,exports:{},require:function(n,r){return L6(n,r??i.path)}},e(i,i.exports),i.exports}function L6(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Nl=U0;function U0(e,t){if(!e)throw new Error(t||"Assertion failed")}U0.equal=function(e,t,i){if(e!=t)throw new Error(i||"Assertion failed: "+e+" != "+t)};var Bi=bs(function(e,t){var i=t;function n(a,l){if(Array.isArray(a))return a.slice();if(!a)return[];var d=[];if(typeof a!="string"){for(var g=0;g<a.length;g++)d[g]=a[g]|0;return d}if(l==="hex"){a=a.replace(/[^a-z0-9]+/ig,""),a.length%2!==0&&(a="0"+a);for(var g=0;g<a.length;g+=2)d.push(parseInt(a[g]+a[g+1],16))}else for(var g=0;g<a.length;g++){var y=a.charCodeAt(g),b=y>>8,M=y&255;b?d.push(b,M):d.push(M)}return d}i.toArray=n;function r(a){return a.length===1?"0"+a:a}i.zero2=r;function s(a){for(var l="",d=0;d<a.length;d++)l+=r(a[d].toString(16));return l}i.toHex=s,i.encode=function(a,l){return l==="hex"?s(a):a}}),ci=bs(function(e,t){var i=t;i.assert=Nl,i.toArray=Bi.toArray,i.zero2=Bi.zero2,i.toHex=Bi.toHex,i.encode=Bi.encode;function n(d,g,y){var b=new Array(Math.max(d.bitLength(),y)+1);b.fill(0);for(var M=1<<g+1,A=d.clone(),S=0;S<b.length;S++){var C,k=A.andln(M-1);A.isOdd()?(k>(M>>1)-1?C=(M>>1)-k:C=k,A.isubn(C)):C=0,b[S]=C,A.iushrn(1)}return b}i.getNAF=n;function r(d,g){var y=[[],[]];d=d.clone(),g=g.clone();for(var b=0,M=0,A;d.cmpn(-b)>0||g.cmpn(-M)>0;){var S=d.andln(3)+b&3,C=g.andln(3)+M&3;S===3&&(S=-1),C===3&&(C=-1);var k;S&1?(A=d.andln(7)+b&7,(A===3||A===5)&&C===2?k=-S:k=S):k=0,y[0].push(k);var N;C&1?(A=g.andln(7)+M&7,(A===3||A===5)&&S===2?N=-C:N=C):N=0,y[1].push(N),2*b===k+1&&(b=1-b),2*M===N+1&&(M=1-M),d.iushrn(1),g.iushrn(1)}return y}i.getJSF=r;function s(d,g,y){var b="_"+g;d.prototype[g]=function(){return this[b]!==void 0?this[b]:this[b]=y.call(this)}}i.cachedProperty=s;function a(d){return typeof d=="string"?i.toArray(d,"hex"):d}i.parseBytes=a;function l(d){return new Te(d,"hex","le")}i.intFromLE=l}),bo=ci.getNAF,P6=ci.getJSF,Yo=ci.assert;function On(e,t){this.type=e,this.p=new Te(t.p,16),this.red=t.prime?Te.red(t.prime):Te.mont(this.p),this.zero=new Te(0).toRed(this.red),this.one=new Te(1).toRed(this.red),this.two=new Te(2).toRed(this.red),this.n=t.n&&new Te(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Er=On;On.prototype.point=function(){throw new Error("Not implemented")},On.prototype.validate=function(){throw new Error("Not implemented")},On.prototype._fixedNafMul=function(e,t){Yo(e.precomputed);var i=e._getDoubles(),n=bo(t,1,this._bitLength),r=(1<<i.step+1)-(i.step%2===0?2:1);r/=3;var s=[],a,l;for(a=0;a<n.length;a+=i.step){l=0;for(var d=a+i.step-1;d>=a;d--)l=(l<<1)+n[d];s.push(l)}for(var g=this.jpoint(null,null,null),y=this.jpoint(null,null,null),b=r;b>0;b--){for(a=0;a<s.length;a++)l=s[a],l===b?y=y.mixedAdd(i.points[a]):l===-b&&(y=y.mixedAdd(i.points[a].neg()));g=g.add(y)}return g.toP()},On.prototype._wnafMul=function(e,t){var i=4,n=e._getNAFPoints(i);i=n.wnd;for(var r=n.points,s=bo(t,i,this._bitLength),a=this.jpoint(null,null,null),l=s.length-1;l>=0;l--){for(var d=0;l>=0&&s[l]===0;l--)d++;if(l>=0&&d++,a=a.dblp(d),l<0)break;var g=s[l];Yo(g!==0),e.type==="affine"?g>0?a=a.mixedAdd(r[g-1>>1]):a=a.mixedAdd(r[-g-1>>1].neg()):g>0?a=a.add(r[g-1>>1]):a=a.add(r[-g-1>>1].neg())}return e.type==="affine"?a.toP():a},On.prototype._wnafMulAdd=function(e,t,i,n,r){var s=this._wnafT1,a=this._wnafT2,l=this._wnafT3,d=0,g,y,b;for(g=0;g<n;g++){b=t[g];var M=b._getNAFPoints(e);s[g]=M.wnd,a[g]=M.points}for(g=n-1;g>=1;g-=2){var A=g-1,S=g;if(s[A]!==1||s[S]!==1){l[A]=bo(i[A],s[A],this._bitLength),l[S]=bo(i[S],s[S],this._bitLength),d=Math.max(l[A].length,d),d=Math.max(l[S].length,d);continue}var C=[t[A],null,null,t[S]];t[A].y.cmp(t[S].y)===0?(C[1]=t[A].add(t[S]),C[2]=t[A].toJ().mixedAdd(t[S].neg())):t[A].y.cmp(t[S].y.redNeg())===0?(C[1]=t[A].toJ().mixedAdd(t[S]),C[2]=t[A].add(t[S].neg())):(C[1]=t[A].toJ().mixedAdd(t[S]),C[2]=t[A].toJ().mixedAdd(t[S].neg()));var k=[-3,-1,-5,-7,0,7,5,1,3],N=P6(i[A],i[S]);for(d=Math.max(N[0].length,d),l[A]=new Array(d),l[S]=new Array(d),y=0;y<d;y++){var D=N[0][y]|0,B=N[1][y]|0;l[A][y]=k[(D+1)*3+(B+1)],l[S][y]=0,a[A]=C}}var P=this.jpoint(null,null,null),z=this._wnafT4;for(g=d;g>=0;g--){for(var W=0;g>=0;){var Y=!0;for(y=0;y<n;y++)z[y]=l[y][g]|0,z[y]!==0&&(Y=!1);if(!Y)break;W++,g--}if(g>=0&&W++,P=P.dblp(W),g<0)break;for(y=0;y<n;y++){var Z=z[y];Z!==0&&(Z>0?b=a[y][Z-1>>1]:Z<0&&(b=a[y][-Z-1>>1].neg()),b.type==="affine"?P=P.mixedAdd(b):P=P.add(b))}}for(g=0;g<n;g++)a[g]=null;return r?P:P.toP()};function vi(e,t){this.curve=e,this.type=t,this.precomputed=null}On.BasePoint=vi,vi.prototype.eq=function(){throw new Error("Not implemented")},vi.prototype.validate=function(){return this.curve.validate(this)},On.prototype.decodePoint=function(e,t){e=ci.toArray(e,t);var i=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*i){e[0]===6?Yo(e[e.length-1]%2===0):e[0]===7&&Yo(e[e.length-1]%2===1);var n=this.point(e.slice(1,1+i),e.slice(1+i,1+2*i));return n}else if((e[0]===2||e[0]===3)&&e.length-1===i)return this.pointFromX(e.slice(1,1+i),e[0]===3);throw new Error("Unknown point format")},vi.prototype.encodeCompressed=function(e){return this.encode(e,!0)},vi.prototype._encode=function(e){var t=this.curve.p.byteLength(),i=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",t))},vi.prototype.encode=function(e,t){return ci.encode(this._encode(t),e)},vi.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},vi.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1},vi.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],n=this,r=0;r<t;r+=e){for(var s=0;s<e;s++)n=n.dbl();i.push(n)}return{step:e,points:i}},vi.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],i=(1<<e)-1,n=i===1?null:this.dbl(),r=1;r<i;r++)t[r]=t[r-1].add(n);return{wnd:e,points:t}},vi.prototype._getBeta=function(){return null},vi.prototype.dblp=function(e){for(var t=this,i=0;i<e;i++)t=t.dbl();return t};var _l=bs(function(e){typeof Object.create=="function"?e.exports=function(t,i){i&&(t.super_=i,t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(t,i){if(i){t.super_=i;var n=function(){};n.prototype=i.prototype,t.prototype=new n,t.prototype.constructor=t}}}),z6=ci.assert;function Ai(e){Er.call(this,"short",e),this.a=new Te(e.a,16).toRed(this.red),this.b=new Te(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}_l(Ai,Er);var R6=Ai;Ai.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,i;if(e.beta)t=new Te(e.beta,16).toRed(this.red);else{var n=this._getEndoRoots(this.p);t=n[0].cmp(n[1])<0?n[0]:n[1],t=t.toRed(this.red)}if(e.lambda)i=new Te(e.lambda,16);else{var r=this._getEndoRoots(this.n);this.g.mul(r[0]).x.cmp(this.g.x.redMul(t))===0?i=r[0]:(i=r[1],z6(this.g.mul(i).x.cmp(this.g.x.redMul(t))===0))}var s;return e.basis?s=e.basis.map(function(a){return{a:new Te(a.a,16),b:new Te(a.b,16)}}):s=this._getEndoBasis(i),{beta:t,lambda:i,basis:s}}},Ai.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Te.mont(e),i=new Te(2).toRed(t).redInvm(),n=i.redNeg(),r=new Te(3).toRed(t).redNeg().redSqrt().redMul(i),s=n.redAdd(r).fromRed(),a=n.redSub(r).fromRed();return[s,a]},Ai.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=e,n=this.n.clone(),r=new Te(1),s=new Te(0),a=new Te(0),l=new Te(1),d,g,y,b,M,A,S,C=0,k,N;i.cmpn(0)!==0;){var D=n.div(i);k=n.sub(D.mul(i)),N=a.sub(D.mul(r));var B=l.sub(D.mul(s));if(!y&&k.cmp(t)<0)d=S.neg(),g=r,y=k.neg(),b=N;else if(y&&++C===2)break;S=k,n=i,i=k,a=r,r=N,l=s,s=B}M=k.neg(),A=N;var P=y.sqr().add(b.sqr()),z=M.sqr().add(A.sqr());return z.cmp(P)>=0&&(M=d,A=g),y.negative&&(y=y.neg(),b=b.neg()),M.negative&&(M=M.neg(),A=A.neg()),[{a:y,b},{a:M,b:A}]},Ai.prototype._endoSplit=function(e){var t=this.endo.basis,i=t[0],n=t[1],r=n.b.mul(e).divRound(this.n),s=i.b.neg().mul(e).divRound(this.n),a=r.mul(i.a),l=s.mul(n.a),d=r.mul(i.b),g=s.mul(n.b),y=e.sub(a).sub(l),b=d.add(g).neg();return{k1:y,k2:b}},Ai.prototype.pointFromX=function(e,t){e=new Te(e,16),e.red||(e=e.toRed(this.red));var i=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),n=i.redSqrt();if(n.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var r=n.fromRed().isOdd();return(t&&!r||!t&&r)&&(n=n.redNeg()),this.point(e,n)},Ai.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,i=e.y,n=this.a.redMul(t),r=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return i.redSqr().redISub(r).cmpn(0)===0},Ai.prototype._endoWnafMulAdd=function(e,t,i){for(var n=this._endoWnafT1,r=this._endoWnafT2,s=0;s<e.length;s++){var a=this._endoSplit(t[s]),l=e[s],d=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),d=d.neg(!0)),n[s*2]=l,n[s*2+1]=d,r[s*2]=a.k1,r[s*2+1]=a.k2}for(var g=this._wnafMulAdd(1,n,r,s*2,i),y=0;y<s*2;y++)n[y]=null,r[y]=null;return g};function It(e,t,i,n){Er.BasePoint.call(this,e,"affine"),t===null&&i===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Te(t,16),this.y=new Te(i,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}_l(It,Er.BasePoint),Ai.prototype.point=function(e,t,i){return new It(this,e,t,i)},Ai.prototype.pointFromJSON=function(e,t){return It.fromJSON(this,e,t)},It.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var i=this.curve,n=function(r){return i.point(r.x.redMul(i.endo.beta),r.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},It.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},It.fromJSON=function(e,t,i){typeof t=="string"&&(t=JSON.parse(t));var n=e.point(t[0],t[1],i);if(!t[2])return n;function r(a){return e.point(a[0],a[1],i)}var s=t[2];return n.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[n].concat(s.doubles.points.map(r))},naf:s.naf&&{wnd:s.naf.wnd,points:[n].concat(s.naf.points.map(r))}},n},It.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},It.prototype.isInfinity=function(){return this.inf},It.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var i=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,n)},It.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,i=this.x.redSqr(),n=e.redInvm(),r=i.redAdd(i).redIAdd(i).redIAdd(t).redMul(n),s=r.redSqr().redISub(this.x.redAdd(this.x)),a=r.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,a)},It.prototype.getX=function(){return this.x.fromRed()},It.prototype.getY=function(){return this.y.fromRed()},It.prototype.mul=function(e){return e=new Te(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},It.prototype.mulAdd=function(e,t,i){var n=[this,t],r=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,r):this.curve._wnafMulAdd(1,n,r,2)},It.prototype.jmulAdd=function(e,t,i){var n=[this,t],r=[e,i];return this.curve.endo?this.curve._endoWnafMulAdd(n,r,!0):this.curve._wnafMulAdd(1,n,r,2,!0)},It.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)},It.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var i=this.precomputed,n=function(r){return r.neg()};t.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(n)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(n)}}}return t},It.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function _t(e,t,i,n){Er.BasePoint.call(this,e,"jacobian"),t===null&&i===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Te(0)):(this.x=new Te(t,16),this.y=new Te(i,16),this.z=new Te(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}_l(_t,Er.BasePoint),Ai.prototype.jpoint=function(e,t,i){return new _t(this,e,t,i)},_t.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),i=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(i,n)},_t.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},_t.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),i=this.z.redSqr(),n=this.x.redMul(t),r=e.x.redMul(i),s=this.y.redMul(t.redMul(e.z)),a=e.y.redMul(i.redMul(this.z)),l=n.redSub(r),d=s.redSub(a);if(l.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=l.redSqr(),y=g.redMul(l),b=n.redMul(g),M=d.redSqr().redIAdd(y).redISub(b).redISub(b),A=d.redMul(b.redISub(M)).redISub(s.redMul(y)),S=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(M,A,S)},_t.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),i=this.x,n=e.x.redMul(t),r=this.y,s=e.y.redMul(t).redMul(this.z),a=i.redSub(n),l=r.redSub(s);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),g=d.redMul(a),y=i.redMul(d),b=l.redSqr().redIAdd(g).redISub(y).redISub(y),M=l.redMul(y.redISub(b)).redISub(r.redMul(g)),A=this.z.redMul(a);return this.curve.jpoint(b,M,A)},_t.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var i=this;for(t=0;t<e;t++)i=i.dbl();return i}var n=this.curve.a,r=this.curve.tinv,s=this.x,a=this.y,l=this.z,d=l.redSqr().redSqr(),g=a.redAdd(a);for(t=0;t<e;t++){var y=s.redSqr(),b=g.redSqr(),M=b.redSqr(),A=y.redAdd(y).redIAdd(y).redIAdd(n.redMul(d)),S=s.redMul(b),C=A.redSqr().redISub(S.redAdd(S)),k=S.redISub(C),N=A.redMul(k);N=N.redIAdd(N).redISub(M);var D=g.redMul(l);t+1<e&&(d=d.redMul(M)),s=C,l=D,g=N}return this.curve.jpoint(s,g.redMul(r),l)},_t.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},_t.prototype._zeroDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),r=this.y.redSqr(),s=r.redSqr(),a=this.x.redAdd(r).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var l=n.redAdd(n).redIAdd(n),d=l.redSqr().redISub(a).redISub(a),g=s.redIAdd(s);g=g.redIAdd(g),g=g.redIAdd(g),e=d,t=l.redMul(a.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),b=this.y.redSqr(),M=b.redSqr(),A=this.x.redAdd(b).redSqr().redISub(y).redISub(M);A=A.redIAdd(A);var S=y.redAdd(y).redIAdd(y),C=S.redSqr(),k=M.redIAdd(M);k=k.redIAdd(k),k=k.redIAdd(k),e=C.redISub(A).redISub(A),t=S.redMul(A.redISub(e)).redISub(k),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(e,t,i)},_t.prototype._threeDbl=function(){var e,t,i;if(this.zOne){var n=this.x.redSqr(),r=this.y.redSqr(),s=r.redSqr(),a=this.x.redAdd(r).redSqr().redISub(n).redISub(s);a=a.redIAdd(a);var l=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),d=l.redSqr().redISub(a).redISub(a);e=d;var g=s.redIAdd(s);g=g.redIAdd(g),g=g.redIAdd(g),t=l.redMul(a.redISub(d)).redISub(g),i=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),b=this.y.redSqr(),M=this.x.redMul(b),A=this.x.redSub(y).redMul(this.x.redAdd(y));A=A.redAdd(A).redIAdd(A);var S=M.redIAdd(M);S=S.redIAdd(S);var C=S.redAdd(S);e=A.redSqr().redISub(C),i=this.y.redAdd(this.z).redSqr().redISub(b).redISub(y);var k=b.redSqr();k=k.redIAdd(k),k=k.redIAdd(k),k=k.redIAdd(k),t=A.redMul(S.redISub(e)).redISub(k)}return this.curve.jpoint(e,t,i)},_t.prototype._dbl=function(){var e=this.curve.a,t=this.x,i=this.y,n=this.z,r=n.redSqr().redSqr(),s=t.redSqr(),a=i.redSqr(),l=s.redAdd(s).redIAdd(s).redIAdd(e.redMul(r)),d=t.redAdd(t);d=d.redIAdd(d);var g=d.redMul(a),y=l.redSqr().redISub(g.redAdd(g)),b=g.redISub(y),M=a.redSqr();M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var A=l.redMul(b).redISub(M),S=i.redAdd(i).redMul(n);return this.curve.jpoint(y,A,S)},_t.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),i=this.z.redSqr(),n=t.redSqr(),r=e.redAdd(e).redIAdd(e),s=r.redSqr(),a=this.x.redAdd(t).redSqr().redISub(e).redISub(n);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(s);var l=a.redSqr(),d=n.redIAdd(n);d=d.redIAdd(d),d=d.redIAdd(d),d=d.redIAdd(d);var g=r.redIAdd(a).redSqr().redISub(s).redISub(l).redISub(d),y=t.redMul(g);y=y.redIAdd(y),y=y.redIAdd(y);var b=this.x.redMul(l).redISub(y);b=b.redIAdd(b),b=b.redIAdd(b);var M=this.y.redMul(g.redMul(d.redISub(g)).redISub(a.redMul(l)));M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var A=this.z.redAdd(a).redSqr().redISub(i).redISub(l);return this.curve.jpoint(b,M,A)},_t.prototype.mul=function(e,t){return e=new Te(e,t),this.curve._wnafMul(this,e)},_t.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),i=e.z.redSqr();if(this.x.redMul(i).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var n=t.redMul(this.z),r=i.redMul(e.z);return this.y.redMul(r).redISub(e.y.redMul(n)).cmpn(0)===0},_t.prototype.eqXToP=function(e){var t=this.z.redSqr(),i=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(i)===0)return!0;for(var n=e.clone(),r=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(r),this.x.cmp(i)===0)return!0}},_t.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},_t.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ao=bs(function(e,t){var i=t;i.base=Er,i.short=R6,i.mont=null,i.edwards=null}),So=bs(function(e,t){var i=t,n=ci.assert;function r(l){l.type==="short"?this.curve=new Ao.short(l):l.type==="edwards"?this.curve=new Ao.edwards(l):this.curve=new Ao.mont(l),this.g=this.curve.g,this.n=this.curve.n,this.hash=l.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}i.PresetCurve=r;function s(l,d){Object.defineProperty(i,l,{configurable:!0,enumerable:!0,get:function(){var g=new r(d);return Object.defineProperty(i,l,{configurable:!0,enumerable:!0,value:g}),g}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Yi.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Yi.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Yi.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Yi.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Yi.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Yi.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Yi.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var a;try{a=null.crash()}catch{a=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Yi.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",a]})});function Bn(e){if(!(this instanceof Bn))return new Bn(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=Bi.toArray(e.entropy,e.entropyEnc||"hex"),i=Bi.toArray(e.nonce,e.nonceEnc||"hex"),n=Bi.toArray(e.pers,e.persEnc||"hex");Nl(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,i,n)}var Gd=Bn;Bn.prototype._init=function(e,t,i){var n=e.concat(t).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var r=0;r<this.V.length;r++)this.K[r]=0,this.V[r]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},Bn.prototype._hmac=function(){return new Yi.hmac(this.hash,this.K)},Bn.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},Bn.prototype.reseed=function(e,t,i,n){typeof t!="string"&&(n=i,i=t,t=null),e=Bi.toArray(e,t),i=Bi.toArray(i,n),Nl(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(i||[])),this._reseed=1},Bn.prototype.generate=function(e,t,i,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(n=i,i=t,t=null),i&&(i=Bi.toArray(i,n||"hex"),this._update(i));for(var r=[];r.length<e;)this.V=this._hmac().update(this.V).digest(),r=r.concat(this.V);var s=r.slice(0,e);return this._update(i),this._reseed++,Bi.encode(s,t)};var ec=ci.assert;function Rt(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var tc=Rt;Rt.fromPublic=function(e,t,i){return t instanceof Rt?t:new Rt(e,{pub:t,pubEnc:i})},Rt.fromPrivate=function(e,t,i){return t instanceof Rt?t:new Rt(e,{priv:t,privEnc:i})},Rt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Rt.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},Rt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv},Rt.prototype._importPrivate=function(e,t){this.priv=new Te(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Rt.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?ec(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&ec(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)},Rt.prototype.derive=function(e){return e.validate()||ec(e.validate(),"public point not validated"),e.mul(this.priv).getX()},Rt.prototype.sign=function(e,t,i){return this.ec.sign(e,this,t,i)},Rt.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},Rt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var O6=ci.assert;function Sa(e,t){if(e instanceof Sa)return e;this._importDER(e,t)||(O6(e.r&&e.s,"Signature without r or s"),this.r=new Te(e.r,16),this.s=new Te(e.s,16),e.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var vo=Sa;function B6(){this.place=0}function ic(e,t){var i=e[t.place++];if(!(i&128))return i;var n=i&15;if(n===0||n>4)return!1;for(var r=0,s=0,a=t.place;s<n;s++,a++)r<<=8,r|=e[a],r>>>=0;return r<=127?!1:(t.place=a,r)}function Zd(e){for(var t=0,i=e.length-1;!e[t]&&!(e[t+1]&128)&&t<i;)t++;return t===0?e:e.slice(t)}Sa.prototype._importDER=function(e,t){e=ci.toArray(e,t);var i=new B6;if(e[i.place++]!==48)return!1;var n=ic(e,i);if(n===!1||n+i.place!==e.length||e[i.place++]!==2)return!1;var r=ic(e,i);if(r===!1)return!1;var s=e.slice(i.place,r+i.place);if(i.place+=r,e[i.place++]!==2)return!1;var a=ic(e,i);if(a===!1||e.length!==a+i.place)return!1;var l=e.slice(i.place,a+i.place);if(s[0]===0)if(s[1]&128)s=s.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new Te(s),this.s=new Te(l),this.recoveryParam=null,!0};function nc(e,t){if(t<128){e.push(t);return}var i=1+(Math.log(t)/Math.LN2>>>3);for(e.push(i|128);--i;)e.push(t>>>(i<<3)&255);e.push(t)}Sa.prototype.toDER=function(e){var t=this.r.toArray(),i=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),i[0]&128&&(i=[0].concat(i)),t=Zd(t),i=Zd(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var n=[2];nc(n,t.length),n=n.concat(t),n.push(2),nc(n,i.length);var r=n.concat(i),s=[48];return nc(s,r.length),s=s.concat(r),ci.encode(s,e)};var q6=function(){throw new Error("unsupported")},W0=ci.assert;function Mi(e){if(!(this instanceof Mi))return new Mi(e);typeof e=="string"&&(W0(Object.prototype.hasOwnProperty.call(So,e),"Unknown curve "+e),e=So[e]),e instanceof So.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var F6=Mi;Mi.prototype.keyPair=function(e){return new tc(this,e)},Mi.prototype.keyFromPrivate=function(e,t){return tc.fromPrivate(this,e,t)},Mi.prototype.keyFromPublic=function(e,t){return tc.fromPublic(this,e,t)},Mi.prototype.genKeyPair=function(e){e||(e={});for(var t=new Gd({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||q6(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),n=this.n.sub(new Te(2));;){var r=new Te(t.generate(i));if(!(r.cmp(n)>0))return r.iaddn(1),this.keyFromPrivate(r)}},Mi.prototype._truncateToN=function(e,t){var i=e.byteLength()*8-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},Mi.prototype.sign=function(e,t,i,n){typeof i=="object"&&(n=i,i=null),n||(n={}),t=this.keyFromPrivate(t,i),e=this._truncateToN(new Te(e,16));for(var r=this.n.byteLength(),s=t.getPrivate().toArray("be",r),a=e.toArray("be",r),l=new Gd({hash:this.hash,entropy:s,nonce:a,pers:n.pers,persEnc:n.persEnc||"utf8"}),d=this.n.sub(new Te(1)),g=0;;g++){var y=n.k?n.k(g):new Te(l.generate(this.n.byteLength()));if(y=this._truncateToN(y,!0),!(y.cmpn(1)<=0||y.cmp(d)>=0)){var b=this.g.mul(y);if(!b.isInfinity()){var M=b.getX(),A=M.umod(this.n);if(A.cmpn(0)!==0){var S=y.invm(this.n).mul(A.mul(t.getPrivate()).iadd(e));if(S=S.umod(this.n),S.cmpn(0)!==0){var C=(b.getY().isOdd()?1:0)|(M.cmp(A)!==0?2:0);return n.canonical&&S.cmp(this.nh)>0&&(S=this.n.sub(S),C^=1),new vo({r:A,s:S,recoveryParam:C})}}}}}},Mi.prototype.verify=function(e,t,i,n){e=this._truncateToN(new Te(e,16)),i=this.keyFromPublic(i,n),t=new vo(t,"hex");var r=t.r,s=t.s;if(r.cmpn(1)<0||r.cmp(this.n)>=0||s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a=s.invm(this.n),l=a.mul(e).umod(this.n),d=a.mul(r).umod(this.n),g;return this.curve._maxwellTrick?(g=this.g.jmulAdd(l,i.getPublic(),d),g.isInfinity()?!1:g.eqXToP(r)):(g=this.g.mulAdd(l,i.getPublic(),d),g.isInfinity()?!1:g.getX().umod(this.n).cmp(r)===0)},Mi.prototype.recoverPubKey=function(e,t,i,n){W0((3&i)===i,"The recovery param is more than two bits"),t=new vo(t,n);var r=this.n,s=new Te(e),a=t.r,l=t.s,d=i&1,g=i>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?a=this.curve.pointFromX(a.add(this.curve.n),d):a=this.curve.pointFromX(a,d);var y=t.r.invm(r),b=r.sub(s).mul(y).umod(r),M=l.mul(y).umod(r);return this.g.mulAdd(b,a,M)},Mi.prototype.getKeyRecoveryParam=function(e,t,i,n){if(t=new vo(t,n),t.recoveryParam!==null)return t.recoveryParam;for(var r=0;r<4;r++){var s;try{s=this.recoverPubKey(e,t,r)}catch{continue}if(s.eq(i))return r}throw new Error("Unable to find valid recovery factor")};var U6=bs(function(e,t){var i=t;i.version="6.5.4",i.utils=ci,i.rand=function(){throw new Error("unsupported")},i.curve=Ao,i.curves=So,i.ec=F6,i.eddsa=null}),W6=U6.ec;const $6="signing-key/5.7.0",_c=new Lt($6);let rc=null;function Rn(){return rc||(rc=new W6("secp256k1")),rc}class H6{constructor(t){js(this,"curve","secp256k1"),js(this,"privateKey",Vt(t)),Cx(this.privateKey)!==32&&_c.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const i=Rn().keyFromPrivate(yt(this.privateKey));js(this,"publicKey","0x"+i.getPublic(!1,"hex")),js(this,"compressedPublicKey","0x"+i.getPublic(!0,"hex")),js(this,"_isSigningKey",!0)}_addPoint(t){const i=Rn().keyFromPublic(yt(this.publicKey)),n=Rn().keyFromPublic(yt(t));return"0x"+i.pub.add(n.pub).encodeCompressed("hex")}signDigest(t){const i=Rn().keyFromPrivate(yt(this.privateKey)),n=yt(t);n.length!==32&&_c.throwArgumentError("bad digest length","digest",t);const r=i.sign(n,{canonical:!0});return g0({recoveryParam:r.recoveryParam,r:tn("0x"+r.r.toString(16),32),s:tn("0x"+r.s.toString(16),32)})}computeSharedSecret(t){const i=Rn().keyFromPrivate(yt(this.privateKey)),n=Rn().keyFromPublic(yt($0(t)));return tn("0x"+i.derive(n.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}}function Y6(e,t){const i=g0(t),n={r:yt(i.r),s:yt(i.s)};return"0x"+Rn().recoverPubKey(yt(e),n,i.recoveryParam).encode("hex",!1)}function $0(e,t){const i=yt(e);return i.length===32?new H6(i).publicKey:i.length===33?"0x"+Rn().keyFromPublic(i).getPublic(!1,"hex"):i.length===65?Vt(i):_c.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Jd;(function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"})(Jd||(Jd={}));function Q6(e){const t=$0(e);return r4(Rd(Tl(Rd(t,1)),12))}function V6(e,t){return Q6(Y6(yt(e),t))}const K6="https://rpc.walletconnect.com/v1";async function G6(e,t,i,n,r,s){switch(i.t){case"eip191":return Z6(e,t,i.s);case"eip1271":return await J6(e,t,i.s,n,r,s);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${i.t}`)}}function Z6(e,t,i){return V6(A0(t),i).toLowerCase()===e.toLowerCase()}async function J6(e,t,i,n,r,s){try{const a="0x1626ba7e",l="0000000000000000000000000000000000000000000000000000000000000040",d="0000000000000000000000000000000000000000000000000000000000000041",g=i.substring(2),y=A0(t).substring(2),b=a+y+l+d+g,M=await fetch(`${s||K6}/?chainId=${n}&projectId=${r}`,{method:"POST",body:JSON.stringify({id:X6(),jsonrpc:"2.0",method:"eth_call",params:[{to:e,data:b},"latest"]})}),{result:A}=await M.json();return A?A.slice(0,a.length).toLowerCase()===a.toLowerCase():!1}catch(a){return console.error("isValidEip1271Signature: ",a),!1}}function X6(){return Date.now()+Math.floor(Math.random()*1e3)}var ew=Object.defineProperty,tw=Object.defineProperties,iw=Object.getOwnPropertyDescriptors,Xd=Object.getOwnPropertySymbols,nw=Object.prototype.hasOwnProperty,rw=Object.prototype.propertyIsEnumerable,eh=(e,t,i)=>t in e?ew(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,sw=(e,t)=>{for(var i in t||(t={}))nw.call(t,i)&&eh(e,i,t[i]);if(Xd)for(var i of Xd(t))rw.call(t,i)&&eh(e,i,t[i]);return e},ow=(e,t)=>tw(e,iw(t));const aw="did:pkh:",kl=e=>e==null?void 0:e.split(":"),H0=e=>{const t=e&&kl(e);if(t)return e.includes(aw)?t[3]:t[1]},th=e=>{const t=e&&kl(e);if(t)return t[2]+":"+t[3]},Qo=e=>{const t=e&&kl(e);if(t)return t.pop()};async function ih(e){const{cacao:t,projectId:i}=e,{s:n,p:r}=t,s=Y0(r,r.iss),a=Qo(r.iss);return await G6(a,s,n,H0(r.iss),i)}const Y0=(e,t)=>{const i=`${e.domain} wants you to sign in with your Ethereum account:`,n=Qo(t);if(!e.aud&&!e.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let r=e.statement||void 0;const s=`URI: ${e.aud||e.uri}`,a=`Version: ${e.version}`,l=`Chain ID: ${H0(t)}`,d=`Nonce: ${e.nonce}`,g=`Issued At: ${e.iat}`,y=e.exp?`Expiration Time: ${e.exp}`:void 0,b=e.nbf?`Not Before: ${e.nbf}`:void 0,M=e.requestId?`Request ID: ${e.requestId}`:void 0,A=e.resources?`Resources:${e.resources.map(C=>`
- ${C}`).join("")}`:void 0,S=jo(e.resources);if(S){const C=$s(S);r=pw(r,C)}return[i,n,"",r,"",s,a,l,d,g,y,b,M,A].filter(C=>C!=null).join(`
`)};function cw(e){return Buffer.from(JSON.stringify(e)).toString("base64")}function lw(e){return JSON.parse(Buffer.from(e,"base64").toString("utf-8"))}function Ar(e){if(!e)throw new Error("No recap provided, value is undefined");if(!e.att)throw new Error("No `att` property found");const t=Object.keys(e.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(i=>{const n=e.att[i];if(Array.isArray(n))throw new Error(`Resource must be an object: ${i}`);if(typeof n!="object")throw new Error(`Resource must be an object: ${i}`);if(!Object.keys(n).length)throw new Error(`Resource object is empty: ${i}`);Object.keys(n).forEach(r=>{const s=n[r];if(!Array.isArray(s))throw new Error(`Ability limits ${r} must be an array of objects, found: ${s}`);if(!s.length)throw new Error(`Value of ${r} is empty array, must be an array with objects`);s.forEach(a=>{if(typeof a!="object")throw new Error(`Ability limits (${r}) must be an array of objects, found: ${a}`)})})})}function dw(e,t,i,n={}){return i==null||i.sort((r,s)=>r.localeCompare(s)),{att:{[e]:hw(t,i,n)}}}function hw(e,t,i={}){t=t==null?void 0:t.sort((r,s)=>r.localeCompare(s));const n=t.map(r=>({[`${e}/${r}`]:[i]}));return Object.assign({},...n)}function Q0(e){return Ar(e),`urn:recap:${cw(e).replace(/=/g,"")}`}function $s(e){const t=lw(e.replace("urn:recap:",""));return Ar(t),t}function uw(e,t,i){const n=dw(e,t,i);return Q0(n)}function fw(e){return e&&e.includes("urn:recap:")}function gw(e,t){const i=$s(e),n=$s(t),r=mw(i,n);return Q0(r)}function mw(e,t){Ar(e),Ar(t);const i=Object.keys(e.att).concat(Object.keys(t.att)).sort((r,s)=>r.localeCompare(s)),n={att:{}};return i.forEach(r=>{var s,a;Object.keys(((s=e.att)==null?void 0:s[r])||{}).concat(Object.keys(((a=t.att)==null?void 0:a[r])||{})).sort((l,d)=>l.localeCompare(d)).forEach(l=>{var d,g;n.att[r]=ow(sw({},n.att[r]),{[l]:((d=e.att[r])==null?void 0:d[l])||((g=t.att[r])==null?void 0:g[l])})})}),n}function pw(e="",t){Ar(t);const i="I further authorize the stated URI to perform the following actions on my behalf: ";if(e.includes(i))return e;const n=[];let r=0;Object.keys(t.att).forEach(l=>{const d=Object.keys(t.att[l]).map(b=>({ability:b.split("/")[0],action:b.split("/")[1]}));d.sort((b,M)=>b.action.localeCompare(M.action));const g={};d.forEach(b=>{g[b.ability]||(g[b.ability]=[]),g[b.ability].push(b.action)});const y=Object.keys(g).map(b=>(r++,`(${r}) '${b}': '${g[b].join("', '")}' for '${l}'.`));n.push(y.join(", ").replace(".,","."))});const s=n.join(" "),a=`${i}${s}`;return`${e?e+" ":""}${a}`}function nh(e){var t;const i=$s(e);Ar(i);const n=(t=i.att)==null?void 0:t.eip155;return n?Object.keys(n).map(r=>r.split("/")[1]):[]}function rh(e){const t=$s(e);Ar(t);const i=[];return Object.values(t.att).forEach(n=>{Object.values(n).forEach(r=>{var s;(s=r==null?void 0:r[0])!=null&&s.chains&&i.push(r[0].chains)})}),[...new Set(i.flat())]}function jo(e){if(!e)return;const t=e==null?void 0:e[e.length-1];return fw(t)?t:void 0}var yw=Object.defineProperty,bw=Object.defineProperties,vw=Object.getOwnPropertyDescriptors,sh=Object.getOwnPropertySymbols,xw=Object.prototype.hasOwnProperty,ww=Object.prototype.propertyIsEnumerable,oh=(e,t,i)=>t in e?yw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Mw=(e,t)=>{for(var i in t||(t={}))xw.call(t,i)&&oh(e,i,t[i]);if(sh)for(var i of sh(t))ww.call(t,i)&&oh(e,i,t[i]);return e},Aw=(e,t)=>bw(e,vw(t));const V0="base10",Ut="base16",kc="base64pad",Dl="utf8",K0=0,jn=1,Sw=0,ah=1,Dc=12,Ll=32;function jw(){const e=vu.generateKeyPair();return{privateKey:ji(e.secretKey,Ut),publicKey:ji(e.publicKey,Ut)}}function Lc(){const e=xu.randomBytes(Ll);return ji(e,Ut)}function Iw(e,t){const i=vu.sharedKey(Oi(e,Ut),Oi(t,Ut),!0),n=new hm(ia.SHA256,i).expand(Ll);return ji(n,Ut)}function Io(e){const t=ia.hash(Oi(e,Ut));return ji(t,Ut)}function wn(e){const t=ia.hash(Oi(e,Dl));return ji(t,Ut)}function Tw(e){return Oi(`${e}`,V0)}function so(e){return Number(ji(e,V0))}function Cw(e){const t=Tw(typeof e.type<"u"?e.type:K0);if(so(t)===jn&&typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const i=typeof e.senderPublicKey<"u"?Oi(e.senderPublicKey,Ut):void 0,n=typeof e.iv<"u"?Oi(e.iv,Ut):xu.randomBytes(Dc),r=new wu.ChaCha20Poly1305(Oi(e.symKey,Ut)).seal(n,Oi(e.message,Dl));return Nw({type:t,sealed:r,iv:n,senderPublicKey:i})}function Ew(e){const t=new wu.ChaCha20Poly1305(Oi(e.symKey,Ut)),{sealed:i,iv:n}=Vo(e.encoded),r=t.open(n,i);if(r===null)throw new Error("Failed to decrypt");return ji(r,Dl)}function Nw(e){if(so(e.type)===jn){if(typeof e.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return ji(pd([e.type,e.senderPublicKey,e.iv,e.sealed]),kc)}return ji(pd([e.type,e.iv,e.sealed]),kc)}function Vo(e){const t=Oi(e,kc),i=t.slice(Sw,ah),n=ah;if(so(i)===jn){const l=n+Ll,d=l+Dc,g=t.slice(n,l),y=t.slice(l,d),b=t.slice(d);return{type:i,sealed:b,iv:y,senderPublicKey:g}}const r=n+Dc,s=t.slice(n,r),a=t.slice(r);return{type:i,sealed:a,iv:s}}function _w(e,t){const i=Vo(e);return G0({type:so(i.type),senderPublicKey:typeof i.senderPublicKey<"u"?ji(i.senderPublicKey,Ut):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function G0(e){const t=(e==null?void 0:e.type)||K0;if(t===jn){if(typeof(e==null?void 0:e.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(e==null?void 0:e.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:e==null?void 0:e.senderPublicKey,receiverPublicKey:e==null?void 0:e.receiverPublicKey}}function ch(e){return e.type===jn&&typeof e.senderPublicKey=="string"&&typeof e.receiverPublicKey=="string"}function kw(e){return new kf.ec("p256").keyFromPublic({x:Buffer.from(e.x,"base64").toString("hex"),y:Buffer.from(e.y,"base64").toString("hex")},"hex")}function Dw(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");const i=t.length%4;return i>0&&(t+="=".repeat(4-i)),t}function Lw(e){return Buffer.from(Dw(e),"base64")}function Pw(e,t){const[i,n,r]=e.split("."),s=Lw(r);if(s.length!==64)throw new Error("Invalid signature length");const a=s.slice(0,32).toString("hex"),l=s.slice(32,64).toString("hex"),d=`${i}.${n}`,g=new ia.SHA256().update(Buffer.from(d)).digest(),y=kw(t),b=Buffer.from(g).toString("hex"),M=y.verify(b,{r:a,s:l});if(!M)throw new Error("Invalid signature");const A=mc(e);return Aw(Mw({},A.payload),{isVerified:M})}const zw="irn";function Pc(e){return(e==null?void 0:e.relay)||{protocol:zw}}function Ls(e){const t=um[e];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${e}`);return t}var Rw=Object.defineProperty,Ow=Object.defineProperties,Bw=Object.getOwnPropertyDescriptors,lh=Object.getOwnPropertySymbols,qw=Object.prototype.hasOwnProperty,Fw=Object.prototype.propertyIsEnumerable,dh=(e,t,i)=>t in e?Rw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,hh=(e,t)=>{for(var i in t||(t={}))qw.call(t,i)&&dh(e,i,t[i]);if(lh)for(var i of lh(t))Fw.call(t,i)&&dh(e,i,t[i]);return e},Uw=(e,t)=>Ow(e,Bw(t));function Ww(e,t="-"){const i={},n="relay"+t;return Object.keys(e).forEach(r=>{if(r.startsWith(n)){const s=r.replace(n,""),a=e[r];i[s]=a}}),i}function uh(e){e=e.includes("wc://")?e.replace("wc://",""):e,e=e.includes("wc:")?e.replace("wc:",""):e;const t=e.indexOf(":"),i=e.indexOf("?")!==-1?e.indexOf("?"):void 0,n=e.substring(0,t),r=e.substring(t+1,i).split("@"),s=typeof i<"u"?e.substring(i):"",a=_o.parse(s),l=typeof a.methods=="string"?a.methods.split(","):void 0;return{protocol:n,topic:$w(r[0]),version:parseInt(r[1],10),symKey:a.symKey,relay:Ww(a),methods:l,expiryTimestamp:a.expiryTimestamp?parseInt(a.expiryTimestamp,10):void 0}}function $w(e){return e.startsWith("//")?e.substring(2):e}function Hw(e,t="-"){const i="relay",n={};return Object.keys(e).forEach(r=>{const s=i+t+r;e[r]&&(n[s]=e[r])}),n}function Yw(e){return`${e.protocol}:${e.topic}@${e.version}?`+_o.stringify(hh(Uw(hh({symKey:e.symKey},Hw(e.relay)),{expiryTimestamp:e.expiryTimestamp}),e.methods?{methods:e.methods.join(",")}:{}))}function vs(e){const t=[];return e.forEach(i=>{const[n,r]=i.split(":");t.push(`${n}:${r}`)}),t}function Qw(e){const t=[];return Object.values(e).forEach(i=>{t.push(...vs(i.accounts))}),t}function Vw(e,t){const i=[];return Object.values(e).forEach(n=>{vs(n.accounts).includes(t)&&i.push(...n.methods)}),i}function Kw(e,t){const i=[];return Object.values(e).forEach(n=>{vs(n.accounts).includes(t)&&i.push(...n.events)}),i}function Gw(e){const t={};return e==null||e.forEach(i=>{const[n,r]=i.split(":");t[n]||(t[n]={accounts:[],chains:[],events:[]}),t[n].accounts.push(i),t[n].chains.push(`${n}:${r}`)}),t}function fh(e,t){t=t.map(n=>n.replace("did:pkh:",""));const i=Gw(t);for(const[n,r]of Object.entries(i))r.methods?r.methods=px(r.methods,e):r.methods=e,r.events=["chainChanged","accountsChanged"];return i}const Zw={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Jw={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ee(e,t){const{message:i,code:n}=Jw[e];return{message:t?`${i} ${t}`:i,code:n}}function dt(e,t){const{message:i,code:n}=Zw[e];return{message:t?`${i} ${t}`:i,code:n}}function oo(e,t){return!!Array.isArray(e)}function Ko(e){return Object.getPrototypeOf(e)===Object.prototype&&Object.keys(e).length}function Gt(e){return typeof e>"u"}function xt(e,t){return t&&Gt(e)?!0:typeof e=="string"&&!!e.trim().length}function Pl(e,t){return typeof e=="number"&&!isNaN(e)}function Xw(e,t){const{requiredNamespaces:i}=t,n=Object.keys(e.namespaces),r=Object.keys(i);let s=!0;return gr(r,n)?(n.forEach(a=>{const{accounts:l,methods:d,events:g}=e.namespaces[a],y=vs(l),b=i[a];(!gr(o0(a,b),y)||!gr(b.methods,d)||!gr(b.events,g))&&(s=!1)}),s):!1}function Go(e){return xt(e,!1)&&e.includes(":")?e.split(":").length===2:!1}function e5(e){if(xt(e,!1)&&e.includes(":")){const t=e.split(":");if(t.length===3){const i=t[0]+":"+t[1];return!!t[2]&&Go(i)}}return!1}function t5(e){if(xt(e,!1))try{return typeof new URL(e)<"u"}catch{return!1}return!1}function i5(e){var t;return(t=e==null?void 0:e.proposer)==null?void 0:t.publicKey}function n5(e){return e==null?void 0:e.topic}function r5(e,t){let i=null;return xt(e==null?void 0:e.publicKey,!1)||(i=ee("MISSING_OR_INVALID",`${t} controller public key should be a string`)),i}function gh(e){let t=!0;return oo(e)?e.length&&(t=e.every(i=>xt(i,!1))):t=!1,t}function s5(e,t,i){let n=null;return oo(t)&&t.length?t.forEach(r=>{n||Go(r)||(n=dt("UNSUPPORTED_CHAINS",`${i}, chain ${r} should be a string and conform to "namespace:chainId" format`))}):Go(e)||(n=dt("UNSUPPORTED_CHAINS",`${i}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),n}function o5(e,t,i){let n=null;return Object.entries(e).forEach(([r,s])=>{if(n)return;const a=s5(r,o0(r,s),`${t} ${i}`);a&&(n=a)}),n}function a5(e,t){let i=null;return oo(e)?e.forEach(n=>{i||e5(n)||(i=dt("UNSUPPORTED_ACCOUNTS",`${t}, account ${n} should be a string and conform to "namespace:chainId:address" format`))}):i=dt("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),i}function c5(e,t){let i=null;return Object.values(e).forEach(n=>{if(i)return;const r=a5(n==null?void 0:n.accounts,`${t} namespace`);r&&(i=r)}),i}function l5(e,t){let i=null;return gh(e==null?void 0:e.methods)?gh(e==null?void 0:e.events)||(i=dt("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):i=dt("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),i}function Z0(e,t){let i=null;return Object.values(e).forEach(n=>{if(i)return;const r=l5(n,`${t}, namespace`);r&&(i=r)}),i}function d5(e,t,i){let n=null;if(e&&Ko(e)){const r=Z0(e,t);r&&(n=r);const s=o5(e,t,i);s&&(n=s)}else n=ee("MISSING_OR_INVALID",`${t}, ${i} should be an object with data`);return n}function sc(e,t){let i=null;if(e&&Ko(e)){const n=Z0(e,t);n&&(i=n);const r=c5(e,t);r&&(i=r)}else i=ee("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return i}function J0(e){return xt(e.protocol,!0)}function h5(e,t){let i=!1;return e?e&&oo(e)&&e.length&&e.forEach(n=>{i=J0(n)}):i=!0,i}function u5(e){return typeof e=="number"}function Qt(e){return typeof e<"u"&&typeof e!==null}function f5(e){return!(!e||typeof e!="object"||!e.code||!Pl(e.code)||!e.message||!xt(e.message,!1))}function g5(e){return!(Gt(e)||!xt(e.method,!1))}function m5(e){return!(Gt(e)||Gt(e.result)&&Gt(e.error)||!Pl(e.id)||!xt(e.jsonrpc,!1))}function p5(e){return!(Gt(e)||!xt(e.name,!1))}function mh(e,t){return!(!Go(t)||!Qw(e).includes(t))}function y5(e,t,i){return xt(i,!1)?Vw(e,t).includes(i):!1}function b5(e,t,i){return xt(i,!1)?Kw(e,t).includes(i):!1}function ph(e,t,i){let n=null;const r=v5(e),s=x5(t),a=Object.keys(r),l=Object.keys(s),d=yh(Object.keys(e)),g=yh(Object.keys(t)),y=d.filter(b=>!g.includes(b));return y.length&&(n=ee("NON_CONFORMING_NAMESPACES",`${i} namespaces keys don't satisfy requiredNamespaces.
      Required: ${y.toString()}
      Received: ${Object.keys(t).toString()}`)),gr(a,l)||(n=ee("NON_CONFORMING_NAMESPACES",`${i} namespaces chains don't satisfy required namespaces.
      Required: ${a.toString()}
      Approved: ${l.toString()}`)),Object.keys(t).forEach(b=>{if(!b.includes(":")||n)return;const M=vs(t[b].accounts);M.includes(b)||(n=ee("NON_CONFORMING_NAMESPACES",`${i} namespaces accounts don't satisfy namespace accounts for ${b}
        Required: ${b}
        Approved: ${M.toString()}`))}),a.forEach(b=>{n||(gr(r[b].methods,s[b].methods)?gr(r[b].events,s[b].events)||(n=ee("NON_CONFORMING_NAMESPACES",`${i} namespaces events don't satisfy namespace events for ${b}`)):n=ee("NON_CONFORMING_NAMESPACES",`${i} namespaces methods don't satisfy namespace methods for ${b}`))}),n}function v5(e){const t={};return Object.keys(e).forEach(i=>{var n;i.includes(":")?t[i]=e[i]:(n=e[i].chains)==null||n.forEach(r=>{t[r]={methods:e[i].methods,events:e[i].events}})}),t}function yh(e){return[...new Set(e.map(t=>t.includes(":")?t.split(":")[0]:t))]}function x5(e){const t={};return Object.keys(e).forEach(i=>{if(i.includes(":"))t[i]=e[i];else{const n=vs(e[i].accounts);n==null||n.forEach(r=>{t[r]={accounts:e[i].accounts.filter(s=>s.includes(`${r}:`)),methods:e[i].methods,events:e[i].events}})}}),t}function w5(e,t){return Pl(e)&&e<=t.max&&e>=t.min}function bh(){const e=no();return new Promise(t=>{switch(e){case ri.browser:t(M5());break;case ri.reactNative:t(A5());break;case ri.node:t(S5());break;default:t(!0)}})}function M5(){return io()&&(navigator==null?void 0:navigator.onLine)}async function A5(){if(to()&&typeof global<"u"&&global!=null&&global.NetInfo){const e=await(global==null?void 0:global.NetInfo.fetch());return e==null?void 0:e.isConnected}return!0}function S5(){return!0}function j5(e){switch(no()){case ri.browser:I5(e);break;case ri.reactNative:T5(e);break}}function I5(e){!to()&&io()&&(window.addEventListener("online",()=>e(!0)),window.addEventListener("offline",()=>e(!1)))}function T5(e){to()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(t=>e(t==null?void 0:t.isConnected)))}const oc={};class Cs{static get(t){return oc[t]}static set(t,i){oc[t]=i}static delete(t){delete oc[t]}}class C5 extends mm{constructor(t){super(t),this.events=new _n.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(t),this.connection.connected&&this.registerEventListeners()}async connect(t=this.connection){await this.open(t)}async disconnect(){await this.close()}on(t,i){this.events.on(t,i)}once(t,i){this.events.once(t,i)}off(t,i){this.events.off(t,i)}removeListener(t,i){this.events.removeListener(t,i)}async request(t,i){return this.requestStrict(Ur(t.method,t.params||[],t.id||fr().toString()),i)}async requestStrict(t,i){return new Promise(async(n,r)=>{if(!this.connection.connected)try{await this.open()}catch(s){r(s)}this.events.on(`${t.id}`,s=>{Pi(s)?r(s.error):n(s.result)});try{await this.connection.send(t,i)}catch(s){r(s)}})}setConnection(t=this.connection){return t}onPayload(t){this.events.emit("payload",t),na(t)?this.events.emit(`${t.id}`,t):this.events.emit("message",{type:t.method,data:t.params})}onClose(t){t&&t.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${t.code} ${t.reason?`(${t.reason})`:""}`)),this.events.emit("disconnect")}async open(t=this.connection){this.connection===t&&this.connection.connected||(this.connection.connected&&this.close(),typeof t=="string"&&(await this.connection.open(t),t=this.connection),this.connection=this.setConnection(t),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",t=>this.onPayload(t)),this.connection.on("close",t=>this.onClose(t)),this.connection.on("error",t=>this.events.emit("error",t)),this.connection.on("register_error",t=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var E5={};function N5(e,t){if(e.length>=255)throw new TypeError("Alphabet too long");for(var i=new Uint8Array(256),n=0;n<i.length;n++)i[n]=255;for(var r=0;r<e.length;r++){var s=e.charAt(r),a=s.charCodeAt(0);if(i[a]!==255)throw new TypeError(s+" is ambiguous");i[a]=r}var l=e.length,d=e.charAt(0),g=Math.log(l)/Math.log(256),y=Math.log(256)/Math.log(l);function b(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var C=0,k=0,N=0,D=S.length;N!==D&&S[N]===0;)N++,C++;for(var B=(D-N)*y+1>>>0,P=new Uint8Array(B);N!==D;){for(var z=S[N],W=0,Y=B-1;(z!==0||W<k)&&Y!==-1;Y--,W++)z+=256*P[Y]>>>0,P[Y]=z%l>>>0,z=z/l>>>0;if(z!==0)throw new Error("Non-zero carry");k=W,N++}for(var Z=B-k;Z!==B&&P[Z]===0;)Z++;for(var H=d.repeat(C);Z<B;++Z)H+=e.charAt(P[Z]);return H}function M(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var C=0;if(S[C]!==" "){for(var k=0,N=0;S[C]===d;)k++,C++;for(var D=(S.length-C)*g+1>>>0,B=new Uint8Array(D);S[C];){var P=i[S.charCodeAt(C)];if(P===255)return;for(var z=0,W=D-1;(P!==0||z<N)&&W!==-1;W--,z++)P+=l*B[W]>>>0,B[W]=P%256>>>0,P=P/256>>>0;if(P!==0)throw new Error("Non-zero carry");N=z,C++}if(S[C]!==" "){for(var Y=D-N;Y!==D&&B[Y]===0;)Y++;for(var Z=new Uint8Array(k+(D-Y)),H=k;Y!==D;)Z[H++]=B[Y++];return Z}}}function A(S){var C=M(S);if(C)return C;throw new Error(`Non-${t} character`)}return{encode:b,decodeUnsafe:M,decode:A}}var _5=N5,k5=_5;const X0=e=>{if(e instanceof Uint8Array&&e.constructor.name==="Uint8Array")return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw new Error("Unknown type, must be binary type")},D5=e=>new TextEncoder().encode(e),L5=e=>new TextDecoder().decode(e);class P5{constructor(t,i,n){this.name=t,this.prefix=i,this.baseEncode=n}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class z5{constructor(t,i,n){if(this.name=t,this.prefix=i,i.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=i.codePointAt(0),this.baseDecode=n}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return e1(this,t)}}class R5{constructor(t){this.decoders=t}or(t){return e1(this,t)}decode(t){const i=t[0],n=this.decoders[i];if(n)return n.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const e1=(e,t)=>new R5({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class O5{constructor(t,i,n,r){this.name=t,this.prefix=i,this.baseEncode=n,this.baseDecode=r,this.encoder=new P5(t,i,n),this.decoder=new z5(t,i,r)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const ja=({name:e,prefix:t,encode:i,decode:n})=>new O5(e,t,i,n),ao=({prefix:e,name:t,alphabet:i})=>{const{encode:n,decode:r}=k5(i,t);return ja({prefix:e,name:t,encode:n,decode:s=>X0(r(s))})},B5=(e,t,i,n)=>{const r={};for(let y=0;y<t.length;++y)r[t[y]]=y;let s=e.length;for(;e[s-1]==="=";)--s;const a=new Uint8Array(s*i/8|0);let l=0,d=0,g=0;for(let y=0;y<s;++y){const b=r[e[y]];if(b===void 0)throw new SyntaxError(`Non-${n} character`);d=d<<i|b,l+=i,l>=8&&(l-=8,a[g++]=255&d>>l)}if(l>=i||255&d<<8-l)throw new SyntaxError("Unexpected end of data");return a},q5=(e,t,i)=>{const n=t[t.length-1]==="=",r=(1<<i)-1;let s="",a=0,l=0;for(let d=0;d<e.length;++d)for(l=l<<8|e[d],a+=8;a>i;)a-=i,s+=t[r&l>>a];if(a&&(s+=t[r&l<<i-a]),n)for(;s.length*i&7;)s+="=";return s},zt=({name:e,prefix:t,bitsPerChar:i,alphabet:n})=>ja({prefix:t,name:e,encode(r){return q5(r,n,i)},decode(r){return B5(r,n,i,e)}}),F5=ja({prefix:"\0",name:"identity",encode:e=>L5(e),decode:e=>D5(e)});var U5=Object.freeze({__proto__:null,identity:F5});const W5=zt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var $5=Object.freeze({__proto__:null,base2:W5});const H5=zt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Y5=Object.freeze({__proto__:null,base8:H5});const Q5=ao({prefix:"9",name:"base10",alphabet:"0123456789"});var V5=Object.freeze({__proto__:null,base10:Q5});const K5=zt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),G5=zt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Z5=Object.freeze({__proto__:null,base16:K5,base16upper:G5});const J5=zt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),X5=zt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),e8=zt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),t8=zt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),i8=zt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),n8=zt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),r8=zt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),s8=zt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),o8=zt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var a8=Object.freeze({__proto__:null,base32:J5,base32upper:X5,base32pad:e8,base32padupper:t8,base32hex:i8,base32hexupper:n8,base32hexpad:r8,base32hexpadupper:s8,base32z:o8});const c8=ao({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),l8=ao({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var d8=Object.freeze({__proto__:null,base36:c8,base36upper:l8});const h8=ao({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),u8=ao({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var f8=Object.freeze({__proto__:null,base58btc:h8,base58flickr:u8});const g8=zt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),m8=zt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),p8=zt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),y8=zt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var b8=Object.freeze({__proto__:null,base64:g8,base64pad:m8,base64url:p8,base64urlpad:y8});const t1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),v8=t1.reduce((e,t,i)=>(e[i]=t,e),[]),x8=t1.reduce((e,t,i)=>(e[t.codePointAt(0)]=i,e),[]);function w8(e){return e.reduce((t,i)=>(t+=v8[i],t),"")}function M8(e){const t=[];for(const i of e){const n=x8[i.codePointAt(0)];if(n===void 0)throw new Error(`Non-base256emoji character: ${i}`);t.push(n)}return new Uint8Array(t)}const A8=ja({prefix:"🚀",name:"base256emoji",encode:w8,decode:M8});var S8=Object.freeze({__proto__:null,base256emoji:A8}),j8=i1,vh=128,I8=127,T8=~I8,C8=Math.pow(2,31);function i1(e,t,i){t=t||[],i=i||0;for(var n=i;e>=C8;)t[i++]=e&255|vh,e/=128;for(;e&T8;)t[i++]=e&255|vh,e>>>=7;return t[i]=e|0,i1.bytes=i-n+1,t}var E8=zc,N8=128,xh=127;function zc(e,n){var i=0,n=n||0,r=0,s=n,a,l=e.length;do{if(s>=l)throw zc.bytes=0,new RangeError("Could not decode varint");a=e[s++],i+=r<28?(a&xh)<<r:(a&xh)*Math.pow(2,r),r+=7}while(a>=N8);return zc.bytes=s-n,i}var _8=Math.pow(2,7),k8=Math.pow(2,14),D8=Math.pow(2,21),L8=Math.pow(2,28),P8=Math.pow(2,35),z8=Math.pow(2,42),R8=Math.pow(2,49),O8=Math.pow(2,56),B8=Math.pow(2,63),q8=function(e){return e<_8?1:e<k8?2:e<D8?3:e<L8?4:e<P8?5:e<z8?6:e<R8?7:e<O8?8:e<B8?9:10},F8={encode:j8,decode:E8,encodingLength:q8},n1=F8;const wh=(e,t,i=0)=>(n1.encode(e,t,i),t),Mh=e=>n1.encodingLength(e),Rc=(e,t)=>{const i=t.byteLength,n=Mh(e),r=n+Mh(i),s=new Uint8Array(r+i);return wh(e,s,0),wh(i,s,n),s.set(t,r),new U8(e,i,t,s)};class U8{constructor(t,i,n,r){this.code=t,this.size=i,this.digest=n,this.bytes=r}}const r1=({name:e,code:t,encode:i})=>new W8(e,t,i);class W8{constructor(t,i,n){this.name=t,this.code=i,this.encode=n}digest(t){if(t instanceof Uint8Array){const i=this.encode(t);return i instanceof Uint8Array?Rc(this.code,i):i.then(n=>Rc(this.code,n))}else throw Error("Unknown type, must be binary type")}}const s1=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),$8=r1({name:"sha2-256",code:18,encode:s1("SHA-256")}),H8=r1({name:"sha2-512",code:19,encode:s1("SHA-512")});var Y8=Object.freeze({__proto__:null,sha256:$8,sha512:H8});const o1=0,Q8="identity",a1=X0,V8=e=>Rc(o1,a1(e)),K8={code:o1,name:Q8,encode:a1,digest:V8};var G8=Object.freeze({__proto__:null,identity:K8});new TextEncoder,new TextDecoder;const Ah={...U5,...$5,...Y5,...V5,...Z5,...a8,...d8,...f8,...b8,...S8};({...Y8,...G8});function Z8(e=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(e):new Uint8Array(e)}function c1(e,t,i,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:i},decoder:{decode:n}}}const Sh=c1("utf8","u",e=>"u"+new TextDecoder("utf8").decode(e),e=>new TextEncoder().encode(e.substring(1))),ac=c1("ascii","a",e=>{let t="a";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e=>{e=e.substring(1);const t=Z8(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}),J8={utf8:Sh,"utf-8":Sh,hex:Ah.base16,latin1:ac,ascii:ac,binary:ac,...Ah};function X8(e,t="utf8"){const i=J8[t];if(!i)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(e,"utf8"):i.decoder.decode(`${i.prefix}${e}`)}const l1="wc",d1=2,zl="core",un=`${l1}@2:${zl}:`,e7={name:zl,logger:"error"},t7={database:":memory:"},i7="crypto",jh="client_ed25519_seed",n7=se.ONE_DAY,r7="keychain",s7="0.3",o7="messages",a7="0.3",c7=se.SIX_HOURS,l7="publisher",h1="irn",d7="error",u1="wss://relay.walletconnect.org",h7="relayer",Zt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},u7="_subscription",xi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},f7=.1,f1="2.15.2",g7=1e4,m7="0.3",p7="WALLETCONNECT_CLIENT_ID",Vi={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},y7="subscription",b7="0.3",v7=se.FIVE_SECONDS*1e3,x7="pairing",w7="0.3",Es={wc_pairingDelete:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:se.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:se.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:se.ONE_DAY,prompt:!1,tag:0},res:{ttl:se.ONE_DAY,prompt:!1,tag:0}}},Br={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},ki={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},M7="history",A7="0.3",S7="expirer",wi={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},j7="0.3",I7="verify-api",T7="https://verify.walletconnect.com",g1="https://verify.walletconnect.org",Os=g1,C7=`${Os}/v3`,E7=[T7,g1],N7="echo",_7="https://echo.walletconnect.com",Hi={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},vn={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Di={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},lr={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},dr={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},Ns={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},k7=.1,D7="event-client",L7=86400,P7="https://pulse.walletconnect.com/batch";class z7{constructor(t,i){this.core=t,this.logger=i,this.keychain=new Map,this.name=r7,this.version=s7,this.initialized=!1,this.storagePrefix=un,this.init=async()=>{if(!this.initialized){const n=await this.getKeyChain();typeof n<"u"&&(this.keychain=n),this.initialized=!0}},this.has=n=>(this.isInitialized(),this.keychain.has(n)),this.set=async(n,r)=>{this.isInitialized(),this.keychain.set(n,r),await this.persist()},this.get=n=>{this.isInitialized();const r=this.keychain.get(n);if(typeof r>"u"){const{message:s}=ee("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(s)}return r},this.del=async n=>{this.isInitialized(),this.keychain.delete(n),await this.persist()},this.core=t,this.logger=Ht(i,this.name)}get context(){return li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,a0(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?c0(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}class R7{constructor(t,i,n){this.core=t,this.logger=i,this.name=i7,this.randomSessionIdentifier=Lc(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=r=>(this.isInitialized(),this.keychain.has(r)),this.getClientId=async()=>{this.isInitialized();const r=await this.getClientSeed(),s=Yl(r);return vm(s.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const r=jw();return this.setPrivateKey(r.publicKey,r.privateKey)},this.signJWT=async r=>{this.isInitialized();const s=await this.getClientSeed(),a=Yl(s),l=this.randomSessionIdentifier;return await xm(l,r,n7,a)},this.generateSharedKey=(r,s,a)=>{this.isInitialized();const l=this.getPrivateKey(r),d=Iw(l,s);return this.setSymKey(d,a)},this.setSymKey=async(r,s)=>{this.isInitialized();const a=s||Io(r);return await this.keychain.set(a,r),a},this.deleteKeyPair=async r=>{this.isInitialized(),await this.keychain.del(r)},this.deleteSymKey=async r=>{this.isInitialized(),await this.keychain.del(r)},this.encode=async(r,s,a)=>{this.isInitialized();const l=G0(a),d=wm(s);if(ch(l)){const M=l.senderPublicKey,A=l.receiverPublicKey;r=await this.generateSharedKey(M,A)}const g=this.getSymKey(r),{type:y,senderPublicKey:b}=l;return Cw({type:y,symKey:g,message:d,senderPublicKey:b})},this.decode=async(r,s,a)=>{this.isInitialized();const l=_w(s,a);if(ch(l)){const d=l.receiverPublicKey,g=l.senderPublicKey;r=await this.generateSharedKey(d,g)}try{const d=this.getSymKey(r),g=Ew({symKey:d,encoded:s});return Mm(g)}catch(d){this.logger.error(`Failed to decode message from topic: '${r}', clientId: '${await this.getClientId()}'`),this.logger.error(d)}},this.getPayloadType=r=>{const s=Vo(r);return so(s.type)},this.getPayloadSenderPublicKey=r=>{const s=Vo(r);return s.senderPublicKey?ji(s.senderPublicKey,Ut):void 0},this.core=t,this.logger=Ht(i,this.name),this.keychain=n||new z7(this.core,this.logger)}get context(){return li(this.logger)}async setPrivateKey(t,i){return await this.keychain.set(t,i),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(jh)}catch{t=Lc(),await this.keychain.set(jh,t)}return X8(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}class O7 extends Cb{constructor(t,i){super(t,i),this.logger=t,this.core=i,this.messages=new Map,this.name=o7,this.version=a7,this.initialized=!1,this.storagePrefix=un,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const n=await this.getRelayerMessages();typeof n<"u"&&(this.messages=n),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}finally{this.initialized=!0}}},this.set=async(n,r)=>{this.isInitialized();const s=wn(r);let a=this.messages.get(n);return typeof a>"u"&&(a={}),typeof a[s]<"u"||(a[s]=r,this.messages.set(n,a),await this.persist()),s},this.get=n=>{this.isInitialized();let r=this.messages.get(n);return typeof r>"u"&&(r={}),r},this.has=(n,r)=>{this.isInitialized();const s=this.get(n),a=wn(r);return typeof s[a]<"u"},this.del=async n=>{this.isInitialized(),this.messages.delete(n),await this.persist()},this.logger=Ht(t,this.name),this.core=i}get context(){return li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,a0(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?c0(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}class B7 extends Eb{constructor(t,i){super(t,i),this.relayer=t,this.logger=i,this.events=new _n.EventEmitter,this.name=l7,this.queue=new Map,this.publishTimeout=se.toMiliseconds(se.ONE_MINUTE),this.failedPublishTimeout=se.toMiliseconds(se.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(n,r,s)=>{var a;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:n,message:r,opts:s}});const l=(s==null?void 0:s.ttl)||c7,d=Pc(s),g=(s==null?void 0:s.prompt)||!1,y=(s==null?void 0:s.tag)||0,b=(s==null?void 0:s.id)||fr().toString(),M={topic:n,message:r,opts:{ttl:l,relay:d,prompt:g,tag:y,id:b,attestation:s==null?void 0:s.attestation}},A=`Failed to publish payload, please try again. id:${b} tag:${y}`,S=Date.now();let C,k=1;try{for(;C===void 0;){if(Date.now()-S>this.publishTimeout)throw new Error(A);this.logger.trace({id:b,attempts:k},`publisher.publish - attempt ${k}`),C=await await $r(this.rpcPublish(n,r,l,d,g,y,b,s==null?void 0:s.attestation).catch(N=>this.logger.warn(N)),this.publishTimeout,A),k++,C||await new Promise(N=>setTimeout(N,this.failedPublishTimeout))}this.relayer.events.emit(Zt.publish,M),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:b,topic:n,message:r,opts:s}})}catch(N){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(N),(a=s==null?void 0:s.internal)!=null&&a.throwOnFailedPublish)throw N;this.queue.set(b,M)}},this.on=(n,r)=>{this.events.on(n,r)},this.once=(n,r)=>{this.events.once(n,r)},this.off=(n,r)=>{this.events.off(n,r)},this.removeListener=(n,r)=>{this.events.removeListener(n,r)},this.relayer=t,this.logger=Ht(i,this.name),this.registerEventListeners()}get context(){return li(this.logger)}rpcPublish(t,i,n,r,s,a,l,d){var g,y,b,M;const A={method:Ls(r.protocol).publish,params:{topic:t,message:i,ttl:n,prompt:s,tag:a,attestation:d},id:l};return Gt((g=A.params)==null?void 0:g.prompt)&&((y=A.params)==null||delete y.prompt),Gt((b=A.params)==null?void 0:b.tag)&&((M=A.params)==null||delete M.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:A}),this.relayer.request(A)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:i,message:n,opts:r}=t;await this.publish(i,n,r)})}registerEventListeners(){this.relayer.core.heartbeat.on(cs.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Zt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Zt.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}class q7{constructor(){this.map=new Map,this.set=(t,i)=>{const n=this.get(t);this.exists(t,i)||this.map.set(t,[...n,i])},this.get=t=>this.map.get(t)||[],this.exists=(t,i)=>this.get(t).includes(i),this.delete=(t,i)=>{if(typeof i>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const n=this.get(t);if(!this.exists(t,i))return;const r=n.filter(s=>s!==i);if(!r.length){this.map.delete(t);return}this.map.set(t,r)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var F7=Object.defineProperty,U7=Object.defineProperties,W7=Object.getOwnPropertyDescriptors,Ih=Object.getOwnPropertySymbols,$7=Object.prototype.hasOwnProperty,H7=Object.prototype.propertyIsEnumerable,Th=(e,t,i)=>t in e?F7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,_s=(e,t)=>{for(var i in t||(t={}))$7.call(t,i)&&Th(e,i,t[i]);if(Ih)for(var i of Ih(t))H7.call(t,i)&&Th(e,i,t[i]);return e},cc=(e,t)=>U7(e,W7(t));class Y7 extends kb{constructor(t,i){super(t,i),this.relayer=t,this.logger=i,this.subscriptions=new Map,this.topicMap=new q7,this.events=new _n.EventEmitter,this.name=y7,this.version=b7,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=un,this.subscribeTimeout=se.toMiliseconds(se.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(n,r)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:r}});try{const s=Pc(r),a={topic:n,relay:s};this.pending.set(n,a);const l=await this.rpcSubscribe(n,s);return typeof l=="string"&&(this.onSubscribe(l,a),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:n,opts:r}})),l}catch(s){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(s),s}},this.unsubscribe=async(n,r)=>{await this.restartToComplete(),this.isInitialized(),typeof(r==null?void 0:r.id)<"u"?await this.unsubscribeById(n,r.id,r):await this.unsubscribeByTopic(n,r)},this.isSubscribed=async n=>{if(this.topics.includes(n))return!0;const r=`${this.pendingSubscriptionWatchLabel}_${n}`;return await new Promise((s,a)=>{const l=new se.Watch;l.start(r);const d=setInterval(()=>{!this.pending.has(n)&&this.topics.includes(n)&&(clearInterval(d),l.stop(r),s(!0)),l.elapsed(r)>=v7&&(clearInterval(d),l.stop(r),a(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(n,r)=>{this.events.on(n,r)},this.once=(n,r)=>{this.events.once(n,r)},this.off=(n,r)=>{this.events.off(n,r)},this.removeListener=(n,r)=>{this.events.removeListener(n,r)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Ht(i,this.name),this.clientId=""}get context(){return li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,i){let n=!1;try{n=this.getSubscription(t).topic===i}catch{}return n}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,i){const n=this.topicMap.get(t);await Promise.all(n.map(async r=>await this.unsubscribeById(t,r,i)))}async unsubscribeById(t,i,n){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:i,opts:n}});try{const r=Pc(n);await this.rpcUnsubscribe(t,i,r);const s=dt("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,i,s),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:i,opts:n}})}catch(r){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(r),r}}async rpcSubscribe(t,i){const n={method:Ls(i.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await $r(this.relayer.request(n).catch(r=>this.logger.warn(r)),this.subscribeTimeout)?wn(t+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Zt.connection_stalled)}return null}async rpcBatchSubscribe(t){if(!t.length)return;const i=t[0].relay,n={method:Ls(i.protocol).batchSubscribe,params:{topics:t.map(r=>r.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});try{return await await $r(this.relayer.request(n).catch(r=>this.logger.warn(r)),this.subscribeTimeout)}catch{this.relayer.events.emit(Zt.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const i=t[0].relay,n={method:Ls(i.protocol).batchFetchMessages,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:n});let r;try{r=await await $r(this.relayer.request(n).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(Zt.connection_stalled)}return r}rpcUnsubscribe(t,i,n){const r={method:Ls(n.protocol).unsubscribe,params:{topic:t,id:i}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:r}),this.relayer.request(r)}onSubscribe(t,i){this.setSubscription(t,cc(_s({},i),{id:t})),this.pending.delete(i.topic)}onBatchSubscribe(t){t.length&&t.forEach(i=>{this.setSubscription(i.id,_s({},i)),this.pending.delete(i.topic)})}async onUnsubscribe(t,i,n){this.events.removeAllListeners(i),this.hasSubscription(i,t)&&this.deleteSubscription(i,n),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,i){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:i}),this.addSubscription(t,i)}addSubscription(t,i){this.subscriptions.set(t,_s({},i)),this.topicMap.set(i.topic,t),this.events.emit(Vi.created,i)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const i=this.subscriptions.get(t);if(!i){const{message:n}=ee("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return i}deleteSubscription(t,i){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:i});const n=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(n.topic,t),this.events.emit(Vi.deleted,cc(_s({},n),{reason:i}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Vi.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let i=0;i<t;i++){const n=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(n),await this.batchSubscribe(n)}}this.events.emit(Vi.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:i}=ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(i)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const i=await this.rpcBatchSubscribe(t);oo(i)&&this.onBatchSubscribe(i.map((n,r)=>cc(_s({},t[r]),{id:n})))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const i=await this.rpcBatchFetchMessages(t);i&&i.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(i.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const t=[];this.pending.forEach(i=>{t.push(i)}),await this.batchSubscribe(t),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(cs.pulse,async()=>{await this.checkPending()}),this.events.on(Vi.created,async t=>{const i=Vi.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),await this.persist()}),this.events.on(Vi.deleted,async t=>{const i=Vi.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const i=setInterval(()=>{this.restartInProgress||(clearInterval(i),t())},this.pollingInterval)})}}var Q7=Object.defineProperty,Ch=Object.getOwnPropertySymbols,V7=Object.prototype.hasOwnProperty,K7=Object.prototype.propertyIsEnumerable,Eh=(e,t,i)=>t in e?Q7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,G7=(e,t)=>{for(var i in t||(t={}))V7.call(t,i)&&Eh(e,i,t[i]);if(Ch)for(var i of Ch(t))K7.call(t,i)&&Eh(e,i,t[i]);return e};class Z7 extends Nb{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new _n.EventEmitter,this.name=h7,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=se.toMiliseconds(se.THIRTY_SECONDS+se.ONE_SECOND),this.request=async i=>{var n,r;this.logger.debug("Publishing Request Payload");const s=i.id||fr().toString();await this.toEstablishConnection();try{const a=this.provider.request(i);this.requestsInFlight.set(s,{promise:a,request:i}),this.logger.trace({id:s,method:i.method,topic:(n=i.params)==null?void 0:n.topic},"relayer.request - attempt to publish...");const l=await new Promise(async(d,g)=>{const y=()=>{g(new Error(`relayer.request - publish interrupted, id: ${s}`))};this.provider.on(xi.disconnect,y);const b=await a;this.provider.off(xi.disconnect,y),d(b)});return this.logger.trace({id:s,method:i.method,topic:(r=i.params)==null?void 0:r.topic},"relayer.request - published"),l}catch(a){throw this.logger.debug(`Failed to Publish Request: ${s}`),a}finally{this.requestsInFlight.delete(s)}},this.resetPingTimeout=()=>{if(Us())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var i,n,r;(r=(n=(i=this.provider)==null?void 0:i.connection)==null?void 0:n.socket)==null||r.terminate()},this.heartBeatTimeout)}catch(i){this.logger.warn(i)}},this.onPayloadHandler=i=>{this.onProviderPayload(i),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(Zt.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=i=>{this.logger.error(i),this.events.emit(Zt.error,i),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(xi.payload,this.onPayloadHandler),this.provider.on(xi.connect,this.onConnectHandler),this.provider.on(xi.disconnect,this.onDisconnectHandler),this.provider.on(xi.error,this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Ht(t.logger,this.name):Mu(Kc({level:t.logger||d7})),this.messages=new O7(this.logger,t.core),this.subscriber=new Y7(this,this.logger),this.publisher=new B7(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||u1,this.projectId=t.projectId,this.bundleId=ax(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),await this.transportOpen(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&this.subscriber.pending.size===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},g7)}get context(){return li(this.logger)}get connected(){var t,i,n;return((n=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null?void 0:n.readyState)===1}get connecting(){var t,i,n;return((n=(i=(t=this.provider)==null?void 0:t.connection)==null?void 0:i.socket)==null?void 0:n.readyState)===0}async publish(t,i,n){this.isInitialized(),await this.publisher.publish(t,i,n),await this.recordMessageEvent({topic:t,message:i,publishedAt:Date.now()})}async subscribe(t,i){var n;this.isInitialized();let r=((n=this.subscriber.topicMap.get(t))==null?void 0:n[0])||"",s;const a=l=>{l.topic===t&&(this.subscriber.off(Vi.created,a),s())};return await Promise.all([new Promise(l=>{s=l,this.subscriber.on(Vi.created,a)}),new Promise(async l=>{r=await this.subscriber.subscribe(t,i)||r,l()})]),r}async unsubscribe(t,i){this.isInitialized(),await this.subscriber.unsubscribe(t,i)}on(t,i){this.events.on(t,i)}once(t,i){this.events.once(t,i)}off(t,i){this.events.off(t,i)}removeListener(t,i){this.events.removeListener(t,i)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(t=>t.promise))}catch(t){this.logger.warn(t)}this.hasExperiencedNetworkDisruption||this.connected?await $r(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(i,n)=>{const r=()=>{this.provider.off(xi.disconnect,r),n(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(xi.disconnect,r),await $r(this.provider.connect(),se.toMiliseconds(se.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(s=>{n(s)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(s=>{this.logger.error(s),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,i()})}catch(i){this.logger.error(i);const n=i;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(n.message))throw i}finally{this.connectionAttemptInProgress=!1}}async restartTransport(t){this.connectionAttemptInProgress||(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await bh())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if((t==null?void 0:t.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const i=t.sort((n,r)=>n.publishedAt-r.publishedAt);this.logger.trace(`Batch of ${i.length} message events sorted`);for(const n of i)try{await this.onMessageEvent(n)}catch(r){this.logger.warn(r)}this.logger.trace(`Batch of ${i.length} message events processed`)}startPingTimeout(){var t,i,n,r,s;if(Us())try{(i=(t=this.provider)==null?void 0:t.connection)!=null&&i.socket&&((s=(r=(n=this.provider)==null?void 0:n.connection)==null?void 0:r.socket)==null||s.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(a){this.logger.warn(a)}}isConnectionStalled(t){return this.staleConnectionErrors.some(i=>t.includes(i))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new C5(new Am(fx({sdkVersion:f1,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:i,message:n}=t;await this.messages.set(i,n)}async shouldIgnoreMessageEvent(t){const{topic:i,message:n}=t;if(!n||n.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${n}`),!0;if(!await this.subscriber.isSubscribed(i))return this.logger.debug(`Ignoring message for non-subscribed topic ${i}`),!0;const r=this.messages.has(i,n);return r&&this.logger.debug(`Ignoring duplicate message: ${n}`),r}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),Gc(t)){if(!t.method.endsWith(u7))return;const i=t.params,{topic:n,message:r,publishedAt:s,attestation:a}=i.data,l={topic:n,message:r,publishedAt:s,attestation:a};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(G7({type:"event",event:i.id},l)),this.events.emit(i.id,l),await this.acknowledgePayload(t),await this.onMessageEvent(l)}else na(t)&&this.events.emit(Zt.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Zt.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const i=Zc(t.id,!0);await this.provider.connection.send(i)}unregisterProviderListeners(){this.provider.off(xi.payload,this.onPayloadHandler),this.provider.off(xi.connect,this.onConnectHandler),this.provider.off(xi.disconnect,this.onDisconnectHandler),this.provider.off(xi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await bh();j5(async i=>{t!==i&&(t=i,i?await this.restartTransport().catch(n=>this.logger.error(n)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Zt.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t))},se.toMiliseconds(f7))))}isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(t=>{const i=setInterval(()=>{this.connected&&(clearInterval(i),t())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var J7=Object.defineProperty,Nh=Object.getOwnPropertySymbols,X7=Object.prototype.hasOwnProperty,e9=Object.prototype.propertyIsEnumerable,_h=(e,t,i)=>t in e?J7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,kh=(e,t)=>{for(var i in t||(t={}))X7.call(t,i)&&_h(e,i,t[i]);if(Nh)for(var i of Nh(t))e9.call(t,i)&&_h(e,i,t[i]);return e};class Nr extends _b{constructor(t,i,n,r=un,s=void 0){super(t,i,n,r),this.core=t,this.logger=i,this.name=n,this.map=new Map,this.version=m7,this.cached=[],this.initialized=!1,this.storagePrefix=un,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(a=>{this.getKey&&a!==null&&!Gt(a)?this.map.set(this.getKey(a),a):i5(a)?this.map.set(a.id,a):n5(a)&&this.map.set(a.topic,a)}),this.cached=[],this.initialized=!0)},this.set=async(a,l)=>{this.isInitialized(),this.map.has(a)?await this.update(a,l):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:a,value:l}),this.map.set(a,l),await this.persist())},this.get=a=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:a}),this.getData(a)),this.getAll=a=>(this.isInitialized(),a?this.values.filter(l=>Object.keys(a).every(d=>pm(l[d],a[d]))):this.values),this.update=async(a,l)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:a,update:l});const d=kh(kh({},this.getData(a)),l);this.map.set(a,d),await this.persist()},this.delete=async(a,l)=>{this.isInitialized(),this.map.has(a)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:a,reason:l}),this.map.delete(a),this.addToRecentlyDeleted(a),await this.persist())},this.logger=Ht(i,this.name),this.storagePrefix=r,this.getKey=s}get context(){return li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const i=this.map.get(t);if(!i){if(this.recentlyDeleted.includes(t)){const{message:r}=ee("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(r),new Error(r)}const{message:n}=ee("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(n),new Error(n)}return i}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:i}=ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),new Error(i)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}class t9{constructor(t,i){this.core=t,this.logger=i,this.name=x7,this.version=w7,this.events=new pu,this.initialized=!1,this.storagePrefix=un,this.ignoredPayloadTypes=[jn],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:n})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...n])]},this.create=async n=>{this.isInitialized();const r=Lc(),s=await this.core.crypto.setSymKey(r),a=Dt(se.FIVE_MINUTES),l={protocol:h1},d={topic:s,expiry:a,relay:l,active:!1},g=Yw({protocol:this.core.protocol,version:this.core.version,topic:s,symKey:r,relay:l,expiryTimestamp:a,methods:n==null?void 0:n.methods});return this.core.expirer.set(s,a),await this.pairings.set(s,d),await this.core.relayer.subscribe(s),{topic:s,uri:g}},this.pair=async n=>{this.isInitialized();const r=this.core.eventClient.createEvent({properties:{topic:n==null?void 0:n.uri,trace:[Hi.pairing_started]}});this.isValidPair(n,r);const{topic:s,symKey:a,relay:l,expiryTimestamp:d,methods:g}=uh(n.uri);r.props.properties.topic=s,r.addTrace(Hi.pairing_uri_validation_success),r.addTrace(Hi.pairing_uri_not_expired);let y;if(this.pairings.keys.includes(s)){if(y=this.pairings.get(s),r.addTrace(Hi.existing_pairing),y.active)throw r.setError(vn.active_pairing_already_exists),new Error(`Pairing already exists: ${s}. Please try again with a new connection URI.`);r.addTrace(Hi.pairing_not_expired)}const b=d||Dt(se.FIVE_MINUTES),M={topic:s,relay:l,expiry:b,active:!1,methods:g};this.core.expirer.set(s,b),await this.pairings.set(s,M),r.addTrace(Hi.store_new_pairing),n.activatePairing&&await this.activate({topic:s}),this.events.emit(Br.create,M),r.addTrace(Hi.emit_inactive_pairing),this.core.crypto.keychain.has(s)||await this.core.crypto.setSymKey(a,s),r.addTrace(Hi.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{r.setError(vn.no_internet_connection)}try{await this.core.relayer.subscribe(s,{relay:l})}catch(A){throw r.setError(vn.subscribe_pairing_topic_failure),A}return r.addTrace(Hi.subscribe_pairing_topic_success),M},this.activate=async({topic:n})=>{this.isInitialized();const r=Dt(se.THIRTY_DAYS);this.core.expirer.set(n,r),await this.pairings.update(n,{active:!0,expiry:r})},this.ping=async n=>{this.isInitialized(),await this.isValidPing(n);const{topic:r}=n;if(this.pairings.keys.includes(r)){const s=await this.sendRequest(r,"wc_pairingPing",{}),{done:a,resolve:l,reject:d}=ur();this.events.once(Ce("pairing_ping",s),({error:g})=>{g?d(g):l()}),await a()}},this.updateExpiry=async({topic:n,expiry:r})=>{this.isInitialized(),await this.pairings.update(n,{expiry:r})},this.updateMetadata=async({topic:n,metadata:r})=>{this.isInitialized(),await this.pairings.update(n,{peerMetadata:r})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async n=>{this.isInitialized(),await this.isValidDisconnect(n);const{topic:r}=n;this.pairings.keys.includes(r)&&(await this.sendRequest(r,"wc_pairingDelete",dt("USER_DISCONNECTED")),await this.deletePairing(r))},this.sendRequest=async(n,r,s)=>{const a=Ur(r,s),l=await this.core.crypto.encode(n,a),d=Es[r].req;return this.core.history.set(n,a),this.core.relayer.publish(n,l,d),a.id},this.sendResult=async(n,r,s)=>{const a=Zc(n,s),l=await this.core.crypto.encode(r,a),d=await this.core.history.get(r,n),g=Es[d.request.method].res;await this.core.relayer.publish(r,l,g),await this.core.history.resolve(a)},this.sendError=async(n,r,s)=>{const a=Au(n,s),l=await this.core.crypto.encode(r,a),d=await this.core.history.get(r,n),g=Es[d.request.method]?Es[d.request.method].res:Es.unregistered_method.res;await this.core.relayer.publish(r,l,g),await this.core.history.resolve(a)},this.deletePairing=async(n,r)=>{await this.core.relayer.unsubscribe(n),await Promise.all([this.pairings.delete(n,dt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(n),r?Promise.resolve():this.core.expirer.del(n)])},this.cleanup=async()=>{const n=this.pairings.getAll().filter(r=>zn(r.expiry));await Promise.all(n.map(r=>this.deletePairing(r.topic)))},this.onRelayEventRequest=n=>{const{topic:r,payload:s}=n;switch(s.method){case"wc_pairingPing":return this.onPairingPingRequest(r,s);case"wc_pairingDelete":return this.onPairingDeleteRequest(r,s);default:return this.onUnknownRpcMethodRequest(r,s)}},this.onRelayEventResponse=async n=>{const{topic:r,payload:s}=n,a=(await this.core.history.get(r,s.id)).request.method;switch(a){case"wc_pairingPing":return this.onPairingPingResponse(r,s);default:return this.onUnknownRpcMethodResponse(a)}},this.onPairingPingRequest=async(n,r)=>{const{id:s}=r;try{this.isValidPing({topic:n}),await this.sendResult(s,n,!0),this.events.emit(Br.ping,{id:s,topic:n})}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onPairingPingResponse=(n,r)=>{const{id:s}=r;setTimeout(()=>{bn(r)?this.events.emit(Ce("pairing_ping",s),{}):Pi(r)&&this.events.emit(Ce("pairing_ping",s),{error:r.error})},500)},this.onPairingDeleteRequest=async(n,r)=>{const{id:s}=r;try{this.isValidDisconnect({topic:n}),await this.deletePairing(n),this.events.emit(Br.delete,{id:s,topic:n})}catch(a){await this.sendError(s,n,a),this.logger.error(a)}},this.onUnknownRpcMethodRequest=async(n,r)=>{const{id:s,method:a}=r;try{if(this.registeredMethods.includes(a))return;const l=dt("WC_METHOD_UNSUPPORTED",a);await this.sendError(s,n,l),this.logger.error(l)}catch(l){await this.sendError(s,n,l),this.logger.error(l)}},this.onUnknownRpcMethodResponse=n=>{this.registeredMethods.includes(n)||this.logger.error(dt("WC_METHOD_UNSUPPORTED",n))},this.isValidPair=(n,r)=>{var s;if(!Qt(n)){const{message:l}=ee("MISSING_OR_INVALID",`pair() params: ${n}`);throw r.setError(vn.malformed_pairing_uri),new Error(l)}if(!t5(n.uri)){const{message:l}=ee("MISSING_OR_INVALID",`pair() uri: ${n.uri}`);throw r.setError(vn.malformed_pairing_uri),new Error(l)}const a=uh(n==null?void 0:n.uri);if(!((s=a==null?void 0:a.relay)!=null&&s.protocol)){const{message:l}=ee("MISSING_OR_INVALID","pair() uri#relay-protocol");throw r.setError(vn.malformed_pairing_uri),new Error(l)}if(!(a!=null&&a.symKey)){const{message:l}=ee("MISSING_OR_INVALID","pair() uri#symKey");throw r.setError(vn.malformed_pairing_uri),new Error(l)}if(a!=null&&a.expiryTimestamp&&se.toMiliseconds(a==null?void 0:a.expiryTimestamp)<Date.now()){r.setError(vn.pairing_expired);const{message:l}=ee("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(l)}},this.isValidPing=async n=>{if(!Qt(n)){const{message:s}=ee("MISSING_OR_INVALID",`ping() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidPairingTopic(r)},this.isValidDisconnect=async n=>{if(!Qt(n)){const{message:s}=ee("MISSING_OR_INVALID",`disconnect() params: ${n}`);throw new Error(s)}const{topic:r}=n;await this.isValidPairingTopic(r)},this.isValidPairingTopic=async n=>{if(!xt(n,!1)){const{message:r}=ee("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(r)}if(!this.pairings.keys.includes(n)){const{message:r}=ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(r)}if(zn(this.pairings.get(n).expiry)){await this.deletePairing(n);const{message:r}=ee("EXPIRED",`pairing topic: ${n}`);throw new Error(r)}},this.core=t,this.logger=Ht(i,this.name),this.pairings=new Nr(this.core,this.logger,this.name,this.storagePrefix)}get context(){return li(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Zt.message,async t=>{const{topic:i,message:n}=t;if(!this.pairings.keys.includes(i)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(n)))return;const r=await this.core.crypto.decode(i,n);try{Gc(r)?(this.core.history.set(i,r),this.onRelayEventRequest({topic:i,payload:r})):na(r)&&(await this.core.history.resolve(r),await this.onRelayEventResponse({topic:i,payload:r}),this.core.history.delete(i,r.id))}catch(s){this.logger.error(s)}})}registerExpirerEvents(){this.core.expirer.on(wi.expired,async t=>{const{topic:i}=d0(t.target);i&&this.pairings.keys.includes(i)&&(await this.deletePairing(i,!0),this.events.emit(Br.expire,{topic:i}))})}}class i9 extends Tb{constructor(t,i){super(t,i),this.core=t,this.logger=i,this.records=new Map,this.events=new _n.EventEmitter,this.name=M7,this.version=A7,this.cached=[],this.initialized=!1,this.storagePrefix=un,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.records.set(n.id,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(n,r,s)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:n,request:r,chainId:s}),this.records.has(r.id))return;const a={id:r.id,topic:n,request:{method:r.method,params:r.params||null},chainId:s,expiry:Dt(se.THIRTY_DAYS)};this.records.set(a.id,a),this.persist(),this.events.emit(ki.created,a)},this.resolve=async n=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:n}),!this.records.has(n.id))return;const r=await this.getRecord(n.id);typeof r.response>"u"&&(r.response=Pi(n)?{error:n.error}:{result:n.result},this.records.set(r.id,r),this.persist(),this.events.emit(ki.updated,r))},this.get=async(n,r)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:n,id:r}),await this.getRecord(r)),this.delete=(n,r)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:r}),this.values.forEach(s=>{if(s.topic===n){if(typeof r<"u"&&s.id!==r)return;this.records.delete(s.id),this.events.emit(ki.deleted,s)}}),this.persist()},this.exists=async(n,r)=>(this.isInitialized(),this.records.has(r)?(await this.getRecord(r)).topic===n:!1),this.on=(n,r)=>{this.events.on(n,r)},this.once=(n,r)=>{this.events.once(n,r)},this.off=(n,r)=>{this.events.off(n,r)},this.removeListener=(n,r)=>{this.events.removeListener(n,r)},this.logger=Ht(i,this.name)}get context(){return li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(i=>{if(typeof i.response<"u")return;const n={topic:i.topic,request:Ur(i.request.method,i.request.params,i.id),chainId:i.chainId};return t.push(n)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const i=this.records.get(t);if(!i){const{message:n}=ee("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(n)}return i}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(ki.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:i}=ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),new Error(i)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(ki.created,t=>{const i=ki.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:t})}),this.events.on(ki.updated,t=>{const i=ki.updated;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:t})}),this.events.on(ki.deleted,t=>{const i=ki.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,record:t})}),this.core.heartbeat.on(cs.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(i=>{se.toMiliseconds(i.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${i.id}`),this.records.delete(i.id),this.events.emit(ki.deleted,i,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}class n9 extends Db{constructor(t,i){super(t,i),this.core=t,this.logger=i,this.expirations=new Map,this.events=new _n.EventEmitter,this.name=S7,this.version=j7,this.cached=[],this.initialized=!1,this.storagePrefix=un,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(n=>this.expirations.set(n.target,n)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=n=>{try{const r=this.formatTarget(n);return typeof this.getExpiration(r)<"u"}catch{return!1}},this.set=(n,r)=>{this.isInitialized();const s=this.formatTarget(n),a={target:s,expiry:r};this.expirations.set(s,a),this.checkExpiry(s,a),this.events.emit(wi.created,{target:s,expiration:a})},this.get=n=>{this.isInitialized();const r=this.formatTarget(n);return this.getExpiration(r)},this.del=n=>{if(this.isInitialized(),this.has(n)){const r=this.formatTarget(n),s=this.getExpiration(r);this.expirations.delete(r),this.events.emit(wi.deleted,{target:r,expiration:s})}},this.on=(n,r)=>{this.events.on(n,r)},this.once=(n,r)=>{this.events.once(n,r)},this.off=(n,r)=>{this.events.off(n,r)},this.removeListener=(n,r)=>{this.events.removeListener(n,r)},this.logger=Ht(i,this.name)}get context(){return li(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return gx(t);if(typeof t=="number")return mx(t);const{message:i}=ee("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(i)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(wi.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:i}=ee("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(i),new Error(i)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const i=this.expirations.get(t);if(!i){const{message:n}=ee("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(n),new Error(n)}return i}checkExpiry(t,i){const{expiry:n}=i;se.toMiliseconds(n)-Date.now()<=0&&this.expire(t,i)}expire(t,i){this.expirations.delete(t),this.events.emit(wi.expired,{target:t,expiration:i})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,i)=>this.checkExpiry(i,t))}registerEventListeners(){this.core.heartbeat.on(cs.pulse,()=>this.checkExpirations()),this.events.on(wi.created,t=>{const i=wi.created;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),this.persist()}),this.events.on(wi.expired,t=>{const i=wi.expired;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),this.persist()}),this.events.on(wi.deleted,t=>{const i=wi.deleted;this.logger.info(`Emitting ${i}`),this.logger.debug({type:"event",event:i,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}}}var ut={};Object.defineProperty(ut,"__esModule",{value:!0}),ut.getLocalStorage=ut.getLocalStorageOrThrow=ut.getCrypto=ut.getCryptoOrThrow=ut.getLocation=ut.getLocationOrThrow=ut.getNavigator=ut.getNavigatorOrThrow=m1=ut.getDocument=ut.getDocumentOrThrow=ut.getFromWindowOrThrow=ut.getFromWindow=void 0;function _r(e){let t;return typeof window<"u"&&typeof window[e]<"u"&&(t=window[e]),t}ut.getFromWindow=_r;function xs(e){const t=_r(e);if(!t)throw new Error(`${e} is not defined in Window`);return t}ut.getFromWindowOrThrow=xs;function r9(){return xs("document")}ut.getDocumentOrThrow=r9;function s9(){return _r("document")}var m1=ut.getDocument=s9;function o9(){return xs("navigator")}ut.getNavigatorOrThrow=o9;function a9(){return _r("navigator")}ut.getNavigator=a9;function c9(){return xs("location")}ut.getLocationOrThrow=c9;function l9(){return _r("location")}ut.getLocation=l9;function d9(){return xs("crypto")}ut.getCryptoOrThrow=d9;function h9(){return _r("crypto")}ut.getCrypto=h9;function u9(){return xs("localStorage")}ut.getLocalStorageOrThrow=u9;function f9(){return _r("localStorage")}ut.getLocalStorage=f9;class g9 extends Lb{constructor(t,i,n){super(t,i,n),this.core=t,this.logger=i,this.store=n,this.name=I7,this.verifyUrlV3=C7,this.storagePrefix=un,this.version=d1,this.init=async()=>{var r;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&se.toMiliseconds((r=this.publicKey)==null?void 0:r.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()),this.publicKey||await this.fetchAndPersistPublicKey())},this.register=async r=>{if(!io()||this.isDevEnv)return;const s=window.location.origin,{id:a,decryptedId:l}=r,d=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${s}&id=${a}&decryptedId=${l}`;try{const g=m1(),y=this.startAbortTimer(se.ONE_SECOND*5),b=await new Promise((M,A)=>{const S=()=>{window.removeEventListener("message",k),g.body.removeChild(C),A("attestation aborted")};this.abortController.signal.addEventListener("abort",S);const C=g.createElement("iframe");C.src=d,C.style.display="none",C.addEventListener("error",S,{signal:this.abortController.signal});const k=N=>{if(!N.data)return;const D=JSON.parse(N.data);if(D.type==="verify_attestation"){if(mc(D.attestation).payload.id!==a)return;clearInterval(y),g.body.removeChild(C),this.abortController.signal.removeEventListener("abort",S),window.removeEventListener("message",k),M(D.attestation===null?"":D.attestation)}};g.body.appendChild(C),window.addEventListener("message",k,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",b),b}catch(g){this.logger.warn(g)}return""},this.resolve=async r=>{if(this.isDevEnv)return"";const{attestationId:s,hash:a,encryptedId:l}=r;if(s===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(s){if(mc(s).payload.id!==l)return;const g=await this.isValidJwtAttestation(s);if(g)return g}if(!a)return;const d=this.getVerifyUrl(r==null?void 0:r.verifyUrl);return this.fetchAttestation(a,d)},this.fetchAttestation=async(r,s)=>{this.logger.debug(`resolving attestation: ${r} from url: ${s}`);const a=this.startAbortTimer(se.ONE_SECOND*5),l=await fetch(`${s}/attestation/${r}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(a),l.status===200?await l.json():void 0},this.getVerifyUrl=r=>{let s=r||Os;return E7.includes(s)||(this.logger.info(`verify url: ${s}, not included in trusted list, assigning default: ${Os}`),s=Os),s},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const r=this.startAbortTimer(se.FIVE_SECONDS),s=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(r),await s.json()}catch(r){this.logger.warn(r)}},this.persistPublicKey=async r=>{this.logger.debug("persisting public key to local storage",r),await this.store.setItem(this.storeKey,r),this.publicKey=r},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async r=>{const s=await this.getPublicKey();try{if(s)return this.validateAttestation(r,s)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}const a=await this.fetchAndPersistPublicKey();try{if(a)return this.validateAttestation(r,a)}catch(l){this.logger.error(l),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async s=>{const a=await this.fetchPublicKey();a&&(await this.persistPublicKey(a),s(a))});const r=await this.fetchPromise;return this.fetchPromise=void 0,r},this.validateAttestation=(r,s)=>{const a=Pw(r,s.publicKey),l={hasExpired:se.toMiliseconds(a.exp)<Date.now(),payload:a};if(l.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:l.payload.origin,isScam:l.payload.isScam}},this.logger=Ht(i,this.name),this.abortController=new AbortController,this.isDevEnv=Us()&&E5.IS_VITEST,this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return li(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),se.toMiliseconds(t))}}class m9 extends Pb{constructor(t,i){super(t,i),this.projectId=t,this.logger=i,this.context=N7,this.registerDeviceToken=async n=>{const{clientId:r,token:s,notificationType:a,enableEncrypted:l=!1}=n,d=`${_7}/${this.projectId}/clients`;await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:r,type:a,token:s,always_raw:l})})},this.logger=Ht(i,this.context)}}var p9=Object.defineProperty,Dh=Object.getOwnPropertySymbols,y9=Object.prototype.hasOwnProperty,b9=Object.prototype.propertyIsEnumerable,Lh=(e,t,i)=>t in e?p9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,ks=(e,t)=>{for(var i in t||(t={}))y9.call(t,i)&&Lh(e,i,t[i]);if(Dh)for(var i of Dh(t))b9.call(t,i)&&Lh(e,i,t[i]);return e};class v9 extends zb{constructor(t,i,n=!0){super(t,i,n),this.core=t,this.logger=i,this.context=D7,this.storagePrefix=un,this.storageVersion=k7,this.events=new Map,this.shouldPersist=!1,this.createEvent=r=>{const{event:s="ERROR",type:a="",properties:{topic:l,trace:d}}=r,g=vx(),y=this.core.projectId||"",b=Date.now(),M=ks({eventId:g,bundleId:y,timestamp:b,props:{event:s,type:a,properties:{topic:l,trace:d}}},this.setMethods(g));return this.telemetryEnabled&&(this.events.set(g,M),this.shouldPersist=!0),M},this.getEvent=r=>{const{eventId:s,topic:a}=r;if(s)return this.events.get(s);const l=Array.from(this.events.values()).find(d=>d.props.properties.topic===a);if(l)return ks(ks({},l),this.setMethods(l.eventId))},this.deleteEvent=r=>{const{eventId:s}=r;this.events.delete(s),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(cs.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(r=>{se.fromMiliseconds(Date.now())-se.fromMiliseconds(r.timestamp)>L7&&(this.events.delete(r.eventId),this.shouldPersist=!0)})})},this.setMethods=r=>({addTrace:s=>this.addTrace(r,s),setError:s=>this.setError(r,s)}),this.addTrace=(r,s)=>{const a=this.events.get(r);a&&(a.props.properties.trace.push(s),this.events.set(r,a),this.shouldPersist=!0)},this.setError=(r,s)=>{const a=this.events.get(r);a&&(a.props.type=s,a.timestamp=Date.now(),this.events.set(r,a),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const r=await this.core.storage.getItem(this.storageKey)||[];if(!r.length)return;r.forEach(s=>{this.events.set(s.eventId,ks(ks({},s),this.setMethods(s.eventId)))})}catch(r){this.logger.warn(r)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const r=[];for(const[s,a]of this.events)a.props.type&&r.push(a);if(r.length!==0)try{if((await fetch(`${P7}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${f1}`,{method:"POST",body:JSON.stringify(r)})).ok)for(const s of r)this.events.delete(s.eventId),this.shouldPersist=!0}catch(s){this.logger.warn(s)}},this.logger=Ht(i,this.context),n?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var x9=Object.defineProperty,Ph=Object.getOwnPropertySymbols,w9=Object.prototype.hasOwnProperty,M9=Object.prototype.propertyIsEnumerable,zh=(e,t,i)=>t in e?x9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Rh=(e,t)=>{for(var i in t||(t={}))w9.call(t,i)&&zh(e,i,t[i]);if(Ph)for(var i of Ph(t))M9.call(t,i)&&zh(e,i,t[i]);return e};class Rl extends Ib{constructor(t){var i;super(t),this.protocol=l1,this.version=d1,this.name=zl,this.events=new _n.EventEmitter,this.initialized=!1,this.on=(a,l)=>this.events.on(a,l),this.once=(a,l)=>this.events.once(a,l),this.off=(a,l)=>this.events.off(a,l),this.removeListener=(a,l)=>this.events.removeListener(a,l),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||u1,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const n=Kc({level:typeof(t==null?void 0:t.logger)=="string"&&t.logger?t.logger:e7.logger}),{logger:r,chunkLoggerController:s}=ym({opts:n,maxSizeInBytes:t==null?void 0:t.maxLogBlobSizeInBytes,loggerOverride:t==null?void 0:t.logger});this.logChunkController=s,(i=this.logChunkController)!=null&&i.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var a,l;(a=this.logChunkController)!=null&&a.downloadLogsBlobInBrowser&&((l=this.logChunkController)==null||l.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ht(r,this.name),this.heartbeat=new vl,this.crypto=new R7(this,this.logger,t==null?void 0:t.keychain),this.history=new i9(this,this.logger),this.expirer=new n9(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new bm(Rh(Rh({},t7),t==null?void 0:t.storageOptions)),this.relayer=new Z7({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new t9(this,this.logger),this.verify=new g9(this,this.logger,this.storage),this.echoClient=new m9(this.projectId||"",this.logger),this.eventClient=new v9(this,this.logger,t==null?void 0:t.telemetryEnabled)}static async init(t){const i=new Rl(t);await i.initialize();const n=await i.crypto.getClientId();return await i.storage.setItem(p7,n),i}get context(){return li(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const A9=Rl,p1="wc",y1=2,b1="client",Ol=`${p1}@${y1}:${b1}:`,lc={name:b1,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Oh="WALLETCONNECT_DEEPLINK_CHOICE",S9="proposal",j9="Proposal expired",I9="session",Pr=se.SEVEN_DAYS,T9="engine",kt={wc_sessionPropose:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1104},res:{ttl:se.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1106},res:{ttl:se.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:se.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1112},res:{ttl:se.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:se.ONE_DAY,prompt:!1,tag:1114},res:{ttl:se.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:se.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:se.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:se.FIVE_MINUTES,prompt:!1,tag:1119}}},dc={min:se.FIVE_MINUTES,max:se.SEVEN_DAYS},$i={idle:"IDLE",active:"ACTIVE"},C9="request",E9=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],N9="wc",_9="auth",k9="authKeys",D9="pairingTopics",L9="requests",Ia=`${N9}@${1.5}:${_9}:`,To=`${Ia}:PUB_KEY`;var P9=Object.defineProperty,z9=Object.defineProperties,R9=Object.getOwnPropertyDescriptors,Bh=Object.getOwnPropertySymbols,O9=Object.prototype.hasOwnProperty,B9=Object.prototype.propertyIsEnumerable,qh=(e,t,i)=>t in e?P9(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,St=(e,t)=>{for(var i in t||(t={}))O9.call(t,i)&&qh(e,i,t[i]);if(Bh)for(var i of Bh(t))B9.call(t,i)&&qh(e,i,t[i]);return e},hr=(e,t)=>z9(e,R9(t));class q9 extends Ob{constructor(t){super(t),this.name=T9,this.events=new pu,this.initialized=!1,this.requestQueue={state:$i.idle,queue:[]},this.sessionRequestQueue={state:$i.idle,queue:[]},this.requestQueueDelay=se.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(kt)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},se.toMiliseconds(this.requestQueueDelay)))},this.connect=async i=>{await this.isInitialized();const n=hr(St({},i),{requiredNamespaces:i.requiredNamespaces||{},optionalNamespaces:i.optionalNamespaces||{}});await this.isValidConnect(n);const{pairingTopic:r,requiredNamespaces:s,optionalNamespaces:a,sessionProperties:l,relays:d}=n;let g=r,y,b=!1;try{g&&(b=this.client.core.pairing.pairings.get(g).active)}catch(P){throw this.client.logger.error(`connect() -> pairing.get(${g}) failed`),P}if(!g||!b){const{topic:P,uri:z}=await this.client.core.pairing.create();g=P,y=z}if(!g){const{message:P}=ee("NO_MATCHING_KEY",`connect() pairing topic: ${g}`);throw new Error(P)}const M=await this.client.core.crypto.generateKeyPair(),A=kt.wc_sessionPropose.req.ttl||se.FIVE_MINUTES,S=Dt(A),C=St({requiredNamespaces:s,optionalNamespaces:a,relays:d??[{protocol:h1}],proposer:{publicKey:M,metadata:this.client.metadata},expiryTimestamp:S,pairingTopic:g},l&&{sessionProperties:l}),{reject:k,resolve:N,done:D}=ur(A,j9);this.events.once(Ce("session_connect"),async({error:P,session:z})=>{if(P)k(P);else if(z){z.self.publicKey=M;const W=hr(St({},z),{pairingTopic:C.pairingTopic,requiredNamespaces:C.requiredNamespaces,optionalNamespaces:C.optionalNamespaces});await this.client.session.set(z.topic,W),await this.setExpiry(z.topic,z.expiry),g&&await this.client.core.pairing.updateMetadata({topic:g,metadata:z.peer.metadata}),this.cleanupDuplicatePairings(W),N(W)}});const B=await this.sendRequest({topic:g,method:"wc_sessionPropose",params:C,throwOnFailedPublish:!0});return await this.setProposal(B,St({id:B},C)),{uri:y,approval:D}},this.pair=async i=>{await this.isInitialized();try{return await this.client.core.pairing.pair(i)}catch(n){throw this.client.logger.error("pair() failed"),n}},this.approve=async i=>{var n,r,s;const a=this.client.core.eventClient.createEvent({properties:{topic:(n=i==null?void 0:i.id)==null?void 0:n.toString(),trace:[Di.session_approve_started]}});try{await this.isInitialized()}catch(Y){throw a.setError(lr.no_internet_connection),Y}try{await this.isValidProposalId(i==null?void 0:i.id)}catch(Y){throw this.client.logger.error(`approve() -> proposal.get(${i==null?void 0:i.id}) failed`),a.setError(lr.proposal_not_found),Y}try{await this.isValidApprove(i)}catch(Y){throw this.client.logger.error("approve() -> isValidApprove() failed"),a.setError(lr.session_approve_namespace_validation_failure),Y}const{id:l,relayProtocol:d,namespaces:g,sessionProperties:y,sessionConfig:b}=i,M=this.client.proposal.get(l);this.client.core.eventClient.deleteEvent({eventId:a.eventId});const{pairingTopic:A,proposer:S,requiredNamespaces:C,optionalNamespaces:k}=M;let N=(r=this.client.core.eventClient)==null?void 0:r.getEvent({topic:A});N||(N=(s=this.client.core.eventClient)==null?void 0:s.createEvent({type:Di.session_approve_started,properties:{topic:A,trace:[Di.session_approve_started,Di.session_namespaces_validation_success]}}));const D=await this.client.core.crypto.generateKeyPair(),B=S.publicKey,P=await this.client.core.crypto.generateSharedKey(D,B),z=St(St({relay:{protocol:d??"irn"},namespaces:g,controller:{publicKey:D,metadata:this.client.metadata},expiry:Dt(Pr)},y&&{sessionProperties:y}),b&&{sessionConfig:b});N.addTrace(Di.subscribing_session_topic);try{await this.client.core.relayer.subscribe(P)}catch(Y){throw N.setError(lr.subscribe_session_topic_failure),Y}N.addTrace(Di.subscribe_session_topic_success);const W=hr(St({},z),{topic:P,requiredNamespaces:C,optionalNamespaces:k,pairingTopic:A,acknowledged:!1,self:z.controller,peer:{publicKey:S.publicKey,metadata:S.metadata},controller:D});await this.client.session.set(P,W),N.addTrace(Di.store_session);try{N.addTrace(Di.publishing_session_settle),await this.sendRequest({topic:P,method:"wc_sessionSettle",params:z,throwOnFailedPublish:!0}).catch(Y=>{throw N==null||N.setError(lr.session_settle_publish_failure),Y}),N.addTrace(Di.session_settle_publish_success),N.addTrace(Di.publishing_session_approve),await this.sendResult({id:l,topic:A,result:{relay:{protocol:d??"irn"},responderPublicKey:D},throwOnFailedPublish:!0}).catch(Y=>{throw N==null||N.setError(lr.session_approve_publish_failure),Y}),N.addTrace(Di.session_approve_publish_success)}catch(Y){throw this.client.logger.error(Y),this.client.session.delete(P,dt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(P),Y}return this.client.core.eventClient.deleteEvent({eventId:N.eventId}),await this.client.core.pairing.updateMetadata({topic:A,metadata:S.metadata}),await this.client.proposal.delete(l,dt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:A}),await this.setExpiry(P,Dt(Pr)),{topic:P,acknowledged:()=>Promise.resolve(this.client.session.get(P))}},this.reject=async i=>{await this.isInitialized();try{await this.isValidReject(i)}catch(a){throw this.client.logger.error("reject() -> isValidReject() failed"),a}const{id:n,reason:r}=i;let s;try{s=this.client.proposal.get(n).pairingTopic}catch(a){throw this.client.logger.error(`reject() -> proposal.get(${n}) failed`),a}s&&(await this.sendError({id:n,topic:s,error:r,rpcOpts:kt.wc_sessionPropose.reject}),await this.client.proposal.delete(n,dt("USER_DISCONNECTED")))},this.update=async i=>{await this.isInitialized();try{await this.isValidUpdate(i)}catch(b){throw this.client.logger.error("update() -> isValidUpdate() failed"),b}const{topic:n,namespaces:r}=i,{done:s,resolve:a,reject:l}=ur(),d=Dr(),g=fr().toString(),y=this.client.session.get(n).namespaces;return this.events.once(Ce("session_update",d),({error:b})=>{b?l(b):a()}),await this.client.session.update(n,{namespaces:r}),await this.sendRequest({topic:n,method:"wc_sessionUpdate",params:{namespaces:r},throwOnFailedPublish:!0,clientRpcId:d,relayRpcId:g}).catch(b=>{this.client.logger.error(b),this.client.session.update(n,{namespaces:y}),l(b)}),{acknowledged:s}},this.extend=async i=>{await this.isInitialized();try{await this.isValidExtend(i)}catch(d){throw this.client.logger.error("extend() -> isValidExtend() failed"),d}const{topic:n}=i,r=Dr(),{done:s,resolve:a,reject:l}=ur();return this.events.once(Ce("session_extend",r),({error:d})=>{d?l(d):a()}),await this.setExpiry(n,Dt(Pr)),this.sendRequest({topic:n,method:"wc_sessionExtend",params:{},clientRpcId:r,throwOnFailedPublish:!0}).catch(d=>{l(d)}),{acknowledged:s}},this.request=async i=>{await this.isInitialized();try{await this.isValidRequest(i)}catch(A){throw this.client.logger.error("request() -> isValidRequest() failed"),A}const{chainId:n,request:r,topic:s,expiry:a=kt.wc_sessionRequest.req.ttl}=i,l=this.client.session.get(s),d=Dr(),g=fr().toString(),{done:y,resolve:b,reject:M}=ur(a,"Request expired. Please try again.");return this.events.once(Ce("session_request",d),({error:A,result:S})=>{A?M(A):b(S)}),await Promise.all([new Promise(async A=>{await this.sendRequest({clientRpcId:d,relayRpcId:g,topic:s,method:"wc_sessionRequest",params:{request:hr(St({},r),{expiryTimestamp:Dt(a)}),chainId:n},expiry:a,throwOnFailedPublish:!0}).catch(S=>M(S)),this.client.events.emit("session_request_sent",{topic:s,request:r,chainId:n,id:d}),A()}),new Promise(async A=>{var S;if(!((S=l.sessionConfig)!=null&&S.disableDeepLink)){const C=await bx(this.client.core.storage,Oh);yx({id:d,topic:s,wcDeepLink:C})}A()}),y()]).then(A=>A[2])},this.respond=async i=>{await this.isInitialized(),await this.isValidRespond(i);const{topic:n,response:r}=i,{id:s}=r;bn(r)?await this.sendResult({id:s,topic:n,result:r.result,throwOnFailedPublish:!0}):Pi(r)&&await this.sendError({id:s,topic:n,error:r.error}),this.cleanupAfterResponse(i)},this.ping=async i=>{await this.isInitialized();try{await this.isValidPing(i)}catch(r){throw this.client.logger.error("ping() -> isValidPing() failed"),r}const{topic:n}=i;if(this.client.session.keys.includes(n)){const r=Dr(),s=fr().toString(),{done:a,resolve:l,reject:d}=ur();this.events.once(Ce("session_ping",r),({error:g})=>{g?d(g):l()}),await Promise.all([this.sendRequest({topic:n,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:r,relayRpcId:s}),a()])}else this.client.core.pairing.pairings.keys.includes(n)&&await this.client.core.pairing.ping({topic:n})},this.emit=async i=>{await this.isInitialized(),await this.isValidEmit(i);const{topic:n,event:r,chainId:s}=i,a=fr().toString();await this.sendRequest({topic:n,method:"wc_sessionEvent",params:{event:r,chainId:s},throwOnFailedPublish:!0,relayRpcId:a})},this.disconnect=async i=>{await this.isInitialized(),await this.isValidDisconnect(i);const{topic:n}=i;if(this.client.session.keys.includes(n))await this.sendRequest({topic:n,method:"wc_sessionDelete",params:dt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:n,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(n))await this.client.core.pairing.disconnect({topic:n});else{const{message:r}=ee("MISMATCHED_TOPIC",`Session or pairing topic not found: ${n}`);throw new Error(r)}},this.find=i=>(this.isInitialized(),this.client.session.getAll().filter(n=>Xw(n,i))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async i=>{this.isInitialized(),this.isValidAuthenticate(i);const{chains:n,statement:r="",uri:s,domain:a,nonce:l,type:d,exp:g,nbf:y,methods:b=[],expiry:M}=i,A=[...i.resources||[]],{topic:S,uri:C}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});this.client.logger.info({message:"Generated new pairing",pairing:{topic:S,uri:C}});const k=await this.client.core.crypto.generateKeyPair(),N=Io(k);if(await Promise.all([this.client.auth.authKeys.set(To,{responseTopic:N,publicKey:k}),this.client.auth.pairingTopics.set(N,{topic:N,pairingTopic:S})]),await this.client.core.relayer.subscribe(N),this.client.logger.info(`sending request to new pairing topic: ${S}`),b.length>0){const{namespace:c}=Wa(n[0]);let h=uw(c,"request",b);jo(A)&&(h=gw(h,A.pop())),A.push(h)}const D=M&&M>kt.wc_sessionAuthenticate.req.ttl?M:kt.wc_sessionAuthenticate.req.ttl,B={authPayload:{type:d??"caip122",chains:n,statement:r,aud:s,domain:a,version:"1",nonce:l,iat:new Date().toISOString(),exp:g,nbf:y,resources:A},requester:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:Dt(D)},P={eip155:{chains:n,methods:[...new Set(["personal_sign",...b])],events:["chainChanged","accountsChanged"]}},z={requiredNamespaces:{},optionalNamespaces:P,relays:[{protocol:"irn"}],pairingTopic:S,proposer:{publicKey:k,metadata:this.client.metadata},expiryTimestamp:Dt(kt.wc_sessionPropose.req.ttl)},{done:W,resolve:Y,reject:Z}=ur(D,"Request expired"),H=async({error:c,session:h})=>{if(this.events.off(Ce("session_request",E),X),c)Z(c);else if(h){h.self.publicKey=k,await this.client.session.set(h.topic,h),await this.setExpiry(h.topic,h.expiry),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:h.peer.metadata});const p=this.client.session.get(h.topic);await this.deleteProposal(m),Y({session:p})}},X=async c=>{if(await this.deletePendingAuthRequest(E,{message:"fulfilled",code:0}),c.error){const u=dt("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return c.error.code===u.code?void 0:(this.events.off(Ce("session_connect"),H),Z(c.error.message))}await this.deleteProposal(m),this.events.off(Ce("session_connect"),H);const{cacaos:h,responder:p}=c.result,v=[],x=[];for(const u of h){await ih({cacao:u,projectId:this.client.core.projectId})||(this.client.logger.error(u,"Signature verification failed"),Z(dt("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:f}=u,T=jo(f.resources),$=[th(f.iss)],V=Qo(f.iss);if(T){const j=nh(T),O=rh(T);v.push(...j),$.push(...O)}for(const j of $)x.push(`${j}:${V}`)}const I=await this.client.core.crypto.generateSharedKey(k,p.publicKey);let w;v.length>0&&(w={topic:I,acknowledged:!0,self:{publicKey:k,metadata:this.client.metadata},peer:p,controller:p.publicKey,expiry:Dt(Pr),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:S,namespaces:fh([...new Set(v)],[...new Set(x)])},await this.client.core.relayer.subscribe(I),await this.client.session.set(I,w),S&&await this.client.core.pairing.updateMetadata({topic:S,metadata:p.metadata}),w=this.client.session.get(I)),Y({auths:h,session:w})},E=Dr(),m=Dr();this.events.once(Ce("session_connect"),H),this.events.once(Ce("session_request",E),X);try{await Promise.all([this.sendRequest({topic:S,method:"wc_sessionAuthenticate",params:B,expiry:i.expiry,throwOnFailedPublish:!0,clientRpcId:E}),this.sendRequest({topic:S,method:"wc_sessionPropose",params:z,expiry:kt.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:m})])}catch(c){throw this.events.off(Ce("session_connect"),H),this.events.off(Ce("session_request",E),X),c}return await this.setProposal(m,St({id:m},z)),await this.setAuthRequest(E,{request:hr(St({},B),{verifyContext:{}}),pairingTopic:S}),{uri:C,response:W}},this.approveSessionAuthenticate=async i=>{const{id:n,auths:r}=i,s=this.client.core.eventClient.createEvent({properties:{topic:n.toString(),trace:[dr.authenticated_session_approve_started]}});try{this.isInitialized()}catch(C){throw s.setError(Ns.no_internet_connection),C}const a=this.getPendingAuthRequest(n);if(!a)throw s.setError(Ns.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${n}`);const l=a.requester.publicKey,d=await this.client.core.crypto.generateKeyPair(),g=Io(l),y={type:jn,receiverPublicKey:l,senderPublicKey:d},b=[],M=[];for(const C of r){if(!await ih({cacao:C,projectId:this.client.core.projectId})){s.setError(Ns.invalid_cacao);const P=dt("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:n,topic:g,error:P,encodeOpts:y}),new Error(P.message)}s.addTrace(dr.cacaos_verified);const{p:k}=C,N=jo(k.resources),D=[th(k.iss)],B=Qo(k.iss);if(N){const P=nh(N),z=rh(N);b.push(...P),D.push(...z)}for(const P of D)M.push(`${P}:${B}`)}const A=await this.client.core.crypto.generateSharedKey(d,l);s.addTrace(dr.create_authenticated_session_topic);let S;if((b==null?void 0:b.length)>0){S={topic:A,acknowledged:!0,self:{publicKey:d,metadata:this.client.metadata},peer:{publicKey:l,metadata:a.requester.metadata},controller:l,expiry:Dt(Pr),authentication:r,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:a.pairingTopic,namespaces:fh([...new Set(b)],[...new Set(M)])},s.addTrace(dr.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(A)}catch(C){throw s.setError(Ns.subscribe_authenticated_session_topic_failure),C}s.addTrace(dr.subscribe_authenticated_session_topic_success),await this.client.session.set(A,S),s.addTrace(dr.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:a.pairingTopic,metadata:a.requester.metadata})}s.addTrace(dr.publishing_authenticated_session_approve);try{await this.sendResult({topic:g,id:n,result:{cacaos:r,responder:{publicKey:d,metadata:this.client.metadata}},encodeOpts:y,throwOnFailedPublish:!0})}catch(C){throw s.setError(Ns.authenticated_session_approve_publish_failure),C}return await this.client.auth.requests.delete(n,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:a.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:s.eventId}),{session:S}},this.rejectSessionAuthenticate=async i=>{await this.isInitialized();const{id:n,reason:r}=i,s=this.getPendingAuthRequest(n);if(!s)throw new Error(`Could not find pending auth request with id ${n}`);const a=s.requester.publicKey,l=await this.client.core.crypto.generateKeyPair(),d=Io(a),g={type:jn,receiverPublicKey:a,senderPublicKey:l};await this.sendError({id:n,topic:d,error:r,encodeOpts:g,rpcOpts:kt.wc_sessionAuthenticate.reject}),await this.client.auth.requests.delete(n,{message:"rejected",code:0}),await this.client.proposal.delete(n,dt("USER_DISCONNECTED"))},this.formatAuthMessage=i=>{this.isInitialized();const{request:n,iss:r}=i;return Y0(n,r)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const i=this.relayMessageCache.shift();i&&await this.onRelayMessage(i)}catch(i){this.client.logger.error(i)}},50)},this.cleanupDuplicatePairings=async i=>{if(i.pairingTopic)try{const n=this.client.core.pairing.pairings.get(i.pairingTopic),r=this.client.core.pairing.pairings.getAll().filter(s=>{var a,l;return((a=s.peerMetadata)==null?void 0:a.url)&&((l=s.peerMetadata)==null?void 0:l.url)===i.peer.metadata.url&&s.topic&&s.topic!==n.topic});if(r.length===0)return;this.client.logger.info(`Cleaning up ${r.length} duplicate pairing(s)`),await Promise.all(r.map(s=>this.client.core.pairing.disconnect({topic:s.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(n){this.client.logger.error(n)}},this.deleteSession=async i=>{var n;const{topic:r,expirerHasDeleted:s=!1,emitEvent:a=!0,id:l=0}=i,{self:d}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),await this.client.session.delete(r,dt("USER_DISCONNECTED")),this.addToRecentlyDeleted(r,"session"),this.client.core.crypto.keychain.has(d.publicKey)&&await this.client.core.crypto.deleteKeyPair(d.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r),this.client.core.storage.removeItem(Oh).catch(g=>this.client.logger.warn(g)),this.getPendingSessionRequests().forEach(g=>{g.topic===r&&this.deletePendingSessionRequest(g.id,dt("USER_DISCONNECTED"))}),r===((n=this.sessionRequestQueue.queue[0])==null?void 0:n.topic)&&(this.sessionRequestQueue.state=$i.idle),a&&this.client.events.emit("session_delete",{id:l,topic:r})},this.deleteProposal=async(i,n)=>{if(n)try{const r=this.client.proposal.get(i),s=this.client.core.eventClient.getEvent({topic:r.pairingTopic});s==null||s.setError(lr.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(i,dt("USER_DISCONNECTED")),n?Promise.resolve():this.client.core.expirer.del(i)]),this.addToRecentlyDeleted(i,"proposal")},this.deletePendingSessionRequest=async(i,n,r=!1)=>{await Promise.all([this.client.pendingRequest.delete(i,n),r?Promise.resolve():this.client.core.expirer.del(i)]),this.addToRecentlyDeleted(i,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(s=>s.id!==i),r&&(this.sessionRequestQueue.state=$i.idle,this.client.events.emit("session_request_expire",{id:i}))},this.deletePendingAuthRequest=async(i,n,r=!1)=>{await Promise.all([this.client.auth.requests.delete(i,n),r?Promise.resolve():this.client.core.expirer.del(i)])},this.setExpiry=async(i,n)=>{this.client.session.keys.includes(i)&&(this.client.core.expirer.set(i,n),await this.client.session.update(i,{expiry:n}))},this.setProposal=async(i,n)=>{this.client.core.expirer.set(i,Dt(kt.wc_sessionPropose.req.ttl)),await this.client.proposal.set(i,n)},this.setAuthRequest=async(i,n)=>{const{request:r,pairingTopic:s}=n;this.client.core.expirer.set(i,r.expiryTimestamp),await this.client.auth.requests.set(i,{authPayload:r.authPayload,requester:r.requester,expiryTimestamp:r.expiryTimestamp,id:i,pairingTopic:s,verifyContext:r.verifyContext})},this.setPendingSessionRequest=async i=>{const{id:n,topic:r,params:s,verifyContext:a}=i,l=s.request.expiryTimestamp||Dt(kt.wc_sessionRequest.req.ttl);this.client.core.expirer.set(n,l),await this.client.pendingRequest.set(n,{id:n,topic:r,params:s,verifyContext:a})},this.sendRequest=async i=>{const{topic:n,method:r,params:s,expiry:a,relayRpcId:l,clientRpcId:d,throwOnFailedPublish:g}=i,y=Ur(r,s,d);let b;try{b=await this.client.core.crypto.encode(n,y)}catch(S){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${n} failed`),S}let M;if(E9.includes(r)){const S=wn(JSON.stringify(y)),C=wn(b);M=await this.client.core.verify.register({id:C,decryptedId:S})}const A=kt[r].req;return A.attestation=M,a&&(A.ttl=a),l&&(A.id=l),this.client.core.history.set(n,y),g?(A.internal=hr(St({},A.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(n,b,A)):this.client.core.relayer.publish(n,b,A).catch(S=>this.client.logger.error(S)),y.id},this.sendResult=async i=>{const{id:n,topic:r,result:s,throwOnFailedPublish:a,encodeOpts:l}=i,d=Zc(n,s);let g;try{g=await this.client.core.crypto.encode(r,d,l)}catch(M){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${r} failed`),M}let y;try{y=await this.client.core.history.get(r,n)}catch(M){throw this.client.logger.error(`sendResult() -> history.get(${r}, ${n}) failed`),M}const b=kt[y.request.method].res;a?(b.internal=hr(St({},b.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(r,g,b)):this.client.core.relayer.publish(r,g,b).catch(M=>this.client.logger.error(M)),await this.client.core.history.resolve(d)},this.sendError=async i=>{const{id:n,topic:r,error:s,encodeOpts:a,rpcOpts:l}=i,d=Au(n,s);let g;try{g=await this.client.core.crypto.encode(r,d,a)}catch(M){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${r} failed`),M}let y;try{y=await this.client.core.history.get(r,n)}catch(M){throw this.client.logger.error(`sendError() -> history.get(${r}, ${n}) failed`),M}const b=l||kt[y.request.method].res;this.client.core.relayer.publish(r,g,b),await this.client.core.history.resolve(d)},this.cleanup=async()=>{const i=[],n=[];this.client.session.getAll().forEach(r=>{let s=!1;zn(r.expiry)&&(s=!0),this.client.core.crypto.keychain.has(r.topic)||(s=!0),s&&i.push(r.topic)}),this.client.proposal.getAll().forEach(r=>{zn(r.expiryTimestamp)&&n.push(r.id)}),await Promise.all([...i.map(r=>this.deleteSession({topic:r})),...n.map(r=>this.deleteProposal(r))])},this.onRelayEventRequest=async i=>{this.requestQueue.queue.push(i),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===$i.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=$i.active;const i=this.requestQueue.queue.shift();if(i)try{await this.processRequest(i)}catch(n){this.client.logger.warn(n)}}this.requestQueue.state=$i.idle},this.processRequest=async i=>{const{topic:n,payload:r,attestation:s,encryptedId:a}=i,l=r.method;if(!this.shouldIgnorePairingRequest({topic:n,requestMethod:l}))switch(l){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:n,payload:r,attestation:s,encryptedId:a});case"wc_sessionSettle":return await this.onSessionSettleRequest(n,r);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(n,r);case"wc_sessionExtend":return await this.onSessionExtendRequest(n,r);case"wc_sessionPing":return await this.onSessionPingRequest(n,r);case"wc_sessionDelete":return await this.onSessionDeleteRequest(n,r);case"wc_sessionRequest":return await this.onSessionRequest({topic:n,payload:r,attestation:s,encryptedId:a});case"wc_sessionEvent":return await this.onSessionEventRequest(n,r);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:n,payload:r,attestation:s,encryptedId:a});default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async i=>{const{topic:n,payload:r}=i,s=(await this.client.core.history.get(n,r.id)).request.method;switch(s){case"wc_sessionPropose":return this.onSessionProposeResponse(n,r);case"wc_sessionSettle":return this.onSessionSettleResponse(n,r);case"wc_sessionUpdate":return this.onSessionUpdateResponse(n,r);case"wc_sessionExtend":return this.onSessionExtendResponse(n,r);case"wc_sessionPing":return this.onSessionPingResponse(n,r);case"wc_sessionRequest":return this.onSessionRequestResponse(n,r);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(n,r);default:return this.client.logger.info(`Unsupported response method ${s}`)}},this.onRelayEventUnknownPayload=i=>{const{topic:n}=i,{message:r}=ee("MISSING_OR_INVALID",`Decoded payload on topic ${n} is not identifiable as a JSON-RPC request or a response.`);throw new Error(r)},this.shouldIgnorePairingRequest=i=>{const{topic:n,requestMethod:r}=i,s=this.expectedPairingMethodMap.get(n);return!s||s.includes(r)?!1:!!(s.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async i=>{const{topic:n,payload:r,attestation:s,encryptedId:a}=i,{params:l,id:d}=r;try{const g=this.client.core.eventClient.getEvent({topic:n});this.isValidConnect(St({},r.params));const y=l.expiryTimestamp||Dt(kt.wc_sessionPropose.req.ttl),b=St({id:d,pairingTopic:n,expiryTimestamp:y},l);await this.setProposal(d,b);const M=await this.getVerifyContext({attestationId:s,hash:wn(JSON.stringify(r)),encryptedId:a,metadata:b.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),g==null||g.setError(vn.proposal_listener_not_found)),g==null||g.addTrace(Hi.emit_session_proposal),this.client.events.emit("session_proposal",{id:d,params:b,verifyContext:M})}catch(g){await this.sendError({id:d,topic:n,error:g,rpcOpts:kt.wc_sessionPropose.autoReject}),this.client.logger.error(g)}},this.onSessionProposeResponse=async(i,n)=>{const{id:r}=n;if(bn(n)){const{result:s}=n;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:s});const a=this.client.proposal.get(r);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:a});const l=a.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:l});const d=s.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:d});const g=await this.client.core.crypto.generateSharedKey(l,d);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:g});const y=await this.client.core.relayer.subscribe(g);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:y}),await this.client.core.pairing.activate({topic:i})}else if(Pi(n)){await this.client.proposal.delete(r,dt("USER_DISCONNECTED"));const s=Ce("session_connect");if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners, 954`);this.events.emit(Ce("session_connect"),{error:n.error})}},this.onSessionSettleRequest=async(i,n)=>{const{id:r,params:s}=n;try{this.isValidSessionSettleRequest(s);const{relay:a,controller:l,expiry:d,namespaces:g,sessionProperties:y,sessionConfig:b}=n.params,M=St(St({topic:i,relay:a,expiry:d,namespaces:g,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:l.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:l.publicKey,metadata:l.metadata}},y&&{sessionProperties:y}),b&&{sessionConfig:b}),A=Ce("session_connect");if(this.events.listenerCount(A)===0)throw new Error(`emitting ${A} without any listeners 997`);this.events.emit(Ce("session_connect"),{session:M}),await this.sendResult({id:n.id,topic:i,result:!0,throwOnFailedPublish:!0})}catch(a){await this.sendError({id:r,topic:i,error:a}),this.client.logger.error(a)}},this.onSessionSettleResponse=async(i,n)=>{const{id:r}=n;bn(n)?(await this.client.session.update(i,{acknowledged:!0}),this.events.emit(Ce("session_approve",r),{})):Pi(n)&&(await this.client.session.delete(i,dt("USER_DISCONNECTED")),this.events.emit(Ce("session_approve",r),{error:n.error}))},this.onSessionUpdateRequest=async(i,n)=>{const{params:r,id:s}=n;try{const a=`${i}_session_update`,l=Cs.get(a);if(l&&this.isRequestOutOfSync(l,s)){this.client.logger.info(`Discarding out of sync request - ${s}`),this.sendError({id:s,topic:i,error:dt("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(St({topic:i},r));try{Cs.set(a,s),await this.client.session.update(i,{namespaces:r.namespaces}),await this.sendResult({id:s,topic:i,result:!0,throwOnFailedPublish:!0})}catch(d){throw Cs.delete(a),d}this.client.events.emit("session_update",{id:s,topic:i,params:r})}catch(a){await this.sendError({id:s,topic:i,error:a}),this.client.logger.error(a)}},this.isRequestOutOfSync=(i,n)=>parseInt(n.toString().slice(0,-3))<=parseInt(i.toString().slice(0,-3)),this.onSessionUpdateResponse=(i,n)=>{const{id:r}=n,s=Ce("session_update",r);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);bn(n)?this.events.emit(Ce("session_update",r),{}):Pi(n)&&this.events.emit(Ce("session_update",r),{error:n.error})},this.onSessionExtendRequest=async(i,n)=>{const{id:r}=n;try{this.isValidExtend({topic:i}),await this.setExpiry(i,Dt(Pr)),await this.sendResult({id:r,topic:i,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:r,topic:i})}catch(s){await this.sendError({id:r,topic:i,error:s}),this.client.logger.error(s)}},this.onSessionExtendResponse=(i,n)=>{const{id:r}=n,s=Ce("session_extend",r);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);bn(n)?this.events.emit(Ce("session_extend",r),{}):Pi(n)&&this.events.emit(Ce("session_extend",r),{error:n.error})},this.onSessionPingRequest=async(i,n)=>{const{id:r}=n;try{this.isValidPing({topic:i}),await this.sendResult({id:r,topic:i,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:r,topic:i})}catch(s){await this.sendError({id:r,topic:i,error:s}),this.client.logger.error(s)}},this.onSessionPingResponse=(i,n)=>{const{id:r}=n,s=Ce("session_ping",r);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);setTimeout(()=>{bn(n)?this.events.emit(Ce("session_ping",r),{}):Pi(n)&&this.events.emit(Ce("session_ping",r),{error:n.error})},500)},this.onSessionDeleteRequest=async(i,n)=>{const{id:r}=n;try{this.isValidDisconnect({topic:i,reason:n.params}),await Promise.all([new Promise(s=>{this.client.core.relayer.once(Zt.publish,async()=>{s(await this.deleteSession({topic:i,id:r}))})}),this.sendResult({id:r,topic:i,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:i,error:dt("USER_DISCONNECTED")})])}catch(s){this.client.logger.error(s)}},this.onSessionRequest=async i=>{var n;const{topic:r,payload:s,attestation:a,encryptedId:l}=i,{id:d,params:g}=s;try{await this.isValidRequest(St({topic:r},g));const y=this.client.session.get(r),b=await this.getVerifyContext({attestationId:a,hash:wn(JSON.stringify(Ur("wc_sessionRequest",g,d))),encryptedId:l,metadata:y.peer.metadata}),M={id:d,topic:r,params:g,verifyContext:b};await this.setPendingSessionRequest(M),(n=this.client.signConfig)!=null&&n.disableRequestQueue?this.emitSessionRequest(M):(this.addSessionRequestToSessionRequestQueue(M),this.processSessionRequestQueue())}catch(y){await this.sendError({id:d,topic:r,error:y}),this.client.logger.error(y)}},this.onSessionRequestResponse=(i,n)=>{const{id:r}=n,s=Ce("session_request",r);if(this.events.listenerCount(s)===0)throw new Error(`emitting ${s} without any listeners`);bn(n)?this.events.emit(Ce("session_request",r),{result:n.result}):Pi(n)&&this.events.emit(Ce("session_request",r),{error:n.error})},this.onSessionEventRequest=async(i,n)=>{const{id:r,params:s}=n;try{const a=`${i}_session_event_${s.event.name}`,l=Cs.get(a);if(l&&this.isRequestOutOfSync(l,r)){this.client.logger.info(`Discarding out of sync request - ${r}`);return}this.isValidEmit(St({topic:i},s)),this.client.events.emit("session_event",{id:r,topic:i,params:s}),Cs.set(a,r)}catch(a){await this.sendError({id:r,topic:i,error:a}),this.client.logger.error(a)}},this.onSessionAuthenticateResponse=(i,n)=>{const{id:r}=n;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:i,payload:n}),bn(n)?this.events.emit(Ce("session_request",r),{result:n.result}):Pi(n)&&this.events.emit(Ce("session_request",r),{error:n.error})},this.onSessionAuthenticateRequest=async i=>{const{topic:n,payload:r,attestation:s,encryptedId:a}=i;try{const{requester:l,authPayload:d,expiryTimestamp:g}=r.params,y=await this.getVerifyContext({attestationId:s,hash:wn(JSON.stringify(r)),encryptedId:a,metadata:this.client.metadata}),b={requester:l,pairingTopic:n,id:r.id,authPayload:d,verifyContext:y,expiryTimestamp:g};await this.setAuthRequest(r.id,{request:b,pairingTopic:n}),this.client.events.emit("session_authenticate",{topic:n,params:r.params,id:r.id,verifyContext:y})}catch(l){this.client.logger.error(l);const d=r.params.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),y={type:jn,receiverPublicKey:d,senderPublicKey:g};await this.sendError({id:r.id,topic:n,error:l,encodeOpts:y,rpcOpts:kt.wc_sessionAuthenticate.autoReject})}},this.addSessionRequestToSessionRequestQueue=i=>{this.sessionRequestQueue.queue.push(i)},this.cleanupAfterResponse=i=>{this.deletePendingSessionRequest(i.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=$i.idle,this.processSessionRequestQueue()},se.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:i,error:n})=>{const r=this.client.core.history.pending;r.length>0&&r.filter(s=>s.topic===i&&s.request.method==="wc_sessionRequest").forEach(s=>{const a=s.request.id,l=Ce("session_request",a);if(this.events.listenerCount(l)===0)throw new Error(`emitting ${l} without any listeners`);this.events.emit(Ce("session_request",s.request.id),{error:n})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===$i.active){this.client.logger.info("session request queue is already active.");return}const i=this.sessionRequestQueue.queue[0];if(!i){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=$i.active,this.emitSessionRequest(i)}catch(n){this.client.logger.error(n)}},this.emitSessionRequest=i=>{this.client.events.emit("session_request",i)},this.onPairingCreated=i=>{if(i.methods&&this.expectedPairingMethodMap.set(i.topic,i.methods),i.active)return;const n=this.client.proposal.getAll().find(r=>r.pairingTopic===i.topic);n&&this.onSessionProposeRequest({topic:i.topic,payload:Ur("wc_sessionPropose",{requiredNamespaces:n.requiredNamespaces,optionalNamespaces:n.optionalNamespaces,relays:n.relays,proposer:n.proposer,sessionProperties:n.sessionProperties},n.id)})},this.isValidConnect=async i=>{if(!Qt(i)){const{message:d}=ee("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(i)}`);throw new Error(d)}const{pairingTopic:n,requiredNamespaces:r,optionalNamespaces:s,sessionProperties:a,relays:l}=i;if(Gt(n)||await this.isValidPairingTopic(n),!h5(l)){const{message:d}=ee("MISSING_OR_INVALID",`connect() relays: ${l}`);throw new Error(d)}!Gt(r)&&Ko(r)!==0&&this.validateNamespaces(r,"requiredNamespaces"),!Gt(s)&&Ko(s)!==0&&this.validateNamespaces(s,"optionalNamespaces"),Gt(a)||this.validateSessionProps(a,"sessionProperties")},this.validateNamespaces=(i,n)=>{const r=d5(i,"connect()",n);if(r)throw new Error(r.message)},this.isValidApprove=async i=>{if(!Qt(i))throw new Error(ee("MISSING_OR_INVALID",`approve() params: ${i}`).message);const{id:n,namespaces:r,relayProtocol:s,sessionProperties:a}=i;this.checkRecentlyDeleted(n),await this.isValidProposalId(n);const l=this.client.proposal.get(n),d=sc(r,"approve()");if(d)throw new Error(d.message);const g=ph(l.requiredNamespaces,r,"approve()");if(g)throw new Error(g.message);if(!xt(s,!0)){const{message:y}=ee("MISSING_OR_INVALID",`approve() relayProtocol: ${s}`);throw new Error(y)}Gt(a)||this.validateSessionProps(a,"sessionProperties")},this.isValidReject=async i=>{if(!Qt(i)){const{message:s}=ee("MISSING_OR_INVALID",`reject() params: ${i}`);throw new Error(s)}const{id:n,reason:r}=i;if(this.checkRecentlyDeleted(n),await this.isValidProposalId(n),!f5(r)){const{message:s}=ee("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(r)}`);throw new Error(s)}},this.isValidSessionSettleRequest=i=>{if(!Qt(i)){const{message:g}=ee("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${i}`);throw new Error(g)}const{relay:n,controller:r,namespaces:s,expiry:a}=i;if(!J0(n)){const{message:g}=ee("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(g)}const l=r5(r,"onSessionSettleRequest()");if(l)throw new Error(l.message);const d=sc(s,"onSessionSettleRequest()");if(d)throw new Error(d.message);if(zn(a)){const{message:g}=ee("EXPIRED","onSessionSettleRequest()");throw new Error(g)}},this.isValidUpdate=async i=>{if(!Qt(i)){const{message:d}=ee("MISSING_OR_INVALID",`update() params: ${i}`);throw new Error(d)}const{topic:n,namespaces:r}=i;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const s=this.client.session.get(n),a=sc(r,"update()");if(a)throw new Error(a.message);const l=ph(s.requiredNamespaces,r,"update()");if(l)throw new Error(l.message)},this.isValidExtend=async i=>{if(!Qt(i)){const{message:r}=ee("MISSING_OR_INVALID",`extend() params: ${i}`);throw new Error(r)}const{topic:n}=i;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n)},this.isValidRequest=async i=>{if(!Qt(i)){const{message:d}=ee("MISSING_OR_INVALID",`request() params: ${i}`);throw new Error(d)}const{topic:n,request:r,chainId:s,expiry:a}=i;this.checkRecentlyDeleted(n),await this.isValidSessionTopic(n);const{namespaces:l}=this.client.session.get(n);if(!mh(l,s)){const{message:d}=ee("MISSING_OR_INVALID",`request() chainId: ${s}`);throw new Error(d)}if(!g5(r)){const{message:d}=ee("MISSING_OR_INVALID",`request() ${JSON.stringify(r)}`);throw new Error(d)}if(!y5(l,s,r.method)){const{message:d}=ee("MISSING_OR_INVALID",`request() method: ${r.method}`);throw new Error(d)}if(a&&!w5(a,dc)){const{message:d}=ee("MISSING_OR_INVALID",`request() expiry: ${a}. Expiry must be a number (in seconds) between ${dc.min} and ${dc.max}`);throw new Error(d)}},this.isValidRespond=async i=>{var n;if(!Qt(i)){const{message:a}=ee("MISSING_OR_INVALID",`respond() params: ${i}`);throw new Error(a)}const{topic:r,response:s}=i;try{await this.isValidSessionTopic(r)}catch(a){throw(n=i==null?void 0:i.response)!=null&&n.id&&this.cleanupAfterResponse(i),a}if(!m5(s)){const{message:a}=ee("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(s)}`);throw new Error(a)}},this.isValidPing=async i=>{if(!Qt(i)){const{message:r}=ee("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(r)}const{topic:n}=i;await this.isValidSessionOrPairingTopic(n)},this.isValidEmit=async i=>{if(!Qt(i)){const{message:l}=ee("MISSING_OR_INVALID",`emit() params: ${i}`);throw new Error(l)}const{topic:n,event:r,chainId:s}=i;await this.isValidSessionTopic(n);const{namespaces:a}=this.client.session.get(n);if(!mh(a,s)){const{message:l}=ee("MISSING_OR_INVALID",`emit() chainId: ${s}`);throw new Error(l)}if(!p5(r)){const{message:l}=ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(l)}if(!b5(a,s,r.name)){const{message:l}=ee("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(r)}`);throw new Error(l)}},this.isValidDisconnect=async i=>{if(!Qt(i)){const{message:r}=ee("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(r)}const{topic:n}=i;await this.isValidSessionOrPairingTopic(n)},this.isValidAuthenticate=i=>{const{chains:n,uri:r,domain:s,nonce:a}=i;if(!Array.isArray(n)||n.length===0)throw new Error("chains is required and must be a non-empty array");if(!xt(r,!1))throw new Error("uri is required parameter");if(!xt(s,!1))throw new Error("domain is required parameter");if(!xt(a,!1))throw new Error("nonce is required parameter");if([...new Set(n.map(d=>Wa(d).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:l}=Wa(n[0]);if(l!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async i=>{const{attestationId:n,hash:r,encryptedId:s,metadata:a}=i,l={verified:{verifyUrl:a.verifyUrl||Os,validation:"UNKNOWN",origin:a.url||""}};try{const d=await this.client.core.verify.resolve({attestationId:n,hash:r,encryptedId:s,verifyUrl:a.verifyUrl});d&&(l.verified.origin=d.origin,l.verified.isScam=d.isScam,l.verified.validation=d.origin===new URL(a.url).origin?"VALID":"INVALID")}catch(d){this.client.logger.warn(d)}return this.client.logger.debug(`Verify context: ${JSON.stringify(l)}`),l},this.validateSessionProps=(i,n)=>{Object.values(i).forEach(r=>{if(!xt(r,!1)){const{message:s}=ee("MISSING_OR_INVALID",`${n} must be in Record<string, string> format. Received: ${JSON.stringify(r)}`);throw new Error(s)}})},this.getPendingAuthRequest=i=>{const n=this.client.auth.requests.get(i);return typeof n=="object"?n:void 0},this.addToRecentlyDeleted=(i,n)=>{if(this.recentlyDeletedMap.set(i,n),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let r=0;const s=this.recentlyDeletedLimit/2;for(const a of this.recentlyDeletedMap.keys()){if(r++>=s)break;this.recentlyDeletedMap.delete(a)}}},this.checkRecentlyDeleted=i=>{const n=this.recentlyDeletedMap.get(i);if(n){const{message:r}=ee("MISSING_OR_INVALID",`Record was recently deleted - ${n}: ${i}`);throw new Error(r)}}}async isInitialized(){if(!this.initialized){const{message:t}=ee("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Zt.message,t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):this.onRelayMessage(t)})}async onRelayMessage(t){const{topic:i,message:n,attestation:r}=t,{publicKey:s}=this.client.auth.authKeys.keys.includes(To)?this.client.auth.authKeys.get(To):{responseTopic:void 0,publicKey:void 0},a=await this.client.core.crypto.decode(i,n,{receiverPublicKey:s});try{Gc(a)?(this.client.core.history.set(i,a),this.onRelayEventRequest({topic:i,payload:a,attestation:r,encryptedId:wn(n)})):na(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:i,payload:a}),this.client.core.history.delete(i,a.id)):this.onRelayEventUnknownPayload({topic:i,payload:a})}catch(l){this.client.logger.error(l)}}registerExpirerEvents(){this.client.core.expirer.on(wi.expired,async t=>{const{topic:i,id:n}=d0(t.target);if(n&&this.client.pendingRequest.keys.includes(n))return await this.deletePendingSessionRequest(n,ee("EXPIRED"),!0);if(n&&this.client.auth.requests.keys.includes(n))return await this.deletePendingAuthRequest(n,ee("EXPIRED"),!0);i?this.client.session.keys.includes(i)&&(await this.deleteSession({topic:i,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:i})):n&&(await this.deleteProposal(n,!0),this.client.events.emit("proposal_expire",{id:n}))})}registerPairingEvents(){this.client.core.pairing.events.on(Br.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(Br.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!xt(t,!1)){const{message:i}=ee("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(i)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:i}=ee("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(i)}if(zn(this.client.core.pairing.pairings.get(t).expiry)){const{message:i}=ee("EXPIRED",`pairing topic: ${t}`);throw new Error(i)}}async isValidSessionTopic(t){if(!xt(t,!1)){const{message:i}=ee("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(i)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:i}=ee("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(i)}if(zn(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:i}=ee("EXPIRED",`session topic: ${t}`);throw new Error(i)}if(!this.client.core.crypto.keychain.has(t)){const{message:i}=ee("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(i)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(xt(t,!1)){const{message:i}=ee("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(i)}else{const{message:i}=ee("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(i)}}async isValidProposalId(t){if(!u5(t)){const{message:i}=ee("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(i)}if(!this.client.proposal.keys.includes(t)){const{message:i}=ee("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(i)}if(zn(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:i}=ee("EXPIRED",`proposal id: ${t}`);throw new Error(i)}}}class F9 extends Nr{constructor(t,i){super(t,i,S9,Ol),this.core=t,this.logger=i}}class U9 extends Nr{constructor(t,i){super(t,i,I9,Ol),this.core=t,this.logger=i}}class W9 extends Nr{constructor(t,i){super(t,i,C9,Ol,n=>n.id),this.core=t,this.logger=i}}class $9 extends Nr{constructor(t,i){super(t,i,k9,Ia,()=>To),this.core=t,this.logger=i}}class H9 extends Nr{constructor(t,i){super(t,i,D9,Ia),this.core=t,this.logger=i}}class Y9 extends Nr{constructor(t,i){super(t,i,L9,Ia,n=>n.id),this.core=t,this.logger=i}}class Q9{constructor(t,i){this.core=t,this.logger=i,this.authKeys=new $9(this.core,this.logger),this.pairingTopics=new H9(this.core,this.logger),this.requests=new Y9(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class Bl extends Rb{constructor(t){super(t),this.protocol=p1,this.version=y1,this.name=lc.name,this.events=new _n.EventEmitter,this.on=(n,r)=>this.events.on(n,r),this.once=(n,r)=>this.events.once(n,r),this.off=(n,r)=>this.events.off(n,r),this.removeListener=(n,r)=>this.events.removeListener(n,r),this.removeAllListeners=n=>this.events.removeAllListeners(n),this.connect=async n=>{try{return await this.engine.connect(n)}catch(r){throw this.logger.error(r.message),r}},this.pair=async n=>{try{return await this.engine.pair(n)}catch(r){throw this.logger.error(r.message),r}},this.approve=async n=>{try{return await this.engine.approve(n)}catch(r){throw this.logger.error(r.message),r}},this.reject=async n=>{try{return await this.engine.reject(n)}catch(r){throw this.logger.error(r.message),r}},this.update=async n=>{try{return await this.engine.update(n)}catch(r){throw this.logger.error(r.message),r}},this.extend=async n=>{try{return await this.engine.extend(n)}catch(r){throw this.logger.error(r.message),r}},this.request=async n=>{try{return await this.engine.request(n)}catch(r){throw this.logger.error(r.message),r}},this.respond=async n=>{try{return await this.engine.respond(n)}catch(r){throw this.logger.error(r.message),r}},this.ping=async n=>{try{return await this.engine.ping(n)}catch(r){throw this.logger.error(r.message),r}},this.emit=async n=>{try{return await this.engine.emit(n)}catch(r){throw this.logger.error(r.message),r}},this.disconnect=async n=>{try{return await this.engine.disconnect(n)}catch(r){throw this.logger.error(r.message),r}},this.find=n=>{try{return this.engine.find(n)}catch(r){throw this.logger.error(r.message),r}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(n){throw this.logger.error(n.message),n}},this.authenticate=async n=>{try{return await this.engine.authenticate(n)}catch(r){throw this.logger.error(r.message),r}},this.formatAuthMessage=n=>{try{return this.engine.formatAuthMessage(n)}catch(r){throw this.logger.error(r.message),r}},this.approveSessionAuthenticate=async n=>{try{return await this.engine.approveSessionAuthenticate(n)}catch(r){throw this.logger.error(r.message),r}},this.rejectSessionAuthenticate=async n=>{try{return await this.engine.rejectSessionAuthenticate(n)}catch(r){throw this.logger.error(r.message),r}},this.name=(t==null?void 0:t.name)||lc.name,this.metadata=(t==null?void 0:t.metadata)||lx(),this.signConfig=t==null?void 0:t.signConfig;const i=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:Mu(Kc({level:(t==null?void 0:t.logger)||lc.logger}));this.core=(t==null?void 0:t.core)||new A9(t),this.logger=Ht(i,this.name),this.session=new U9(this.core,this.logger),this.proposal=new F9(this.core,this.logger),this.pendingRequest=new W9(this.core,this.logger),this.engine=new q9(this),this.auth=new Q9(this.core,this.logger)}static async init(t){const i=new Bl(t);return await i.initialize(),i}get context(){return li(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}const V9=Bl;let on;async function v1(){if(!on)return[];const e=await on.getWalletConnectSessions();return JSON.parse(e??"[]")}function K9(e){on||(on=new jm({storage:null,clientId:e.clientId}))}async function yA(e){if(!on)return;const t=await on.getWalletConnectSessions(),i=JSON.parse(t??"[]");i.push(e),await on.saveWalletConnectSessions(JSON.stringify(i))}async function G9(e){if(!on)return;const t=await on.getWalletConnectSessions(),n=JSON.parse(t??"[]").filter(r=>r.topic!==e.topic);await on.saveWalletConnectSessions(JSON.stringify(n))}let hc=new WeakMap;async function Z9(e){var y,b,M,A;const{wallet:t,requestHandlers:i,chains:n,onConnect:r,onDisconnect:s,client:a}=e;if(hc.has(a))return hc.get(a);K9({clientId:e.client.clientId});const l=Mg(),d=await V9.init({projectId:e.projectId??Sm,metadata:{name:((y=e.appMetadata)==null?void 0:y.name)??l.name,url:((b=e.appMetadata)==null?void 0:b.url)??l.url,description:((M=e.appMetadata)==null?void 0:M.description)??l.description,icons:[((A=e.appMetadata)==null?void 0:A.logoUrl)??l.logoUrl]}});d.on("session_proposal",async S=>{const{onSessionProposal:C}=await Kt(async()=>{const{onSessionProposal:k}=await import("./session-proposal-B49Fv-4f.js");return{onSessionProposal:k}},__vite__mapDeps([24,0,1,25,16,11,10,26,6,7,27,28,29,30,31,32,3,17,18,20,21]));await C({wallet:t,walletConnectClient:d,event:S,chains:n,onConnect:r}).catch(k=>{if(e.onError)e.onError(k);else throw k})}),d.on("session_request",async S=>{const{fulfillRequest:C}=await Kt(async()=>{const{fulfillRequest:k}=await import("./session-request-DY9yTQvL.js").then(N=>N.s);return{fulfillRequest:k}},__vite__mapDeps([33,0,1]));await C({wallet:t,walletConnectClient:d,event:S,handlers:i,thirdwebClient:a}).catch(k=>{if(e.onError)e.onError(k);else throw k})}),d.on("session_event",async S=>{}),d.on("session_ping",S=>{}),d.on("session_delete",async S=>{await x1({session:{topic:S.topic},walletConnectClient:d}).catch(C=>{if(e.onError)e.onError(C);else throw C})});const g=d.disconnect;return d.disconnect=async S=>{const C=await g(S).catch(()=>{});return s&&eM({topic:S.topic,onDisconnect:s}),C},hc.set(e.client,d),d}function J9(e){const{uri:t,walletConnectClient:i}=e;i.core.pairing.pair({uri:t})}async function X9(){return v1()}async function x1(e){G9(e.session);try{await e.walletConnectClient.disconnect({topic:e.session.topic,reason:{code:6e3,message:"Disconnected"}})}catch{}}async function eM(e){const{topic:t,onDisconnect:i}=e,n=await v1();i(n.find(r=>r.topic===t)??{topic:t})}function tM(e){return o.jsxs(_,{style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:"Connect an App",onBack:e.onBack})}),o.jsx(qe,{}),o.jsx(_,{px:"lg",scrollY:!0,style:{maxHeight:"500px"},children:o.jsxs(_,{py:"lg",style:{position:"relative"},children:[o.jsx(_,{py:"md",children:o.jsx(ou,{client:e.client,error:!!e.error,id:"walletConnect",hideSpinner:!0})}),o.jsx(_,{animate:"fadein",style:{animationDuration:"200ms"},children:e.error?o.jsxs(o.Fragment,{children:[o.jsx(F,{center:!0,balance:!0,multiline:!0,size:"sm",children:e.error}),o.jsx(q,{y:"md"}),o.jsx(_,{flex:"row",center:"x",animate:"fadein",children:o.jsxs(Ie,{fullWidth:!0,variant:"accent",onClick:()=>e.disconnect(),style:{gap:ie.xs,alignItems:"center"},children:[o.jsx(au,{width:U.sm,height:U.sm})," ","Retry"]})})]}):o.jsxs(o.Fragment,{children:[o.jsxs(F,{balance:!0,center:!0,multiline:!0,size:"md",children:["Connected to ",e.session.origin??"another app."]}),o.jsx(q,{y:"xl"}),o.jsx(Ie,{variant:"accent",fullWidth:!0,onClick:()=>{e.disconnect()},children:"Disconnect"})]})})]})})]})}function iM(e){const t=$t(),[i,n]=L.useState(!1),[r,s]=L.useState(!1),a=Xo(),{data:l}=Ct({queryKey:["walletConnectClient"],queryFn:async()=>{if(t)try{return await Z9({wallet:t,client:e.client,chains:e.chains,onConnect:()=>{n(!1),a.invalidateQueries({queryKey:["walletConnectSession"]})},onDisconnect:()=>{n(!1),a.invalidateQueries({queryKey:["walletConnectSession"]})},onError:M=>{s(M.message),n(!1)}})}catch{s("Failed to establish WalletConnect connection");return}},retry:!1,enabled:!!t}),{data:d,refetch:g}=Ct({queryKey:["walletConnectSession"],queryFn:async()=>l&&(await X9())[0]||null,enabled:!!l}),{mutateAsync:y}=nu({mutationFn:async()=>{if(!l||!d)throw new Error("No session");await x1({session:d,walletConnectClient:l})},onSuccess:()=>{s(!1),a.invalidateQueries({queryKey:["walletConnectSession"]}),g()},onError:b=>{console.error(b),s(b.message)}});return d?o.jsx(tM,{disconnect:y,error:r,...e,session:d}):o.jsxs(_,{style:{minHeight:"300px"},children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:"Connect an App",onBack:e.onBack})}),o.jsx(qe,{}),o.jsx(_,{px:"lg",scrollY:!0,style:{maxHeight:"500px"},children:o.jsxs(_,{py:"sm",style:{position:"relative"},children:[o.jsx(_,{py:"md",children:o.jsx(ou,{client:e.client,error:!!r,id:"walletConnect",hideSpinner:!i})}),o.jsx(_,{animate:"fadein",style:{animationDuration:"200ms"},children:r?o.jsxs(o.Fragment,{children:[o.jsx(F,{center:!0,balance:!0,multiline:!0,size:"sm",children:r}),o.jsx(q,{y:"md"}),o.jsx(_,{flex:"row",center:"x",animate:"fadein",children:o.jsxs(Ie,{fullWidth:!0,variant:"accent",onClick:()=>s(!1),style:{gap:ie.xs,alignItems:"center"},children:[o.jsx(au,{width:U.sm,height:U.sm})," ","Retry"]})})]}):o.jsxs(o.Fragment,{children:[o.jsx(F,{balance:!0,center:!0,multiline:!0,size:"sm",children:"Copy your connection URI from the external app."}),o.jsx(q,{y:"xl"}),o.jsx(om,{type:"text",disabled:i||!!r||!l,onSelect:async b=>{if(n(!0),!l)s("No WalletConnect client found");else try{J9({uri:b,walletConnectClient:l})}catch{s("Error creating WalletConnect session")}},placeholder:"WalletConnect URI",name:"wcUri",emptyErrorMessage:"Please enter a valid URI",submitButtonText:"Connect"})]})})]})}),o.jsxs(_,{children:[o.jsx(q,{y:"lg"}),o.jsx(qe,{}),o.jsx(_,{flex:"row",center:"x",p:"lg",children:o.jsx("a",{href:"https://blog.thirdweb.com/p/a62c0ef4-1d8f-424d-95b9-a006e5239849/",children:o.jsx(Ie,{variant:"link",onClick:()=>{},children:"Where do I find the URI?"})})})]})]})}const uc="tw-connected-wallet",nM=1337,rM=e=>{var A,S,C,k,N,D,B,P,z;const{connectLocale:t,client:i}=e,n=L.useContext(Ag),r=ti(),s=Bt(),{ensAvatarQuery:a,addressOrENS:l,balanceQuery:d}=cu(i,s,r,(A=e.detailsButton)==null?void 0:A.displayBalanceToken);function g(){n(null)}function y(){var W;n(o.jsx(sM,{client:i,locale:t,detailsModal:e.detailsModal,theme:e.theme,supportedTokens:e.supportedTokens,supportedNFTs:e.supportedNFTs,closeModal:g,onDisconnect:e.onDisconnect,chains:e.chains,displayBalanceToken:(W=e.detailsButton)==null?void 0:W.displayBalanceToken,connectOptions:e.connectOptions}))}const b=e.chain&&s&&s.id!==e.chain.id;if((S=e.detailsButton)!=null&&S.render)return o.jsx("div",{onClick:y,children:o.jsx(e.detailsButton.render,{})});if(e.chain&&b)return o.jsx(hM,{style:(C=e.switchButton)==null?void 0:C.style,className:(k=e.switchButton)==null?void 0:k.className,switchNetworkBtnTitle:(N=e.switchButton)==null?void 0:N.label,targetChain:e.chain,connectLocale:t});const M=((D=e.detailsButton)==null?void 0:D.connectedAccountAvatarUrl)??a.data;return o.jsxs(aM,{type:"button",className:`${uc} ${((B=e.detailsButton)==null?void 0:B.className)||""}`,style:(P=e.detailsButton)==null?void 0:P.style,"data-test":"connected-wallet-details",onClick:y,children:[o.jsx(_,{style:{borderRadius:"100%",overflow:"hidden",width:"35px",height:"35px"},children:M?o.jsx("img",{alt:"",src:M,style:{width:"100%",height:"100%"}}):r&&o.jsx(cl,{address:r.address,size:35})}),o.jsxs(_,{flex:"column",gap:"4xs",style:{textOverflow:"ellipsis",whiteSpace:"nowrap",borderRadius:`0 ${pt.md} ${pt.md} 0`},children:[o.jsx(F,{size:"xs",color:"primaryText",weight:500,className:`${uc}__address`,children:((z=e.detailsButton)==null?void 0:z.connectedAccountName)??l}),d.data?o.jsxs(F,{className:`${uc}__balance`,size:"xs",color:"secondaryText",weight:400,children:[oM(Number(d.data.displayValue))," ",d.data.symbol]}):o.jsx(lt,{height:je.xs,width:"70px"})]})]})};function sM(e){var X,E,m,c,h,p,v,x,I,w,u,f,T,$,V,j,O,R,Q;const[t,i]=L.useState("main"),{disconnect:n}=tu(),[r,s]=L.useState(!0),{client:a,locale:l}=e,d=Bt(),g=ti(),{ensAvatarQuery:y,addressOrENS:b,balanceQuery:M}=cu(a,d,g,e.displayBalanceToken),A=Sg(e.theme),S=$t(),C=Qs(d),k=si(d),N=jg(d),D=!(S!=null&&S.switchChain),B=eu({size:"compact",welcomeScreen:void 0,wallets:S?[S]:[]});function P(){s(!1),Pg(()=>{e.closeModal()})}function z(K){s(!1),e.closeModal(),e.onDisconnect(K)}const W=o.jsxs(Si,{type:"button",disabled:D,onClick:()=>{i("network-switcher")},"data-variant":"primary",children:[o.jsx("div",{style:{display:"flex",alignItems:"center",position:"relative"},children:C.isLoading?o.jsx(lt,{height:`${U.md}px`,width:`${U.md}px`}):o.jsx(Un,{chainIconUrl:C.url,size:U.md,active:!0,client:a})}),k.isLoading?o.jsx(lt,{height:"16px",width:"150px"}):o.jsxs(F,{color:"primaryText",size:"md",multiline:!0,children:[k.name||`Unknown chain #${d==null?void 0:d.id}`,o.jsxs(F,{color:"secondaryText",size:"xs",children:[M.data?ft(Number(M.data.displayValue),5):o.jsx(lt,{height:"1em",width:"100px"})," ",(X=M.data)==null?void 0:X.symbol]})]}),o.jsx(cM,{width:U.sm,height:U.sm,style:{flexShrink:0,marginLeft:"auto"}})]}),Y=((E=e.detailsModal)==null?void 0:E.connectedAccountAvatarUrl)??y.data,Z=o.jsxs(_,{style:{position:"relative",height:`${U.xl}px`,width:`${U.xl}px`},children:[o.jsx(_,{style:{width:"100%",height:"100%",borderRadius:"100%",overflow:"hidden"},children:Y?o.jsx("img",{src:Y,style:{width:U.xxl,height:U.xxl},alt:""}):g&&o.jsx(cl,{address:g.address,size:Number(U.xxl)})}),(m=e.detailsModal)!=null&&m.hideSwitchWallet?null:o.jsx(_,{style:{position:"absolute",bottom:-2,right:-2},children:o.jsx(m2,{style:{background:A.colors.modalBg},padding:"4px",children:S&&o.jsx(rs,{style:{borderRadius:0},id:S.id,client:a,size:"12"})})})]});let H=o.jsxs("div",{children:[o.jsx(q,{y:"xs"}),o.jsxs(_,{p:"lg",gap:"sm",flex:"row",center:"y",children:[(c=e.detailsModal)!=null&&c.hideSwitchWallet?Z:o.jsx(Ro,{tip:"Switch wallet",children:o.jsx("div",{style:{cursor:"pointer"},onKeyDown:K=>{K.key==="w"&&i("wallet-manager")},onClick:()=>{i("wallet-manager")},children:Z})}),o.jsxs(_,{flex:"column",gap:"3xs",children:[o.jsxs("div",{style:{display:"flex",gap:ie.xxs,alignItems:"center"},children:[o.jsx(F,{color:"primaryText",weight:500,size:"md",children:((h=e.detailsModal)==null?void 0:h.connectedAccountName)??b}),o.jsx(No,{children:o.jsx(tf,{text:(g==null?void 0:g.address)||"",tip:l.copyAddress})})]}),o.jsx(dM,{client:a,locale:l})]})]}),o.jsx(_,{px:"lg",children:o.jsxs(_,{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:ie.xs},children:[o.jsxs(Ie,{variant:"outline",style:{fontSize:je.sm,display:"flex",gap:ie.xs,alignItems:"center",padding:ie.sm},onClick:()=>{i("send")},children:[o.jsx(_,{color:"secondaryText",flex:"row",center:"both",children:o.jsx(Ig,{width:U.sm,height:U.sm,style:{transform:"translateY(-10%) rotate(-45deg) "}})}),l.send]}),o.jsxs(Ie,{variant:"outline",style:{fontSize:je.sm,display:"flex",gap:ie.xs,alignItems:"center",padding:ie.sm},onClick:()=>{i("receive")},children:[o.jsxs(_,{color:"secondaryText",flex:"row",center:"both",children:[o.jsx(Tg,{width:U.sm,height:U.sm})," "]}),l.receive," "]}),o.jsxs(Ie,{variant:"outline",style:{fontSize:je.sm,display:"flex",gap:ie.xs,alignItems:"center",padding:ie.sm},onClick:()=>{i("buy")},children:[o.jsx(_,{color:"secondaryText",flex:"row",center:"both",children:o.jsx(Qc,{width:U.sm,height:U.sm})}),l.buy]})]})}),o.jsx(q,{y:"md"}),o.jsxs(_,{px:"md",children:[o.jsxs(_,{flex:"column",style:{gap:"1px"},children:[W,o.jsxs(Si,{onClick:()=>{i("transactions")},style:{fontSize:je.sm},children:[o.jsx(Cg,{width:U.md,height:U.md}),o.jsx(_,{flex:"row",gap:"xs",center:"y",children:o.jsx(F,{color:"primaryText",children:l.transactions})})]}),o.jsxs(Si,{onClick:()=>{i("view-assets")},style:{fontSize:je.sm},children:[o.jsx(da,{size:U.md}),o.jsx(F,{color:"primaryText",children:e.supportedNFTs?l.viewFunds.viewAssets:l.viewFunds.title})]}),o.jsxs(Si,{onClick:()=>{i("manage-wallet")},style:{fontSize:je.sm},children:[o.jsx(dy,{size:U.md}),o.jsx(F,{color:"primaryText",children:e.locale.manageWallet.title})]}),(((p=e.detailsModal)==null?void 0:p.showTestnetFaucet)??!1)&&(N.faucets.length>0||(d==null?void 0:d.id)===nM)&&o.jsxs(p2,{href:N.faucets?N.faucets[0]:"#",target:"_blank",as:"a",style:{textDecoration:"none",color:"inherit"},children:[o.jsx(_,{flex:"row",center:"both",color:"secondaryText",children:o.jsx(rf,{size:U.md})}),l.requestTestnetFunds]}),((v=e.detailsModal)==null?void 0:v.footer)&&o.jsx(e.detailsModal.footer,{close:P})]}),o.jsx(q,{y:"md"})]}),((x=e.detailsModal)==null?void 0:x.hideDisconnect)!==!0&&o.jsxs(_,{children:[o.jsx(qe,{}),o.jsx(q,{y:"sm"}),o.jsx(_,{px:"md",children:o.jsxs(Si,{"data-variant":"danger",type:"button",onClick:()=>{S&&g&&(n(S),z({account:g,wallet:S}))},children:[o.jsx(Eg,{width:U.md,height:U.md}),o.jsx(F,{color:"primaryText",children:l.disconnectWallet})]})}),o.jsx(q,{y:"sm"})]})]});return t==="transactions"&&(H=o.jsx(ly,{title:l.buy,onBack:()=>i("main"),closeModal:P,locale:l,setScreen:i,client:a})),t==="wallet-manager"&&g&&d&&S&&(H=o.jsx(hy,{onBack:()=>i("main"),accountAbstraction:(I=e.connectOptions)==null?void 0:I.accountAbstraction,appMetadata:(w=e.connectOptions)==null?void 0:w.appMetadata,chain:(u=e.connectOptions)==null?void 0:u.chain,chains:(f=e.connectOptions)==null?void 0:f.chains,client:a,connectLocale:l,recommendedWallets:(T=e.connectOptions)==null?void 0:T.recommendedWallets,showAllWallets:!!(($=e.connectOptions)!=null&&$.showAllWallets),walletConnect:(V=e.connectOptions)==null?void 0:V.walletConnect,wallets:(j=e.connectOptions)==null?void 0:j.wallets,activeAccount:g,activeChain:d,activeWallet:S})),t==="network-switcher"?H=o.jsx(ll,{chains:d&&e.chains.find(K=>K.id===d.id)===void 0?[d,...e.chains]:e.chains,closeModal:P,networkSelector:(O=e.detailsModal)==null?void 0:O.networkSelector,onBack:()=>{i("main")},connectLocale:l,client:a}):t==="view-assets"?e.supportedNFTs?H=o.jsx(Sb,{supportedTokens:e.supportedTokens,supportedNFTs:e.supportedNFTs,onBack:()=>{i("main")},theme:e.theme,setScreen:i,client:a,connectLocale:l}):H=o.jsx(fd,{supportedTokens:e.supportedTokens,onBack:()=>{i("main")},client:a,connectLocale:l}):t==="view-nfts"?H=o.jsx(Mb,{theme:e.theme,supportedNFTs:e.supportedNFTs,onBack:()=>{i("main")},client:a,connectLocale:l}):t==="view-tokens"?H=o.jsx(fd,{supportedTokens:e.supportedTokens,onBack:()=>{i("main")},client:a,connectLocale:l}):t==="private-key"?H=o.jsx(Ay,{theme:e.theme,onBack:()=>{i("manage-wallet")},wallet:S,client:a}):t==="manage-wallet"?H=o.jsx(wy,{onBack:()=>{i("main")},locale:l,closeModal:P,client:a,setScreen:i}):t==="wallet-connect-receiver"?H=o.jsx(iM,{onBack:()=>{i("manage-wallet")},chains:e.chains,client:a}):t==="linked-profiles"?H=o.jsx(yy,{onBack:()=>i("manage-wallet"),client:a,locale:l,setScreen:i}):t==="link-profile"?H=o.jsx(gy,{onBack:()=>{i("linked-profiles")},client:a,locale:l,walletConnect:(R=e.connectOptions)==null?void 0:R.walletConnect}):t==="send"?H=o.jsx(By,{supportedTokens:e.supportedTokens,onBack:()=>{i("main")},client:a,connectLocale:l}):t==="receive"?H=o.jsx(jy,{walletId:S==null?void 0:S.id,onBack:()=>{i("main")},client:a,connectLocale:l}):t==="buy"&&(H=o.jsx(Ng,{title:l.buy,isEmbed:!1,client:a,onBack:()=>i("main"),supportedTokens:e.supportedTokens,connectLocale:l,payOptions:((Q=e.detailsModal)==null?void 0:Q.payOptions)||{mode:"fund_wallet"},theme:typeof e.theme=="string"?e.theme:e.theme.type,onDone:P,connectOptions:void 0})),o.jsx(_g,{theme:e.theme,children:o.jsx(lu,{theme:e.theme,isOpen:!1,children:o.jsx(kg.Provider,{value:B,children:o.jsx(du,{size:"compact",open:r,setOpen:K=>{K||P()},children:H})})})})}function oM(e){return ft(e,e<1?5:4)}const aM=Jo(e=>{const t=gt();return{all:"unset",background:t.colors.connectedButtonBg,overflow:"hidden",borderRadius:pt.md,cursor:"pointer",display:"inline-flex",gap:ie.xs,padding:ie.xs,alignItems:"center",minWidth:"165px",height:"50px",boxSizing:"border-box",border:`1px solid ${t.colors.borderColor}`,WebkitTapHighlightColor:"transparent",lineHeight:"normal",animation:`${Vc} 300ms ease`,"&:hover":{transition:"background 250ms ease",background:t.colors.connectedButtonBgHover}}}),cM=Ti(Dg)(()=>({color:gt().colors.secondaryText}));function lM(e){const t=ti(),i=$t(),n=hu(i),r=Bt(),{client:s,connectLocale:a}=e,[l,d]=L.useState(!1);L.useEffect(()=>{if(t&&n&&t.address&&r){const y=Wi({address:t.address,chain:r,client:s});zg(y).then(b=>{d(b)})}else d(!1)},[t,r,s,n]);const g=o.jsx(_,{flex:"row",gap:"3xs",center:"y",children:o.jsx(F,{size:"xs",weight:400,color:"secondaryText",children:a.connectedToSmartWallet})});return r&&t&&n?o.jsx(o.Fragment,{children:l?o.jsx(Rg,{color:"secondaryText",hoverColor:"primaryText",href:`https://thirdweb.com/${r.id}/${t.address}/account`,target:"_blank",size:"sm",children:g}):o.jsxs(F,{size:"sm",children:[" ",g]})}):null}function dM(e){const{client:t,locale:i}=e,n=ti(),r=$t(),{data:s}=Lg(r==null?void 0:r.id),a=hu(r),l=Ct({queryKey:["in-app-wallet-user",t,n==null?void 0:n.address],queryFn:async()=>{const{getUserEmail:d,getUserPhoneNumber:g}=await Kt(async()=>{const{getUserEmail:M,getUserPhoneNumber:A}=await import("./index-C5TfYiZ5.js");return{getUserEmail:M,getUserPhoneNumber:A}},__vite__mapDeps([12,0,1,7])),[y,b]=await Promise.all([d({client:t}),g({client:t})]);return y||b||null},enabled:!a});return a?o.jsx(lM,{client:t,connectLocale:i}):l.data||s?o.jsx(F,{size:"xs",weight:400,children:l.data||(s==null?void 0:s.name)}):o.jsx(lt,{width:"50px",height:"10px"})}function hM(e){const t=Vh(),[i,n]=L.useState(!1),r=e.connectLocale,s=e.switchNetworkBtnTitle??r.switchNetwork;return o.jsx(Ie,{className:`tw-connect-wallet--switch-network ${e.className||""}`,variant:"primary",type:"button","data-is-loading":i,"data-test":"switch-network-button",disabled:i,onClick:async()=>{n(!0);try{await t(e.targetChain)}catch(a){console.error(a)}n(!1)},style:{minWidth:"140px",...e.style},"aria-label":i?r.switchingNetwork:void 0,children:i?o.jsx(Mt,{size:"sm",color:"primaryButtonText"}):s})}const uM=e=>o.jsx("svg",{width:e.size,height:e.size,viewBox:"0 0 16 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"presentation",children:o.jsx("path",{d:"M2 21C1.45 21 0.979333 20.8043 0.588 20.413C0.196 20.021 0 19.55 0 19V9C0 8.45 0.196 7.979 0.588 7.587C0.979333 7.19567 1.45 7 2 7H3V5C3 3.61667 3.48767 2.43733 4.463 1.462C5.43767 0.487333 6.61667 0 8 0C9.38333 0 10.5627 0.487333 11.538 1.462C12.5127 2.43733 13 3.61667 13 5V7H14C14.55 7 15.021 7.19567 15.413 7.587C15.8043 7.979 16 8.45 16 9V19C16 19.55 15.8043 20.021 15.413 20.413C15.021 20.8043 14.55 21 14 21H2ZM8 16C8.55 16 9.021 15.8043 9.413 15.413C9.80433 15.021 10 14.55 10 14C10 13.45 9.80433 12.979 9.413 12.587C9.021 12.1957 8.55 12 8 12C7.45 12 6.97933 12.1957 6.588 12.587C6.196 12.979 6 13.45 6 14C6 14.55 6.196 15.021 6.588 15.413C6.97933 15.8043 7.45 16 8 16ZM5 7H11V5C11 4.16667 10.7083 3.45833 10.125 2.875C9.54167 2.29167 8.83333 2 8 2C7.16667 2 6.45833 2.29167 5.875 2.875C5.29167 3.45833 5 4.16667 5 5V7Z",fill:"currentColor"})}),Oc="tw-connect-wallet";function ql(e){var a,l,d,g,y,b,M,A,S,C,k,N;const t=L.useMemo(()=>e.wallets||Xh({appMetadata:e.appMetadata,chains:e.chains}),[e.wallets,e.appMetadata,e.chains]),i=Og(e.locale||"en_US"),n=Bg();Nm({wallets:t,client:e.client}),L.useEffect(()=>{e.chain&&n.defineChains([e.chain])},[e.chain,n]),L.useEffect(()=>{e.chains&&n.defineChains(e.chains)},[e.chains,n]);const r=L.useMemo(()=>{var D;return!qg()||t.length===1?"compact":((D=e.connectModal)==null?void 0:D.size)||"compact"},[t.length,(a=e.connectModal)==null?void 0:a.size]),s=e.autoConnect!==!1&&o.jsx(km,{appMetadata:e.appMetadata,client:e.client,wallets:t,timeout:typeof e.autoConnect=="boolean"||(l=e.autoConnect)==null?void 0:l.timeout,accountAbstraction:e.accountAbstraction,onConnect:e.onConnect});return i.data?o.jsxs(lu,{theme:e.theme,isOpen:!1,children:[o.jsx(fM,{...e,connectLocale:i.data}),o.jsx(Fg,{shouldSetActive:!0,accountAbstraction:e.accountAbstraction,auth:e.auth,chain:e.chain||((y=e.accountAbstraction)==null?void 0:y.chain),chains:e.chains,client:e.client,connectLocale:i.data,meta:{title:(b=e.connectModal)==null?void 0:b.title,titleIconUrl:(M=e.connectModal)==null?void 0:M.titleIcon,showThirdwebBranding:(A=e.connectModal)==null?void 0:A.showThirdwebBranding,termsOfServiceUrl:(S=e.connectModal)==null?void 0:S.termsOfServiceUrl,privacyPolicyUrl:(C=e.connectModal)==null?void 0:C.privacyPolicyUrl,requireApproval:(k=e.connectModal)==null?void 0:k.requireApproval},welcomeScreen:(N=e.connectModal)==null?void 0:N.welcomeScreen,size:r,localeId:e.locale||"en_US",onConnect:e.onConnect,recommendedWallets:e.recommendedWallets,showAllWallets:e.showAllWallets,walletConnect:e.walletConnect,wallets:t}),s]}):o.jsxs(Bc,{disabled:!0,className:`${((d=e.connectButton)==null?void 0:d.className)||""} ${Oc}`,variant:"primary",type:"button",style:{minWidth:"165px",height:"50px",...(g=e.connectButton)==null?void 0:g.style},children:[s,o.jsx(Mt,{size:"sm",color:"primaryButtonText"})]})}function fM(e){var A,S,C,k,N,D,B,P,z,W;const t=$t(),i=ti(),n=Ug(t,i,e.auth),[r,s]=L.useState(!1);L.useEffect(()=>{i||s(!1)},[i]);const a=e.theme||"dark",l=Cm(),d=e.connectLocale,g=l==="connecting",y=((A=e.connectButton)==null?void 0:A.label)||d.defaultButtonTitle,b=Wg(),M=L.useMemo(()=>{if(!e.supportedTokens)return;const Y={...ko};for(const Z in e.supportedTokens){const H=Number(Z),X=e.supportedTokens[H];X&&(Y[H]=X)}return Y},[e.supportedTokens]);if(!i)return o.jsx(Bc,{disabled:g,className:`${((S=e.connectButton)==null?void 0:S.className)||""} ${Oc}`,"data-theme":a,"data-is-loading":g,variant:"primary",type:"button",style:{minWidth:"165px",height:"50px",fontSize:"16px",...(C=e.connectButton)==null?void 0:C.style},"aria-label":l==="connecting"?d.connecting:typeof y=="string"?y:d.defaultButtonTitle,onClick:()=>{b(!0)},"data-test":"connect-wallet-button",children:g?o.jsx(Mt,{size:"sm",color:"primaryButtonText"}):y});if(n.requiresAuth){if(n.isLoading||n.isLoggingIn||n.isLoggingOut)return o.jsx(Bc,{disabled:!0,className:`${((k=e.connectButton)==null?void 0:k.className)||""} ${Oc}`,variant:"primary",type:"button",style:{minWidth:"165px",height:"50px",...(N=e.connectButton)==null?void 0:N.style},children:o.jsx(Mt,{size:"sm",color:"primaryButtonText"})});if(!n.isLoggedIn)return o.jsxs(o.Fragment,{children:[o.jsx(Ie,{variant:"primary",type:"button",onClick:()=>{s(!0)},className:(D=e.signInButton)==null?void 0:D.className,style:{minWidth:"165px",minHeight:"50px",...(B=e.signInButton)==null?void 0:B.style},children:n.isLoggingIn?o.jsx(Mt,{size:"sm",color:"primaryButtonText"}):o.jsxs(_,{flex:"row",center:"y",gap:"sm",children:[o.jsx(uM,{size:U.sm}),o.jsxs("span",{children:[" ",((P=e.signInButton)==null?void 0:P.label)||d.signIn," "]})]})}),o.jsx(du,{size:"compact",open:r,setOpen:s,children:o.jsx($g,{client:e.client,connectLocale:d,modalSize:"compact",termsOfServiceUrl:(z=e.connectModal)==null?void 0:z.termsOfServiceUrl,privacyPolicyUrl:(W=e.connectModal)==null?void 0:W.privacyPolicyUrl,onDone:()=>s(!1),auth:e.auth})})]})}return o.jsx(rM,{theme:a,detailsButton:e.detailsButton,detailsModal:e.detailsModal,supportedTokens:M,supportedNFTs:e.supportedNFTs,onDisconnect:Y=>{var Z;n.requiresAuth&&n.doLogout(),(Z=e.onDisconnect)==null||Z.call(e,Y)},chains:(e==null?void 0:e.chains)||[],chain:e.chain,switchButton:e.switchButton,client:e.client,connectLocale:d,connectOptions:{accountAbstraction:e.accountAbstraction,appMetadata:e.appMetadata,chain:e.chain,chains:e.chains,connectModal:e.connectModal,recommendedWallets:e.recommendedWallets,showAllWallets:e.showAllWallets,walletConnect:e.walletConnect,wallets:e.wallets}})}const Bc=Ti(Ie)({animation:`${Vc} 300ms ease`});async function Fh(e){const t=await Vr(e);return Co(t)}function gM(e,t){return Ct({...t,queryKey:["buyWithCryptoQuote",e],queryFn:()=>{if(!e)throw new Error("Swap params are required");return ff(e)},enabled:!!e,retry(i,n){if(i>3)return!1;try{const r=n.error;if(r.code==="MINIMUM_PURCHASE_AMOUNT"||r.statusCode===404||r.statusCode>=500)return!1}catch{return!0}return!0}})}async function mM(e){try{const i=await Qn(e.client)(T2(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({toAddress:e.toAddress,fromCurrencySymbol:e.fromCurrencySymbol,toChainId:e.toChainId.toString(),toTokenAddress:e.toTokenAddress,fromAmount:e.fromAmount,toAmount:e.toAmount,maxSlippageBPS:e.maxSlippageBPS,isTestMode:e.isTestMode,purchaseData:e.purchaseData,fromAddress:e.fromAddress,toGasAmountWei:e.toGasAmountWei})});if(!i.ok){const n=await i.json();throw n&&"error"in n?n:new Error(`HTTP error! status: ${i.status}`)}return(await i.json()).result}catch(t){throw console.error("Error getting buy with fiat quote",t),t}}function pM(e,t){return Ct({...t,queryKey:["useBuyWithFiatQuote",e],queryFn:async()=>{if(!e)throw new Error("No params provided");return mM(e)},enabled:!!e,retry(i,n){if(i>3)return!1;try{const r=n.error;if(r.code==="MINIMUM_PURCHASE_AMOUNT"||r.statusCode===404||r.statusCode>=500)return!1}catch{return!0}return!0}})}function w1(e){const t=e.toToken.chainId===e.onRampToken.token.chainId,i=Qr(e.toToken.tokenAddress)===Qr(e.onRampToken.token.tokenAddress);return!(t&&i)}const M1=L.forwardRef(function(t,i){return o.jsx(yM,{ref:i,children:o.jsx(Hg,{children:o.jsxs(_,{p:"lg",children:[o.jsx(Yg,{children:o.jsx(No,{type:"button","aria-label":"Close",onClick:t.close,children:o.jsx(Qg,{width:U.md,height:U.md,style:{color:"inherit"}})})}),t.children]})})})}),yM=Sr(e=>{const t=gt();return{zIndex:1e4,borderTopLeftRadius:pt.xl,borderTopRightRadius:pt.xl,background:t.colors.modalBg,position:"absolute",bottom:0,left:0,right:0,animation:`${bM} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1)`,borderTop:`1px solid ${t.colors.borderColor}`}}),bM=$c`
  from {
    opacity: 0;
    transform: translateY(100px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
`,A1=Sr(e=>({backgroundColor:gt().colors.modalOverlayBg,zIndex:9999,position:"absolute",inset:0,animation:`${Vc} 400ms cubic-bezier(0.16, 1, 0.3, 1)`}));function S1(){const[e,t]=L.useState(!1),i=L.useRef(null),n=L.useRef(null),r=L.useCallback(()=>new Promise(a=>{var l;if(i.current){const d={easing:"cubic-bezier(0.175, 0.885, 0.32, 1.1)",fill:"forwards",duration:300},g=i.current.animate([{transform:"translateY(100%)",opacity:0}],d);(l=n.current)==null||l.animate([{opacity:0}],d),g.onfinish=()=>a()}else a()}),[]),s=L.useCallback(async a=>{a?t(!0):(await r(),t(!1))},[r]);return L.useLayoutEffect(()=>{if(!e)return;const a=l=>{i.current&&l.target instanceof Node&&!i.current.contains(l.target)&&s(!1)};return requestAnimationFrame(()=>{document.addEventListener("click",a)}),()=>{document.removeEventListener("click",a)}},[e,s]),{drawerRef:i,drawerOverlayRef:n,setIsOpen:s,isOpen:e}}function vM(e){var C,k,N,D,B,P;const{payUiOptions:t,supportedDestinations:i,client:n,onContinue:r,payerAccount:s}=e,a=gt(),l=$t(),d=t.metadata,g=t.paymentInfo,{data:y}=uu(g.chain),{data:b}=Yc({client:n,address:g.sellerAddress}),A=Ct({queryKey:["amount",g],queryFn:async()=>{let z=18;g.token&&!mt(g.token)&&(z=await Im({contract:Wi({address:g.token.address,chain:g.chain,client:n})}));let W;return"amountWei"in g?W=Ps(g.amountWei,z):W=g.amount,W}}).data;if(!y||A===void 0)return o.jsx(Fn,{});const S=g.token?{...g.token,icon:((C=g.token)==null?void 0:C.icon)||((N=(k=i.find(z=>z.chain.id===g.chain.id))==null?void 0:k.tokens.find(z=>{var W;return z.address.toLowerCase()===((W=g.token)==null?void 0:W.address.toLowerCase())}))==null?void 0:N.icon)}:{address:At,name:y.nativeCurrency.name,symbol:y.nativeCurrency.symbol,icon:(D=y.icon)==null?void 0:D.url};return o.jsxs(_,{p:"lg",children:[o.jsx(Oe,{title:(d==null?void 0:d.name)||"Payment Details"}),o.jsx(q,{y:"lg"}),o.jsxs(_,{children:[d!=null&&d.image?o.jsx(ns,{client:n,src:d==null?void 0:d.image,style:{width:"100%",borderRadius:ie.md,backgroundColor:a.colors.tertiaryBg}}):l?o.jsxs(_,{flex:"row",center:"both",style:{padding:ie.md,marginBottom:ie.md,borderRadius:ie.md,backgroundColor:a.colors.tertiaryBg},children:[o.jsx(rs,{size:U.xl,id:l.id,client:n}),o.jsx("div",{style:{flexGrow:1,borderBottom:"6px dotted",borderColor:a.colors.secondaryIconColor,marginLeft:ie.md,marginRight:ie.md}}),o.jsx(Un,{client:n,size:U.xl,chainIconUrl:(B=y.icon)==null?void 0:B.url})]}):null,o.jsx(q,{y:"md"}),o.jsxs(_,{flex:"row",children:[o.jsx(_,{flex:"column",expand:!0,children:o.jsx(F,{size:"md",color:"primaryText",weight:700,children:"Price"})}),o.jsx(_,{expand:!0,children:o.jsxs(_,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[o.jsx(Ir,{chain:g.chain,client:e.client,size:"sm",token:S}),o.jsxs(F,{color:"primaryText",size:"md",weight:700,children:[String(ft(Number(A),6))," ",S.symbol]})]})})]}),o.jsx(q,{y:"md"}),o.jsx(qe,{}),o.jsx(q,{y:"md"}),o.jsxs(_,{flex:"row",children:[o.jsx(_,{flex:"column",expand:!0,children:o.jsx(F,{size:"xs",color:"secondaryText",children:"Network"})}),o.jsx(_,{expand:!0,children:o.jsxs(_,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[o.jsx(Un,{chainIconUrl:(P=y.icon)==null?void 0:P.url,size:"xs",client:e.client}),o.jsx(F,{size:"xs",color:"secondaryText",style:{textAlign:"right"},children:y.name})]})})]}),o.jsx(q,{y:"sm"}),o.jsxs(_,{flex:"row",children:[o.jsx(_,{flex:"column",expand:!0,children:o.jsx(F,{size:"xs",color:"secondaryText",children:"Seller"})}),o.jsx(_,{expand:!0,children:o.jsx(_,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:o.jsx(F,{size:"xs",color:"secondaryText",style:{textAlign:"right"},children:b||vr(g.sellerAddress)})})})]})]}),o.jsx(q,{y:"xl"}),s?o.jsx(Ie,{variant:"accent",fullWidth:!0,onClick:()=>{r(A,g.chain,S)},children:"Choose Payment Method"}):o.jsx("div",{children:o.jsx(ql,{...e.connectOptions,client:n,theme:a,connectButton:{style:{width:"100%"}}})})]})}function j1(e){const{estimatedSeconds:t,quoteIsLoading:i}=e;return o.jsxs(_,{bg:"tertiaryBg",flex:"row",borderColor:"borderColor",style:{borderRadius:pt.md,borderTopLeftRadius:0,borderTopRightRadius:0,justifyContent:"space-between",alignItems:"center",borderWidth:"1px",borderStyle:"solid"},children:[o.jsxs(_,{flex:"row",center:"y",gap:"xxs",color:"accentText",p:"sm",children:[o.jsx(Vg,{width:U.sm,height:U.sm}),i?o.jsx(lt,{height:je.xs,width:"50px",color:"borderColor"}):o.jsx(F,{size:"xs",color:"secondaryText",children:t!==void 0?`~${pl(t)}`:"--"})]}),o.jsxs(Ie,{variant:"ghost",onClick:e.onViewFees,gap:"xs",children:[o.jsx(_,{color:"accentText",flex:"row",center:"both",children:o.jsx(xM,{size:U.sm})}),o.jsx(F,{size:"xs",color:"secondaryText",children:"View Fees"})]})]})}const xM=e=>o.jsxs("svg",{width:e.size,height:e.size,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[o.jsx("path",{d:"M9.5 1.5H2.5C1.94772 1.5 1.5 1.94772 1.5 2.5V9.5C1.5 10.0523 1.94772 10.5 2.5 10.5H9.5C10.0523 10.5 10.5 10.0523 10.5 9.5V2.5C10.5 1.94772 10.0523 1.5 9.5 1.5Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M4.5 7.5L7.5 4.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]});function wM(e){return o.jsxs(_,{bg:"tertiaryBg",borderColor:"borderColor",flex:"row",style:{borderRadius:pt.md,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderWidth:"1px",borderStyle:"solid",borderBottom:"none",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs(MM,{variant:"ghost",onClick:e.onSelectCurrency,style:{minHeight:"64px",justifyContent:"flex-start",minWidth:"50%"},gap:"sm",children:[o.jsx(e.currency.icon,{size:U.md}),o.jsxs(_,{flex:"row",center:"y",gap:"xxs",color:"secondaryText",children:[o.jsx(F,{color:"primaryText",children:e.currency.shorthand}),o.jsx(Ks,{width:U.sm,height:U.sm})]})]}),o.jsx("div",{style:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:ie.xxs,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",justifyContent:"center",paddingRight:ie.sm},children:e.isLoading?o.jsx(lt,{width:"100px",height:je.lg}):o.jsx(F,{size:"lg",color:e.value?"primaryText":"secondaryText",children:e.value?`${ft(Number(e.value),6)}`:"--"})})]})}const MM=Ti(Ie)(()=>({"&[disabled]:hover":{borderColor:"transparent"}}));function AM(e){const{transaction:t,account:i,supportedDestinations:n}=e,[r,s]=L.useState();return L.useEffect(()=>{Promise.all([ws(t.value),ws(t.erc20Value),ws(t.to),Kg(t)]).then(([a,l,d,g])=>{var y;s({value:a==null?void 0:a.toString(),erc20Value:(y=l==null?void 0:l.amountWei)==null?void 0:y.toString(),erc20Currency:l==null?void 0:l.tokenAddress,to:d,data:g})})},[t]),Ct({queryKey:["transaction-cost",t.chain.id,i==null?void 0:i.address,r],queryFn:async()=>{var M,A,S;if(!i)throw new Error("No account");const a=await ws(t.erc20Value);if(a){const[C,k,N]=await Promise.all([$l({address:i.address,chain:t.chain,client:t.client,tokenAddress:a.tokenAddress}),Tm({contract:Wi({address:a.tokenAddress,chain:t.chain,client:t.client})}),qc(t,i==null?void 0:i.address)]),D=a.amountWei,B=C;return{token:{address:a.tokenAddress,name:k.name,symbol:k.symbol,icon:(A=(M=n.find(z=>z.chain.id===t.chain.id))==null?void 0:M.tokens.find(z=>z.address.toLowerCase()===a.tokenAddress.toLowerCase()))==null?void 0:A.icon},decimals:k.decimals,walletBalance:B,gasCostWei:N,transactionValueWei:D}}const[l,d,g]=await Promise.all([$l({address:i.address,chain:t.chain,client:t.client}),Gg(t.chain),qc(t,i==null?void 0:i.address)]),y=l,b=await ws(t.value)||0n;return{token:{address:At,name:d.nativeCurrency.name,symbol:d.nativeCurrency.symbol,icon:(S=d.icon)==null?void 0:S.url},decimals:18,walletBalance:y,gasCostWei:g,transactionValueWei:b}},enabled:!!t&&!!i&&!!r,refetchInterval:()=>{if(!t.erc20Value)return 3e4}})}async function qc(e,t){try{const i=await Zg({transaction:e,from:t}),n=i.wei/10n;return i.wei+n}catch{return t?await qc(e):2000000n*await Jg({client:e.client,chain:e.chain})}}function SM(e){var M,A;const{payUiOptions:t,client:i,payerAccount:n,supportedDestinations:r,onContinue:s}=e,{data:a}=uu(t.transaction.chain),l=t.metadata,{data:d}=AM({transaction:t.transaction,account:n,supportedDestinations:r}),g=gt(),y=$t(),b=Xg(y);return!d||!a?o.jsx(Fn,{}):o.jsxs(_,{p:"lg",children:[o.jsx(Oe,{title:(l==null?void 0:l.name)||"Transaction"}),o.jsx(q,{y:"lg"}),o.jsxs(_,{children:[l!=null&&l.image?o.jsx(ns,{client:i,src:l==null?void 0:l.image,style:{width:"100%",borderRadius:ie.md,backgroundColor:g.colors.tertiaryBg}}):y?o.jsxs(_,{flex:"row",center:"both",style:{padding:ie.md,marginBottom:ie.md,borderRadius:ie.md,backgroundColor:g.colors.tertiaryBg},children:[o.jsx(rs,{size:U.xl,id:y.id,client:i}),o.jsx("div",{style:{flexGrow:1,borderBottom:"6px dotted",borderColor:g.colors.secondaryIconColor,marginLeft:ie.md,marginRight:ie.md}}),o.jsx(Un,{client:i,size:U.xl,chainIconUrl:(M=a.icon)==null?void 0:M.url})]}):null,o.jsx(q,{y:"md"}),o.jsxs(_,{flex:"row",children:[o.jsx(_,{flex:"column",expand:!0,children:o.jsx(F,{size:"md",color:"primaryText",weight:700,children:"Price"})}),o.jsx(_,{expand:!0,children:o.jsxs(_,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[o.jsx(Ir,{chain:t.transaction.chain,client:e.client,size:"sm",token:d.token}),o.jsxs(F,{color:"primaryText",size:"md",weight:700,children:[String(ft(Number(Ps(d.transactionValueWei,d.decimals)),6))," ",d.token.symbol]})]})})]}),o.jsx(q,{y:"md"}),o.jsx(qe,{}),o.jsx(q,{y:"md"}),o.jsxs(_,{flex:"row",children:[o.jsx(_,{flex:"column",expand:!0,children:o.jsx(F,{size:"xs",color:"secondaryText",children:"Gas Fees"})}),o.jsx(_,{expand:!0,children:o.jsx(_,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:o.jsx(F,{color:b?"success":"primaryText",size:"xs",children:b?"Sponsored":`${String(ft(Number(Ps(d.gasCostWei,a.nativeCurrency.decimals)),6))} ${a.nativeCurrency.symbol}`})})})]}),o.jsx(q,{y:"sm"}),o.jsxs(_,{flex:"row",children:[o.jsx(_,{flex:"column",expand:!0,children:o.jsx(F,{size:"xs",color:"secondaryText",children:"Network"})}),o.jsx(_,{expand:!0,children:o.jsxs(_,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[o.jsx(Un,{chainIconUrl:(A=a.icon)==null?void 0:A.url,size:"xs",client:e.client}),o.jsx(F,{size:"xs",color:"secondaryText",style:{textAlign:"right"},children:a.name})]})})]})]}),o.jsx(q,{y:"xl"}),n?o.jsx(Ie,{variant:"accent",fullWidth:!0,onClick:()=>{let S=d.transactionValueWei;d.token.address===At&&!b&&(S+=d.gasCostWei),s(Ps(S,d.decimals),t.transaction.chain,d.token)},children:"Choose Payment Method"}):o.jsx("div",{children:o.jsx(ql,{...e.connectOptions,client:i,theme:g,connectButton:{style:{width:"100%"}}})})]})}function I1(e){const t=gt();return o.jsx(_,{bg:"tertiaryBg",style:{borderRadius:pt.lg,border:`1px solid ${t.colors.borderColor}`,...e.containerStyle},children:o.jsxs(Ie,{fullWidth:!0,disabled:e.disabled,onClick:e.onClick,variant:"ghost",style:{justifyContent:"space-between",padding:ie.sm,backgroundColor:t.colors.tertiaryBg},gap:"sm",children:[o.jsx(Fc,{client:e.client,address:e.address}),!e.disableChevron&&o.jsx(Ks,{width:U.sm,height:U.sm,style:{color:t.colors.secondaryText}}),e.checked&&o.jsx(Ys,{width:U.md,height:U.md})]})})}function Fc(e){const{client:t,address:i}=e,r=ua().find(g=>{var y;return((y=g.getAccount())==null?void 0:y.address)===e.address}),s=e.walletId||(r==null?void 0:r.id),a=Yc({client:t,address:i}),l=a.data||vr(i),d=em({client:t,ensName:a.data});return o.jsxs(_,{flex:"row",center:"y",gap:"sm",color:"secondaryText",children:[d.data?o.jsx(ns,{src:d.data,width:U.md,height:U.md,style:{borderRadius:pt.sm},client:e.client}):s?o.jsx(rs,{id:s,size:U.md,client:e.client}):null,o.jsx(F,{size:"sm",color:"primaryText",children:l||vr(e.address)})]})}function jM(e){return o.jsxs(_,{children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:"Pay with",onBack:e.onBack})}),o.jsx(qe,{}),o.jsx(q,{y:"lg"}),o.jsx(_,{flex:"column",gap:"xs",px:"lg",children:fl.map(t=>o.jsxs(IM,{fullWidth:!0,variant:"secondary",onClick:()=>e.onSelect(t),gap:"sm",children:[o.jsx(t.icon,{size:U.lg}),o.jsxs(_,{flex:"column",gap:"xxs",children:[o.jsx(F,{color:"primaryText",children:t.shorthand}),o.jsx(F,{size:"sm",children:t.name})]})]},t.shorthand))}),o.jsx(q,{y:"lg"})]})}const IM=Ti(Ie)(()=>{const e=gt();return{background:e.colors.tertiaryBg,justifyContent:"flex-start",gap:ie.sm,padding:ie.sm,"&:hover":{background:e.colors.secondaryButtonBg,transform:"scale(1.01)"},transition:"background 200ms ease, transform 150ms ease"}});function T1(e,t){const r=(window.innerHeight-750)/2,s=(window.innerWidth-500)/2;return window.open(`${e}&theme=${t}`,"thirdweb Pay",`width=500, height=750, top=${r}, left=${s}`)}function TM(e){var d,g,y,b;const t=Xo(),{openedWindow:i,onSuccess:n}=e,r=af({intentId:e.intentId,client:e.client});let s="loading";((d=r.data)==null?void 0:d.status)==="ON_RAMP_TRANSFER_FAILED"||((g=r.data)==null?void 0:g.status)==="PAYMENT_FAILED"?s="failed":((y=r.data)==null?void 0:y.status)==="CRYPTO_SWAP_FALLBACK"?s="partialSuccess":((b=r.data)==null?void 0:b.status)==="ON_RAMP_TRANSFER_COMPLETED"&&(s="completed");const a=L.useRef(!1);L.useEffect(()=>{var M;a.current||!n||((M=r.data)==null?void 0:M.status)==="ON_RAMP_TRANSFER_COMPLETED"&&(a.current=!0,n(r.data))},[n,r.data]),L.useEffect(()=>{var M,A;!i||!r.data||(((M=r.data)==null?void 0:M.status)==="CRYPTO_SWAP_REQUIRED"||((A=r.data)==null?void 0:A.status)==="ON_RAMP_TRANSFER_COMPLETED")&&i.close()},[r.data,i]);const l=L.useRef(!1);return L.useEffect(()=>{var M;!l.current&&((M=r.data)==null?void 0:M.status)==="ON_RAMP_TRANSFER_COMPLETED"&&(l.current=!0,Jh(t))},[r.data,t]),L.useEffect(()=>{var M;((M=r.data)==null?void 0:M.status)==="CRYPTO_SWAP_REQUIRED"&&e.onShowSwapFlow(r.data)},[r.data,e.onShowSwapFlow]),o.jsxs(_,{p:"lg",children:[o.jsx(Oe,{title:e.title,onBack:e.onBack}),e.hasTwoSteps&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"lg"}),o.jsx(gl,{steps:2,currentStep:1}),o.jsx(q,{y:"sm"}),o.jsxs(F,{size:"xs",children:["Step 1 of 2 - Buying ",e.quote.onRampToken.token.symbol," with"," ",e.quote.fromCurrencyWithFees.currencySymbol]})]}),o.jsx(CM,{uiStatus:s,onDone:e.onDone,fiatStatus:r.data,client:e.client,transactionMode:e.transactionMode,quote:e.quote,isEmbed:e.isEmbed})]})}function CM(e){const{uiStatus:t}=e,i=e.fiatStatus?ha(e.fiatStatus):void 0,n=e.fiatStatus&&e.fiatStatus.status!=="NOT_FOUND"?e.fiatStatus:void 0,r=e.quote.onRampToken,s=o.jsx(df,{client:e.client,token:n!=null&&n.source?{chainId:n.source.token.chainId,address:n.source.token.tokenAddress,symbol:n.source.token.symbol||"",amount:n.source.amount}:{chainId:r.token.chainId,address:r.token.tokenAddress,symbol:r.token.symbol,amount:r.amount},fiat:{amount:e.quote.fromCurrencyWithFees.amount,currencySymbol:e.quote.fromCurrencyWithFees.currencySymbol},statusMeta:n!=null&&n.source&&i?{color:i==null?void 0:i.color,text:i==null?void 0:i.status,txHash:n.source.transactionHash}:void 0});return o.jsxs(_,{children:[o.jsx(q,{y:"xl"}),t==="loading"&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsx(_,{flex:"row",center:"x",children:o.jsx(Mt,{size:"xxl",color:"accentText"})}),o.jsx(q,{y:"md"}),o.jsx(F,{color:"primaryText",size:"lg",center:!0,children:"Buy Pending"}),o.jsx(q,{y:"sm"}),!tm()&&o.jsx(F,{center:!0,children:"Complete the purchase in popup"}),o.jsx(q,{y:"xxl"}),s]}),t==="failed"&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsx(_,{flex:"row",center:"x",children:o.jsx(Eo,{size:U["3xl"]})}),o.jsx(q,{y:"lg"}),o.jsx(F,{color:"primaryText",size:"lg",center:!0,children:"Transaction Failed"}),o.jsx(q,{y:"xxl"}),s]}),t==="completed"&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"md"}),o.jsx(_,{flex:"row",center:"x",color:"success",children:o.jsx(ea,{width:U["3xl"],height:U["3xl"]})}),o.jsx(q,{y:"md"}),o.jsx(F,{color:"primaryText",size:"lg",center:!0,children:"Buy Complete"}),e.fiatStatus&&e.fiatStatus.status!=="NOT_FOUND"&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"xxl"}),s,o.jsx(q,{y:"sm"})]}),!e.isEmbed&&o.jsx(Ie,{variant:"accent",fullWidth:!0,onClick:e.onDone,children:e.transactionMode?"Continue Transaction":"Done"})]})]})}function EM(e){const t=w1(e.quote),[i,n]=L.useState(t?{id:"step-1"}:{id:"onramp-status"}),[r,s]=L.useState(e.openedWindow),a=L.useCallback(()=>{ul({intentId:e.quote.intentId,client:e.client}).then(l=>{e.onSuccess(l)})},[e.onSuccess,e.quote.intentId,e.client]);return i.id==="step-1"?o.jsx(uf,{title:e.title,client:e.client,onBack:e.onBack,partialQuote:od(e.quote),step:1,onContinue:()=>{const l=T1(e.quote.onRampLink,e.theme);yl({type:"fiat",intentId:e.quote.intentId}),s(l),n({id:"onramp-status"})}}):i.id==="onramp-status"?o.jsx(TM,{title:e.title,client:e.client,intentId:e.quote.intentId,onBack:e.onBack,hasTwoSteps:t,openedWindow:r,quote:e.quote,onDone:e.onDone,onShowSwapFlow:l=>{n({id:"postonramp-swap",data:l})},transactionMode:e.transactionMode,isEmbed:e.isEmbed,onSuccess:e.onSuccess}):i.id==="postonramp-swap"?o.jsx(xf,{title:e.title,status:i.data,quote:od(e.quote),client:e.client,onBack:e.onBack,onDone:e.onDone,onSwapFlowStarted:()=>{},transactionMode:e.transactionMode,isEmbed:e.isEmbed,payer:e.payer,onSuccess:a}):null}function NM(e){const{payOptions:t,supportedDestinations:i,toChain:n,toToken:r}=e;function s(){const b=i.find(S=>S.chain.id===n.id);if(!b)return{fiat:!1,swap:!1};const M=mt(r)?At:r.address,A=b.tokens.find(S=>S.address.toLowerCase()===M.toLowerCase());return A?{fiat:A.buyWithFiatEnabled,swap:A.buyWithCryptoEnabled}:{fiat:!0,swap:!0}}const{fiat:a,swap:l}=s(),d=t.buyWithFiat!==!1&&a,g=t.buyWithCrypto!==!1&&l;return{buyWithFiatEnabled:d,buyWithCryptoEnabled:g,showPaymentSelection:d&&g}}const Uh=Hc({id:137,name:"Polygon",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},blockExplorers:[{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}]});function _M(e){var z,W,Y,Z,H,X,E,m,c,h,p;const t=Bt(),{payOptions:i,supportedDestinations:n}=e,r=i==null?void 0:i.prefillBuy,s=(r==null?void 0:r.amount)||"",[a,l]=L.useState(s),d=gu(a,300),[g,y]=L.useState((r==null?void 0:r.chain)||i.mode==="transaction"&&((z=i.transaction)==null?void 0:z.chain)||i.mode==="direct_payment"&&((W=i.paymentInfo)==null?void 0:W.chain)||((Y=n.find(v=>v.chain.id===(t==null?void 0:t.id)))==null?void 0:Y.chain)||Uh),[b,M]=L.useState((r==null?void 0:r.token)||i.mode==="direct_payment"&&i.paymentInfo.token||cn),[A,S]=L.useState(i.buyWithCrypto!==!1&&((H=(Z=i.buyWithCrypto)==null?void 0:Z.prefillSource)==null?void 0:H.chain)||i.mode==="transaction"&&((X=i.transaction)==null?void 0:X.chain)||i.mode==="direct_payment"&&((E=i.paymentInfo)==null?void 0:E.chain)||Uh),[C,k]=L.useState(i.buyWithCrypto!==!1&&((c=(m=i.buyWithCrypto)==null?void 0:m.prefillSource)==null?void 0:c.token)||i.mode==="direct_payment"&&i.paymentInfo.token||cn),D=(i.buyWithFiat!==!1?(p=(h=i.buyWithFiat)==null?void 0:h.prefillSource)==null?void 0:p.currency:void 0)||kM(),[B,P]=L.useState(fl.find(v=>v.shorthand===D)||cf);return{tokenAmount:a,setTokenAmount:l,toChain:g,setToChain:y,deferredTokenAmount:d,fromChain:A,setFromChain:S,toToken:b,setToToken:M,fromToken:C,setFromToken:k,selectedCurrency:B,setSelectedCurrency:P}}function kM(){try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone.toLowerCase();return e.includes("london")?"GBP":e.includes("europe")?"EUR":e.includes("japan")?"JPY":e.includes("canada")?"CAD":"USD"}catch{return"USD"}}function DM(e){return e.length>10?"26px":e.length>6?"34px":"50px"}function LM(e){const{name:t}=si(e.chain),i=()=>{let n=e.value.replace(".","").length;return e.value.includes(".")&&(n+=.3),`calc(${`${Math.max(1,n)}ch`} + 6px)`};return o.jsxs(_,{children:[o.jsx("div",{onClick:n=>{var r;(r=n.currentTarget.querySelector("input"))==null||r.focus()},children:o.jsxs(_,{flex:"row",center:"both",gap:"xs",style:{flexWrap:"nowrap"},children:[o.jsx(Bs,{variant:"outline",pattern:"^[0-9]*[.,]?[0-9]*$",inputMode:"decimal",tabIndex:-1,placeholder:"0",type:"text","data-placeholder":e.value==="",value:e.value||"0",disabled:e.freezeAmount,onClick:n=>{e.value===""&&n.currentTarget.setSelectionRange(n.currentTarget.value.length,n.currentTarget.value.length)},onChange:n=>{let r=n.target.value;r.startsWith(".")&&(r=`0${r}`);const s=Number(r);Number.isNaN(s)||(r.startsWith("0")&&!r.startsWith("0.")?e.onChange(r.slice(1)):e.onChange(r))},style:{border:"none",fontSize:DM(e.value),boxShadow:"none",borderRadius:"0",padding:"0",paddingBlock:"2px",fontWeight:600,textAlign:"right",width:i(),maxWidth:"calc(100% - 100px)"}}),o.jsx(ii,{token:e.token,chain:e.chain,size:"lg",color:"secondaryText"})]})}),!e.hideTokenSelector&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"sm"}),o.jsx(_,{flex:"row",center:"x",children:o.jsxs(PM,{variant:"secondary",fullWidth:!0,style:{fontSize:je.sm},gap:"xxs",onClick:e.onSelectToken,disabled:e.freezeChainAndToken,children:[o.jsxs(_,{flex:"row",center:"y",gap:"sm",children:[o.jsx(Ir,{token:e.token,chain:e.chain,size:"md",client:e.client}),o.jsxs(_,{flex:"column",style:{gap:"4px"},children:[o.jsx(ii,{token:e.token,chain:e.chain,size:"sm"}),t?o.jsx(F,{size:"xs",color:"secondaryText",children:t}):o.jsx(lt,{width:"90px",height:je.xs})]})]}),o.jsx(Ks,{width:U.sm,height:U.sm,style:{marginLeft:"auto"}})]})})]})]})}const PM=Ti(Ie)(()=>{const e=gt();return{background:e.colors.tertiaryBg,border:`1px solid ${e.colors.borderColor}`,justifyContent:"flex-start",transition:"background 0.3s",padding:ie.sm}}),zM=e=>o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",width:e.size,height:e.size,role:"presentation",children:o.jsx("path",{fill:"currentColor",d:"M15.6 4.6H1.85v-.55l12.1-.968v.968h1.65V2.4c0-1.21-.98-2.059-2.177-1.888L2.378 2.089C1.18 2.26.2 3.39.2 4.6v11a2.2 2.2 0 002.2 2.2h13.2a2.2 2.2 0 002.2-2.2V6.8a2.2 2.2 0 00-2.2-2.2zm-1.65 7.707a1.65 1.65 0 01-.63-3.176 1.65 1.65 0 11.63 3.176z"})});function RM(e){const{name:t}=si(e.chain),i=Vs({address:e.payerAccount.address,chain:e.chain,tokenAddress:mt(e.token)?void 0:e.token.address,client:e.client});return o.jsxs(_,{bg:"tertiaryBg",borderColor:"borderColor",flex:"row",style:{borderWidth:"1px",borderTopWidth:0,borderStyle:"solid",flexWrap:"nowrap",justifyContent:"space-between",minHeight:"64px",alignItems:"center",...e.swapRequired?{borderBottom:"none"}:{borderBottomLeftRadius:pt.md,borderBottomRightRadius:pt.md}},children:[o.jsxs(Ie,{variant:"ghost",onClick:e.onSelectToken,gap:"sm",style:{paddingInline:ie.sm,paddingBlock:ie.sm,minWidth:"50%",justifyContent:"flex-start"},disabled:e.freezeChainAndTokenSelection,children:[o.jsx(wr,{token:e.token,chain:e.chain,size:"md",client:e.client}),o.jsxs(_,{flex:"column",gap:"3xs",children:[o.jsxs(_,{flex:"row",gap:"xs",center:"y",color:"primaryText",children:[o.jsx(ii,{token:e.token,chain:e.chain,size:"sm"}),o.jsx(Ks,{width:U.sm,height:U.sm})]}),t?o.jsx(F,{size:"xs",children:t}):o.jsx(lt,{width:"90px",height:je.xs})]})]}),o.jsxs("div",{style:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:ie.xxs,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",justifyContent:"center",paddingRight:ie.sm},children:[e.isLoading?o.jsx(lt,{width:"120px",height:je.md,color:"borderColor"}):o.jsx(F,{size:"md",color:e.value?"primaryText":"secondaryText",style:{},children:ft(Number(e.value),6)||""}),o.jsxs(_,{flex:"row",gap:"xxs",center:"y",color:"secondaryText",children:[o.jsx(zM,{size:je.xs}),i.data?o.jsx(F,{size:"xs",color:"secondaryText",weight:500,children:Js(i.data,!1)}):o.jsx(lt,{width:"70px",height:je.xs})]})]})]})}async function OM(e){try{const i=await Qn(e.client)(I2(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({fromAddress:e.fromAddress,toAddress:e.toAddress,chainId:e.chainId,tokenAddress:e.tokenAddress,amount:e.amount,purchaseData:e.purchaseData})});if(!i.ok){const s=await i.json();throw s&&"error"in s?s:new Error(`HTTP error! status: ${i.status}`)}const n=(await i.json()).result;return{transactionRequest:{chain:wt(n.transactionRequest.chainId),client:e.client,data:n.transactionRequest.data,to:n.transactionRequest.to,value:BigInt(n.transactionRequest.value),gas:BigInt(n.transactionRequest.gasLimit)},approval:n.approval?fu({contract:Wi({client:e.client,address:n.approval.tokenAddress,chain:wt(n.approval.chainId)}),spender:n.approval.spenderAddress,amountWei:BigInt(n.approval.amountWei)}):void 0,fromAddress:n.fromAddress,toAddress:n.toAddress,paymentToken:n.paymentToken,processingFee:n.processingFee,estimatedGasCostUSDCents:n.estimatedGasCostUSDCents,client:e.client}}catch(t){throw console.error("Error getting buy with crypto transfer",t),t}}function BM(e){const{title:t,onBack:i,receiverAddress:n,client:r,payer:s,onDone:a,chain:l,token:d,tokenAmount:g,transactionMode:y,setTransactionHash:b}=e,[M,A]=L.useState("transfer"),[S,C]=L.useState("idle"),{symbol:k}=Zh(l);return o.jsxs(_,{p:"lg",children:[o.jsx(Oe,{title:t,onBack:i}),o.jsx(q,{y:"xl"}),y&&o.jsxs(o.Fragment,{children:[o.jsx(gl,{steps:2,currentStep:M==="transfer"?1:2}),o.jsx(q,{y:"sm"}),o.jsx(F,{size:"sm",children:M==="transfer"?"Step 1 of 2 - Transfer funds":"Step 2 of 2 - Finalize transaction"}),o.jsx(q,{y:"xl"})]}),o.jsxs(_,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[o.jsx(F,{size:"sm",children:"From"}),o.jsx(Fc,{address:s.account.address,client:r})]}),o.jsx(q,{y:"md"}),o.jsx(qe,{}),o.jsx(q,{y:"md"}),o.jsxs(_,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[o.jsx(F,{size:"sm",children:"To"}),o.jsx(Fc,{address:n,client:r})]}),o.jsx(q,{y:"md"}),o.jsx(qe,{}),o.jsx(q,{y:"md"}),o.jsx(Rr,{chainId:l.id,client:r,label:"Amount",tokenAmount:g,tokenSymbol:mt(d)?k||"":d.symbol,tokenAddress:mt(d)?At:d.address}),o.jsx(q,{y:"lg"}),y&&o.jsxs(o.Fragment,{children:[o.jsx(q,{y:"sm"}),o.jsxs(_,{gap:"sm",flex:"row",style:{justifyContent:"space-between"},center:"y",color:"accentText",children:[o.jsx(Oo,{isDone:M==="execute",isActive:M==="transfer",label:M==="transfer"?"Transfer":"Done"}),o.jsx(mf,{}),o.jsx(Oo,{isDone:!1,label:"Finalize",isActive:M==="execute"})]}),o.jsx(q,{y:"lg"})]}),S==="error"&&o.jsxs(o.Fragment,{children:[o.jsxs(_,{flex:"row",gap:"xs",center:"both",color:"danger",children:[o.jsx(Nn,{width:U.sm,height:U.sm}),o.jsx(F,{color:"danger",size:"sm",children:M==="transfer"?"Failed to Transfer":"Failed to Execute"})]}),o.jsx(q,{y:"md"})]}),!y&&M==="execute"&&S==="done"&&o.jsxs(o.Fragment,{children:[o.jsxs(_,{flex:"row",gap:"xs",center:"both",color:"success",children:[o.jsx(ea,{width:U.sm,height:U.sm}),o.jsx(F,{color:"success",size:"sm",children:"Payment completed"})]}),o.jsx(q,{y:"md"})]}),s.chain.id!==l.id?o.jsx(ml,{fullWidth:!0,variant:"accent",switchChain:async()=>{await e.payer.wallet.switchChain(l)}}):o.jsxs(Ie,{variant:"accent",fullWidth:!0,disabled:S==="pending",onClick:async()=>{if(M==="execute"){a();return}try{if(C("pending"),y){const N=mt(d)?ru({client:r,chain:l,to:n,value:su(g)}):Mf({contract:Wi({address:d.address,chain:l,client:r}),to:n,amount:g});await Fh({account:e.payer.account,transaction:N}),A("execute"),C("idle")}else{const N=await OM({client:r,fromAddress:s.account.address,toAddress:n,chainId:l.id,tokenAddress:mt(d)?At:d.address,amount:g,purchaseData:void 0});console.log("transferResponse",N),N.approval&&(A("approve"),await Fh({account:e.payer.account,transaction:N.approval})),A("transfer");const D=N.transactionRequest,B=await Vr({account:e.payer.account,transaction:D});b(B.transactionHash),C("idle")}}catch(N){console.error(N),C("error")}},gap:"xs",children:[M==="execute"&&(S==="done"?"Done":"Continue"),M==="transfer"&&(S==="pending"?"Confirming":"Confirm"),M==="approve"&&(S==="pending"?"Approving":"Approve"),S==="pending"&&o.jsx(Mt,{size:"sm",color:"accentButtonText"})]})]})}function qM(e){const[t,i]=L.useState();return t?o.jsx(bf,{title:e.title,onBack:e.onBack,onTryAgain:e.onTryAgain,swapTxHash:t,client:e.client,onDone:e.onDone,transactionMode:!1,isEmbed:e.isEmbed,quote:void 0,onSuccess:e.onSuccess}):o.jsx(BM,{...e,setTransactionHash:i})}function FM(e){var r;const t=gt(),i=ua(),n=!e.showAllWallets&&((r=e.wallets)==null?void 0:r.every(s=>i.includes(s)));return o.jsxs(_,{children:[o.jsxs(_,{flex:"column",gap:"xs",children:[i.map(s=>{var l;const a=(l=s.getAccount())==null?void 0:l.address;return o.jsx(I1,{walletId:s.id,client:e.client,address:a||"",onClick:()=>{e.onSelect(s),e.onBack()},disableChevron:!0,checked:!1},s.id)}),!n&&o.jsx(Ie,{variant:"secondary",fullWidth:!0,onClick:e.onConnect,gap:"xs",bg:"tertiaryBg",style:{borderRadius:pt.lg,border:`1px solid ${t.colors.borderColor}`,padding:ie.sm},children:o.jsxs(_,{flex:"row",gap:"sm",center:"y",expand:!0,children:[o.jsx(Qc,{width:U.md,height:U.md}),o.jsx(F,{size:"sm",color:"primaryText",children:"Add Another Wallet"})]})})]}),o.jsx(q,{y:"sm"})]})}function UM(){const e=$t(),t=ti(),i=Bt(),[n,r]=L.useState();return L.useEffect(()=>{const l=n==null?void 0:n.wallet;function d(){if(!l){r(void 0);return}const g=l.getAccount(),y=l.getChain();g&&y?(console.log("updated to",g,y),r({account:g,chain:y,wallet:l})):r(void 0)}if(l){const g=l.subscribe("chainChanged",d),y=l.subscribe("accountChanged",d);return()=>{g(),y()}}},[n]),{payer:n||(t&&i&&e?{account:t,chain:i,wallet:e}:void 0),setPayer:r}}function WM(e){const t=sf(e.client);return t.data?o.jsx($M,{...e,supportedDestinations:t.data}):o.jsx(Fn,{})}function $M(e){var x,I,w,u,f,T,$,V,j,O,R,Q,K,G,te,J,ne,re,de,he,De,Le,le,Pe,ze,ue,Re;const{client:t,supportedDestinations:i,connectLocale:n,payOptions:r}=e,s=ti(),{payer:a,setPayer:l}=UM(),[d,g]=L.useState({id:"main"}),[y,b]=L.useState(!1),M=L.useCallback(()=>{g({id:"main"}),e.onDone()},[e.onDone]),{tokenAmount:A,setTokenAmount:S,toChain:C,setToChain:k,deferredTokenAmount:N,fromChain:D,setFromChain:B,toToken:P,setToToken:z,fromToken:W,setFromToken:Y,selectedCurrency:Z,setSelectedCurrency:H}=_M({payOptions:r,supportedDestinations:i}),X=D2({client:e.client,destinationChainId:C.id,destinationTokenAddress:mt(P)?At:P.address}),E=L.useMemo(()=>Wh(i,r,e.supportedTokens),[e.supportedTokens,i,r]),m=L.useMemo(()=>{var oe,ae;if(!X.data)return;const ce=X.data;return(oe=ce[0])!=null&&oe.chain&&B((ae=ce[0])==null?void 0:ae.chain),Wh(ce,r,e.supportedTokens)},[e.supportedTokens,X.data,r,B]),c=NM({payOptions:e.payOptions,supportedDestinations:e.supportedDestinations,toChain:C,toToken:P}),h=c.showPaymentSelection===!1&&c.buyWithCryptoEnabled===!1&&c.buyWithFiatEnabled===!1,p=L.useCallback(ce=>{var oe,ae;(ae=(oe=e.payOptions).onPurchaseSuccess)==null||ae.call(oe,{type:"crypto",status:ce})},[e.payOptions.onPurchaseSuccess]),v=L.useCallback(ce=>{var oe,ae;(ae=(oe=e.payOptions).onPurchaseSuccess)==null||ae.call(oe,{type:"fiat",status:ce})},[e.payOptions.onPurchaseSuccess]);if(d.id==="connect-payer-wallet")return o.jsx(wf,{accountAbstraction:(x=e.connectOptions)==null?void 0:x.accountAbstraction,appMetadata:(I=e.connectOptions)==null?void 0:I.appMetadata,chain:(w=e.connectOptions)==null?void 0:w.chain,chains:(u=e.connectOptions)==null?void 0:u.chains,client:e.client,connectLocale:e.connectLocale,isEmbed:e.isEmbed,onBack:()=>g(d.backScreen),onSelect:ce=>{const oe=ce.getAccount(),ae=ce.getChain();ce&&oe&&ae&&l({account:oe,chain:ae,wallet:ce})},recommendedWallets:(f=e.connectOptions)==null?void 0:f.recommendedWallets,showAllWallets:((T=e.connectOptions)==null?void 0:T.showAllWallets)===void 0?!0:($=e.connectOptions)==null?void 0:$.showAllWallets,walletConnect:(V=e.connectOptions)==null?void 0:V.walletConnect,wallets:(j=e.connectOptions)==null?void 0:j.wallets});if(d.id==="swap-flow"&&a)return o.jsx(vf,{title:e.title,transactionMode:r.mode==="transaction",isEmbed:e.isEmbed,client:t,onBack:()=>{g({id:"buy-with-crypto"})},buyWithCryptoQuote:d.quote,payer:a,isFiatFlow:!1,onDone:M,onTryAgain:()=>{g({id:"buy-with-crypto"})},onSuccess:p});if(d.id==="fiat-flow"&&a)return o.jsx(EM,{title:e.title,transactionMode:r.mode==="transaction",quote:d.quote,onBack:()=>{g({id:"buy-with-fiat"})},client:t,testMode:e.payOptions.buyWithFiat!==!1&&((O=e.payOptions.buyWithFiat)==null?void 0:O.testMode)===!0,theme:typeof e.theme=="string"?e.theme:e.theme.type,openedWindow:d.openedWindow,onDone:M,isEmbed:e.isEmbed,payer:a,onSuccess:v});if(d.id==="transfer-flow"&&a&&s){const ce=()=>g({id:"buy-with-crypto"}),ae=((Q=(R=e.payOptions)==null?void 0:R.paymentInfo)==null?void 0:Q.sellerAddress)||s.address;return o.jsx(qM,{title:e.title,onBack:ce,payer:a,client:e.client,chain:C,token:P,tokenAmount:A,receiverAddress:ae,transactionMode:e.payOptions.mode==="transaction",isEmbed:e.isEmbed,onDone:M,onTryAgain:()=>{g({id:"buy-with-crypto"})},onSuccess:p})}if(d.id==="select-currency"){const ce=()=>g(d.backScreen);return o.jsx(jM,{onSelect:oe=>{ce(),H(oe)},onBack:ce})}if(d.id==="select-to-token"){const ce=i.map(Ee=>Ee.chain),oe=()=>g(d.backScreen),ae=(K=r==null?void 0:r.prefillBuy)==null?void 0:K.allowEdits;return(ae==null?void 0:ae.token)===!1?o.jsx($h,{chains:ce,client:e.client,connectLocale:e.connectLocale,setChain:k,goBack:oe}):o.jsx(Mc,{onBack:oe,tokenList:((C!=null&&C.id?E[C.id]:void 0)||[]).filter(Ee=>Ee.address!==At),onTokenSelect:Ee=>{z(Ee),oe()},chain:C,chainSelection:(ae==null?void 0:ae.chain)!==!1?{chains:ce,select:Ee=>{k(Ee)}}:void 0,connectLocale:n,client:t,modalTitle:e.title})}if(d.id==="select-from-token"&&X.data&&m){const ce=X.data.map(ae=>ae.chain),oe=()=>g(d.backScreen);return r.buyWithCrypto!==!1&&((J=(te=(G=r.buyWithCrypto)==null?void 0:G.prefillSource)==null?void 0:te.allowEdits)==null?void 0:J.token)===!1?o.jsx($h,{chains:ce,client:e.client,connectLocale:e.connectLocale,setChain:B,goBack:oe}):o.jsx(Mc,{onBack:oe,tokenList:((D!=null&&D.id?m[D.id]:void 0)||[]).filter(ae=>ae.address!==At),onTokenSelect:ae=>{Y(ae),oe()},chain:D,chainSelection:r.buyWithCrypto!==!1&&((de=(re=(ne=r.buyWithCrypto)==null?void 0:ne.prefillSource)==null?void 0:re.allowEdits)==null?void 0:de.chain)!==!1?{chains:X.data.map(ae=>ae.chain),select:ae=>B(ae)}:void 0,connectLocale:n,client:t,modalTitle:"Pay with"})}return o.jsx(_,{animate:"fadein",children:o.jsxs("div",{children:[d.id==="main"&&o.jsx(YM,{title:e.title,payerAccount:a==null?void 0:a.account,client:t,onSelectBuyToken:()=>g({id:"select-to-token",backScreen:d}),payOptions:r,setTokenAmount:S,setToChain:k,setToToken:z,setFromChain:B,setFromToken:Y,toChain:C,toToken:P,tokenAmount:A,connectOptions:e.connectOptions,setScreen:g,supportedDestinations:i,onBack:e.onBack,theme:e.theme,hasEditedAmount:y,setHasEditedAmount:b,enabledPaymentMethods:c}),(d.id==="select-payment-method"||d.id==="select-wallet"||d.id==="buy-with-crypto"||d.id==="buy-with-fiat")&&a&&o.jsxs(QM,{title:e.title,selectedChain:C,selectedToken:P,tokenAmount:A,client:t,onBack:()=>{c.showPaymentSelection&&(d.id==="select-wallet"||d.id==="buy-with-fiat")?g({id:"select-payment-method"}):d.id==="buy-with-crypto"?g({id:"select-wallet"}):g({id:"main"})},children:[d.id==="select-payment-method"&&o.jsx(VM,{setScreen:ce=>g({id:ce})}),d.id==="select-wallet"&&o.jsx(FM,{client:t,onSelect:ce=>{const oe=ce.getChain(),ae=ce.getAccount();oe&&ae&&(l({account:ae,chain:oe,wallet:ce}),g({id:"buy-with-crypto"}))},showAllWallets:!!((he=e.connectOptions)!=null&&he.showAllWallets),wallets:(De=e.connectOptions)==null?void 0:De.wallets,onBack:()=>{},onConnect:()=>{g({id:"connect-payer-wallet",backScreen:{id:"select-wallet"}})},selectedAddress:a.account.address}),d.id==="buy-with-crypto"&&s&&o.jsx(KM,{setScreen:g,tokenAmount:N,toChain:C,toToken:P,fromChain:D,fromToken:W,showFromTokenSelector:()=>{g({id:"select-from-token",backScreen:d})},payer:a,client:t,isEmbed:e.isEmbed,onDone:M,payOptions:r,connectLocale:n,connectOptions:e.connectOptions,setPayer:l,activeAccount:s,setTokenAmount:S,setHasEditedAmount:b,disableTokenSelection:h===!0||r.buyWithCrypto!==!1&&((Pe=(le=(Le=r.buyWithCrypto)==null?void 0:Le.prefillSource)==null?void 0:le.allowEdits)==null?void 0:Pe.chain)===!1&&((Re=(ue=(ze=r.buyWithCrypto)==null?void 0:ze.prefillSource)==null?void 0:ue.allowEdits)==null?void 0:Re.token)===!1}),d.id==="buy-with-fiat"&&o.jsx(GM,{setScreen:g,tokenAmount:N,toChain:C,toToken:P,selectedCurrency:Z,client:t,isEmbed:e.isEmbed,onDone:M,payOptions:r,theme:e.theme,showCurrencySelector:()=>{g({id:"select-currency",backScreen:d})},payer:a,setTokenAmount:S,setHasEditedAmount:b})]})]})})}function HM(e){return o.jsx("div",{children:o.jsxs(_,{flex:"row",gap:"sm",center:"y",style:{justifyContent:"space-between"},children:[o.jsxs(_,{flex:"row",gap:"xs",center:"y",children:[o.jsx(F,{color:"primaryText","data-testid":"tokenAmount",size:"xl",children:ft(Number(e.tokenAmount),6)}),o.jsxs(_,{flex:"row",gap:"xxs",center:"y",children:[o.jsx(ii,{token:e.selectedToken,chain:e.selectedChain,size:"md",color:"secondaryText"}),o.jsx(wr,{chain:e.selectedChain,client:e.client,size:"sm",token:e.selectedToken})]})]}),o.jsx(hl,{chain:e.selectedChain,client:e.client,size:"sm",short:!0})]})})}function YM(e){var D,B,P,z,W,Y;const{setTokenAmount:t,setToChain:i,setToToken:n,setFromChain:r,setFromToken:s,payerAccount:a,client:l,tokenAmount:d,payOptions:g,toToken:y,toChain:b,supportedDestinations:M,enabledPaymentMethods:A}=e,{showPaymentSelection:S,buyWithCryptoEnabled:C,buyWithFiatEnabled:k}=A,N=!d;switch(g.mode){case"transaction":return o.jsx(SM,{supportedDestinations:M,payUiOptions:g,payerAccount:a,connectOptions:e.connectOptions,client:l,onContinue:(Z,H,X)=>{t(Z),i(H),r(H),s(X),n(X),S?e.setScreen({id:"select-payment-method"}):C?e.setScreen({id:"select-wallet"}):k?e.setScreen({id:"buy-with-fiat"}):e.setScreen({id:"select-wallet"})}});case"direct_payment":return o.jsx(vM,{client:l,payUiOptions:g,payerAccount:a,connectOptions:e.connectOptions,supportedDestinations:M,onContinue:(Z,H,X)=>{t(Z),i(H),r(H),s(X),n(X),S?e.setScreen({id:"select-payment-method"}):C?e.setScreen({id:"buy-with-crypto"}):k?e.setScreen({id:"buy-with-fiat"}):e.setScreen({id:"select-wallet"})}});default:return o.jsxs(_,{p:"lg",children:[o.jsx(Oe,{title:e.title,onBack:e.onBack}),o.jsx(q,{y:"xl"}),o.jsx(LM,{value:d,onChange:async Z=>{e.setHasEditedAmount(!0),t(Z)},freezeAmount:((B=(D=g.prefillBuy)==null?void 0:D.allowEdits)==null?void 0:B.amount)===!1,freezeChainAndToken:((z=(P=g.prefillBuy)==null?void 0:P.allowEdits)==null?void 0:z.chain)===!1&&((Y=(W=g.prefillBuy)==null?void 0:W.allowEdits)==null?void 0:Y.token)===!1,token:y,chain:b,onSelectToken:e.onSelectBuyToken,client:e.client}),o.jsx(q,{y:"xl"}),o.jsx(_,{flex:"column",gap:"sm",children:a?o.jsx(Ie,{variant:"accent",fullWidth:!0,disabled:N,"data-disabled":N,onClick:()=>{S?e.setScreen({id:"select-payment-method"}):C?e.setScreen({id:"buy-with-crypto"}):k?e.setScreen({id:"buy-with-fiat"}):console.error("No payment method enabled")},children:"Continue"}):o.jsx("div",{children:o.jsx(ql,{...e.connectOptions,client:e.client,theme:e.theme,connectButton:{style:{width:"100%"}}})})})]})}}function QM(e){return o.jsxs(_,{children:[o.jsx(_,{p:"lg",children:o.jsx(Oe,{title:e.title,onBack:e.onBack})}),o.jsxs(_,{px:"lg",style:{paddingBottom:ie.lg},children:[o.jsx(q,{y:"xs"}),o.jsx(HM,{selectedToken:e.selectedToken,selectedChain:e.selectedChain,tokenAmount:e.tokenAmount,client:e.client}),o.jsx(q,{y:"md"}),o.jsx(qe,{}),o.jsx(q,{y:"lg"}),o.jsx(F,{size:"sm",children:" Pay with "}),o.jsx(q,{y:"sm"}),e.children]})]})}function VM(e){return o.jsx(_,{animate:"fadein",children:o.jsxs(_,{flex:"column",gap:"sm",children:[o.jsxs(Ie,{variant:"outline",bg:"tertiaryBg",onClick:()=>e.setScreen("buy-with-fiat"),gap:"sm",style:{justifyContent:"flex-start",textAlign:"left"},children:[o.jsx(_,{color:"secondaryText",flex:"row",center:"both",children:o.jsx(im,{style:{width:U.md,height:U.md}})}),o.jsxs(_,{flex:"column",gap:"xxs",children:[o.jsx(F,{size:"md",color:"primaryText",children:"Credit Card"}),o.jsx(F,{size:"xs",children:"Securely pay with credit card"})]})]}),o.jsxs(Ie,{variant:"outline",bg:"tertiaryBg",onClick:()=>e.setScreen("select-wallet"),style:{justifyContent:"flex-start"},gap:"sm",children:[o.jsx(_,{color:"secondaryText",flex:"row",center:"both",children:o.jsx(da,{size:U.md})}),o.jsxs(_,{flex:"column",gap:"xxs",children:[o.jsx(F,{size:"md",color:"primaryText",children:"Crypto"}),o.jsx(F,{size:"xs",children:"Pay with your connected wallet"})]})]})]})})}function KM(e){var I,w,u,f,T;const{setScreen:t,payer:i,client:n,toChain:r,tokenAmount:s,toToken:a,fromChain:l,fromToken:d,showFromTokenSelector:g,payOptions:y,disableTokenSelection:b}=e,A=((w=(I=e.payOptions)==null?void 0:I.paymentInfo)==null?void 0:w.sellerAddress)||e.activeAccount.address,{drawerRef:S,drawerOverlayRef:C,isOpen:k,setIsOpen:N}=S1(),[D,B]=L.useState("fees"),P=Vs({address:i.account.address,chain:l,tokenAddress:mt(d)?void 0:d.address,client:n}),z=mt(d)?At:d.address.toLowerCase(),W=mt(a)?At:a.address.toLowerCase(),Y=!!s&&!(l.id===r.id&&z===W),Z=Y?{fromAddress:i.account.address,toAddress:A,fromChainId:l.id,fromTokenAddress:mt(d)?At:d.address,toChainId:r.id,toTokenAddress:mt(a)?At:a.address,toAmount:s,client:n,purchaseData:y.purchaseData}:void 0,H=gM(Z,{staleTime:30*1e3,refetchInterval:30*1e3,gcTime:30*1e3}),X=Y?(u=H.data)==null?void 0:u.swapDetails.fromAmount:s,E=!!X&&!!P.data&&Number(P.data.displayValue)<Number(X),m=Y&&!H.data||E,c=e.payer.chain.id!==l.id;function h($){const V="Unable to get price quote";try{if($.error.code==="MINIMUM_PURCHASE_AMOUNT"){const O=$.error.data.minimumAmountEth;return{minAmount:ft(Number(O),6)}}}catch{}return{msg:[V]}}const p=!H.isLoading&&H.error?h(H.error):void 0;function v(){if((e.payOptions.mode==="transaction"||e.payOptions.mode==="direct_payment")&&!E&&!Y){i.account.address!==A?t({id:"transfer-flow"}):e.onDone();return}H.data&&t({id:"swap-flow",quote:H.data})}function x(){H.data&&(N(!0),B("fees"))}return o.jsxs(_,{flex:"column",gap:"md",animate:"fadein",children:[k&&o.jsxs(o.Fragment,{children:[o.jsx(A1,{ref:C}),o.jsx(M1,{ref:S,close:()=>N(!1),children:D==="fees"&&H.data&&o.jsxs("div",{children:[o.jsx(F,{size:"lg",color:"primaryText",children:"Fees"}),o.jsx(q,{y:"lg"}),o.jsx(gf,{quote:H.data,align:"left"})]})})]}),o.jsxs("div",{children:[o.jsx(I1,{client:e.client,onClick:()=>{t({id:"select-wallet"})},address:e.payer.account.address,walletId:e.payer.wallet.id,containerStyle:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}),o.jsx(RM,{value:X||"",onSelectToken:g,chain:l,token:d,isLoading:H.isLoading&&!X,client:n,freezeChainAndTokenSelection:b,payerAccount:e.payer.account,swapRequired:Y}),Y&&o.jsx(j1,{quoteIsLoading:H.isLoading,estimatedSeconds:(f=H.data)==null?void 0:f.swapDetails.estimated.durationSeconds,onViewFees:x}),o.jsx(q,{y:"md"})]}),p&&o.jsxs("div",{children:[p.minAmount&&o.jsxs(F,{color:"danger",size:"sm",center:!0,multiline:!0,children:["Minimum amount is ",p.minAmount," ",o.jsx(ii,{token:a,chain:r,size:"sm",inline:!0,color:"danger"})]}),(T=p.msg)==null?void 0:T.map($=>o.jsx(F,{color:"danger",size:"sm",center:!0,multiline:!0,children:$},$))]}),!p&&E&&o.jsxs("div",{children:[o.jsx(F,{color:"danger",size:"sm",center:!0,multiline:!0,children:"Not enough funds."}),o.jsx(F,{color:"danger",size:"sm",center:!0,multiline:!0,children:"Try a different wallet or token."})]}),p!=null&&p.minAmount?o.jsx(Ie,{variant:"accent",fullWidth:!0,onClick:()=>{e.setTokenAmount(String(p.minAmount)),e.setHasEditedAmount(!0)},children:"Set Minimum"}):c&&!H.isLoading&&!E&&!H.error?o.jsx(ml,{variant:"accent",fullWidth:!0,switchChain:async()=>{await e.payer.wallet.switchChain(l)}}):o.jsx(Ie,{variant:m?"outline":"accent",fullWidth:!0,"data-disabled":m,disabled:m,onClick:async()=>{m||v()},gap:"xs",children:H.isLoading?o.jsxs(o.Fragment,{children:["Getting price quote",o.jsx(Mt,{size:"sm",color:"accentText"})]}):"Continue"})]})}function GM(e){var Z,H,X,E,m;const{toToken:t,tokenAmount:i,payer:n,client:r,setScreen:s,toChain:a,showCurrencySelector:l,selectedCurrency:d}=e,y=((H=(Z=e.payOptions)==null?void 0:Z.paymentInfo)==null?void 0:H.sellerAddress)||e.payer.account.address,{drawerRef:b,drawerOverlayRef:M,isOpen:A,setIsOpen:S}=S1(),[C,k]=L.useState("fees"),N=e.payOptions.buyWithFiat,D=pM(N!==!1&&i?{fromCurrencySymbol:d.shorthand,toChainId:a.id,toAddress:y,toTokenAddress:mt(t)?At:t.address,toAmount:i,client:r,isTestMode:N==null?void 0:N.testMode,purchaseData:e.payOptions.purchaseData,fromAddress:n.account.address}:void 0);function B(){if(!D.data)return;const c=w1(D.data);let h=null;c||(h=T1(D.data.onRampLink,typeof e.theme=="string"?e.theme:e.theme.type),yl({type:"fiat",intentId:D.data.intentId})),s({id:"fiat-flow",quote:D.data,openedWindow:h})}function P(){D.data&&(k("fees"),S(!0))}function z(c){const h="Unable to get price quote";try{if(c.error.code==="MINIMUM_PURCHASE_AMOUNT"){const v=c.error.data.minimumAmountEth;return{minAmount:ft(Number(v),6)}}}catch{}return{msg:[h]}}const W=!D.data,Y=!D.isLoading&&D.error?z(D.error):void 0;return o.jsxs(_,{flex:"column",gap:"md",animate:"fadein",children:[A&&o.jsxs(o.Fragment,{children:[o.jsx(A1,{ref:M}),o.jsx(M1,{ref:b,close:()=>S(!1),children:C==="fees"&&D.data&&o.jsxs("div",{children:[o.jsx(F,{size:"lg",color:"primaryText",children:"Fees"}),o.jsx(q,{y:"lg"}),o.jsx(V2,{quote:D.data})]})})]}),o.jsxs("div",{children:[o.jsx(wM,{isLoading:D.isLoading,value:(X=D.data)==null?void 0:X.fromCurrencyWithFees.amount,client:r,currency:d,onSelectCurrency:l}),o.jsx(j1,{quoteIsLoading:D.isLoading,estimatedSeconds:(E=D.data)==null?void 0:E.estimatedDurationSeconds,onViewFees:P}),o.jsx(q,{y:"md"})]}),Y&&o.jsxs("div",{children:[Y.minAmount&&o.jsxs(F,{color:"danger",size:"sm",center:!0,multiline:!0,children:["Minimum amount is ",Y.minAmount," ",o.jsx(ii,{token:t,chain:a,size:"sm",inline:!0,color:"danger"})]}),(m=Y.msg)==null?void 0:m.map(c=>o.jsx(F,{color:"danger",size:"sm",center:!0,multiline:!0,children:c},c))]}),Y!=null&&Y.minAmount?o.jsx(Ie,{variant:"accent",fullWidth:!0,onClick:()=>{e.setTokenAmount(String(Y.minAmount)),e.setHasEditedAmount(!0)},children:"Set Minimum"}):o.jsx(Ie,{variant:W?"outline":"accent","data-disabled":W,disabled:W,fullWidth:!0,onClick:B,gap:"xs",children:D.isLoading?o.jsxs(o.Fragment,{children:["Getting price quote",o.jsx(Mt,{size:"sm",color:"accentText"})]}):"Continue"})]})}function Wh(e,t,i){const n={},r=t.buyWithFiat===!1,s=t.buyWithCrypto===!1;for(const a of e)n[a.chain.id]=a.tokens.filter(l=>l.buyWithCryptoEnabled&&l.buyWithFiatEnabled?!0:!(!l.buyWithCryptoEnabled&&r||!l.buyWithFiatEnabled&&s));if(i)for(const a in i){const l=Number(a),d=i[l];d&&(n[l]=d)}return n}function $h(e){return o.jsx(ll,{client:e.client,connectLocale:e.connectLocale,showTabs:!1,onBack:e.goBack,chains:e.chains,closeModal:e.goBack,networkSelector:{renderChain(t){return o.jsx(dl,{chain:t.chain,confirming:!1,switchingFailed:!1,onClick:()=>{e.setChain(t.chain),e.goBack()},client:e.client,connectLocale:e.connectLocale})}}})}const bA=Object.freeze(Object.defineProperty({__proto__:null,default:WM},Symbol.toStringTag,{value:"Module"}));export{bA as B,x1 as d,v1 as g,yA as s};
