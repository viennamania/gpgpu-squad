import{an as B,at as f,aq as n,av as h,aw as L,ax as z,ay as j,az as I,aA as S,aB as v,aC as U,aD as b,as as C,aE as F,aF as H,aG as P,aH as T,aI as D,ao as E}from"./index-DillEupA.js";import{E as O,L as M,O as q,P as R,S as G}from"./SocialLogin-DwC_4iGI.js";import{C as K,u as V}from"./useInAppWalletLocale-CX9ZgvzM.js";import{l as J}from"./InputSelectionUI-D5yAzt1Q.js";import N from"./AllWalletsUI-Dtap2fD7.js";import"./index-C5TfYiZ5.js";import"./types-YMLL-Nyu.js";import"./passkeys-B4oNeLJB.js";import"./client-scoped-storage-ChRDBjxy.js";import"./oauth-zvjgX-c5.js";import"./types-CKeVp00v.js";import"./formElements-D8X8dk3w.js";import"./useShowMore-EXbiKoIL.js";function Q(e){var a,u,m,g,x,i,w,k,A,y,W;const c=e.size==="compact",{initialScreen:d,screen:l}=B(),[t,o]=f.useState(!1),r=l===e.wallet&&d===e.wallet,s=r&&!e.isLinking?void 0:e.goBack;return n.jsxs(h,{fullHeight:!0,flex:"column",p:"lg",animate:"fadein",style:{minHeight:"250px"},children:[c&&(r?n.jsxs(n.Fragment,{children:[n.jsx(L,{onBack:s,leftAligned:!e.isLinking,title:n.jsxs(n.Fragment,{children:[(a=e.meta)!=null&&a.titleIconUrl?n.jsx(z,{src:(u=e.meta)==null?void 0:u.titleIconUrl,width:j.md,height:j.md,client:e.client}):null,n.jsx(I,{children:((m=e.meta)==null?void 0:m.title)??e.inAppWalletLocale.emailLoginScreen.title})]})}),n.jsx(S,{y:"lg"})]}):n.jsx(L,{onBack:s,title:e.inAppWalletLocale.signIn})),n.jsx(h,{expand:!0,flex:"column",center:"y",p:c?void 0:"lg",children:n.jsx(K,{...e,locale:e.inAppWalletLocale,disabled:((g=e.meta)==null?void 0:g.requireApproval)&&!t})}),c&&(((x=e.meta)==null?void 0:x.showThirdwebBranding)!==!1||((i=e.meta)==null?void 0:i.termsOfServiceUrl)||((w=e.meta)==null?void 0:w.privacyPolicyUrl))&&n.jsx(S,{y:"xl"}),n.jsxs(h,{flex:"column",gap:"lg",children:[n.jsx(v,{termsOfServiceUrl:(k=e.meta)==null?void 0:k.termsOfServiceUrl,privacyPolicyUrl:(A=e.meta)==null?void 0:A.privacyPolicyUrl,locale:e.connectLocale.agreement,requireApproval:(y=e.meta)==null?void 0:y.requireApproval,onApprove:()=>{o(!t)},isApproved:t}),((W=e.meta)==null?void 0:W.showThirdwebBranding)!==!1&&n.jsx(U,{})]})]})}function X(){return b("useAddConnectedWallet").handleConnection}function Y(e){const{wallet:c,done:d}=e,l=X(),t=f.useRef(),[o,r]=f.useState("selecting"),[s,a]=f.useState(),[u,m]=f.useState(!1),g=()=>{r("selecting"),t.current=void 0,e.onBack()};async function x(i){r("loading"),t.current=i;try{await J(c,{strategy:"wallet",wallet:i,chain:c.getChain()||T(1)}).catch(w=>{throw a(w.message),w}),l(i),d()}catch{r("error")}}return t.current?n.jsxs(h,{animate:"fadein",fullHeight:!0,flex:"column",children:[n.jsx(h,{p:"lg",children:n.jsx(L,{title:e.inAppLocale.linkWallet,onBack:g})}),n.jsx(h,{px:e.size==="wide"?"xxl":"lg",expand:!0,flex:"column",center:"y",children:n.jsx("div",{children:o==="error"?n.jsxs(n.Fragment,{children:[n.jsx(O,{onTryAgain:()=>{if(!t.current)throw new Error("Failed to connect to unknown wallet");x(t.current)},title:s||"Failed to Login"}),n.jsx(S,{y:"lg"})]}):n.jsx(n.Fragment,{children:n.jsx(M,{title:"Sign in with your wallet",subtitle:"A pop-up prompt will appear to sign-in and verify your wallet",icon:n.jsx(P,{id:t.current.id??"",size:j.xl,client:e.client})})})})})]}):u?n.jsx(f.Suspense,{fallback:n.jsx(C,{}),children:n.jsx(N,{onBack:()=>m(!1),onSelect:async i=>{x(i),m(!1)},client:e.client,connectLocale:e.locale,recommendedWallets:void 0,specifiedWallets:[],size:e.size,disableSelectionDataReset:!0})}):n.jsx(F,{title:e.locale.connectAWallet,wallets:H(),selectWallet:async i=>{x(i)},onShowAll:()=>{m(!0)},done:()=>{},goBack:g,setModalVisibility:()=>{},client:e.client,connectLocale:e.locale,hideHeader:!1,recommendedWallets:void 0,chain:c.getChain(),showAllWallets:!0,chains:[],size:e.size,meta:e.meta||{},walletConnect:e.walletConnect,modalHeader:{title:e.inAppLocale.linkWallet,onBack:g},walletIdsToHide:["inApp"],disableSelectionDataReset:!0})}function re(e){const c=D(),d=E(),l=c,t=e.connectLocale.id,o=V(t),{initialScreen:r}=B();if(!o)return n.jsx(C,{});const s=r===e.wallet?()=>{d({})}:e.goBack,a=()=>{e.done(),d({})},u=l!=null&&l.emailLogin?{email:l.emailLogin}:l!=null&&l.phoneLogin?{phone:l.phoneLogin}:void 0;return u?n.jsx(q,{userInfo:u,locale:o,done:a,goBack:s,wallet:e.wallet,chain:e.chain,client:e.client,size:e.size,isLinking:e.isLinking}):l!=null&&l.passkeyLogin?n.jsx(R,{locale:e.connectLocale,wallet:e.wallet,done:a,onBack:s,chain:e.chain,client:e.client,size:e.size,isLinking:e.isLinking}):l!=null&&l.walletLogin?n.jsx(Y,{meta:e.meta,inAppLocale:o,walletConnect:e.walletConnect,wallet:e.wallet,client:e.client,size:e.size,done:a,onBack:s||(()=>d({})),locale:e.connectLocale}):l!=null&&l.socialLogin?n.jsx(G,{socialAuth:l.socialLogin.type,locale:o,done:a,goBack:s,wallet:e.wallet,state:l,chain:e.chain,client:e.client,size:e.size,connectLocale:e.connectLocale,isLinking:e.isLinking}):n.jsx(Q,{select:()=>{},connectLocale:e.connectLocale,inAppWalletLocale:o,done:a,goBack:e.goBack,wallet:e.wallet,client:e.client,meta:e.meta,size:e.size,chain:e.chain,isLinking:e.isLinking})}export{re as default};
